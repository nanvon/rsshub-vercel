import{logger_default as e}from"./logger-BlLSmUdl.js";import{cache_default as t}from"./cache-CvppK6AM.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{got_default as r}from"./got-BwctkUCD.js";import{timezone as i}from"./timezone-CCdTtC9I.js";import{load as a}from"cheerio";async function o(o){let{category:s,topic:c}=o.req.param(),l=`https://www.dnaindia.com`,u;s?u=`/${s}`:c?u=`/topic/${c}`:e.error(`Invalid URL`);let d=`${l}${u}`,{data:f}=await r(d),p=a(f),m=p(`div.col-lg-6 div.list-news`).toArray().map(e=>{e=p(e);let t=e.find(`div.explainer-subtext a`);return{title:t.text(),link:`${l}${t.attr(`href`)}`}}),h=await Promise.all(m.map(e=>t.tryGet(e.link,async()=>{let{data:t}=await r(e.link),o=a(t);e.itunes_item_image=o(`div.article-img img`).attr(`src`),e.category=o(`div.tags ul li`).toArray().map(e=>o(e).find(`a`).text());let s=o(`p.dna-update`).text().split(`Updated:`)[1];return e.pubDate=i(n(s,`MMMDD,YYYY,hh:mmA`),5.5),e.author=`DNA Web Team`,e.description=o(`div.article-description`).clone().children(`div`).remove().end().toArray().map(e=>o(e).html()).join(``),e})));return{title:`DNA India`,link:d,item:h,description:`Latest News on dnaIndia.com`,logo:`https://cdn.dnaindia.com/sites/all/themes/dnaindia/favicon-1016.ico`,icon:`https://cdn.dnaindia.com/sites/all/themes/dnaindia/favicon-1016.ico`,language:`en-us`}}export{o as handler};