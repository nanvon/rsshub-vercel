import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import*as n from"cheerio";const r={path:`/page/:bookId`,example:`/fanqienovel/page/6621052928482348040`,parameters:{bookId:`小说 ID，可在 URL 中找到`},maintainers:[`TonyRL`],name:`小说更新`,handler:i,radar:[{source:[`fanqienovel.com/page/:bookId`]}]};async function i(r){let{bookId:i}=r.req.param(),a=`https://fanqienovel.com/page/${i}`,o=await e(a),s=n.load(o),c=JSON.parse(s(`script:contains("window.__INITIAL_STATE__")`).text().match(/window\.__INITIAL_STATE__\s*=\s*(.*);/)?.[1]??`{}`),l=c.page,u=l.chapterListWithVolume.flatMap(e=>e.map(e=>({title:e.title,link:`https://fanqienovel.com/reader/${e.itemId}`,description:e.volume_name,pubDate:t(e.firstPassTime,`X`),author:l.author})));return{title:`${l.bookName} - ${l.author}`,description:l.abstract,link:a,language:`zh-CN`,image:l.thumbUri,item:u}}export{r as route};