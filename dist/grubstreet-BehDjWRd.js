import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{got_default as t}from"./got-BwctkUCD.js";import{load as n}from"cheerio";async function r(e){let r=await t(e),i=n(r.data),a=i(`div.article-content`);return a.find(`aside.related`).remove(),a.find(`aside.article-details_heading-with-paragraph`).remove(),a.find(`section.package-list`).remove(),a.find(`div.source-links h2`).remove(),a.find(`div.source-links svg`).remove(),a.find(`div.mobile-secondary-area`).remove(),a.find(`aside.newsletter-flex-text`).remove(),{description:a.html()}}function i(e,t){return Promise.all(e.map(e=>t.tryGet(e.canonicalUrl,async()=>{let t=e.canonicalUrl.replace(`http://`,`https://`),n;if(e.byline){let t=e.byline[0];if(t&&t.names){let e=t.names.map(e=>e.text);if(e&&e.length>0){let t=e.join(`, `);n=`by `+t}}}let i={title:e.plaintextPrimaryHeadline,link:t,guid:t,pubDate:e.date};n&&(i.author=n);let{description:a}=await r(t);return i.description=a,i})))}const a=async(n,r,a,o)=>{let s=await t(r),c=s.data,l=c.articles.slice(0,n.req.query(`limit`)?Number.parseInt(n.req.query(`limit`),10):25),u=await i(l,e);return{title:a,link:r,description:o,item:u}};var o={getData:a};const s={path:`/`,radar:[{source:[`grubstreet.com/`],target:``}],name:`Unknown`,maintainers:[`loganrockmore`],handler:c,url:`grubstreet.com/`};async function c(e){let t=`https://www.grubstreet.com/_components/newsfeed/instances/grubstreet-index@published`,n=`Grub Street`,r=`New York Magazine's Food and Restaurant Blog`;return await o.getData(e,t,n,r)}export{s as route};