import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import{logger_default as e}from"./logger-BlLSmUdl.js";import{ofetch_default as t}from"./ofetch-CWQqZcqz.js";import"./cache-CvppK6AM.js";import"./render-DE4LRFBD.js";import"./parse-date-DHsdom8D.js";import{baseUrl$29 as n,extractNews as r}from"./utils-BiKNVGvt.js";import i from"dayjs";import{load as a}from"cheerio";const o={path:`/newsToday/:filter?`,example:`/visionias/newsToday`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},parameters:{filter:{description:`Period to fetch news for the current month. All news for the current month or only the latest`,default:`latest`,options:[{value:`all`,label:`All`},{value:`latest`,label:`Latest`}]}},radar:[{source:[`visionias.in/current-affairs/news-today`],target:`/newsToday`}],name:`News Today`,maintainers:[`Rjnishant530`],handler:s};async function s(r){let a=r.req.param(`filter`)??`latest`,o=i().year(),s=i().month()+1;e.debug(`Getting news for month ${s} and year ${o}`);let l=await t(`${n}/current-affairs/news-today/getbymonth?year=${o}&month=${s}`),u=[];if(l.length!==0)if(a===`latest`){let e=l[0].url;u=await c(e)}else{let e=await Promise.all(l.map(e=>c(e.url)));u.push(...e.flat())}return{title:`News Today | Current Affairs | Vision IAS`,link:`${n}/current-affairs/news-today/archive`,description:`News Today is a daily bulletin providing readers with a comprehensive overview of news developments, news types, and technical terms.`,language:`en`,item:u,image:`${n}/current-affairs/images/news-today-logo.svg`,icon:`${n}/current-affairs/favicon.ico`,logo:`${n}/current-affairs/favicon.ico`,allowEmpty:!0}}async function c(e){let i=await t(`${n}${e}`),o=a(i),s=o(`#table-of-content > ul > li > a`).toArray().map(e=>{let t=o(e).attr(`href`),r=o(e).clone().children(`span`).remove().end().text().trim();return{title:r,link:r===`Also in News`?t:`${n}${t}`,guid:t}}),c=await Promise.allSettled(s.map(e=>r(e,`main > div > div.mt-6 > div.flex > div.flex.mt-6`))),l=[];for(let e of c)e.status===`fulfilled`?l.push(...Array.isArray(e.value)?e.value:[e.value]):l.push({title:`Error Parse News`});return l}export{o as route};