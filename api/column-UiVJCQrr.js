import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{load as r}from"cheerio";import i from"markdown-it";const a=i({linkify:!0}),o=`https://xiaozhuanlan.com`,s={path:`/column/:id`,categories:[`new-media`],example:`/xiaozhuanlan/column/olddriver-selection`,parameters:{id:`专栏 ID，可在专栏页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`xiaozhuanlan.com/:id`]}],name:`专栏`,maintainers:[`TonyRL`],handler:c};async function c(i){let s=i.req.param(`id`),c=await n(`${o}/${s}`),l=r(c.data),u=l(`.xzl-topic-item`).toArray().map(e=>(e=l(e),e.find(`.topic-has-suggested-item`).remove(),{title:e.find(`h3`).text().trim(),link:new URL(e.find(`.topic-body-link`).attr(`href`),o).href,author:e.find(`.topic-header .xzl-author-lockup`).text().trim(),pubDate:t(e.find(`.topic-header .timeago`).attr(`title`))}));return u=await Promise.all(u.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link),i=r(e.data);return t.description=a.render(i(`.hidden_markdown_body`).attr(`data-summary`)),i(`.topic-tags`)&&(t.category=i(`.topic-tags label`).toArray().map(e=>i(e).text())),t}))),{title:l(`head title`).text().trim(),link:`${o}/${s}`,description:l(`meta[name=description]`).attr(`content`),item:u}}export{s as route};