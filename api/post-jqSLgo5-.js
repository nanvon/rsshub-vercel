import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as n}from"./ofetch-CWQqZcqz.js";import{cache_default as r}from"./cache-CvppK6AM.js";import{art as i}from"./render-DE4LRFBD.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{invalid_parameter_default as o}from"./invalid-parameter-CvwVNf6G.js";import s from"node:path";const c=`https://api.myfans.jp`,l=`https://myfans.jp`,u={"google-ga-data":`event328`},d=e=>r.tryGet(`myfans:account:${e}`,async()=>{let t=await n(`${c}/api/v2/users/show_by_username`,{headers:u,query:{username:e}});if(!t.id)throw new o(`This creator does not exist.`);return t}),f=async e=>{let t=await n(`${c}/api/v2/users/${e}/posts`,{headers:u,query:{sort_key:`publish_start_at`,page:1}});return t.data};t();const p={path:`/user/:username`,categories:[`multimedia`],example:`/myfans/user/secret_japan`,parameters:{username:`User handle`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`myfans.jp/:username`,`myfans.jp/:language/:username`]}],name:`User Posts`,maintainers:[`TonyRL`],handler:h},m=(t,n)=>i(s.join(e,`templates/post-e2e0e95c.art`),{postImages:t,body:n});async function h(e){let{username:t}=e.req.param(),n=await d(t),r=await f(n.id),i=r.map(e=>({title:e.body?.replaceAll(`\r
`,` `).trim().split(` `)[0],description:m(e.post_images,e.body?.replaceAll(`\r
`,`<br>`)),pubDate:a(e.published_at),link:`${l}/posts/${e.id}`,author:e.user.name}));return{title:`${n.name} (@${n.username})`,link:`${l}/${n.username}`,description:`${n.posts_count} Post ${n.likes_count} Like ${n.followers_count}
Followers ${n.followings_count} Follow ${n.about.replaceAll(`\r
`,` `)}`,image:n.avatar_url,icon:n.avatar_url,logo:n.avatar_url,language:`ja-JP`,item:i}}export{p as route};