import"./config-DYqAlsU3.js";import{ViewType as e}from"./types-Bi82qguM.js";import{rss_parser_default as t}from"./rss-parser-YsVv5RZS.js";import{load as n}from"cheerio";const r={path:`/rss/:user/:tag`,categories:[`reading`,`popular`],view:e.Articles,example:`/inoreader/rss/1005137674/user-favorites`,parameters:{user:`user id, the interger after user/ in the example URL`,tag:`tag, the string after tag/ in the example URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`RSS`,maintainers:[`EthanWng97`],handler:i};async function i(e){let r=e.req.param(`user`),i=e.req.param(`tag`),a=`https://www.inoreader.com/stream`,o=`${a}/user/${r}/tag/${i}`,s=await t.parseURL(o);return s.items=s.items.map(e=>{if(e&&e.enclosure&&e.enclosure.type.includes(`audio`)){let t=``;if(e.content!==null){let r=n(e.content);t=r(`img`).first().attr(`src`)}return{title:e.title,pubDate:e.pubDate,link:e.link,description:e.content,category:e.categories,itunes_item_image:t,enclosure_url:e.enclosure.url,enclosure_length:e.enclosure.length,enclosure_type:e.enclosure.type}}return{title:e?.title??``,pubDate:e?.pubDate??``,link:e?.link??``,description:e?.content??``,category:e?.categories??[]}}),{title:s.title,itunes_author:`Inoreader`,image:`https://www.inoreader.com/brand/img/ino_app_icon.png`,link:s.link,description:s.description,item:s.items}}export{r as route};