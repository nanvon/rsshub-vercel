import{config as e}from"./config-DYqAlsU3.js";import{ofetch_default as t}from"./ofetch-CDAeBYLA.js";import{cache_default as n}from"./cache-7MGQxbL-.js";import{parseDate as r}from"./parse-date-B2cCVoGk.js";import{load as i}from"cheerio";const a=`https://cara.app`,o=`${a}/api`,s=`https://cdn.cara.app`;function c(n,r){return t(n,{...r,headers:{"user-agent":e.trueUA}})}async function l(t){let r=await n.tryGet(`${a}:buildId`,async()=>{let e=await c(`${a}/explore`),t=i(e);return JSON.parse(t(`#__NEXT_DATA__`)?.text()??`{}`).buildId},e.cache.routeExpire,!1);return await n.tryGet(`${a}:${t}`,async()=>{let e=await c(`${a}/_next/data/${r}/${t}.json`);return e.pageProps.user})}async function u(e){let t=await c(`${o}/posts/${e.postId}`),n=t.data.images.filter(e=>!e.isCoverImg).map(e=>`<img src="${s}/${e.src}" />`).join(`<br />`),i={title:t.data.title||t.data.content,pubDate:r(t.data.createdAt),link:`${a}/post/${e.postId}`,description:n};return i}export{o as API_HOST,s as CDN_HOST,a as HOST,c as customFetch,u as fetchPortfolioItem,l as parseUserData};