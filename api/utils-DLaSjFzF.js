import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import{art as n}from"./render-DE4LRFBD.js";import r from"node:path";t();const i=`https://pikabu.ru`,a=e=>{e.find(`.story-image__stretch`).remove(),e.find(`.story-image__image`).each((e,t)=>{t.attribs[`data-src`]&&t.attribs[`data-large-image`]&&(t.attribs.src=t.attribs[`data-large-image`],delete t.attribs[`data-src`],delete t.attribs[`data-large-image`])})},o=t=>{let i=t.find(`.player__preview`).attr(`style`).match(/url\((.+)\);/)[1],a=t.attr(`data-type`),o=``;if(a===`video`){let i=t.attr(`data-source`).match(/\/embed\/(.+)$/)[1];o=n(r.join(e,`templates/video-ddca285d.art`),{videoId:i})}else if(a===`video-file`){let a=t.find(`.player__svg-stretch`).attr(`width`),s=`${t.attr(`data-source`)}.mp4`,c=t.attr(`data-webm`);o=n(r.join(e,`templates/video-ddca285d.art`),{preview:i,width:a,mp4:s,webm:c})}else throw Error(`Unknown video type: ${a}`);t.replaceWith(o)};export{i as baseUrl$14,a as fixImage,o as fixVideo};