import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CRUPiVpr.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./invalid-parameter-CLGd_tte.js";import o from"node:path";e();const s={path:`/drive/:selName`,categories:[`program-update`],example:`/lenovo/drive/PF3WRD2G`,parameters:{selName:`产品序列号`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`lenovo.com.cn`],target:`/drive/:selName`}],name:`驱动`,maintainers:[`cscnk52`],handler:c};async function c(e){let s=await n(`https://newsupport.lenovo.com.cn/api/drive/drive_listnew?searchKey=${e.req.param(`selName`)}`);if(s.statusCode!==200)throw new a(`无效序列号, 请检查你的序列号是否正确.`);let c=s.data.partList.flatMap(e=>e.drivelist).map(e=>({title:`${e.DriverName} ${e.Version}`,link:`https://newsupport.lenovo.com.cn/driveDownloads_detail.html?driveId=${e.DriverEdtionId}`,description:r(o.join(t,`templates/drive-2802e117.art`),{driveName:e.DriverName,driveCode:e.DriverCode,driveVersion:e.Version,downloadFileName:e.FileName,downloadFilePath:e.FilePath}),pubDate:i(e.CreateTime,8)}));return{title:`${s.data.driverSerious[0].NodeCode} 驱动`,item:c,language:`zh-CN`}}export{c as handler,s as route};