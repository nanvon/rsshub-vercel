import{n as e,t}from"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CfXAR0UO.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./types-Bn7An2Wc.js";import s from"node:path";import{load as c}from"cheerio";e();const l=async e=>{let{id:o=`all`}=e.req.param(),l=Number.parseInt(e.req.query(`limit`)??`50`,10),u=`https://www.cbndata.com`,d=new URL(`information?tag_id=${o}`,u).href,f=new URL(`api/v3/informations`,u).href,p=c(await n(d)),m=p(`html`).attr(`lang`)??`zh`,h=await n(f,{query:{page:1,per_page:l}}),g=[];g=h.data.slice(0,l).map(e=>{let n=e.title,r=e.image,o=i(s.join(t,`templates/description-16be3a2a.art`),{images:r?[{src:r,alt:n}]:void 0}),c=e.date,l=e.id?`information/${e.id}`:void 0,d=e.tags,f=`cbndata-information-${e.id}`,p=c;return{title:n,description:o,pubDate:c?a(c):void 0,link:l?new URL(l,u).href:void 0,category:d,guid:f,id:f,content:{html:o,text:o},image:r,banner:r,updated:p?a(p):void 0,language:m}}),g=await Promise.all(g.map(e=>e.link?r.tryGet(e.link,async()=>{let r=(await n(e.link)).match(/<script>window\.__INITIAL_STATE__=(.*?);<\/script>/)?.[1];if(!r)return e;let o=JSON.parse(r)?.data;if(!o)return e;let c=o.title,l=e.description+i(s.join(t,`templates/description-16be3a2a.art`),{description:o.content}),d=o.date,f=o.id?`information/${o.id}`:void 0,p=[...new Set((o.tags?.map(e=>e.name)??[]).filter(Boolean))],h=[{name:o.author,url:void 0,avatar:void 0}],g=`cbndata-information-${o.id}`,_=o.thumbnail_url,v=d,y={title:c,description:l,pubDate:d?a(d):void 0,link:f?new URL(f,u).href:void 0,category:p,author:h,guid:g,id:g,content:{html:l,text:l},image:_,banner:_,updated:v?a(v):void 0,language:m};return{...e,...y}}):e));let _=h.home_tags.find(e=>String(e.id)===o)?.name??``,v=`${_?`${_}-`:``}${p(`title`).text().trim()}`;return{title:v,description:p(`meta[name="description"]`).attr(`content`),link:d,item:g,allowEmpty:!0,image:p(`img.logo-logoImage`).attr(`src`),author:v.split(/\|/).pop(),language:m,id:d}},u={path:`/information/:id?`,name:`看点`,url:`www.cbndata.com`,maintainers:[`nczitzk`],handler:l,example:`/cbndata/information/all`,parameters:{id:{description:"分类，默认为 `all`，即全部，可在对应分类页 URL 中找到",options:[{label:`全部`,value:`all`},{label:`美妆个护`,value:`1`},{label:`服饰鞋包`,value:`2559`},{label:`宠物`,value:`2419`},{label:`营销`,value:`2484`}]}},description:`::: tip
订阅 [美妆个护](https://www.cbndata.com/information?tag_id=1)，其源网址为 \`https://www.cbndata.com/information?tag_id=1\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/cbndata/information/1\`](https://rsshub.app/cbndata/information/1)。
:::

| 分类                                                        | ID                                                  |
| ----------------------------------------------------------- | --------------------------------------------------- |
| [全部](https://www.cbndata.com/information?tag_id=all)      | [all](https://rsshub.app/cbndata/information/all)   |
| [美妆个护](https://www.cbndata.com/information?tag_id=1)    | [1](https://rsshub.app/cbndata/information/1)       |
| [服饰鞋包](https://www.cbndata.com/information?tag_id=2559) | [2559](https://rsshub.app/cbndata/information/2559) |
| [宠物](https://www.cbndata.com/information?tag_id=2419)     | [2419](https://rsshub.app/cbndata/information/2419) |
| [营销](https://www.cbndata.com/information?tag_id=2484)     | [2484](https://rsshub.app/cbndata/information/2484) |
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.cbndata.com/information`],target:(e,t)=>{let n=new URL(t).searchParams.get(`tag_id`)??void 0;return`/information${n?`/${n}`:``}`}},{title:`全部`,source:[`www.cbndata.com/information`],target:`/information/all`},{title:`美妆个护`,source:[`www.cbndata.com/information`],target:`/information/1`},{title:`服饰鞋包`,source:[`www.cbndata.com/information`],target:`/information/2559`},{title:`宠物`,source:[`www.cbndata.com/information`],target:`/information/2419`},{title:`营销`,source:[`www.cbndata.com/information`],target:`/information/2484`}],view:o.Articles};export{l as handler,u as route};