import"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as e}from"./cache-CpEhLexq.js";import"./render-d6AVTUl2.js";import{t}from"./parse-date-CHEO0z5G.js";import{t as n}from"./got-BlqYKpVp.js";import{t as r}from"./types-Bn7An2Wc.js";import{n as i,t as a}from"./utils-B4s53yc5.js";import{load as o}from"cheerio";const s={path:`/top/:type`,categories:[`design`],view:r.Pictures,example:`/zcool/top/design`,parameters:{type:{description:`推荐类型`,options:[{value:`design`,label:`作品榜单`},{value:`article`,label:`文章榜单`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`作品总榜单`,maintainers:[`yuuow`],handler:c};async function c(r){let s=`https://www.zcool.com.cn/top/${r.req.param(`type`)===`design`?`index.do`:`article.do?rankType=8`}`,{data:c}=await n(s),l=o(c),u=JSON.parse(l(`script#__NEXT_DATA__`).text()),d=u.props.pageProps.listResult.data.map(e=>({title:e.rankingTitle,author:e.member.name,category:[e.productCategoryStr,e.productSubCateStr,...e.tags],link:e.pageUrl,pubDate:t(e.rankingPublishTime)})),f=await Promise.all(d.map(r=>e.tryGet(r.link,async()=>{let{data:e}=await n(r.link),s=o(e),c=JSON.parse(s(`script#__NEXT_DATA__`).text());return r.pubDate=t(c.props.pageProps.data.publishTime,`x`),r.link.startsWith(`https://www.zcool.com.cn/article/`)?r.description=a(c):r.link.startsWith(`https://www.zcool.com.cn/work/`)&&(r.description=i(c)),r})));return{title:u.props.pageProps.seo.title,description:u.props.pageProps.seo.description,link:s,item:f}}export{s as route};