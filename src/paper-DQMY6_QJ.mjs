import{n as e,t}from"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-DXVwJZV0.mjs";import"./helpers-mo8InLYm.mjs";import{t as n}from"./cache-ZTWfXd2T.mjs";import{t as r}from"./render-CBhnapAf.mjs";import{t as i}from"./parse-date-bKmkZ9gg.mjs";import{t as a}from"./got-D6JCV29k.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/paper/:id?`,categories:[`traditional-media`],example:`/cntheory/paper`,parameters:{id:`板块，默认为全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`学习时报`,maintainers:[`nczitzk`],handler:l,description:"如订阅 **第 A1 版：国内大局**，路由为 [`/cntheory/paper/国内大局`](https://rsshub.app/cntheory/paper/国内大局)。"};async function l(e){let c=e.req.param(`id`),l=`https://paper.cntheory.com`,u=await a({method:`get`,url:l});u=await a({method:`get`,url:`${l}/${u.data.match(/URL=(.*)"/)[1]}`});let d=s(u.data),f=u.data.match(/images\/(\d{4}-\d{2}\/\d{2})\/\w+\/\w+_brief/),p=`${l}/html/${f[1]}`,m=[];return await Promise.all(d(`#pageLink`).toArray().filter(e=>c?d(e).text().split(`：`).pop()===c:!0).map(e=>`${p}/${d(e).attr(`href`).replace(/\.\//,``)}`).map(async e=>{let t=s((await a({method:`get`,url:e})).data);m.push(...t(`table`).last().find(`a`).toArray().map(e=>`${p}/${d(e).attr(`href`)}`))})),m=await Promise.all(m.map(e=>n.tryGet(e,async()=>{let n=s((await a({method:`get`,url:e})).data);return{link:e,title:n(`h1`).text(),pubDate:i(f[1],`YYYY-MM/DD`),enclosure_url:`${l}${n(`.ban_t a`).first().attr(`href`).match(/(\/images.*)/)[1]}`,description:r(o.join(t,`templates/description-61f5629e.art`),{resource:n(`#reslist`).html().replaceAll(`display:none;`,``),description:n(`founder-content`).html()})}}))),{title:`学习时报${c?` - ${c}`:``}`,link:l,item:m,allowEmpty:!0}}export{c as route};