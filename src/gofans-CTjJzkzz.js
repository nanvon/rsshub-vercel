import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CbgiXYAi.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-Do9KqzqD.js";import a from"node:path";t();const o={path:`/:kind?`,categories:[`program-update`],example:`/gofans`,parameters:{kind:"Platform, either `macos` or `ios`, empty means both (default)"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`最新限免 / 促销应用`,maintainers:[`HenryQW`],handler:s};async function s(t){let{kind:o=``}=t.req.param(),s=`https://gofans.cn`,{data:c}=await i(`https://api.gofans.cn/v1/web/app_records`,{headers:{origin:s},searchParams:{limit:20,kind:o&&(o===`macos`?1:2),page:1}}),l=c.data.map(t=>({title:`「${t.price===`0.00`?`免费`:`降价`}」-「${t.kind===1?`macOS`:`iOS`}」${t.name}`,description:n(a.join(e,`templates/description-d95c3846.art`),{icon:t.icon,originalPrice:t.original_price,price:t.price,kind:t.kind,description:t.description.replaceAll(`
`,`<br>`)}),pubDate:r(t.updated_at,`X`),link:new URL(`/app/${t.uuid}`,s).href,category:t.primary_genre_name}));return{title:`最新限免 / 促销应用`,link:s,description:`GoFans：最新限免 / 促销应用`,item:l}}export{o as route};