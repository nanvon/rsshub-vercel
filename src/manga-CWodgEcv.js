import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-am9EnuPq.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";const i={path:`/manga/:name`,categories:[`anime`],example:`/bakamh/manga/最强家丁`,parameters:{name:`漫画名称，漫画主页的地址栏中`},radar:[{source:[`bakamh.com/manga/:name/`]}],name:`漫画更新`,maintainers:[`yoyobase`],handler:async i=>{let{name:a}=i.req.param(),o=Number.parseInt(i.req.query(`limit`),15)||15,s=`https://bakamh.com/manga/${a}/`,c=await e(s),l=r(c),u=JSON.parse(l(`script[type="application/ld+json"]`).text()),d=l(`li.wp-manga-chapter`).toArray().slice(0,o).map(e=>{let t=l(e),n=t.find(`i`).text().replaceAll(` `,``);return{title:t.find(`a`).text(),link:t.find(`a`).attr(`href`),guid:t.find(`a`).attr(`href`),pubDate:n}});d.length>0&&(d[0].pubDate=u.dateModified);let f=await Promise.all(d.map(i=>t.tryGet(i.link,async()=>{let t=await e(i.link),a=r(t),o=a(`div.reading-content img`),s=a(`<div class="image-container"></div>`);return o.appendTo(s),i.description=s.html(),i.pubDate=n(i.pubDate,`YYYY年M月D日`),i})));return{title:l(`title`).text(),link:s,description:l(`.post-content_item p`).text(),image:l(`.summary_image a img`).attr(`src`),item:f}},url:`bakamh.com`};export{i as route};