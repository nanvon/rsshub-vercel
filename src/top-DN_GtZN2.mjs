import"./esm-shims-D4LgnpSl.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-CvLG4YCQ.mjs";import"./helpers-mo8InLYm.mjs";import{t as e}from"./cache-ZTWfXd2T.mjs";import"./parse-date-bKmkZ9gg.mjs";import{t}from"./got-AYh7EWi-.mjs";import{t as n}from"./types-BD1MU_-b.mjs";import{t as r}from"./invalid-parameter-Cn6c8J1f.mjs";import{r as i,t as a}from"./utils-CkmU_-VI.mjs";const o=new Set([`topReplurks`,`topFavorites`,`topResponded`]),s={path:`/top/:category?/:lang?`,categories:[`social-media`],view:n.SocialMedia,example:`/plurk/top/topReplurks`,parameters:{category:"Category, see the table below, `topReplurks` by default",lang:"Language, see the table below, `en` by default"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Top`,maintainers:[`TonyRL`],handler:c,description:`| Top Replurks | Top Favorites | Top Responded |
| ------------ | ------------- | ------------- |
| topReplurks  | topFavorites  | topResponded  |

| English | 中文（繁體） |
| ------- | ------------ |
| en      | zh           |`};async function c(n){let{category:s=`topReplurks`,lang:c=`en`}=n.req.param();if(!o.has(s))throw new r(`Invalid category: ${s}`);let{data:l}=await t(`${a}/Stats/${s}`,{searchParams:{period:`day`,lang:c,limit:n.req.query(`limit`)?Number(n.req.query(`limit`)):90}}),u=await Promise.all(l.stats.map(e=>e[1]).map(t=>i(`plurk:${t.plurk_id}`,t,t.owner.display_name,e.tryGet)));return{title:`Top Plurk - Plurk`,image:`https://s.plurk.com/2c1574c02566f3b06e91.png`,link:`${a}/top#${s}`,item:u,language:c}}export{s as route};