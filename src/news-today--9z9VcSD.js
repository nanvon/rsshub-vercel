import"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import{t as e}from"./logger-asV68Lay.js";import{t}from"./ofetch-CfXAR0UO.js";import"./cache-CpEhLexq.js";import"./render-d6AVTUl2.js";import"./parse-date-CHEO0z5G.js";import{n,t as r}from"./utils-CDFimYzE.js";import i from"dayjs";import{load as a}from"cheerio";const o={path:`/newsToday/:filter?`,example:`/visionias/newsToday`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},parameters:{filter:{description:`Period to fetch news for the current month. All news for the current month or only the latest`,default:`latest`,options:[{value:`all`,label:`All`},{value:`latest`,label:`Latest`}]}},radar:[{source:[`visionias.in/current-affairs/news-today`],target:`/newsToday`}],name:`News Today`,maintainers:[`Rjnishant530`],handler:s};async function s(n){let a=n.req.param(`filter`)??`latest`,o=i().year(),s=i().month()+1;e.debug(`Getting news for month ${s} and year ${o}`);let l=await t(`${r}/current-affairs/news-today/getbymonth?year=${o}&month=${s}`),u=[];if(l.length!==0)if(a===`latest`){let e=l[0].url;u=await c(e)}else{let e=await Promise.all(l.map(e=>c(e.url)));u.push(...e.flat())}return{title:`News Today | Current Affairs | Vision IAS`,link:`${r}/current-affairs/news-today/archive`,description:`News Today is a daily bulletin providing readers with a comprehensive overview of news developments, news types, and technical terms.`,language:`en`,item:u,image:`${r}/current-affairs/images/news-today-logo.svg`,icon:`https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,logo:`https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,allowEmpty:!0}}async function c(e){let i=a(await t(`${r}${e}`)),o=i(`#table-of-content > ul > li > a`).toArray().map(e=>{let t=i(e).attr(`href`),n=i(e).clone().children(`span`).remove().end().text().trim();return{title:n,link:n===`Also in News`?t:`${r}${t}`,guid:t}});return(await Promise.allSettled(o.map(e=>n(e,`main > div > div.mt-6 > div.flex > div.flex.mt-6`)))).flatMap(e=>e.status===`fulfilled`?Array.isArray(e.value)?e.value:[e.value]:[{title:`Error Parse News`}])}export{o as route};