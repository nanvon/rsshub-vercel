import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-BlqYKpVp.js";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/:category{.+}?`,radar:[{source:[`asiantolick.com/`],target:``}],name:`Unknown`,maintainers:[],handler:l,url:`asiantolick.com/`,features:{nsfw:!0}};async function l(e){let c=e.req.param(`category`),l=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`),10):24,u=`https://asiantolick.com`,d=new URL(`ajax/buscar_posts.php`,u).href,f=new URL(c?.replace(/^(tag|category)?\/(\d+)/,`$1-$2`)??``,u).href,p={},m=c?.match(/^(tag|category|search|page)?[/-]?(\w+)/)??void 0;if(m){let e=m[1]===`category`?`cat`:m[1];p[e]=m[2]}else c&&(p.page=`news`);let{data:h}=await a(d,{searchParams:p}),g=s(h),_=g(`a.miniatura`).slice(0,l).toArray().map(e=>{e=g(e);let n=e.find(`div.background_miniatura img`);return{title:e.find(`div.base_tt`).text(),link:e.prop(`href`),description:r(o.join(t,`templates/description-659ed52a.art`),{images:n?[{src:n.prop(`data-src`).split(/\?/)[0],alt:n.prop(`alt`)}]:void 0}),author:e.find(`.author`).text(),category:e.find(`.category`).toArray().map(e=>g(e).text()),guid:n?n.prop(`post-id`):e.link.match(/\/(\d+)/)[1]}});_=await Promise.all(_.map(e=>n.tryGet(e.link,async()=>{let{data:n}=await a(e.link),c=s(n);return e.title=c(`h1`).first().text(),e.description=r(o.join(t,`templates/description-659ed52a.art`),{description:c(`#metadata_qrcode`).html(),images:c(`div.miniatura`).toArray().map(e=>({src:c(e).prop(`data-src`),alt:c(e).find(`img`).prop(`alt`)}))}),e.author=c(`.author`).text(),e.category=c(`#categoria_tags_post a`).toArray().map(e=>c(e).text().trim().replace(/^#/,``)),e.pubDate=i(n.match(/"pubDate":\s"((?!http)[^"]*)"/)[1]),e.updated=i(n.match(/"upDate":\s"((?!http)[^"]*)"/)[1]),e.enclosure_url=new URL(`ajax/download_post.php?ver=3&dir=/down/new_${e.guid}&post_id=${e.guid}&post_name=${n.match(/"title":\s"((?!http)[^"]*)"/)[1]}`,u).href,e.guid=`asiantolick-${e.guid}`,e})));let{data:v}=await a(f);g=s(v);let y=g(`title`).text().split(/-/)[0].trim(),b=g(`link[rel="icon"]`).first().prop(`href`);return{item:_,title:y===`Asian To Lick`?y:`Asian To Lick - ${y}`,link:f,description:g(`meta[property="og:description"]`).prop(`content`),language:g(`html`).prop(`lang`),image:g(`meta[name="msapplication-TileImage"]`).prop(`content`),icon:b,logo:b,subtitle:y,allowEmpty:!0}}export{c as route};