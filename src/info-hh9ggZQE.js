import{n as e,t}from"./esm-shims-CaZMYoY8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-VsB2Peor.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{n as a,t as o}from"./parse-date-CHEO0z5G.js";import{t as s}from"./types-Bn7An2Wc.js";import c from"node:path";import{load as l}from"cheerio";e();const u=async e=>{let{category:s=`newslists`,id:u}=e.req.param(),d=Number.parseInt(e.req.query(`limit`)??`30`,10),f=`https://info.10000link.com`,p=new URL(`${s}.aspx${u?`?chid=${u}`:``}`,f).href,m=l(await n(p)),h=m(`html`).attr(`lang`)??`zh`,g=[];g=m(`ul.l_newshot li dl.lhotnew2`).slice(0,d).toArray().map(e=>{let n=m(e),r=n.find(`dd h1 a`),o=r.attr(`title`)??r.text(),s=i(c.join(t,`templates/description-ca64252b.art`),{intro:n.find(`dd.title_l`).text()}),l=n.find(`span.ymd_w`).text(),u=r.attr(`href`),d=n.find(`dd.day-lx span a`).toArray(),p=[...new Set(d.map(e=>m(e).text()).filter(Boolean))],g=n.find(`dd.day-lx span`).first().text(),_=n.find(`dt.img220 a img`).attr(`src`),v=l;return{title:o,description:s,pubDate:l?a(l):void 0,link:u?new URL(u,f).href:void 0,category:p,author:g,content:{html:s,text:s},image:_,banner:_,updated:v?a(v):void 0,language:h}}),g=(await Promise.all(g.map(e=>e.link?r.tryGet(e.link,async()=>{let r=await n(e.link),a=l(r),s=a(`div.entity_title h1 a`).text(),u=a(`div.entity_thumb img.img-responsive`).attr(`src`),d=i(c.join(t,`templates/description-ca64252b.art`),{images:u?[{src:u,alt:s}]:void 0,description:a(`div.entity_content`).html()}),f=r.match(/var\stime\s=\s"(.*?)";/)?.[1],p=a(`div.entity_tag span a`).toArray(),m=[...new Set([...p.map(e=>a(e).text()),...e.category??[]].filter(Boolean))],g=f,_={title:s,description:d,pubDate:f?o(f):e.pubDate,category:m,content:{html:d,text:d},image:u,banner:u,updated:g?o(g):e.updated,language:h};return{...e,..._}}):e))).filter(e=>!0);let _=`10000万联网`,v=m(`h1`).contents().first().text();return{title:`${_} - ${v}`,description:v,link:p,item:g,allowEmpty:!0,image:m(`a.navbar-brand img`).attr(`src`)?new URL(m(`a.navbar-brand img`).attr(`src`),f).href:void 0,author:_,language:h,id:m(`meta[property="og:url"]`).attr(`content`)}},d={path:`/info/:category?/:id?`,name:`新闻`,url:`info.10000link.com`,maintainers:[`nczitzk`],handler:u,example:`/10000link/info/newslists/My01`,parameters:{category:{description:"分类，默认为 `newslists`，可在对应分类页 URL 中找到",options:[{label:`新闻`,value:`newslists`},{label:`物流`,value:`newslogistics`},{label:`供应链金融风控`,value:`newsRisk`},{label:`区块链`,value:`newsBlockChain`},{label:`B2B`,value:`newsBTwoB`},{label:`跨境电商`,value:`newsCrossborder`},{label:`投融资`,value:`newsInvestment`},{label:`供应链管理`,value:`newsManagement`},{label:`供应链创新`,value:`newsInnovation`},{label:`数据`,value:`newslists/A02`},{label:`政策`,value:`newslists/A03`},{label:`规划`,value:`newslists/A04`},{label:`案例`,value:`newslists/GL03`},{label:`职场`,value:`newslists/ZC`},{label:`供应链票据`,value:`newsBill`}]},id:{description:`ID，默认为空，可在对应分类页 URL 中找到`}},description:"::: tip\n若订阅 [天下大势](https://info.10000link.com/newslists.aspx?chid=My01)，网址为 `https://info.10000link.com/newslists.aspx?chid=My01`，请截取 `https://info.10000link.com/` 到末尾 `.aspx` 的部分 `newslists` 作为 `category` 参数填入，而 `My01` 作为 `id` 参数填入，此时目标路由为 [`/10000link/info/newslists/My01`](https://rsshub.app/10000link/info/newslists/My01)。\n:::\n\n| 金融科技      | 物流          | 供应链金融风控 | 区块链         | B2B       |\n| ------------- | ------------- | -------------- | -------------- | --------- |\n| newsFinancial | newslogistics | newsRisk       | newsBlockChain | newsBTwoB |\n\n| 跨境电商        | 投融资         | 供应链管理     | 供应链创新     | 数据          |\n| --------------- | -------------- | -------------- | -------------- | ------------- |\n| newsCrossborder | newsInvestment | newsManagement | newsInnovation | newslists/A02 |\n\n| 政策          | 规划          | 案例           | 职场         | 供应链票据 |\n| ------------- | ------------- | -------------- | ------------ | ---------- |\n| newslists/A03 | newslists/A04 | newslists/GL03 | newslists/ZC | newsBill   |\n",categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`info.10000link.com/:category`],target:(e,t)=>{let n=new URL(t).searchParams.get(`chid`)??void 0,r=e.category;return`/10000link/info${r?`/${r}${n?`/${n}`:``}`:``}`}}],view:s.Articles};export{u as handler,d as route};