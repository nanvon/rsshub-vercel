import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-CmdBCkM8.js";import{load as n}from"cheerio";const r=`https://github.com`,i={path:`/wiki/:user/:repo/:page?`,categories:[`programming`],example:`/github/wiki/flutter/flutter/Roadmap`,parameters:{user:`User / Org name`,repo:`Repo name`,page:`Page slug, can be found in URL, empty means Home`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`github.com/:user/:repo/wiki/:page/_history`,`github.com/:user/:repo/wiki/:page`,`github.com/:user/:repo/wiki/_history`,`github.com/:user/:repo/wiki`],target:`/wiki/:user/:repo/:page`}],name:`Wiki History`,maintainers:[`TonyRL`],handler:a};async function a(i){let{user:a,repo:o,page:s}=i.req.param(),c=`${r}/${a}/${o}/wiki${s?`/${s}`:``}/_history`;if(!s){let{data:e}=await t(`${r}/${a}/${o}/wiki`),i=n(e);c=`${r}${i(`a[href$=_history]`).attr(`href`)}`}let{data:l}=await t(c),u=n(l),d=u(`.js-wiki-history-revision`).toArray().map(t=>(t=u(t),{title:t.find(`.h5`).text(),author:t.find(`.mt-1 a`).text(),pubDate:e(t.find(`relative-time`).attr(`datetime`)),link:`${r}${t.find(`.text-mono a`).attr(`href`)}`}));return{title:`${u(`.gh-header-title`).text()} - ${a}/${o}`,link:c,item:d}}export{i as route};