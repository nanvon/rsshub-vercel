import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import{ofetch_default as t}from"./ofetch-e4r9n7lx.js";import{cache_default as n}from"./cache-BjesfGXD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import*as i from"cheerio";const a=e=>e.map(e=>({title:e.title,author:e.author,description:e.brief.trim().replaceAll(`
`,`<br>`),link:`https://ak.hypergryph.com/news/${e.cid}`,pubDate:r(e.displayTime,`X`)})),o={path:`/arknights/news/:group?`,categories:[`game`],example:`/hypergryph/arknights/news`,parameters:{group:"分组，默认为 `ALL`"},radar:[{source:[`ak-conf.hypergryph.com/news`]}],name:`明日方舟 - 游戏公告与新闻`,maintainers:[`Astrian`],handler:s,url:`ak-conf.hypergryph.com/news`,description:`
| 全部 | 最新   | 公告         | 活动     | 新闻 |
| ---- | ------ | ------------ | -------- | ---- |
| ALL  | LATEST | ANNOUNCEMENT | ACTIVITY | NEWS |`};async function s(r){let{group:o=`ALL`}=r.req.param(),s=await n.tryGet(`hypergryph:arknights:news`,async()=>{let e=await t(`https://ak.hypergryph.com/news`),n=i.load(e),r=JSON.parse(n(`script:contains("initialData")`).first().text().match(/self\.__next_f\.push\((.+)\)/)?.[1]??``);return JSON.parse(r[1].slice(2))[3].initialData},e.cache.routeExpire,!1),c=o===`ALL`?Object.values(s).flatMap(({list:e})=>a(e)):a(s[o].list);return{title:`《明日方舟》游戏公告与新闻`,link:`https://ak.hypergryph.com/news`,item:await Promise.all(c.map(e=>n.tryGet(e.link,async()=>{let n=await t(e.link),r=i.load(n)(`div > div > div > div > div > div > div:nth-child(4)`);return e.description=r.length?r.html():e.description,e}))),language:`zh-cn`}}export{o as route};