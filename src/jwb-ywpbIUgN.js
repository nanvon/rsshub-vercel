import"./esm-shims-2LyWUseo.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-BLnIkXRv.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-DPq_2TLS.js";import{load as r}from"cheerio";const i=new Map([[`notice`,`tzgg`],[`news`,`xw`]]),a={path:[`/jwb/:type?`],radar:[{source:[`www.shu.edu.cn/index`],target:`/:type?`}],name:`教务部`,maintainers:[`tuxinghuan`,`GhhG123`],handler:o,description:`| 通知通告 | 新闻 | 政策文件(bug) |
| -------- | ---- | -------- |
| notice   | news | policy   |`};async function o(a){let o=a.req.param(`type`)||`notice`,s=`https://jwb.shu.edu.cn/index/${i.get(o)||o}.htm`,c=await n.get(s),l=r(c.data),u=l(`title`).text(),d=l(`.only-list`).find(`li`).slice(0,10).toArray().map(e=>({title:l(e).find(`a`).text(),link:new URL(l(e).find(`a`).attr(`href`),`https://jwb.shu.edu.cn/`).href,date:l(e).children(`span`).text()})),f=await Promise.all(d.map(i=>e.tryGet(i.link,async()=>{let e=await n.get(i.link),a=r(e.data);return i.author=a(`[id$=_lblUser]`).text().trim(),i.pubDate=t(i.date,`YYYY年MM月DD日`),i.description=a(`.v_news_content`).html()||i.title,i})));return{title:u,link:s,image:`https://www.shu.edu.cn/__local/0/08/C6/1EABE492B0CF228A5564D6E6ABE_779D1EE3_5BF7.png`,item:f}}export{a as route};