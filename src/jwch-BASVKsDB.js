import"./esm-shims-CaZMYoY8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-VsB2Peor.js";import"./helpers-Cqaav28H.js";import{t as e}from"./cache-CpEhLexq.js";import{t}from"./parse-date-CHEO0z5G.js";import{t as n}from"./got-BVCqvF6m.js";import{t as r}from"./timezone-BPfwRbwD.js";import{load as i}from"cheerio";const a=`http://jwch.usts.edu.cn/index`,o={path:`/jwch/:type?`,categories:[`university`],example:`/usts/jwch`,parameters:{type:`类型，默认为教务动态`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`教务处`,maintainers:[],handler:s,description:`| 类型 | 教务动态 | 公告在线 | 选课通知 |
| ---- | -------- | -------- | -------- |
|      | jwdt     | ggzx     | xktz     |`};async function s(o){let s=`${a}/${o.req.param(`type`)??`jwdt`}.htm`,c=i((await n(s)).data),l=c(`div.mainWrap.cleafix > div > div.right.fr > div.local.fl > h3`).text(),u=c(`div.list > ul > li`).toArray().map(e=>({title:c(e).find(`a`).text(),link:new URL(c(e).find(`a`).attr(`href`),a).href})),d=await Promise.all(u.map(a=>e.tryGet(a.link,async()=>{let e=i((await n(a.link)).data),o=null,s=null;for(let t of e(`div.content-title.fl > i`).text().split(`\xA0\xA0`))t.includes(`作者：`)&&(o=t.split(`：`)[1]),t.includes(`时间：`)&&(s=t.split(`：`)[1]);return a.description=e(`div#vsb_content`).html(),a.author=o,a.pubDate=r(t(s),8),a})));return{title:`苏州科技大学 教务处 - ${l}`,link:s,item:d}}export{o as route};