import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import{ofetch_default as n}from"./ofetch-B4O0sZDE.js";import"./cache-CjzVN0X7.js";import{art as r}from"./render-DE4LRFBD.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{invalid_parameter_default as a}from"./invalid-parameter-B0jPSaWz.js";import{baseUrl as o,getCitys as s,getDistricts as c}from"./utils-CoJahlts.js";import l from"node:path";t();const u=t=>r(l.join(e,`templates/house-7bed2997.art`),t),d={path:`/rent/:city/:district?`,example:`/wellcee/rent/北京`,parameters:{city:`城市`,district:`地区`},name:`租房信息`,maintainers:[`TonyRL`],handler:f,url:`www.wellcee.com`,description:`支持的城市可以通过 [/wellcee/support-city](https://rsshub.app/wellcee/support-city) 获取`};async function f(e){let{city:t,district:r=``}=e.req.param(),l=await s(),d=l.find(e=>e.chCityName===t);if(!d)throw new a(`Invalid city`);let f;if(r){let e=await c(d.id),t=e.find(e=>e.name===r);if(!t)throw new a(`Invalid district`);f=t}let p=await n(`${o}/api/house/filter`,{method:`POST`,body:{districtIds:f?.id?[f.id]:[],subways:[],rentTypeIds:[],timeTypeIds:[],price:[],tagTypeIds:[],cityId:d.id,lang:1,pn:1}}),m=p.data.list.map(e=>({title:e.address,link:`${o}/rent-apartment/${e.id}`,description:u({item:e}),pubDate:i(e.loginTime,`X`),author:e.userInfo.name,category:[...e.tags,...e.typeTags]}));return{title:`${t}${f?.name??``}租房信息 - Wellcee`,description:`${d.statics.online_text} ${d.statics.total_text}`,image:d.icon,icon:d.icon,logo:d.icon,link:`${o}/rent-apartment/${d.cityName}/list?cityId=${d.id}&lang=zh${r?`#districtIds=${f?.id}`:``}`,item:m}}export{d as route};