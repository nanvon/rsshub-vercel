import{__dirname as e,init_esm_shims as t}from"./esm-shims-DE2PJqdr.js";import{config as n}from"./config-CVBRPN4O.js";import{ofetch_default as r}from"./ofetch-CJF2SF6b.js";import{cache_default as i}from"./cache-Dfid4xgQ.js";import{art as a}from"./render-CSnicFA3.js";import{parseDate as o}from"./parse-date-DHsdom8D.js";import{getSubPath as s}from"./common-utils-KsMWGCAa.js";import c from"node:path";import{load as l}from"cheerio";t();async function u(e){return(await r(e)).results}async function d(t){let d=`https://www.nber.org/api/v1/working_page_listing/contentType/working_paper/_/_/search`,f=await i.tryGet(d,()=>u(d),n.cache.routeExpire,!1);return{title:`NBER Working Paper`,link:`https://www.nber.org/papers`,item:await Promise.all(f.filter(e=>s(t)===`/papers`||e.newthisweek).map(t=>{let n=`https://www.nber.org${t.url}`;return i.tryGet(n,async()=>{let i=await r(n),s=l(i),u=s(`meta[name="citation_pdf_url"]`).attr(`content`),d=s(`.page-header__intro-inner`).html();return{title:t.title,author:s(`meta[name="dcterms.creator"]`).attr(`content`),pubDate:o(s(`meta[name="citation_publication_date"]`).attr(`content`),`YYYY/MM/DD`),link:n,doi:s(`meta[name="citation_doi"]`).attr(`content`),description:a(c.join(e,`templates/description-9c2e727f.art`),{fullAbstract:d,downloadLink:u})}})})),description:`National Bureau of Economic Research Working Papers articles`}}export{d as handler};