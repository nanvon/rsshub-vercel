import"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as e}from"./cache-CpEhLexq.js";import{t}from"./parse-date-CHEO0z5G.js";import{t as n}from"./got-CgQXMNWI.js";import{t as r}from"./timezone-BPfwRbwD.js";import{load as i}from"cheerio";import a from"iconv-lite";const o={texie:`特写`,jishi:`记事`,daxie:`大写`,haodu:`好读`,kanke:`看客`},s={path:`/renjian/:category?`,categories:[`new-media`],example:`/163/renjian/texie`,parameters:{category:`分类，见下表，默认为特写`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`renjian.163.com/:category`,`renjian.163.com/`]}],name:`人间`,maintainers:[`nczitzk`],handler:c,description:`| 特写  | 记事  | 大写  | 好读  | 看客  |
| ----- | ----- | ----- | ----- | ----- |
| texie | jishi | daxie | haodu | kanke |`};async function c(s){let c=s.req.param(`category`)??`texie`,l=`https://renjian.163.com/special/renjian_${c}/`,u=await n({method:`get`,url:l,responseType:`buffer`}),d=a.decode(u.data,`gbk`),f={},p=d.match(/url:"(.*)",/g);if(p)f=p.slice(0,s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`)):50).map(e=>({link:e.match(/url:"(.*)",/)[1]}));else{let e=i(d);f=e(`.article h3 a`).slice(0,s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`)):50).toArray().map((t,n)=>(n=e(n),{link:n.attr(`href`)}))}return f=await Promise.all(f.map(a=>e.tryGet(a.link,async()=>{let e=i((await n({method:`get`,url:a.link})).data);return a.title=e(`h1`).text(),a.author=e(`script`).text().match(/renjian_author = '(.*)'/)[1],a.description=e(`#endText`).html()??e(`#content`).html(),a.pubDate=r(t(e(`.pub_time`).text()??e(`.post_info`).text().split(`来源:`)[0].trim()),8),a}))),{title:`人间 - ${o[c]} - 网易新闻`,link:l,item:f}}export{s as route};