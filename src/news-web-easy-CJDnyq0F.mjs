import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as r}from"./cache-Bv3_kFbE.mjs";import{t as i}from"./parse-date-_GmTZfjS.mjs";import{t as a}from"./render-CSqLtqb8.mjs";import{t as o}from"./timezone-BAp4uBjD.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l={path:`/news_web_easy`,categories:[`traditional-media`],example:`/nhk/news_web_easy`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`news.web.nhk/news/easy/`,`news.web.nhk/`]}],name:`News Web Easy`,maintainers:[`Andiedie`],handler:u,url:`news.web.nhk/news/easy/`};async function u(e){let l=await n.raw(`https://news.web.nhk/tix/build_authorize`,{query:{idp:`a-alaz`,profileType:`abroad`,redirect_uri:`https://news.web.nhk/news/easy/`,entity:`none`,area:`130`,pref:`13`,jisx0402:`13101`,postal:`1000001`},redirect:`manual`}),u=l.headers.getSetCookie().map(e=>e.split(`;`)[0]).join(`; `),d=await n.raw(l.headers.get(`location`),{redirect:`manual`}),f=(await n.raw(d.headers.get(`location`),{headers:{cookie:u},redirect:`manual`})).headers.getSetCookie().map(e=>e.split(`;`)[0]).join(`; `),p=(await n(`https://news.web.nhk/news/easy/news-list.json`,{headers:{cookie:u+`; `+f}}))[0],m=Object.values(p).flatMap(e=>e.map(e=>({title:e.title,description:a(s.join(t,`templates/news_web_easy-ee3cb891.art`),{title:e.title_with_ruby,image:e.news_web_image_uri}),guid:e.news_id,pubDate:o(i(e.news_prearranged_time),9),link:`https://news.web.nhk/news/easy/${e.news_id}/${e.news_id}.html`})));return m=m.toSorted((e,t)=>t.pubDate-e.pubDate).slice(0,e.req.query(`limit`)?Number(e.req.query(`limit`)):30),m=await Promise.all(m.map(e=>r.tryGet(e.link,async()=>{let t=c(await n(e.link,{headers:{cookie:u+`; `+f}}));return e.description+=t(`.article-body`).html(),e}))),{title:`NEWS WEB EASY`,link:`https://news.web.nhk/news/easy/`,description:`NEWS WEB EASYは、小学生・中学生の皆さんや、日本に住んでいる外国人のみなさんに、わかりやすいことば　でニュースを伝えるウェブサイトです。`,item:m}}export{l as route};