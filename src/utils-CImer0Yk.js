import{__dirname as e,init_esm_shims as t}from"./esm-shims-rNwigI-Q.js";import{art as n}from"./render-DftO2d-b.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-Di2lBekK.js";import{timezone as a}from"./timezone-CMz5pnRe.js";import o from"node:path";import{load as s}from"cheerio";t();const c=`https://www.yicai.com`,l=async(t,s)=>{let l=(await i({method:`get`,url:t})).data.map(t=>({title:t.NewsTitle,link:t.url.startsWith(`http`)?t.url:`${c}${t.AppID===0?`/vip`:``}${t.url}`,author:t.NewsAuthor||t.NewsSource||t.CreaterName,pubDate:a(r(t.CreateDate),8),category:[t.ChannelName],description:n(o.join(e,`templates/description-55895928.art`),{image:{src:t.originPic,alt:t.NewsTitle},video:{src:t.VideoUrl,type:t.VideoUrl?.split(/\./).pop()??void 0},intro:t.NewsNotes})}));return Promise.all(u(l,s))};function u(e,t){return e.map(e=>t(e.link,async()=>{let t=s((await i({method:`get`,url:e.link})).data);if(!e.pubDate){let n=t(`script[src='/js/alert.min.js']`).next().text()||t(`title`).next().text();e.pubDate=r(`${new Map(JSON.parse(n.match(/_pb = (\[.*?]);/)[1].replaceAll(`'`,`"`))).get(`actime`)}:00`)}return t(`h1`).remove(),t(`.u-btn6, .m-smallshare, .topic-hot`).remove(),e.description=(e.description??``)+(t(`.multiText, #multi-text, .txt`).html()??``),e}))}export{l as ProcessItems,u as fetchFullArticles,c as rootUrl};