import{t as e}from"./cache-Bv3_kFbE.mjs";import{t}from"./parse-date-_GmTZfjS.mjs";import{t as n}from"./got-BglkE51W.mjs";import{t as r}from"./timezone-BAp4uBjD.mjs";import{load as i}from"cheerio";import a from"markdown-it";const o=a({html:!0,linkify:!0}),s=async(a,s)=>{let c=s||(a.req.param(`id`)??`weekly`),l=a.req.query(`limit`)?Number.parseInt(a.req.query(`limit`)):50,u=`https://studygolang.com`,d=`${u}/go/${c}`,f=i((await n({method:`get`,url:d})).data),p=f(`.right-info .title`).slice(0,l).toArray().map(e=>{e=f(e);let t=e.find(`a`);return{title:t.text(),link:`${u}${t.attr(`href`)}`,author:e.next().find(`.author`).text(),category:e.next().find(`.node`).toArray().map(e=>f(e).text())}});return p=await Promise.all(p.map(a=>e.tryGet(a.link,async()=>{let e=i((await n({method:`get`,url:a.link})).data);a.pubDate=r(t(e(`.timeago`).first().attr(`title`)),8);try{a.description=o.render(e(`.content`).html())}catch{}return a}))),{title:`Go语言中文网 - ${f(`.title h2`).text()}`,link:d,item:p}};export{s as t};