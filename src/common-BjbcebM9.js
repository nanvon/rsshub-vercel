import{n as e,t}from"./esm-shims-CMsyBHYK.js";import{t as n}from"./config-DZMnNPig.js";import{t as r}from"./ofetch-CRUPiVpr.js";import{t as i}from"./cache-CpEhLexq.js";import{t as a}from"./render-d6AVTUl2.js";import{t as o}from"./got-BlqYKpVp.js";import s from"node:path";import{load as c}from"cheerio";e();const l=new URL(`https://openai.com`),u=async e=>{let t=c(await r(e)),n=t(`#main article`),i=t(`h1`).prev().find(`a[href]`).toArray().map(e=>t(e).text());return t(n.find(`h1`).parents().get(4)).remove(),n.children().last().remove(),n.find(`#citations`).remove(),{content:n.html()??void 0,categories:i,image:t(`meta[property="og:image"]`).attr(`content`)}},d=async e=>{let t=c(await r(`https://openai.com/news/rss.xml`,{responseType:`text`,headers:{"User-Agent":n.ua}}),{xml:!0});return Promise.all(t(`item`).toArray().slice(0,e).map(e=>{let n=t(e).find(`guid`).text();return i.tryGet(`openai:news:${n}`,async()=>{let r=t(e).find(`title`).text(),i=t(e).find(`pubDate`).text(),a=t(e).find(`link`).text(),{content:o,categories:s}=await u(a);return{guid:n,title:r,link:a,pubDate:i,description:o,category:s}})}))},f=async()=>{let e=(await o({method:`get`,url:`https://openai.com/blog`})).data.toString().match(/(?<=TWILL_API_BASE:").+?(?=")/)[0].replaceAll(String.raw`\u002F`,`/`);return new URL(e)},p=(e,n,r)=>i.tryGet(r.slug,async()=>{let e=`${n}/${r.slug}`,i=c((await o({method:`get`,url:e})).data),l=i(`[aria-labelledby="metaAuthorsHeading"] > li > a > span > span`).toArray().map(e=>i(e).text()).join(`, `);i(`*`).contents().filter(function(){return this.nodeType===8}).remove(),i=i(`#content`);let u=r.seo.ogImageSrc,d=r.seo.ogImageAlt,f=a(s.join(t,`templates/article-88d59063.art`),{content:i,imageSrc:u,imageAlt:d});return r.tags=r.tags||[],{title:r.title,author:l,description:f,pubDate:r.createdAt,category:r.tags.map(e=>e.title),link:e}});export{p as i,d as n,f as r,l as t};