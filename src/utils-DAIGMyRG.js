import{ofetch_default as e}from"./ofetch-B4O0sZDE.js";import{cache_default as t}from"./cache-CjzVN0X7.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";function i(e,t){return[...new Map(e.map(e=>[e[t],e])).values()]}function a(i){return t.tryGet(i.link,async()=>{let t=await e(i.link),a=r(t);if(a(`#link-ld-json`).length===0){let e=a(`meta[name="gtm-dataLayer"]`).attr(`content`);if(e){let t=JSON.parse(e);return{title:t.headline,pubDate:n(t.publication_date),description:a(`div.RichTextStoryBody`).html()||a(`:is(.VideoLead, .VideoPage-pageSubHeading)`).html(),category:t.tag_array.split(`,`),guid:a(`meta[name='brightspot.contentId']`).attr(`content`),author:t.author,...i}}else return i}let o=JSON.parse(a(`#link-ld-json`).text()),s;if(o[`@type`]===`NewsArticle`||Array.isArray(o)&&o.some(e=>e[`@type`]===`NewsArticle`)){s=Array.isArray(o)?o.find(e=>e[`@type`]===`NewsArticle`):o,a(`div.Enhancement`).remove();let e=a(`meta[property='article:section']`).attr(`content`);return{...i,title:s.headline,pubDate:n(s.datePublished),updated:n(s.dateModified),description:a(`div.RichTextStoryBody`).html()||a(`:is(.VideoLead, .VideoPage-pageSubHeading)`).html(),category:[...e?[e]:[],...s.keywords??[]],guid:a(`meta[name='brightspot.contentId']`).attr(`content`),author:s.author?.map(e=>e.mainEntity)}}else{s=o;let e=new URL(i.link),t=e.hash?a(e.hash).parent().find(`.LiveBlogPost-body`).html():s.description,r=e.hash?n(Number.parseInt(a(e.hash).parent().attr(`data-posted-date-timestamp`),10)):n(s.coverageStartTime);return{...i,category:s.keywords,pubDate:r,description:t,guid:a(`meta[name='brightspot.contentId']`).attr(`content`)}}})}export{a as fetchArticle,i as removeDuplicateByKey};