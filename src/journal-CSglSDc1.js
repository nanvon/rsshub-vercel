import{__dirname as e,init_esm_shims as t}from"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{got_default as r}from"./got-D5TEN1xL.js";import i from"node:path";t();const a=`https://ieeexplore.ieee.org`,o={name:`IEEE Journal Articles`,maintainers:[`HenryQW`],categories:[`journal`],path:`/journal/:punumber/:earlyAccess?`,parameters:{punumber:"Publication Number, look for `punumber` in the URL",earlyAccess:`Optional, set any value to get early access articles`},example:`/ieee/journal/6287639/preprint`,handler:s};async function s(t){let r=t.req.param(`punumber`),o=!!t.req.param(`earlyAccess`),{displayTitle:s,currentIssue:d,preprintIssue:f,coverImagePath:p}=await c(r),{issueNumber:m,volume:h}=o?f:d,g=(await l(r,m)).records.map(t=>{let r=u(h)(t);return r.description=n(i.join(e,`templates/description-e509e615.art`),{item:r}),r});return{title:s,link:`${a}/xpl/tocresult.jsp?isnumber=${m}`,item:g,image:`${a}${p}`}}async function c(e){return(await r(`${a}/rest/publication/home/metadata?pubid=${e}`)).data}async function l(e,t){return(await r.post(`${a}/rest/search/pub/${e}/issue/${t}/toc`,{json:{punumber:e,isnumber:t,rowsPerPage:`100`}})).data}function u(e){return t=>({abstract:t.abstract||``,authors:t.authors?t.authors.map(e=>e.preferredName).join(`; `):``,description:``,doi:t.doi,link:t.htmlLink,title:t.articleTitle||``,volume:e})}export{o as route};