import"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import{t as e}from"./ofetch-BMqiDsx_.mjs";import{t}from"./cache-ZTWfXd2T.mjs";import{t as n}from"./parse-date-bKmkZ9gg.mjs";const r={path:`/user/:username/:type?`,categories:[`picture`],example:`/pinterest/user/howieserious`,parameters:{username:`Username`,type:{description:"Type, default to `_created`",default:`_created`,options:[{value:`_created`,label:`Created`},{value:`_saved`,label:`Saved`}]}},radar:[{source:[`www.pinterest.com/:id/:type?`,`www.pinterest.com/:id`],target:`/user/:id/:type?`}],name:`User`,maintainers:[`TonyRL`],handler:a},i=`https://www.pinterest.com`;async function a(e){let{username:t,type:r=`_created`}=e.req.param(),a=await o(t),l=r===`_created`?await s(t,a.id):await c(t),u=r===`_created`?l.map(e=>({title:e.title||e.seo_title,description:`${e.grid_description}<br><img src="${e.images.orig.url}">`,link:`${i}${e.seo_url}`,author:e.pinner.full_name,pubDate:n(e.created_at),image:e.images.orig.url})):l.map(e=>({title:e.name,description:e.description+(e.images?.[`170x`]?`<br>`+e.images[`170x`].map(e=>`<img src="${e.url}">`).join(``):``),link:`${i}${e.url}`,author:e.owner.full_name,pubDate:n(e.created_at),image:e.image_cover_hd_url}));return{title:a.seo_title,description:a.seo_description,image:a.image_xlarge_url??a.image_medium_url,link:`${i}/${t}/`,item:u}}const o=n=>t.tryGet(`pinterest:user:${n}`,async()=>(await e(`${i}/resource/UserResource/get/`,{headers:{"x-pinterest-pws-handler":`www/[username]/_created.js`},query:{source_url:`/${n}/_created`,data:JSON.stringify({options:{username:n,field_set_key:`unauth_profile`},context:{}}),_:Date.now()}})).resource_response.data),s=async(t,n)=>(await e(`${i}/resource/UserActivityPinsResource/get/`,{headers:{"x-pinterest-pws-handler":`www/[username]/_created.js`},query:{source_url:`/${t}/_created`,data:JSON.stringify({options:{exclude_add_pin_rep:!0,field_set_key:`grid_item`,is_own_profile_pins:!1,user_id:n,username:t},context:{}}),_:Date.now()}})).resource_response.data,c=async t=>(await e(`${i}/resource/BoardsFeedResource/get/`,{headers:{"x-pinterest-pws-handler":`www/[username]/_saved.js`},query:{source_url:`/${t}/_saved`,data:JSON.stringify({options:{field_set_key:`profile_grid_item`,filter_stories:!1,sort:`last_pinned_to`,username:t},context:{}}),_:Date.now()}})).resource_response.data.filter(e=>e.node_id);export{r as route};