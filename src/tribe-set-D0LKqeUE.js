import{n as e,t}from"./esm-shims-BC3isTv8.js";import{t as n}from"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as r}from"./ofetch-CfXAR0UO.js";import{t as i}from"./cache-CpEhLexq.js";import{t as a}from"./render-d6AVTUl2.js";import{t as o}from"./parse-date-CHEO0z5G.js";import{t as s}from"./types-Bn7An2Wc.js";import c from"node:path";import{load as l}from"cheerio";e();const u=`https://500px.com.cn`,d={"x-500px-client-info":`eyJhbm9ueW1vdXNJZCI6IiIsImxhdGl0dWRlIjpudWxsLCJsb25naXR1ZGUiOm51bGwsIm1hbnVmYWN0dXJlciI6IiIsInByb3ZpbmNlIjoiIiwiYXJlYSI6IiIsImNpdHkiOiIifQ==`,"X-Tingyun-Id":`Fm3hXcTiLT8;r=${Date.now()%1e8}`},f=e=>i.tryGet(`500px:tribeDetail:${e}`,async()=>(await r(`${u}/community/tribe/tribeDetail`,{headers:{...d},query:{tribeId:e}})).data,n.cache.routeExpire,!1),p=(e,t)=>i.tryGet(`500px:tribeSets:${e}`,async()=>(await r(`${u}/community/tribe/getTribeSetsV2`,{headers:{...d},query:{tribeId:e,privacy:1,page:1,size:t,type:`json`}})).data,n.cache.routeExpire,!1),m={path:`/tribe/set/:id`,categories:[`picture`],view:s.Pictures,example:`/500px/tribe/set/f5de0b8aa6d54ec486f5e79616418001`,parameters:{id:`部落 ID`},name:`部落影集`,maintainers:[`TonyRL`],handler:h};async function h(e){let n=e.req.param(`id`),r=Number.parseInt(e.req.query(`limit`))||100,{tribe:i}=await f(n),s=(await p(n,r)).map(e=>({title:e.title,description:a(c.join(t,`templates/tribeSet-3e687c05.art`),{item:e}),author:e.uploaderInfo.nickName,pubDate:o(e.createdTime,`x`),link:`${u}/community/set/${e.id}/details`}));return{title:i.name,description:`${i.watchword} - ${i.introduce}`,link:`${u}/page/tribe/detail?tribeId=${n}&pagev=set`,image:i.avatar.a1,item:s}}export{m as route};