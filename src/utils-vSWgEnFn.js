import{n as e,t}from"./esm-shims-CMsyBHYK.js";import{t as n}from"./config-DZMnNPig.js";import{t as r}from"./ofetch-CRUPiVpr.js";import{t as i}from"./cache-CpEhLexq.js";import{t as a}from"./render-d6AVTUl2.js";import o from"node:path";e();const s=`https://skeb.jp`;function c(e){if(!e||typeof e!=`object`||e.private===!0)return null;let n=e.thumbnail_image_urls?.srcset?.split(`,`).pop()?.trim().split(` `)[0]||``,r=e.body||``,i=e.genre===`music`||e.genre===`voice`?e.preview_url:null,c=a(o.join(t,`templates/work-99aa5c91.art`),{imageUrl:n,body:r,audioUrl:i});return{title:e.path||``,link:`${s}${e.path||``}`,description:c}}const l={art:`Illust`,voice:`Voice`,novel:`Novel`,video:`Video`,music:`Music`,correction:`Advice`,comic:`Comic`};function u(e){if(!e||typeof e!=`object`)return null;let n=e.avatar_url||``,r;if(e.creator){let i=e.acceptable?`Yes`:`No`,s=e.nsfw_acceptable?`Yes`:`No`,c=``;Array.isArray(e.skills)&&e.skills.length>0&&(c=e.skills.map(e=>l[e.genre]||e.genre).filter(Boolean).join(`, `)),r=a(o.join(t,`templates/creator-f3fb4f56.art`),{avatarUrl:n,acceptingCommissions:i,nsfwAcceptable:s,skills:c})}return{title:e.name||``,link:`${s}/@${e.screen_name||``}`,description:r}}async function d(e,t){let a=`${s}/api/users/${e.replace(`@`,``)}/followings`,o=await i.tryGet(`skeb:followings_data:${e}`,async()=>await r(a,{headers:{Authorization:`Bearer ${n.skeb.bearerToken}`}}),n.cache.routeExpire,!1);if(!o||typeof o!=`object`)throw Error(`Failed to fetch followings data`);return t===`following_creators`?o[t].map(e=>u(e)).filter(Boolean):o[t].map(e=>c(e)).filter(Boolean)}export{c as i,d as n,u as r,s as t};