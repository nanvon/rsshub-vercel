import{ofetch_default as e}from"./ofetch-B4O0sZDE.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{md5 as n}from"./md5-15Cn4YyR.js";import{load as r}from"cheerio";const i=`https://www.techpowerup.com`,a={cookie:`botcheck=${n(Date.now().toString())}`},o=e=>{e(`div.responsive-image-xx`).each((e,t)=>{l(t)}),e(`figure`).each((e,t)=>{c(t)}),e(`.newspost img`).each((e,t)=>{s(t)})},s=e=>{e.attribs.src=e.attribs.src.replace(`_thm`,``).replace(`_small`,``),e.parentNode.name===`a`&&e.parentNode.attribs[`data-width`]&&e.parentNode.attribs[`data-height`]&&(e.attribs.width=e.parentNode.attribs[`data-width`],e.attribs.height=e.parentNode.attribs[`data-height`])},c=e=>{delete e.attribs.style},l=e=>{delete e.attribs.style},u=async(n,o)=>{let{review:u}=JSON.parse(n(`script[type="application/ld+json"]`).text()),d=n(`.text`),f=n(`#pagesel option`).toArray().map(e=>`${i}${e.attribs.value}`).slice(1,-1);if(f.length){let t=await Promise.all(f.map(async t=>{let n=await e(t,{headers:a}),i=r(n);return i(`.text div.responsive-image-xx`).each((e,t)=>{l(t)}),i(`.text figure`).each((e,t)=>{c(t)}),i(`.text img`).each((e,t)=>{s(t)}),i(`.text`).html()}));d.append(t)}o.author=u.author.name,o.pubDate=t(u.datePublished),o.updated=t(u.dateModified),o.description=d.html()};export{i as baseUrl,o as fixImages,a as headers,u as parseReviews};