import{__dirname as e,init_esm_shims as t}from"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./dist-Bbb0mfHh.js";import"./helpers-DzX-lcQO.js";import{cache_default as n}from"./cache-DNP0KCHb.js";import{art as r}from"./render-sowsPyZZ.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-Dnmc-sKl.js";import{got_default as a}from"./got-CdHCxDMi.js";import{timezone as o}from"./timezone-BrNu6iXe.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/programs`,categories:[`shopping`],example:`/shcstheatre/programs`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.shcstheatre.com/Program/programList.aspx`]}],name:`节目列表`,maintainers:[`fuzy112`],handler:u,url:`www.shcstheatre.com/Program/programList.aspx`};async function u(){let t=`https://www.shcstheatre.com/Program/programList.aspx`,l=await a.get(t),u=c(l.data),d=await Promise.all(u(`#datarow .program-name a`).map((c,l)=>{let d=new URL(u(l).attr(`href`),t);return n.tryGet(d.toString(),async()=>{let t=d.searchParams.get(`id`),n=await a.post(`https://www.shcstheatre.com/webapi.ashx?op=GettblprogramCache`,{headers:{"Content-Type":`application/x-www-form-urlencoded; charset=UTF-8`},form:{id:t}}),c=n.data.data.tblprogram[0];return{title:c.SCS_WEB_BRIEFNAME,link:d.toString(),description:r(s.join(e,`templates/description-f9f25b7f.art`),c),pubDate:o(i(c.SJ_DATE_PC),8)}})})),f=u(`.menu-logo img`).attr(`src`);return{title:`上海文化广场 - 节目列表`,link:t,image:f,item:d}}export{l as route};