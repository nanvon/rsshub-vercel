import"./esm-shims-BKVRry6h.mjs";import"./config-uQhBoCds.mjs";import"./logger-DQf7gybc.mjs";import{t as e}from"./ofetch-7N8fmlQ6.mjs";import{t}from"./cache-BXZZTZVV.mjs";import{t as n}from"./parse-date-C2HciIa2.mjs";import{load as r}from"cheerio";const i={path:`/`,categories:[`new-media`],example:`/newswav`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`newswav.com/latest`,`newswav.com`]}],name:`Latest`,maintainers:[`TonyRL`],handler:a};async function a(){let i=`https://newswav.com`,a=(await e(`https://feed-api.newswav.com/api/web/feeds/latest`,{query:{languages:`en,ms,zh`}})).data.content.filter(e=>e.contentId!==`AD`).map(e=>({title:e.title,description:e.description,category:e.topics.map(e=>e.en),link:`${i}/article/${e.permalink}`,permalink:e.permalink,pubDate:n(e.publishedAt),author:e.publisher.name,image:e.thumbnailUrl})),o=await Promise.all(a.map(n=>t.tryGet(n.link,async()=>{let t=await e(`https://api.newswav.com/v4/api/v1/web/contents/${n.permalink}`);if(t.contentType===`video`){let e=t.meta.video;return n.description=`<video controls preload="metadata" poster="${e.thumbnailUrl}"><source src="${e.videoUrl}" type="${e.mimeType}"></video><br>${e.content}`,n}else if(t.contentType===`podcast`){let e=t.meta.podcast;return n.description=`<audio controls"><source src="${e.url}" type="audio/mpeg"></audio><br>${e.content}`,n.enclosure_type=`audio/mpeg`,n}let i=t.meta.article,a=r(i.content);a(`*`).contents().filter((e,t)=>t.type===`comment`&&t.data.trim()===`AD`).remove(),a(`iframe`).each((e,t)=>{let n=a(t);(n.attr(`src`)?.includes(`ga4-track.html`)||n.attr(`src`)?.includes(`ga4-v2-track.html`))&&n.remove()}),n.description=a.html();let o=new URL(i.originalUrl);return n.image=o.pathname.startsWith(`/1000x0,q50=/`)?o.pathname.replace(`/1000x0,q50=/`,``):o.pathname,n})));return{title:`Newswav - Malaysiaâ€™s #1 Content Aggregator | Malaysia Breaking News, World News, and Latest News`,description:`Latest news, videos and podcasts on Politics, Lifestyle, Sports, Current Affairs, Business & Finance, Entertainment and more from Malaysia & around the world.`,link:`${i}/latest`,item:o}}export{i as route};