import"./esm-shims-rNwigI-Q.js";import{config as e}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as t}from"./ofetch-CeMUzp5K.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{load as r}from"cheerio";const i={path:`/home/:column?`,categories:[`new-media`],example:`/jumeili/home`,parameters:{column:"内容栏, 默认为 `0`（最新）。其他可选：`-1`（头条）、`62073`（精选）、`13243`（年度大会）等。详细可以在开发者工具 Network 面板中找到，如：`https://www.jumeili.cn/ws/AjaxService.ashx?act=index_article&page=1&pageSize=20&column=0`最后的 `column=0` 即为`column` 参数"},features:{requireConfig:[{name:`JUMEILI_COOKIE`,optional:!0,description:"用户登录后，可以从浏览器开发者工具 Network 面板中的 jumeili 页面请求获取 Cookie，如：`ASP.NET_SessionId=xxx;jmlweb4=xxx`全部复制并设置为环境变量"}],antiCrawler:!0},radar:[{source:[`www.jumeili.cn/`,`jumeili.cn/`],target:`/home/:column?`}],name:`首页资讯`,maintainers:[`kjasn`],handler:a,description:`::: Warning
未登录用户无法获取完整文章内容，只能看到预览内容。想要获取完整文章内容，需要设置\`JUMEILI_COOKIE\`环境变量。
:::`};async function a(i){let a=`https://www.jumeili.cn`,o=`${a}/ws/AjaxService.ashx?act=index_article&page=1&pageSize=20&column=${i.req.param(`column`)??0}`,s=e.jumeili.cookie,c=await t(o,{headers:{referer:a,"user-agent":e.trueUA,accept:`application/json, text/javascript, */*; q=0.01`,cookie:s}}),l=JSON.parse(c);l&&typeof l==`string`&&(l=JSON.parse(l));let u=l.items.map(e=>({title:e.title,link:a+e.url,description:e.subject,image:e.imgurl,author:e.author}));return s&&(u=await Promise.all(u.map(i=>n.tryGet(i.link,async()=>{let n=r(await t(i.link,{headers:{referer:a,"user-agent":e.trueUA,accept:`application/json, text/javascript, */*; q=0.01`,cookie:s}}))(`#Cnt-Main-Article-JML`).html();return n&&(i.description=n),i})))),{title:`聚美丽 - 首页资讯`,item:u}}export{i as route};