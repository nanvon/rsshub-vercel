import{n as e,t}from"./esm-shims-D5mxTuu_.mjs";import"./config-CDM38Tpk.mjs";import"./logger-B0B1yUZ6.mjs";import"./proxy-C5z7n5yb.mjs";import{t as n}from"./render-D2i47mnC.mjs";import{n as r}from"./puppeteer-DPFHKzcy.mjs";import i from"node:path";import*as a from"cheerio";e();const o=`dm514/new`,s={path:`/new`,categories:[`multimedia`],example:`/missav/new`,features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`missav.ws/${o}`,`missav.ws/new`,`missav.ws/`]},{source:[`missav.ai/${o}`,`missav.ai/new`,`missav.ai/`]}],name:`最近更新`,maintainers:[`TonyRL`],handler:c,url:`missav.ws/dm397/new`};async function c(){let e=`https://missav.ws`,s=`${e}/${o}`,c=await r(),l=await c.newPage();await l.setRequestInterception(!0),l.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`||e.resourceType()===`xhr`?e.continue():e.abort()}),await l.goto(s,{waitUntil:`domcontentloaded`});let u=await l.evaluate(()=>document.documentElement.innerHTML);await c.close();let d=a.load(u),f=d(`.grid .group`).toArray().map(e=>{let r=d(e),a=r.find(`.text-secondary`),o=new URL(r.find(`img`).data(`src`));o.searchParams.set(`class`,`normal`);let s=r.find(`video`).data(`src`);return{title:a.text().trim(),link:a.attr(`href`),description:n(i.join(t,`templates/preview-33dc747c.art`),{poster:o.href,video:s,type:s.split(`.`).pop()})}});return{title:d(`head title`).text(),description:d(`head meta[name="description"]`).attr(`content`),link:e,item:f}}export{s as route};