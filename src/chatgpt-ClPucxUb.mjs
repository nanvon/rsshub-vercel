import"./ofetch-BRplXtiZ.mjs";import{t as e}from"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t}from"./cache-Bv3_kFbE.mjs";import"./helpers-Tm7Pw8Vq.mjs";import{t as n}from"./got-BglkE51W.mjs";import{load as r}from"cheerio";import i from"dayjs";import a from"dayjs/plugin/isSameOrBefore.js";i.extend(a);const o={path:`/chatgpt/release-notes`,categories:[`program-update`],example:`/openai/chatgpt/release-notes`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`ChatGPT - Release Notes`,maintainers:[],handler:s};async function s(){let a=`https://help.openai.com/en/articles/6825453-chatgpt-release-notes`,o=await t.tryGet(a,async()=>{let e=[],t=r((await n({method:`get`,url:a})).data),o=JSON.parse(t(`script#__NEXT_DATA__`).text()),s=o.props.pageProps.articleContent.title,c=o.props.pageProps.articleContent.description,l=o.props.pageProps.articleContent.author.name,u=o.props.pageProps.articleContent.blocks,d=i(),f=null,p={},m=d.year(),h=-1;for(let t of u){let n=(t.text||``).trim();if(n)if(t.type===`subheading`){f!==null&&(p.description=p.description.trim().replaceAll(`
`,`<br/>`),e.push(p),p={}),f=n,p.title=f,p.author=l,p.category=`ChatGPT`,p.link=a+`#`+t.idAttribute,p.guid=a+`#`+t.idAttribute,p.description=``;let r=f.match(/\((\w+\s+\d{1,2})\)$/);if(r!==null){let e=1+`Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec`.split(`,`).indexOf(r[1].slice(0,3));h!==-1&&h<e&&m--,h=e;let t=i(`${r[1]}, ${m}`,[`MMMM D, YYYY`,`MMM D, YYYY`],`en`,!0);p.pubDate=i(t.toISOString().replace(/\.\d{3}Z$/,`-08:00`));let n=t.format(`YYYY_MM_DD`);p.guid=a+`#`+n}}else p.description+=t.text.trim()+`

`}return f!==null&&(p.description=p.description.trim().replaceAll(`
`,`<br/>`),e.push(p)),{feedTitle:s,feedDesc:c,items:e}},e.cache.routeExpire,!1);return{title:o.feedTitle,description:o.feedDesc,link:a,item:o.items}}export{o as route};