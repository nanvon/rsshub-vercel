import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import{ofetch_default as e}from"./ofetch-TsvCL7Kz.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{timezone as n}from"./timezone-CMz5pnRe.js";import{ViewType as r}from"./types-Bi82qguM.js";import{load as i}from"cheerio";const a=async r=>{let{category:a=``}=r.req.param(),o=Number.parseInt(r.req.query(`limit`)??`50`,10),s=`https://www.szse.cn`,c=new URL(`api/disc/announcement/annList`,s).href,l=new URL(`disclosure/listed/notice${a}`,s).href,u=await e(l),d=i(u),f=d(`html`).attr(`lang`)??`zh-CN`,p=await e(c,{method:`POST`,body:{seDate:[``,``],channelCode:[`listedNotice_disc`],pageSize:o,pageNum:1}}),m=p.data.slice(0,o).map(e=>{let r=e.title,i=e.publishTime,a=`disclosure/listed/bulletinDetail/index.html?${e.id}`,o=[...new Set([...e.secCode,...e.secName,e.bigCategoryId,e.bigIndustryCode,e.smallCategoryId].filter(Boolean))],c=`szse-${e.id}`,l=e.publishTime,u={title:r,pubDate:i?n(t(i),8):void 0,link:new URL(a,s).href,category:o,guid:c,id:c,updated:l?n(t(l),8):void 0,language:f},d=new URL(`download${e.attachPath}`,`https://disc.static.szse.cn`).href;if(d){let t=`application/${e.attachFormat}`;u={...u,enclosure_url:d,enclosure_type:t,enclosure_title:r,enclosure_length:void 0}}return u}).filter(e=>!0);return{title:`深圳证券交易所 - 上市公司公告`,description:d(`meta[name="description"]`).attr(`content`),link:l,item:m,allowEmpty:!0,image:d(`a.navbar-brand img`).attr(`src`),author:d(`meta[name="author"]`).attr(`content`),language:f,id:l}},o={path:`/disclosure/listed/notice`,name:`上市公司公告`,url:`www.szse.cn`,maintainers:[`nczitzk`],handler:a,example:`/szse/disclosure/listed/notice`,parameters:void 0,description:void 0,categories:[`finance`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.szse.cn/disclosure/listed/notice/index.html`],target:`/disclosure/listed/notice`}],view:r.Articles};export{a as handler,o as route};