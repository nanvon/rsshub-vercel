import{__dirname as e,init_esm_shims as t}from"./esm-shims-DE2PJqdr.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-CJF2SF6b.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-CSnicFA3.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{ViewType as o}from"./types-Bi82qguM.js";import s from"node:path";import{load as c}from"cheerio";t();const l=async t=>{let{category:o=`news`}=t.req.param(),l=Number.parseInt(t.req.query(`limit`)??`7`,10),u=`http://www.ccg.org.cn`,d=new URL(o,u).href,f=await n(d),p=c(f),m=p(`html`).attr(`lang`)??`zh`,h=[];h=p(`ul.huodong-list li`).slice(0,l).toArray().map(t=>{let n=p(t),r=n.find(`h5`).text(),o=n.find(`div.huodong-img img`).attr(`src`),c=i(s.join(e,`templates/description-881baa33.art`),{images:o?[{src:o,alt:r}]:void 0,intro:n.find(`p`).html()}),l=n.find(`span`).text(),u=n.find(`a`).attr(`href`),d=l;return{title:r,description:c,pubDate:l?a(l,`YYYY年M月D日`):void 0,link:u,content:{html:c,text:c},image:o,banner:o,updated:d?a(d,`YYYY年M月D日`):void 0,language:m}}),h=await Promise.all(h.map(t=>t.link?r.tryGet(t.link,async()=>{let r=await n(t.link),o=c(r),l=o(`div.pinpai-page h3`).text(),u=o(`span.time`).text();o(`div.pinpai-page h3`).remove(),o(`div.pinpai-page span.time`).remove();let d=i(s.join(e,`templates/description-881baa33.art`),{description:o(`div.pinpai-page`).html()}),f=u,p={title:l,description:d,pubDate:u?a(u,`YYYY年M月D日`):t.pubDate,content:{html:d,text:d},updated:f?a(f,`YYYY年M月D日`):t.updated,language:m};return{...t,...p}}):t));let g=p(`h1.nav-logo`).first().text();return{title:`${g} - ${p(`title`).text()}`,link:d,item:h,allowEmpty:!0,image:new URL(`wp-content/themes/ccg/imgs/nav-logo.png`,u).href,author:g,language:m,id:d}},u={path:`/:category?`,name:`动态`,url:`www.ccg.org.cn`,maintainers:[`nczitzk`],handler:l,example:`/ccg/news`,parameters:{category:{description:"分类，默认为 `news`，即新闻动态，可在对应分类页 URL 中找到",options:[{label:`新闻动态`,value:`news`},{label:`媒体报道`,value:`mtbd`}]}},description:`:::tip
订阅 [新闻动态](http://www.ccg.org.cn/news)，其源网址为 \`http://www.ccg.org.cn/news\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/ccg/news\`](https://rsshub.app/ccg/news)。
:::

| 分类                                   | ID                                  |
| -------------------------------------- | ----------------------------------- |
| [新闻动态](http://www.ccg.org.cn/news) | [news](https://rsshub.app/ccg/news) |
| [媒体报道](http://www.ccg.org.cn/mtbd) | [mtbd](https://rsshub.app/ccg/mtbd) |
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.ccg.org.cn/category`],target:`/:category`},{title:`新闻动态`,source:[`www.ccg.org.cn/news`],target:`/news`},{title:`媒体报道`,source:[`www.ccg.org.cn/mtbd`],target:`/mtbd`}],view:o.Articles};export{l as handler,u as route};