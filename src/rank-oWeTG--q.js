import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-am9EnuPq.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{ViewType as i}from"./types-Bi82qguM.js";import{load as a}from"cheerio";const o=async i=>{let{id:o=`yw`}=i.req.param(),s=Number.parseInt(i.req.query(`limit`)??`30`,10),c=`https://www.stcn.com`,l=new URL(`article/list/${o}.html`,c).href,u=new URL(`article/category-news-rank.html`,c).href,d=await e(u,{headers:{"x-requested-with":`XMLHttpRequest`},query:{type:o}}),f=await e(l),p=a(f),m=p(`html`).attr(`lang`)??`zh-CN`,h=[];return h=d.data.slice(0,s).map(e=>{let t=e.title,n=e.url;return{title:t,link:n?new URL(n,c).href:void 0,language:m}}),h=(await Promise.all(h.map(i=>i.link?t.tryGet(i.link,async()=>{let t=await e(i.link),o=a(t),s=o(`div.detail-title`).text(),c=o(`div.detail-content`).html()??``,l=o(`div.detail-info span`).last().text().trim(),u=o(`meta[name="keywords"]`).attr(`content`)?.split(/,/)??[],d=o(`div.detail-info span`).first().text().split(/：/).pop(),f=l,p={title:s,description:c,pubDate:l?r(n(l),8):i.pubDate,category:u,author:d,content:{html:c,text:c},updated:f?r(n(f),8):i.updated,language:m};return{...i,...p}}):i))).filter(e=>!0),{title:p(`title`).text(),description:p(`meta[name="description"]`).attr(`content`),link:l,item:h,allowEmpty:!0,image:p(`img.stcn-logo`).attr(`src`),author:p(`meta[name="keywords"]`).attr(`content`)?.split(/,/)[0],language:m,id:l}},s={path:`/article/rank/:id?`,name:`热榜`,url:`www.stcn.com`,maintainers:[`nczitzk`],handler:o,example:`/stcn/article/rank/yw`,parameters:{category:{description:"分类，默认为 `yw`，即要闻，可在对应分类页 URL 中找到",options:[{label:`要闻`,value:`yw`},{label:`股市`,value:`gs`},{label:`公司`,value:`company`},{label:`基金`,value:`fund`},{label:`金融`,value:`finance`},{label:`评论`,value:`comment`},{label:`产经`,value:`cj`},{label:`科创板`,value:`kcb`},{label:`新三板`,value:`xsb`},{label:`ESG`,value:`zk`},{label:`滚动`,value:`gd`}]}},description:"::: tip\n若订阅 [要闻](https://www.stcn.com/article/list/yw.html)，网址为 `https://www.stcn.com/article/list/yw.html`，请截取 `https://www.stcn.com/article/list/` 到末尾 `.html` 的部分 `yw` 作为 `id` 参数填入，此时目标路由为 [`/stcn/article/rank/yw`](https://rsshub.app/stcn/article/rank/yw)。\n:::\n\n| 要闻 | 股市 | 公司    | 基金 | 金融    | 评论    |\n| ---- | ---- | ------- | ---- | ------- | ------- |\n| yw   | gs   | company | fund | finance | comment |\n\n| 产经 | 科创板 | 新三板 | ESG | 滚动 |\n| ---- | ------ | ------ | --- | ---- |\n| cj   | kcb    | xsb    | zk  | gd   |\n",categories:[`finance`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/:id`],target:(e,t)=>{let n=new URL(t).searchParams.get(`type`)??e.id;return`/stcn/article/rank${n?`/${n}`:``}`}},{title:`要闻`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/yw.html`],target:`/article/rank/yw`},{title:`股市`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/gs.html`],target:`/article/rank/gs`},{title:`公司`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/company.html`],target:`/article/rank/company`},{title:`基金`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/fund.html`],target:`/article/rank/fund`},{title:`金融`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/finance.html`],target:`/article/rank/finance`},{title:`评论`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/comment.html`],target:`/article/rank/comment`},{title:`产经`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/cj.html`],target:`/article/rank/cj`},{title:`科创板`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/kcb.html`],target:`/article/rank/kcb`},{title:`新三板`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/xsb.html`],target:`/article/rank/xsb`},{title:`ESG`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/zk.html`],target:`/article/rank/zk`},{title:`滚动`,source:[`www.stcn.com/article/list.html`,`www.stcn.com/article/list/gd.html`],target:`/article/rank/gd`}],view:i.Articles};export{o as handler,s as route};