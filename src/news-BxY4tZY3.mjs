import"./esm-shims-L08rKynx.mjs";import"./config-Bs8nOQqi.mjs";import"./logger-BvLYiR5T.mjs";import"./ofetch-1TBKTiHL.mjs";import"./helpers-mo8InLYm.mjs";import{t as e}from"./cache-BDs-9Wd7.mjs";import{t}from"./got-Be7Twwza.mjs";import*as n from"node:url";import r from"node:querystring";const i=`http://jw.scut.edu.cn`,a=i+`/dist/`;i+``,i+``,i+``;const o=e=>`${i}/zhinan/cms/article/view.do?type=posts&id=${e}`,s=e=>`${i}/dist/#/detail/index?id=${e}&type=news`,c=e=>{let t=e.getTimezoneOffset()/60;return new Date(e.getTime()-3600*1e3*(8+t))},l=e=>{let t=new Date(e);return t.setHours(8),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),c(t)},u=e=>!!e.link,d=e=>e.replaceAll(`src="/`,`src="${n.resolve(i,`.`)}`).replaceAll(`href="/`,`href="${n.resolve(i,`.`)}`),f=e=>{if(!e.success)throw Error(`article api error`)},p=e=>e?`<p><img src="${e}"></p>`:``,m=e=>`<p>链接：<a href="${o(e)}">电脑版</a>&nbsp;|&nbsp;<a href="${s(e)}">手机版</a></p>`,h=e=>p(e.bannerUrl)+d(e.content)+m(e.id),g={path:`/jwc/news`,categories:[`university`],example:`/scut/jwc/news`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`教务处新闻动态`,maintainers:[`imkero`],handler:_};async function _(){let n=await t({method:`post`,url:`http://jw.scut.edu.cn/zhinan/jw/api/v2/findNewsTrends.do?${r.stringify({pageNo:1,pageSize:20})}`,headers:{Referer:a}});f(n.data);let i=n.data.data.list;return{title:`华南理工大学教务处新闻动态`,link:`http://jw.scut.edu.cn/zhinan/cms/toNews.do`,item:await Promise.all(i.map(async n=>{let i=o(n.id),s=await e.get(i);if(s)return JSON.parse(s);let c=await t({method:`post`,url:`http://jw.scut.edu.cn/zhinan/jw/api/v2/getArticleInfo.do?${r.stringify({id:n.id,categoryType:``})}`,headers:{Referer:a}});f(c.data);let d=c.data.data;d.id=n.id;let p=null;u(d)||(p=h(d));let m={title:d.name,link:i,description:p,pubDate:l(d.createDate).toUTCString()};return e.set(i,JSON.stringify(m)),m}))}}export{g as route};