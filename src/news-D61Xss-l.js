import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-CmdBCkM8.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{load as i}from"cheerio";import a from"node:querystring";const o={url:`idolmaster-official.jp/news`,path:`/news/:routeParams?`,categories:[`anime`],example:`/idolmaster/news/brand=MILLIONLIVE&brand=SHINYCOLORS&category=GAME&category=ANIME`,parameters:{routeParams:"The `brand` and `category` params in the path. The available values are as follows."},description:`**Brand**
| THE IDOLM@STER | シンデレラガールズ | ミリオンライブ！ | SideM | シャイニーカラーズ | 学園アイドルマスター | その他 |
| -------------- | --------------- | ------------- | ----- | --------------- | ----------------- | ----- |
| IDOLMASTER | CINDERELLAGIRLS | MILLIONLIVE | SIDEM | SHINYCOLORS | GAKUEN | OTHER |

**Category**
| ゲーム | ライブ・イベント | アニメ | 配信番組 | ラジオ | グッズ | コラボ・キャンペーン | ミュージック | ブック・コミック | メディア | その他 |
| ----- | ------------- | ----- | ------- | ----- | ----- | ----------------- | --------- | -------------- | ------ | ----- |
| GAME | LIVE-EVENT | ANIME | LIVESTREAM | RADIO | GOODS | COLLABO-CAMP | CD | BOOK | MEDIA | OTHER |
    `,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`idolmaster-official.jp/news`],target:`/news`}],name:`ニュース News`,maintainers:[`keocheung`],handler:c},s=`https://cmsapi-frontend.idolmaster-official.jp`;async function c(o){let c=`${s}/sitern/api/cmsbase/Token/get`,u=(await n(c)).data.data.token,d={category:[`NEWS`]},f=o.req.param(`routeParams`);if(f){let e=a.parse(f);d.subcategory=l(e.category),d.brand=l(e.brand)}let p=o.req.query(`limit`),m=p?Number.parseInt(p):12;m>30&&(m=30);let h=`${s}/sitern/api/idolmaster/Article/list?site=jp&ip=idolmaster&token=${u}&sort=desc&data=${JSON.stringify(d)}&limit=${m}&start=0`,g=(await n(h)).data.data.article_list.map(e=>({title:e.title,link:e.url,pubDate:r(t(e.dspdate),9),category:e.categories.subcategory.map(e=>e.name)}));return g=await Promise.all(g.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link),r=i(e.data);return t.description=`<div lang="ja">${JSON.parse(r(`script#__NEXT_DATA__`).text()).props.pageProps.data.content?.replaceAll(`<img src="`,`<img src="${s}/sitern/api/idolmaster/Image/get?path=`)}</div>`,t}))),{title:`NEWS | アイドルマスター`,link:`https://idolmaster-official.jp/news`,item:g,language:`ja`}}function l(e){return e&&(typeof e==`string`?e.toUpperCase():e.map(e=>e.toUpperCase()))}export{o as route};