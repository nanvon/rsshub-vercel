import{n as e,t}from"./esm-shims-C3MSy80G.mjs";import"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import{t as n}from"./ofetch-Byd8Ct7M.mjs";import{t as r}from"./render-ZYpwNl2L.mjs";import{t as i}from"./parse-date-9Tu6hSFW.mjs";import{t as a}from"./types-zV-JXsJH.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c=async e=>{let{id:a=`hotspot`}=e.req.param(),c=Number.parseInt(e.req.query(`limit`)??`30`,10),l=`https://www.wainao.me`,u=new URL(`topics/${a}`,l).href,d=new URL(`pf/api/v3/content/fetch/story-feed-sections`,l).href,f=await n(d,{query:{query:JSON.stringify({feedOffset:0,feedSize:c,includeSections:`/topics/${a}`}),d:81,_website:`wainao`}}),p=s(await n(u)),m=p(`html`).attr(`lang`)??`zh-CN`,h=[];return h=f.content_elements.slice(0,c).map(e=>{let n=e.headlines.basic,a=r(o.join(t,`templates/description-2b521c43.art`),{elements:e.content_elements}),s=e.publish_date,c=e.website_url,u=[e.taxonomy?.primary_section?.name].filter(Boolean),d=e.credits?.by?.map(e=>({name:e.name}))??[],f=e.website_url,p=e.promo_items.basic.url,h=e.last_updated_date;return{title:n,description:a,pubDate:s?i(s):void 0,link:c?new URL(c,l).href:void 0,category:u,author:d,guid:f,id:f,content:{html:a,text:a},image:p,banner:p,updated:h?i(h):void 0,language:m}}).filter(e=>!0),{title:p(`title`).text(),description:p(`meta[property="og:title"]`).attr(`content`),link:u,item:h,allowEmpty:!0,image:p(`meta[property="og:image"]`).attr(`content`),author:p(`meta[property="og:site_name"]`).attr(`content`),language:m,id:u}},l={path:`/topics/:id?`,name:`主题`,url:`wainao.me`,maintainers:[`nczitzk`],handler:c,example:`/wainao/topics/hotspot`,parameters:{id:{description:"主题 id，默认为 `hotspot`，即热点，可在对应主题页 URL 中找到",options:[{label:`热点`,value:`hotspot`},{label:`人物`,value:`people`},{label:`身份`,value:`identity`},{label:`政治`,value:`politics`},{label:`社会`,value:`society`},{label:`文化`,value:`culture`},{label:`经济`,value:`economics`},{label:`环境`,value:`environment`},{label:`FUN`,value:`fun`}]}},description:"::: tip\n若订阅 [人物](https://www.wainao.me/topics/people)，网址为 `https://www.wainao.me/topics/people`，请截取 `https://www.wainao.me/topics/` 到末尾的部分 `people` 作为 `id` 参数填入，此时目标路由为 [`/wainao/topics/people`](https://rsshub.app/wainao/topics/people)。\n:::\n\n| [热点](https://www.wainao.me/topics/hotspot)        | [人物](https://www.wainao.me/topics/people)       | [身份](https://www.wainao.me/topics/identity)         | [政治](https://www.wainao.me/topics/politics)         | [社会](https://www.wainao.me/topics/society)        | [文化](https://www.wainao.me/topics/culture)        | [经济](https://www.wainao.me/topics/economics)          | [环境](https://www.wainao.me/topics/environment)            | [FUN](https://www.wainao.me/topics/fun)     |\n| --------------------------------------------------- | ------------------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- | --------------------------------------------------- | --------------------------------------------------- | ------------------------------------------------------- | ----------------------------------------------------------- | ------------------------------------------- |\n| [hotspot](https://rsshub.app/wainao/topics/hotspot) | [people](https://rsshub.app/wainao/topics/people) | [identity](https://rsshub.app/wainao/topics/identity) | [politics](https://rsshub.app/wainao/topics/politics) | [society](https://rsshub.app/wainao/topics/society) | [culture](https://rsshub.app/wainao/topics/culture) | [economics](https://rsshub.app/wainao/topics/economics) | [environment](https://rsshub.app/wainao/topics/environment) | [fun](https://rsshub.app/wainao/topics/fun) |\n",categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.wainao.me/topics/:id`],target:`/topics/:id`},{title:`热点`,source:[`www.wainao.me/topics/hotspot`],target:`/topics/hotspot`},{title:`人物`,source:[`www.wainao.me/topics/people`],target:`/topics/people`},{title:`身份`,source:[`www.wainao.me/topics/identity`],target:`/topics/identity`},{title:`政治`,source:[`www.wainao.me/topics/politics`],target:`/topics/politics`},{title:`社会`,source:[`www.wainao.me/topics/society`],target:`/topics/society`},{title:`文化`,source:[`www.wainao.me/topics/culture`],target:`/topics/culture`},{title:`经济`,source:[`www.wainao.me/topics/economics`],target:`/topics/economics`},{title:`环境`,source:[`www.wainao.me/topics/environment`],target:`/topics/environment`},{title:`FUN`,source:[`www.wainao.me/topics/fun`],target:`/topics/fun`}],view:a.Articles};export{c as handler,l as route};