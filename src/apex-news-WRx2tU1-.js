import"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as e}from"./ofetch-CfXAR0UO.js";import{t}from"./cache-CpEhLexq.js";import{t as n}from"./parse-date-CHEO0z5G.js";import{t as r}from"./types-Bn7An2Wc.js";import{t as i}from"./invalid-parameter-CLGd_tte.js";import a from"markdown-it";const o=a({html:!0,breaks:!0}),s=new Set([`zh-hant`,`en`]),c=new Set([`latest`,`game-updates`,`news-article`]);async function l(r){let{lang:a=`en`,type:l=`latest`}=r.req.param(),u=new URLSearchParams({limit:`13`,gameSlug:`apex-legends`,offset:`0`});if(!s.has(a))throw new i(`Invalid language: ${a}`);if(!c.has(l))throw new i(`Invalid type: ${l}`);l!==`latest`&&u.append(`typeSlug`,l),a!==`en`&&u.append(`locale`,a);let d=await e(`https://drop-api.ea.com/news-articles/pagination?${u}`),f=[d.featured,...d.items].filter(Boolean).map(e=>({title:e.title,description:e.summary,link:`https://www.ea.com${a===`en`?`/`:`/`+a+`/`}games/apex-legends/apex-legends/news/${e.slug}`,pubDate:n(e.publishingDate),slug:e.slug})),p=await Promise.all(f.map(n=>t.tryGet(n.link??``,async()=>{let t=await e(`https://drop-api.ea.com/news-articles/${n.slug}${a===`en`?``:`?locale=`+a}`);return n.description=o.render(t.body),n})));return{title:`Apex Legends 官网资讯${l===`latest`?``:`（${l===`news-article`?`最新消息`:`游戏更新`}）`}`,link:`https://www.ea.com${a===`en`?`/`:`/`+a+`/`}games/apex-legends/apex-legends/news${l===`latest`?``:`?type=${l}`}`,item:p.map(e=>({title:e.title,description:e.description,link:e.link,pubDate:e.pubDate})),image:`https://drop-assets.ea.com/images/F1GeiHWipvvKj7GtUVP3U/31bb122451e2dea6d14c9b497f8e09d4/apex-white-nav-logo.svg`}}const u={path:`/apex-news/:lang?/:type?`,categories:[`game`],example:`/ea/apex-news/zh-hant/game-updates`,parameters:{lang:{description:`语言`,options:[{value:`zh-hant`,label:`中文(繁体)`},{value:`en`,label:`English`}],default:`en`},type:{description:`资讯类型（可选）`,options:[{value:`news-article`,label:`最新消息`},{value:`game-updates`,label:`游戏更新`},{value:`latest`,label:`全部`}],default:`latest`}},name:`APEX Legends 官网资讯`,maintainers:[`IceChestnut`],handler:l,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},view:r.Articles};export{u as route};