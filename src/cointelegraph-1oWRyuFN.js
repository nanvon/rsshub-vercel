import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import{logger_default as e}from"./logger-BvonkID1.js";import{ofetch_default as t}from"./ofetch-CeMUzp5K.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{rss_parser_default as i}from"./rss-parser-PDXVbDgf.js";import{load as a}from"cheerio";const o={path:`/`,categories:[`finance`],example:`/cointelegraph`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`News`,maintainers:[`pseudoyu`],handler:s,radar:[{source:[`cointelegraph.com/`],target:`/`}],description:`Get latest news from Cointelegraph with full text.`};async function s(){let t=await i.parseURL(`https://cointelegraph.com/rss`),a=(await Promise.all(t.items.filter(e=>e.link&&/\/news|\/explained|\/innovation-circle/.test(e.link)).map(e=>({...e,link:e.link?.split(`?`)[0]})).map(t=>n.tryGet(t.link,async()=>{let n=t.link,i=await c(n);return i||e.warn(`Failed to extract content from ${n}`),{title:t.title||`Untitled`,description:i||t.content,pubDate:t.pubDate?r(t.pubDate):void 0,link:n,author:t.creator||`CoinTelegraph`,category:t.categories?.map(e=>e.trim())||[],image:t.enclosure?.url}})))).filter(e=>e!==null);return{title:t.title||`CoinTelegraph News`,link:t.link||`https://cointelegraph.com`,description:t.description||`Latest news from CoinTelegraph`,language:t.language||`en`,item:a}}async function c(n){try{let e=a(await t(n)),r=e(`script:contains("window.__NUXT__")`).text(),i=JSON.parse(r.match(/\.fullText=(".*?");/)?.[1]||`{}`),o=e(`.post-cover__image`);return o.find(`source`).remove(),o.find(`img`).removeAttr(`srcset`),o.find(`img`).attr(`src`,o.find(`img`).attr(`src`)?.match(/(https:\/\/s3\.cointelegraph\.com\/.+)/)?.[1]||``),o.html()+i||null}catch(t){return e.error(`Error fetching article content: ${t}`),null}}export{o as route};