import{n as e,t}from"./esm-shims-D4LgnpSl.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-CvLG4YCQ.mjs";import"./helpers-mo8InLYm.mjs";import{t as n}from"./cache-ZTWfXd2T.mjs";import{t as r}from"./render-CBhnapAf.mjs";import{t as i}from"./parse-date-bKmkZ9gg.mjs";import{t as a}from"./got-AYh7EWi-.mjs";import{t as o}from"./types-BD1MU_-b.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l={path:`/category/:category/:staffpicks?`,categories:[`social-media`],view:o.Videos,example:`/vimeo/category/documentary/staffpicks`,parameters:{category:"Category name can get from url like `documentary` in [https://vimeo.com/categories/documentary/videos](https://vimeo.com/categories/documentary/videos) ",staffpicks:"type `staffpicks` to sort with staffpicks"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Category`,maintainers:[`MisteryMonster`],handler:u};async function u(e){let{category:o,staffpicks:l}=e.req.param(),u=o,d=`&direction=desc&sort=date`,f=o;if(l&&l!==`staffpicks`)return;l&&(d+=`&filter=conditional_featured`,f+=`: ${o} staffpicks`);let p=`https://api.vimeo.com/categories/${u}/videos?page=1&per_page=18${d}`,m=(await a({method:`get`,url:`https://vimeo.com/_rv/viewer`})).data.jwt,h=(await a({method:`get`,url:p,headers:{Authorization:`jwt ${m}`}})).data.data,g=`https://vimeo.com/categories/${o}/videos/sort:latest`,_=`?staffpicked=true`,v=await n.tryGet(g+(l?_:``),async()=>c((await a({url:g+(l?_:``)})).data)(`meta[name="description"]`).attr(`content`));return{title:`${f} | Vimeo category`,link:g+(l?_:``),description:v,item:h.map(e=>({title:e.name,description:r(s.join(t,`templates/description-f7979603.art`),{videoUrl:e.uri.replace(`/videos`,``),vdescription:e.description||``}),pubDate:i(e.created_time),link:e.link,author:e.user.name}))}}export{l as route};