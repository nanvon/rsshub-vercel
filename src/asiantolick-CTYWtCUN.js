import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import"./ofetch-B4O0sZDE.js";import"./helpers-LVq640iW.js";import{cache_default as n}from"./cache-CjzVN0X7.js";import{art as r}from"./render-DE4LRFBD.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-CW2W8CRN.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/:category{.+}?`,radar:[{source:[`asiantolick.com/`],target:``}],name:`Unknown`,maintainers:[],handler:l,url:`asiantolick.com/`};async function l(t){let c=t.req.param(`category`),l=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):24,u=`https://asiantolick.com`,d=new URL(`ajax/buscar_posts.php`,u).href,f=new URL(c?.replace(/^(tag|category)?\/(\d+)/,`$1-$2`)??``,u).href,p={},m=c?.match(/^(tag|category|search|page)?[/-]?(\w+)/)??void 0;if(m){let e=m[1]===`category`?`cat`:m[1],t=m[2];p[e]=t}else c&&(p.page=`news`);let{data:h}=await a(d,{searchParams:p}),g=s(h),_=g(`a.miniatura`).slice(0,l).toArray().map(t=>{t=g(t);let n=t.find(`div.background_miniatura img`);return{title:t.find(`div.base_tt`).text(),link:t.prop(`href`),description:r(o.join(e,`templates/description-659ed52a.art`),{images:n?[{src:n.prop(`data-src`).split(/\?/)[0],alt:n.prop(`alt`)}]:void 0}),author:t.find(`.author`).text(),category:t.find(`.category`).toArray().map(e=>g(e).text()),guid:n?n.prop(`post-id`):t.link.match(/\/(\d+)/)[1]}});_=await Promise.all(_.map(t=>n.tryGet(t.link,async()=>{let{data:n}=await a(t.link),c=s(n);return t.title=c(`h1`).first().text(),t.description=r(o.join(e,`templates/description-659ed52a.art`),{description:c(`#metadata_qrcode`).html(),images:c(`div.miniatura`).toArray().map(e=>({src:c(e).prop(`data-src`),alt:c(e).find(`img`).prop(`alt`)}))}),t.author=c(`.author`).text(),t.category=c(`#categoria_tags_post a`).toArray().map(e=>c(e).text().trim().replace(/^#/,``)),t.pubDate=i(n.match(/"pubDate":\s"((?!http)[^"]*)"/)[1]),t.updated=i(n.match(/"upDate":\s"((?!http)[^"]*)"/)[1]),t.enclosure_url=new URL(`ajax/download_post.php?ver=3&dir=/down/new_${t.guid}&post_id=${t.guid}&post_name=${n.match(/"title":\s"((?!http)[^"]*)"/)[1]}`,u).href,t.guid=`asiantolick-${t.guid}`,t})));let{data:v}=await a(f);g=s(v);let y=g(`title`).text().split(/-/)[0].trim(),b=g(`link[rel="icon"]`).first().prop(`href`);return{item:_,title:y===`Asian To Lick`?y:`Asian To Lick - ${y}`,link:f,description:g(`meta[property="og:description"]`).prop(`content`),language:g(`html`).prop(`lang`),image:g(`meta[name="msapplication-TileImage"]`).prop(`content`),icon:b,logo:b,subtitle:y,allowEmpty:!0}}export{c as route};