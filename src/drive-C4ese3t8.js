import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import{ofetch_default as n}from"./ofetch-B4O0sZDE.js";import{art as r}from"./render-DE4LRFBD.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{invalid_parameter_default as a}from"./invalid-parameter-B0jPSaWz.js";import o from"node:path";t();const s={path:`/drive/:selName`,categories:[`program-update`],example:`/lenovo/drive/PF3WRD2G`,parameters:{selName:`产品序列号`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`lenovo.com.cn`],target:`/drive/:selName`}],name:`驱动`,maintainers:[`cscnk52`],handler:c};async function c(t){let s=t.req.param(`selName`),c=`https://newsupport.lenovo.com.cn/api/drive/drive_listnew?searchKey=${s}`,l=await n(c);if(l.statusCode!==200)throw new a(`无效序列号, 请检查你的序列号是否正确.`);let u=l.data.partList.flatMap(e=>e.drivelist),d=u.map(t=>({title:`${t.DriverName} ${t.Version}`,link:`https://newsupport.lenovo.com.cn/driveDownloads_detail.html?driveId=${t.DriverEdtionId}`,description:r(o.join(e,`templates/drive-2802e117.art`),{driveName:t.DriverName,driveCode:t.DriverCode,driveVersion:t.Version,downloadFileName:t.FileName,downloadFilePath:t.FilePath}),pubDate:i(t.CreateTime,8)}));return{title:`${l.data.driverSerious[0].NodeCode} 驱动`,item:d,language:`zh-CN`}}export{c as handler,s as route};