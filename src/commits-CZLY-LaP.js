import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import"./ofetch-B4O0sZDE.js";import"./helpers-LVq640iW.js";import{cache_default as t}from"./cache-CjzVN0X7.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{got_default as r}from"./got-CW2W8CRN.js";import i from"markdown-it";const a=i({html:!0}),o={path:`/commits/:owner/:repo`,categories:[`programming`],example:`/gitee/commits/y_project/RuoYi`,parameters:{owner:`用户名`,repo:`仓库名`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`gitee.com/:owner/:repo/commits`]}],name:`仓库提交`,maintainers:[`TonyRL`],handler:s};async function s(i){let{owner:o,repo:s}=i.req.param(),c=`https://gitee.com/api/v5/repos/${o}/${s}/commits`,l=await t.tryGet(c,async()=>(await r(c,{searchParams:{access_token:e.gitee.access_token??void 0,per_page:i.req.query(`limit`)?Number(i.req.query(`limit`)):100,direction:`desc`}})).data),u=l.map(e=>({title:a.renderInline(e.commit.message),description:a.render(e.commit.message),author:e.author?.login||e.commit.author.name,pubDate:n(e.commit.author.date),guid:e.sha,link:e.html_url}));return{title:`${o}/${s} - 提交`,link:`https://gitee.com/${o}/${s}/commits`,item:u}}export{o as route};