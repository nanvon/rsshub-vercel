import"./esm-shims-wKwH419_.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-CTnfpkZH.js";import"./helpers-DzX-lcQO.js";import"./ofetch-CltKKWIZ.js";import{got_default as e}from"./got-CHeNfUPv.js";import{load as t}from"cheerio";const n={path:`/commercialpress/latest`,categories:[`social-media`],example:`/douban/commercialpress/latest`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`商务印书馆新书速递`,maintainers:[`xyqfer`],handler:r};async function r(){let n=`https://site.douban.com/commercialpress/room/827243/`,{data:r}=await e({method:`get`,url:n,headers:{Referer:`https://site.douban.com/commercialpress/`}}),i=t(r),a=i(`.mod`).eq(0),o=a.find(`.hd > h2 span`).eq(0).text(),s=a.find(`.pl a`).attr(`href`),c=await e({method:`get`,url:s,headers:{Referer:n}}),l=`${c.request.options.url.href}?sort=time&sub_type=`,u=await e({method:`get`,url:l,headers:{Referer:n}});i=t(u.data);let d=i(`.doulist-item`).toArray().map(e=>{let t=i(e);return{title:t.find(`.title > a`).text(),link:t.find(`.title > a`).attr(`href`),description:`<img src="${t.find(`.post img`).attr(`src`)}" /><br>${t.find(`.abstract`).html()}`,pubDate:new Date(t.find(`.time > span`).attr(`title`)).toUTCString()}});return{title:`商务印书馆-${o}`,link:n,item:d}}export{n as route};