import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CISb_5Uo.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BOnMlRH6.js";import{load as r}from"cheerio";const i={path:`/dwxgb/:category/:type`,categories:[`university`],example:`/bnu/dwxgb/xwzx/tzgg`,parameters:{category:`大分类`,type:`子分类，例子如下`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`dwxgb.bnu.edu.cn/:category/:type/index.html`]}],name:`党委学生工作部`,maintainers:[`Fatpandac`],handler:a,description:"`https://dwxgb.bnu.edu.cn/xwzx/tzgg/index.html` 则对应为 `/bnu/dwxgb/xwzx/tzgg"};async function a(i){let{category:a,type:o}=i.req.param(),s=`https://dwxgb.bnu.edu.cn`,c=`${s}/${a}/${o}/index.html`,l;try{l=await n(c)}catch{try{l=await n(`${s}/${a}/${o}/index.htm`)}catch{return}}let u=r(l.data),d=u(`ul.container.list > li`).toArray().map(e=>{let n=u(e).find(`a`).attr(`href`),r=new URL(n,c).href;return{title:u(e).find(`a`).text().trim(),pubDate:t(u(e).find(`span`).text()),link:r}}),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link);return t.description=r(e.data)(`div.article.typo`).html(),t})));return{title:`${u(`div.breadcrumb1 > a:nth-child(3)`).text()} - ${u(`div.breadcrumb1 > a:nth-child(4)`).text()}`,link:c,item:f}}export{i as route};