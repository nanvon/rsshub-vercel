import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import"./proxy-BWTHIgpJ.js";import{cache_default as r}from"./cache-CjzVN0X7.js";import{art as i}from"./render-DE4LRFBD.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{puppeteer_default as o}from"./puppeteer-C5Xfeo1L.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/journal/:id`,radar:[{source:[`pubs.acs.org/journal/:id`,`pubs.acs.org/`]}],name:`Unknown`,maintainers:[`nczitzk`],handler:u};async function u(t){let l=t.req.param(`id`)??``,u=`https://pubs.acs.org`,d=`${u}/toc/${l}/0/0`,f=``,p=await o(),m=await r.tryGet(d,async()=>{let t=await p.newPage();await t.setRequestInterception(!0),t.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),await t.goto(d,{waitUntil:`domcontentloaded`}),await t.waitForSelector(`.toc`);let n=await t.evaluate(()=>document.documentElement.innerHTML);await t.close();let r=c(n);return f=r(`meta[property="og:title"]`).attr(`content`),r(`.issue-item`).toArray().map(t=>{t=r(t);let n=t.find(`.issue-item_title a`),o=t.find(`input[name="doi"]`).attr(`value`);return{doi:o,guid:o,title:n.text(),link:`${u}${n.attr(`href`)}`,pubDate:a(t.find(`.pub-date-value`).text(),`MMMM D, YYYY`),author:t.find(`.issue-item_loa li`).toArray().map(e=>r(e).text()).join(`, `),description:i(s.join(e,`templates/description-78b7ee2b.art`),{image:t.find(`.issue-item_img`).html(),description:t.find(`.hlFld-Abstract`).html()})}})},n.cache.routeExpire,!1);return await p.close(),{title:f,link:d,item:m}}export{l as route};