import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CeMUzp5K.js";import"./helpers-qpI1t-yV.js";import{got_default as e}from"./got-Di2lBekK.js";import{load as t}from"cheerio";const n={path:`/doulist/:id`,categories:[`social-media`],example:`/douban/doulist/37716774`,parameters:{id:`豆列id`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`豆瓣豆列`,maintainers:[`LogicJake`,`honue`],handler:r};async function r(n){let r=n.req.param(`id`),i=`https://www.douban.com/doulist/${r}`,a=t((await e({method:`get`,url:i,headers:{Referer:`https://www.douban.com/doulist/${r}`}})).data);return{title:a(`#content h1`).text().trim(),link:i,description:a(`div.doulist-about`).text().trim(),item:a(`div.doulist-item`).toArray().map(e=>{let t=a(e).find(`div.source`).text().trim(),n=a(e).find(`div.bd.doulist-note div.title a`).text().trim(),r=a(e).find(`div.bd.doulist-note div.title a`).attr(`href`),i=a(e).find(`div.bd.doulist-note  div.abstract`).text().trim();if(t===`来自：豆瓣广播`&&(n=a(e).find(`p.status-content > a`).text().trim(),r=a(e).find(`p.status-content a`).attr(`href`),i=a(e).find(`span.status-recommend-text`).text().trim()),t===`来自：豆瓣电影`||t===`来自：豆瓣`||t===`来自：豆瓣读书`||t===`来自：豆瓣音乐`){n=a(e).find(`div.bd.doulist-subject div.title a`).text().trim(),r=a(e).find(`div.bd.doulist-subject div.title a`).attr(`href`),i=a(e).find(`div.bd.doulist-subject div.abstract`).text().trim();let t=a(e).find(`div.ft div.comment-item.content`).text().trim();i=`<div><img width="100" src="`+a(e).find(`div.post a img`).attr(`src`)+`"></div>`+i+`<blockquote>`+t+`</blockquote>`}let o=a(e).find(`div.ft div.actions time span`).attr(`title`);return{title:n,link:r,description:i,pubDate:new Date(o).toUTCString()}})}}export{n as route};