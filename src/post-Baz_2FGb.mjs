import{n as e,t}from"./esm-shims-D4LgnpSl.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import{t as n}from"./ofetch-CvLG4YCQ.mjs";import{t as r}from"./cache-ZTWfXd2T.mjs";import{t as i}from"./render-CBhnapAf.mjs";import{t as a}from"./parse-date-bKmkZ9gg.mjs";import{t as o}from"./invalid-parameter-Cn6c8J1f.mjs";import s from"node:path";e();const c=`https://api.myfans.jp`,l=`https://myfans.jp`,u={"google-ga-data":`event328`},d=e=>r.tryGet(`myfans:account:${e}`,async()=>{let t=await n(`${c}/api/v2/users/show_by_username`,{headers:u,query:{username:e}});if(!t.id)throw new o(`This creator does not exist.`);return t}),f=async e=>(await n(`${c}/api/v2/users/${e}/posts`,{headers:u,query:{sort_key:`publish_start_at`,page:1}})).data,p={path:`/user/:username`,categories:[`multimedia`],example:`/myfans/user/secret_japan`,parameters:{username:`User handle`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`myfans.jp/:username`,`myfans.jp/:language/:username`]}],name:`User Posts`,maintainers:[`TonyRL`],handler:h},m=(e,n)=>i(s.join(t,`templates/post-e2e0e95c.art`),{postImages:e,body:n});async function h(e){let{username:t}=e.req.param(),n=await d(t),r=(await f(n.id)).map(e=>({title:e.body?.replaceAll(`\r
`,` `).trim().split(` `)[0],description:m(e.post_images,e.body?.replaceAll(`\r
`,`<br>`)),pubDate:a(e.published_at),link:`${l}/posts/${e.id}`,author:e.user.name}));return{title:`${n.name} (@${n.username})`,link:`${l}/${n.username}`,description:`${n.posts_count} Post ${n.likes_count} Like ${n.followers_count}
Followers ${n.followings_count} Follow ${n.about.replaceAll(`\r
`,` `)}`,image:n.avatar_url,icon:n.avatar_url,logo:n.avatar_url,language:`ja-JP`,item:r}}export{p as route};