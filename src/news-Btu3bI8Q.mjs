import{n as e,t}from"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import{t as n}from"./ofetch-BMqiDsx_.mjs";import{t as r}from"./header-generator-CW7_KYce.mjs";import{t as i}from"./cache-ZTWfXd2T.mjs";import{t as a}from"./render-CBhnapAf.mjs";import{t as o}from"./parse-date-bKmkZ9gg.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l=async e=>await Promise.all(e.map(e=>i.tryGet(e.link,async()=>{let i=e.link,l=c(await n(i,{headerGeneratorOptions:r.MODERN_ANDROID})),u=JSON.parse(l(`script#__NEXT_DATA__`).text()),d=u.props.pageProps.urqlState,f=Object.keys(d).filter(e=>d[e].data.includes(`content`));u=JSON.parse(d[f].data).article,e.title=u.shareTitle,e.category=u.categories.map(e=>e.slug);for(let t of u.channels)e.category.push(t.slug);return e.content=u.content.filter(e=>e.innerHtml!==void 0&&e.innerHtml!==``),e.caption=u.dek,u.leadArt&&(e.imgUrl=u.leadArt.image?.url,e.imgAlt=u.leadArt.image?.altText,e.imgCaption=u.leadArt.image?.attributionText),e.description=a(s.join(t,`templates/article-description-c1053caf.art`),{item:e}),{title:e.title,pubDate:o(e.pubDate),link:e.link,description:e.description}}))),u={path:`/:category`,categories:[`traditional-media`],example:`/theatlantic/latest`,parameters:{category:`category, see below`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.theatlantic.com/:category`]}],name:`News`,maintainers:[`EthanWng97`,`pseudoyu`],handler:d,description:`| Popular      | Latest | Politics | Technology | Business |
| ------------ | ------ | -------- | ---------- | -------- |
| most-popular | latest | politics | technology | business |

  More categories (except photo) can be found within the navigation bar at [https://www.theatlantic.com](https://www.theatlantic.com)`};async function d(e){let t=e.req.param(`category`),r=`https://www.theatlantic.com/${t}/`,i=c(await n(r)),a=JSON.parse(i(`script#__NEXT_DATA__`).text()).props.pageProps.urqlState,o=Object.keys(a).filter(e=>a[e].data.includes(t)),s=JSON.parse(a[o].data),u=Object.values(s)[0].river.edges;u=u.filter(e=>!e.node.url.startsWith(`https://www.theatlantic.com/photo`)),u=u.map(e=>({link:e.node.url,pubDate:e.node.datePublished}));let d=await l(u);return{title:`The Atlantic - ${t.toUpperCase()}`,link:r,description:`The Atlantic - ${t.toUpperCase()}`,item:d}}export{u as route};