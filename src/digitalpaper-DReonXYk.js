import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CRUPiVpr.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./timezone-BPfwRbwD.js";import s from"node:path";import c from"dayjs";import{load as l}from"cheerio";e();const u=`811c18b08cf04e79be3b67d6902ee1a7`,d=`KJRB`,f=`https://epaper.stdaily.com/stdailynewspaperapi`,p={path:`/digitalpaper`,categories:[`traditional-media`],example:`/stdaily/digitalpaper`,name:`科技日报`,maintainers:[`lyqluis`,`KarasuShin`],handler:m,features:{supportRadar:!0},radar:[{source:[`epaper.stdaily.com/statics/technology-site/index.html`],target:`/digitalpaper`}]};async function m(){let e=(await n(`${f}/uv/article/period/date`,{method:`POST`,body:{code:d,date:c(new Date,`YYYY-MM-01`)},headers:{"X-Requested-With":`XMLHttpRequest`}})).obj.dateList.toSorted().at(-1),p=await n(`${f}/uv/article/period/periodTime`,{method:`POST`,body:{code:d,periodTime:e,siteId:u},headers:{"X-Requested-With":`XMLHttpRequest`}});return{title:`中国科技网 - 科技日报`,link:`https://epaper.stdaily.com`,item:(await Promise.all(p.obj.editionList.map(e=>r.tryGet(`stdaily:epaper:${e.id}`,async()=>{let{list:c}=await n(`${f}/uv/article/article/editionId`,{method:`POST`,body:{id:e.id,siteId:u},headers:{"X-Requested-With":`XMLHttpRequest`}});return await Promise.all(c.map(async c=>await r.tryGet(`stddaily:epaper:article:${c.id}`,async()=>{let{obj:{articleVo:r}}=await n(`${f}/uv/article/article/articleId`,{method:`POST`,body:{code:d,id:c.id,siteId:u},headers:{"X-Requested-With":`XMLHttpRequest`}});return{title:`${r.editionName.match(/：(.*)/)?.[1]} - ${l(r.title).text()}`,description:i(s.join(t,`templates/description-9a4423f3.art`),{subtitle:r.subtitle,pics:r.picList??[],content:r.content}),pubDate:o(a(r.periodTime),8),author:r.author,link:`https://epaper.stdaily.com/statics/technology-site/index.html#/home?isDetail=1&currentNewsId=${c.id}&currentVersionName=${r.editionName}&currentVersion=${Number(e.editionCode)}&timeValue=${r.periodTime}`}})))})))).flat(),image:`https://www.stdaily.com/favicon.ico`}}export{p as route};