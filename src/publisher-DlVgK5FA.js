import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import{ofetch_default as e}from"./ofetch-TsvCL7Kz.js";import"./helpers-LVq640iW.js";import"./cache-CzcusEyX.js";import"./parse-date-DHsdom8D.js";import"./got-lNAQakSo.js";import{baseUrl as t,parseItems as n,parseList as r}from"./utils-B_m5XyRY.js";const i={path:`/today/:edition/publisher/:id`,categories:[`new-media`],example:`/line/today/th/publisher/101048`,parameters:{edition:`Edition, see table above`,id:`Channel ID, can be found in URL`},radar:[{source:[`today.line.me/:edition/v2/publisher/:id`]}],name:`TODAY - Channel`,maintainers:[`TonyRL`],handler:a};async function a(i){let{edition:a,id:o}=i.req.param(),s=await e(`${t}/webapi/portal/page/setting`,{query:{entityId:o,country:a,pageType:`CP`}}),c;a===`th`&&(c=await e(`${t}/webapi/portal/embedded/page/cplatest`,{query:{entityId:o,pageType:`CP`,country:a}}));let l=a===`th`?c.modules:s.modules,u=l.find(e=>e.source===`CP_LATEST`),d=u.listings[0],f=await e(`${t}/webapi/trending/cp/latest/listings/${u.id}`,{query:{offset:d.offset,length:d.length,country:a,targetContent:d.params?.targetContent,cps:d.params?.cps,publishedWithin:d.params?.publishedWithin}}),p=r(f.items),m=await n(p);return{title:`${s.data.name} - Line Today`,description:s.data.introduction,image:s.data.icon?`https://obs.line-scdn.net/${s.data.icon.hash}`:void 0,link:`${t}/${a}/v2/publisher/${o}`,item:m}}export{i as route};