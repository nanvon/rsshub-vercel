import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./proxy-DMKMSIEA.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-CmdBCkM8.js";import"./puppeteer-DGJWMOFh.js";import"./puppeteer-utils-B6wyOnWr.js";import{getCookie as r}from"./pypasswaf-DkLxYa6_.js";import{load as i}from"cheerio";const a=`http://www.graduate.nuaa.edu.cn/`,o=new Map([[`tzgg`,{title:`通知公告 | 南京航空航天大学研究生院`,suffix:`2145/list.htm`}],[`xwdt`,{title:`新闻动态 | 南京航空航天大学研究生院`,suffix:`13276/list.htm`}],[`xsxx`,{title:`学术信息 | 南京航空航天大学研究生院`,suffix:`13277/list.htm`}],[`ssfc`,{title:`师生风采 | 南京航空航天大学研究生院`,suffix:`13278/list.htm`}]]),s={path:`/yjsy/:type/:getDescription?`,categories:[`university`],example:`/nuaa/yjsy/tzgg/getDescription`,parameters:{type:`分类名，见下表`,getDescription:`是否获取全文`},features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`研究生院`,maintainers:[`junfengP`,`Seiry`,`Xm798`],handler:c,description:`| 通知公告 | 新闻动态 | 学术信息 | 师生风采 |
| -------- | -------- | -------- | -------- |
| tzgg     | xwdt     | xsxx     | ssfc     |`};async function c(s){let c=s.req.param(`type`),l=o.get(c).suffix,u=!!s.req.param(`getDescription`)||!1,d=new URL(l,a).href,f={headers:{cookie:await r(a)}},p=await n(d,f),m=i(p.data),h=m(`#wp_news_w6 ul li`).slice(0,10).toArray().map(e=>({title:m(e).find(`a`).text(),link:m(e).find(`a`).attr(`href`),date:m(e).find(`span`).text()})),g=await Promise.all(h.map(async r=>{let o=r.title||`tzgg`,s=r.date,c=new URL(r.link,a).href,l=o+`<br><a href="`+c+`" target="_blank">查看原文</a>`;return u&&(l=await e.tryGet(c,async()=>{let e=c.split(`.`).at(-1);if(e===`htm`||e===`html`){let e=await n(c,f);return i(e.data)(`.wp_articlecontent`).html()+`<br><hr /><a href="`+c+`" target="_blank">查看原文</a>`}})),{title:o,link:c,description:l,pubDate:t(s)}}));return{title:o.get(c).title,link:d,description:`南京航空航天大学研究生院RSS`,item:g}}export{s as route};