import"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-D5TEN1xL.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{load as i}from"cheerio";const a=(e,a)=>a(e.link,async()=>{let{data:a}=await n(e.link),o=i(a),s=o(`div.info-box`);return e.author=s.find(`b:nth-child(4)`).text().trim(),e.pubDate=r(t(s.find(`i:last-child`).text()),8),e.description=o(`.article-main-contentraw`).html(),e}),o={news:`最新资讯`,review:`游戏评测`,video:`游戏视频`,special:`巴士首页特稿`,hardware:`硬件资讯`},s={path:`/list/:category`,parameters:{category:`列表分类，见下表`},categories:[`game`],example:`/tgbus/list/news`,radar:[{source:[`www.tgbus.com/list/:category/`],target:`/list/:category`}],name:`文章列表`,maintainers:[`Xzonn`],handler:c,description:`| 最新资讯 | 游戏评测 | 游戏视频 | 巴士首页特稿 | 硬件资讯 |
| -------- | -------- | -------- | ------------ | -------- |
| news     | review   | video    | special      | hardware |`};async function c(s){let c=s.req.param(`category`),l=`https://www.tgbus.com/list/${c}/`,u=await n(l),d=i(u.data),f=d(`div.special-infocard`).toArray().map(e=>{let n=d(e),i=n.find(`a`);return{title:n.find(`div.title`).text(),link:`https://www.tgbus.com${i.attr(`href`)}`,description:n.find(`div.content`).text(),pubDate:r(t(n.find(`div.info span:nth-child(3)`).text().trim()),8)}}),p=await Promise.all(f.map(t=>a(t,e.tryGet)));return{title:`${o[c]} - 电玩巴士`,description:d(`meta[name="description"]`).attr(`content`),link:l,item:p}}export{s as route};