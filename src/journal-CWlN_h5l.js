import{n as e,t}from"./esm-shims-CMsyBHYK.js";import{t as n}from"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./proxy-CczVputb.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{n as o}from"./puppeteer-e0F06Yyi.js";import s from"node:path";import{load as c}from"cheerio";e();const l={path:`/journal/:id`,radar:[{source:[`pubs.acs.org/journal/:id`,`pubs.acs.org/`]}],name:`Unknown`,maintainers:[`nczitzk`],handler:u};async function u(e){let l=e.req.param(`id`)??``,u=`https://pubs.acs.org`,d=`${u}/toc/${l}/0/0`,f=``,p=await o(),m=await r.tryGet(d,async()=>{let e=await p.newPage();await e.setRequestInterception(!0),e.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),await e.goto(d,{waitUntil:`domcontentloaded`}),await e.waitForSelector(`.toc`);let n=await e.evaluate(()=>document.documentElement.innerHTML);await e.close();let r=c(n);return f=r(`meta[property="og:title"]`).attr(`content`),r(`.issue-item`).toArray().map(e=>{e=r(e);let n=e.find(`.issue-item_title a`),o=e.find(`input[name="doi"]`).attr(`value`);return{doi:o,guid:o,title:n.text(),link:`${u}${n.attr(`href`)}`,pubDate:a(e.find(`.pub-date-value`).text(),`MMMM D, YYYY`),author:e.find(`.issue-item_loa li`).toArray().map(e=>r(e).text()).join(`, `),description:i(s.join(t,`templates/description-78b7ee2b.art`),{image:e.find(`.issue-item_img`).html(),description:e.find(`.hlFld-Abstract`).html()})}})},n.cache.routeExpire,!1);return await p.close(),{title:f,link:d,item:m}}export{l as route};