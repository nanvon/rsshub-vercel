import{n as e,t}from"./esm-shims-mGm6WwCc.js";import{t as n}from"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./got-CgQXMNWI.js";import{t as o}from"./types-Bn7An2Wc.js";import s from"node:path";e();const c={path:`/search/:q/:order?`,categories:[`picture`],view:o.Pictures,example:`/pixabay/search/cat`,parameters:{q:`Search term`,order:{description:`Order`,options:[{value:`popular`,label:`popular`},{value:`latest`,label:`latest`}],default:`latest`}},features:{requireConfig:[{name:`PIXABAY_KEY`,optional:!0,description:``}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`pixabay.com/:searchType/search/:q`],target:`/search/:q`}],name:`Search`,maintainers:[`TonyRL`],handler:l};async function l(e){let{q:o,order:c=`latest`}=e.req.param(),l=n.pixabay?.key??`7329690-bbadad6d872ba577d5a358679`,u=`https://pixabay.com`,d=(await r.tryGet(`pixabay:search:${o}:${c}`,async()=>{let{data:t}=await a(`${u}/api/`,{searchParams:{key:l,q:o,order:c,per_page:e.req.query(`limit`)??200}});return t},Math.max(n.cache.contentExpire,1440*60),!1)).hits.map(e=>{let{pageURL:n,tags:r,user:a}=e;return{title:n.substring(n.lastIndexOf(`/`,n.lastIndexOf(`/`)-1)+1,n.lastIndexOf(`/`)).replace(/(-\d+)$/,``).replaceAll(`-`,` `),description:i(s.join(t,`templates/img-f35220fe.art`),{item:e}),link:n,category:r.split(`, `),author:a}});return{title:`Search ${o} - Pixabay`,description:`Download & use free nature stock photos in high resolution ✓ New free images everyday ✓ HD to 4K ✓ Best nature pictures for all devices on Pixabay`,link:`${u}/images/search/${o}/${c===`latest`?`?order=latest`:``}`,image:`https://pixabay.com/apple-touch-icon.png`,language:`en`,item:d}}export{c as route};