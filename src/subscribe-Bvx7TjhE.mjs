import"./config-PItPnVIx.mjs";import{t as e}from"./parse-date-9Tu6hSFW.mjs";import{t}from"./types-zV-JXsJH.mjs";import{t as n}from"./invalid-parameter-BazIyKVP.mjs";import{t as r}from"./rss-parser-D9yoVJTX.mjs";const i={path:`/subscribe/:user`,categories:[`blog`],view:t.SocialMedia,example:`/substack/subscribe/mangoread`,parameters:{user:`Username of the Substack`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Substack Subscription`,maintainers:[`pseudoyu`],handler:a};async function a(t){let i=t.req.param(`user`);if(!i)throw new n(`Invalid user`);let a=await r.parseURL(`https://${i}.substack.com/feed`);return{title:a.title??`Substack`,description:a.description??`${i}'s Substack`,link:a.link??`https://${i}.substack.com`,image:a.image?.url??``,item:a.items.map(t=>({title:t.title??`Untitled`,description:t[`content:encoded`]??t.content??``,link:t.link??``,pubDate:t.pubDate?e(t.pubDate):void 0,guid:t.guid??``,author:t.creator??i}))}}export{i as route};