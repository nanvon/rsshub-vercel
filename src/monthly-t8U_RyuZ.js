import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import{ofetch_default as n}from"./ofetch-TsvCL7Kz.js";import{cache_default as r}from"./cache-CzcusEyX.js";import{art as i}from"./render-DE4LRFBD.js";import{ViewType as a}from"./types-Bi82qguM.js";import o from"node:path";import{load as s}from"cheerio";t();const c=`https://bestofjs.org/rankings/monthly`,l={path:`/rankings/monthly`,categories:[`programming`],example:`/bestofjs/rankings/monthly`,view:a.Notifications,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`bestofjs.org/rankings/monthly/:year/:month`],target:`/rankings/monthly`}],name:`Monthly Rankings`,maintainers:[`ztkuaikuai`],url:`bestofjs.org/rankings/monthly`,handler:async()=>{let t=u(),n=await Promise.all(t.map(e=>{let[t,n]=e.split(`-`);return d(t,n)})),r=n.flatMap((n,r)=>{let[a,s]=t[r].split(`-`),l=i(o.join(e,`templates/description-efeec4a1.art`),{items:n});return{title:`Best of JS Monthly Rankings - ${a}/${s}`,description:l,link:`${c}/${a}/${s}`,guid:`${c}/${a}/${s}`,author:`Best of JS`}});return{title:`Best of JS Monthly Rankings`,link:c,description:`Monthly rankings of the most popular JavaScript projects on Best of JS`,item:r,language:`en`}}},u=()=>{let e=new Date,t=e.getFullYear(),n=e.getMonth()+1;return Array.from({length:6},(e,r)=>{let i=n-(r+1),a=t;return i<=0&&(i+=12,--a),`${a}-${i}`})},d=(e,t)=>{let i=`${c}/${e}/${t}`;return r.tryGet(i,async()=>{let e=await n(i),t=s(e);return t(`table.w-full tbody tr[data-testid="project-card"]`).toArray().map(e=>{let n=t(e),r=n.find(`td:first img`).attr(`src`)?.replace(/.dark./,`.`)||``,i=n.find(`td:nth-child(2) a[href^="/projects/"]`).first(),a=i.text().trim(),o=n.find(`td:nth-child(2) a[href*="github.com"]`).attr(`href`)||``,s=n.find(`td:nth-child(2) a[href*="http"]:not([href*="github.com"])`).attr(`href`)||``,c=n.find(`td:nth-child(2) .font-serif`).text().trim(),l=n.find(`td:nth-child(2) [href*="/projects?tags="]`).toArray().map(e=>t(e).text().trim()),u=n.find(`td:nth-child(4) span:last`).text().trim()||n.find(`td:nth-child(2) .inline-flex span:last-child`).text().trim(),d=n.find(`td:nth-child(3) > div`).toArray().slice(1).map(e=>t(e).text().trim()).join(`; `);return{logo:r,projectName:a,githubLink:o,homepageLink:s,description:c,tags:l,starCount:u,additionalInfo:d}})})};export{l as route};