import{n as e,t}from"./esm-shims-L08rKynx.mjs";import{t as n}from"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-DXVwJZV0.mjs";import"./helpers-mo8InLYm.mjs";import{t as r}from"./render-CBhnapAf.mjs";import{t as i}from"./got-D6JCV29k.mjs";import a from"node:path";e();const o={cookie:n.ncm.cookies,Referer:`https://music.163.com/`};function s(e){return!e||e.length===0?[{title:`暂无听歌排行`}]:e.map((e,n)=>{let i=e.song,o=i.ar.map(e=>e.name).join(`/`),s=r(a.join(t,`templates/userplayrecords-c3ae0a67.art`),{index:n,record:e,song:i});return{title:`[${n+1}] ${i.name} - ${o}`,link:`http://music.163.com/song?id=${i.id}`,author:o,description:s}})}const c={path:`/music/user/playrecords/:uid/:type?`,categories:[`multimedia`],example:`/163/music/user/playrecords/45441555/1`,parameters:{uid:`用户 uid, 可在用户主页 URL 中找到`,type:`排行榜类型，0所有时间(默认)，1最近一周`},features:{requireConfig:[{name:`NCM_COOKIES`,optional:!0,description:"网易云音乐登陆后的 cookie 值，可在浏览器控制台通过`document.cookie`获取。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`用户听歌排行`,maintainers:[`alfredcai`],handler:l};async function l(e){let t=e.req.param(`uid`),n=Number.parseInt(e.req.param(`type`))||0,r=await i(`https://music.163.com/api/v1/play/record?uid=${t}&type=${n}`,{headers:o}),a=n===1?r.data.weekData:r.data.allData;return{title:`${n===1?`听歌榜单（最近一周）`:`听歌榜单（所有时间}`} - ${t}}`,link:`https://music.163.com/user/home?id=${t}`,updated:r.headers.date,item:s(a)}}export{c as route};