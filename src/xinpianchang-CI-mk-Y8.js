import"./esm-shims-Dqvxr0BZ.js";import"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import"./ofetch-e4r9n7lx.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-BjesfGXD.js";import"./render-CSnicFA3.js";import"./parse-date-DHsdom8D.js";import"./got-DF7DsGgk.js";import{getData as t,processItems as n,rootUrl as r}from"./util-DFBrmJht.js";const i={path:[`/discover/:params?`,`/:params?`],categories:[`new-media`],example:`/xinpianchang/discover`,parameters:{params:"参数，可在对应分类页 URL 中找到，默认为 `article-0-0-all-all-0-0-score` ，即全部"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`发现`,maintainers:[`nczitzk`],handler:a,description:"::: tip\n  跳转到欲订阅的分类页，将 URL 的 `/discover` 到末尾的部分填入 `params` 参数。\n\n  如 [全部原创视频作品](https://www.xinpianchang.com/discover/article-0-0-all-all-0-0-score) 的 URL 为 `https://www.xinpianchang.com/discover/article-0-0-all-all-0-0-score`，其 `/discover` 到末尾的部分为 `article-0-0-all-all-0-0-score`，所以对应的路由为 [/xinpianchang/discover/article-0-0-all-all-0-0-score](https://rsshub.app/xinpianchang/discover/article-0-0-all-all-0-0-score)。\n:::"};async function a(i){let{params:a=`article-0-0-all-all-0-0-score`}=i.req.param(),o=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):60,s=new URL(`discover/${a}`,r).href,{data:c,response:l}=await t(s,e.tryGet),u=JSON.parse(l.match(/"list":(\[.*?]),"total"/)[1]);return u=await n(u.slice(0,o),e.tryGet),{...c,item:u}}export{i as route};