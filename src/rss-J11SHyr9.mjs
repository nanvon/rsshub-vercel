import{n as e,t}from"./esm-shims-DhF_MXa4.mjs";import"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import"./ofetch-DVhBwO41.mjs";import"./helpers-vRt84cId.mjs";import{t as n}from"./cache-KwJARS5Z.mjs";import{t as r}from"./render-ZYpwNl2L.mjs";import{t as i}from"./parse-date-9Tu6hSFW.mjs";import{t as a}from"./got-D_XeVuz-.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/:category?`,categories:[`shopping`],example:`/thegadgetflow/cool-gadgets-gifts`,parameters:{category:`category name, can be found in url`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`thegadgetflow.com/categories/:category`],target:`/:category`}],name:`Category`,maintainers:[`EthanWng97`],handler:l};async function l(e){let c=`https://thegadgetflow.com`,l=`/wp-json/wp/v2/categories`,u=e.req.param(`category`)||``,d;u&&(d=await n.tryGet(`${c}${l}`,async()=>{let{data:e}=await a(`${c}${l}`,{searchParams:{slug:u}});if(!e||e.length===0)throw Error(`Category "${u}" not found`);return e[0]}));let f=d?.id,p=d?.name,m=d?.link,h=(await a(`${c}/wp-json/wp/v2/posts`,{searchParams:{per_page:e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`)):10,_embed:``,...f&&{categories:f}}})).data.map(e=>{let n=e._embedded?.[`wp:featuredmedia`]?.find(t=>t.id===e.featured_media),a=n?.source_url,c=n?.alt_text||n?.title?.rendered,l;return n?.caption?.rendered&&(l=s(n?.caption?.rendered)),{title:e.title.rendered,description:r(o.join(t,`templates/description-1c044b73.art`),{content:e.content.rendered,image:a,altText:c,caption:l?.text()||``}),link:e.link,pubDate:i(e.date_gmt),updated:i(e.modified_gmt),author:e._embedded.author[0].name}});return{title:p?`Gadget Flow - ${p}`:`Gadget Flow`,link:m||`${c}/${u}`,item:h}}export{c as route};