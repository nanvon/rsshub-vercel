import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CRUPiVpr.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./timezone-BPfwRbwD.js";import o from"node:path";e();const s={m3u8:`x-mpegURL`,mp3:`mpeg`,mp4:`mp4`,m4a:`mp4`},c={path:`/album/:id`,categories:[`multimedia`],example:`/radio/album/15682090498666`,parameters:{id:`专辑 id，可在对应专辑页面的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!0,supportScihub:!1},name:`专辑`,maintainers:[`nczitzk`],handler:l,description:"如果订阅 [中国相声榜](https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666)，其 URL 为 `https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666`，可以得到 `columnId` 为 `15682090498666`\n\n  所以对应路由为 [`/radio/album/15682090498666`](https://rsshub.app/radio/album/15682090498666)\n\n::: tip\n  部分专辑不适用该路由，此时可以尝试 [节目](#yun-ting-jie-mu) 路由\n:::"};async function l(e){let c=e.req.param(`id`),l=`https://ytweb.radio.cn`,u=`${l}/share/albumDetail?columnId=${c}`,d=await n(`https://ytapi.radio.cn/ytsrv/srv/wifimusicbox/demand/detail`,{method:`POST`,headers:{accept:`application/json, text/plain, */*`,"content-type":`application/x-www-form-urlencoded`,equipmentSource:`WEB`,equipmentType:`3`,platformCode:`H5`,productId:`1605403829833195520`,providerCode:`25010`,referer:`https://ytweb.radio.cn/`,timestamp:String(Date.now()),version:`4.0.0`},body:new URLSearchParams({pageIndex:`0`,sortType:``,mobileId:``,providerCode:`25010`,pid:c,paySongFlag:`1`,richText:`1`,h5flag:`1`}),parseResponse:JSON.parse}),f=d.con.map(e=>{let n=e.playUrlHigh??e.playUrlMedium??e.playUrlLow??e.playUrl;n=/\.m3u8$/.test(n)?e.downloadUrl:n;let u=new URL(n).pathname.split(`.`).pop(),d=u?`audio/${s[u]}`:``;return{guid:e.id,title:e.name,link:`${l}/share/albumPlay?correlateId=${e.id}&columnId=${c}`,description:r(o.join(t,`templates/description-2b297c34.art`),{enclosure_url:n,enclosure_type:d}),pubDate:a(i(e.createTime),8),enclosure_url:n,enclosure_type:d,enclosure_length:e.fileSize,itunes_duration:e.duration,itunes_item_image:e.logoUrl}});return{title:`云听 - ${d.columnName}`,link:u,item:f,image:d.posterInfo.imgUrl,logo:d.logoUrl,description:d.descriptions??d.descriptionSimple,itunes_author:d.ownerNickName||`radio.cn`}}export{c as route};