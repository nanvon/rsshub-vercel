import{n as e,t}from"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CfXAR0UO.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./types-Bn7An2Wc.js";import o from"node:path";import{load as s}from"cheerio";e();const c=`https://bestofjs.org/rankings/monthly`,l={path:`/rankings/monthly`,categories:[`programming`],example:`/bestofjs/rankings/monthly`,view:a.Notifications,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`bestofjs.org/rankings/monthly/:year/:month`],target:`/rankings/monthly`}],name:`Monthly Rankings`,maintainers:[`ztkuaikuai`],url:`bestofjs.org/rankings/monthly`,handler:async()=>{let e=u();return{title:`Best of JS Monthly Rankings`,link:c,description:`Monthly rankings of the most popular JavaScript projects on Best of JS`,item:(await Promise.all(e.map(e=>{let[t,n]=e.split(`-`);return d(t,n)}))).flatMap((n,r)=>{let[a,s]=e[r].split(`-`),l=i(o.join(t,`templates/description-efeec4a1.art`),{items:n});return{title:`Best of JS Monthly Rankings - ${a}/${s}`,description:l,link:`${c}/${a}/${s}`,guid:`${c}/${a}/${s}`,author:`Best of JS`}}),language:`en`}}},u=()=>{let e=new Date,t=e.getFullYear(),n=e.getMonth()+1;return Array.from({length:6},(e,r)=>{let i=n-(r+1),a=t;return i<=0&&(i+=12,--a),`${a}-${i}`})},d=(e,t)=>{let i=`${c}/${e}/${t}`;return r.tryGet(i,async()=>{let e=s(await n(i));return e(`table.w-full tbody tr[data-testid="project-card"]`).toArray().map(t=>{let n=e(t);return{logo:n.find(`td:first img`).attr(`src`)?.replace(/.dark./,`.`)||``,projectName:n.find(`td:nth-child(2) a[href^="/projects/"]`).first().text().trim(),githubLink:n.find(`td:nth-child(2) a[href*="github.com"]`).attr(`href`)||``,homepageLink:n.find(`td:nth-child(2) a[href*="http"]:not([href*="github.com"])`).attr(`href`)||``,description:n.find(`td:nth-child(2) .font-serif`).text().trim(),tags:n.find(`td:nth-child(2) [href*="/projects?tags="]`).toArray().map(t=>e(t).text().trim()),starCount:n.find(`td:nth-child(4) span:last`).text().trim()||n.find(`td:nth-child(2) .inline-flex span:last-child`).text().trim(),additionalInfo:n.find(`td:nth-child(3) > div`).toArray().slice(1).map(t=>e(t).text().trim()).join(`; `)}})})};export{l as route};