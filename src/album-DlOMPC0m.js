import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import"./parse-date-CHEO0z5G.js";import"./md5-CWsm3r0H.js";import"./got-CgQXMNWI.js";import"./config-not-found-CX6cWM57.js";import{a as i,i as a,o,r as s}from"./utils-D1SHp6jJ.js";import c from"node:path";e();const l={path:`/album/:id`,categories:[`anime`],example:`/18comic/album/292282`,parameters:{id:`专辑 id，可在专辑页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`jmcomic.group/`]}],name:`专辑`,maintainers:[`nczitzk`],handler:u,url:`jmcomic.group/`,description:`::: tip
  专辑 id 不包括 URL 中标题的部分。
:::`};async function u(e){let l=e.req.param(`id`),{domain:u=s}=e.req.query(),d=i(u),f=`${d}/album/${l}`,p=await o(`${a()}/album?id=${l}`),m=p.tags,h=p.author.join(`, `),g=p.description,_=p.addtime,v=[];return p.series.length===0?v.push({title:p.name,link:`${d}/photo/${l}`,guid:`${d}/photo/${l}`,updated:new Date(_*1e3),pubDate:new Date(_*1e3),category:m,author:h,description:r(c.join(t,`templates/description-afe7e434.art`),{introduction:g,images:[`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`,category:m})}):(v=await Promise.all(p.series.map((e,i)=>n.tryGet(`18comic:album:${e.id}`,async()=>{let n=await o(`${a()}/chapter?id=${e.id}`),s={},l=i+1;return s.title=`第${String(l)}話 ${e.name===``?`${String(l)}`:e.name}`,s.link=`${d}/photo/${e.id}`,s.guid=`${d}/photo/${e.id}`,s.updated=new Date(n.addtime*1e3),s.pubDate=_,s.category=m,s.author=h,s.description=r(c.join(t,`templates/description-afe7e434.art`),{introduction:g,images:[`https://cdn-msp3.${u}/media/albums/${e.id}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${e.id}_3x4.jpg`,category:m}),s}))),v=v.toReversed()),{title:`${p.name} - 禁漫天堂`,link:f.replace(/\?$/,``),item:v,allowEmpty:!0,description:g}}export{l as route};