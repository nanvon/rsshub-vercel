import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import{t as i}from"./got-BlqYKpVp.js";import a from"node:path";import o from"aes-js";e();const s={path:`/search/:wd`,categories:[`shopping`],example:`/duozhuayu/search/JavaScript`,parameters:{wd:`搜索关键词`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`duozhuayu.com/search/book/:wd`]}],name:`搜索结果`,maintainers:[`fengkx`],handler:c};async function c(e){let s=e.req.param(`wd`),c=`https://www.duozhuayu.com`,l=`book`,u=`${c}/search/${l}/${s}`,d=[...`DkOliWvFNR7C4WvR`].map(e=>e.charCodeAt()),f=[...`GQWKUE2CVGOOBKXU`].map(e=>e.charCodeAt()),p=new o.ModeOfOperation.cfb(d,f),m=e=>{let t=o.utils.utf8.toBytes(e),n=p.encrypt(t);return o.utils.hex.fromBytes(n)},h=(await i({method:`get`,url:`${c}/api/search/book`,searchParams:{type:`normal`,q:s},headers:(()=>{let e=Date.now(),t=Math.floor(1e8*Math.random()),n=m([e,0,t].join(`:`)),r=[0,e,Math.round(1e5*Math.random())].join(`-`);return{"x-api-version":`0.0.48`,"x-refer-request-id":r,"x-request-id":r,"x-request-misc":`{"platform":"browser","originSource":"search","originFrom":"normal","webVersion":"1.2.201774"}`,"x-request-token":n,"x-security-key":t,"x-timestamp":e,"x-user-id":0}})()})).data.data.filter(e=>e.type===l).map(({[l]:e})=>({title:e.title,link:`${c}/books/${e.id}`,pubDate:r(e.updated),description:n(a.join(t,`templates/book-97e9ed1e.art`),{item:e})}));return{title:`多抓鱼搜索-${s}`,link:u,description:`多抓鱼搜索-${s}`,item:h}}export{s as route};