import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import{ofetch_default as n}from"./ofetch-CbgiXYAi.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-CSnicFA3.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import o from"node:path";import{load as s}from"cheerio";t();const c=`https://www.dcfever.com`,l=e=>r.tryGet(e.link,async()=>{let t=await n(e.link),r=s(t),i=r(`div[itemprop="articleBody"], .column_article_content_html`),o=r(`.article_multi_page a`).not(`.selected`).toArray().map(t=>({link:new URL(r(t).attr(`href`),e.link).href}));if(o.length){let e=await Promise.all(o.map(async e=>{let t=await n(e.link);return s(t)(`div[itemprop="articleBody"]`).html()}));i.append(e)}return i.find(`img`).each((e,t)=>{t.attribs.src?.includes(`?`)&&(t.attribs.src=t.attribs.src.split(`?`)[0])}),i.find(`p a`).each((e,t)=>{t=r(t),t.text().startsWith(`下一頁為`)&&t.remove()}),i.find(`iframe`).each((e,t)=>{t=r(t),t.attr(`src`).startsWith(`https://www.facebook.com/plugins/like.php`)&&t.remove()}),e.description=i.html(),e.pubDate=a(r(`meta[property="article:published_time"]`).attr(`content`)),e}),u=t=>r.tryGet(t.link,async()=>{let r=await n(t.link),a=s(r),c=a(`#trading_item_section .description`).contents().filter((e,t)=>t.type===`comment`).toArray().map(e=>e.data).join(``),l=s(c,null,!1);return l(`.selector_text`).remove(),l(`.selector_image_div`).each((e,t)=>{delete t.attribs.onclick}),l(`.desktop_photo_selector img`).each((e,t)=>{t.attribs.src.endsWith(`_sqt.jpg`)&&(t.attribs.src=t.attribs.src.replace(`_sqt.jpg`,`.jpg`))}),t.description=i(o.join(e,`templates/trading-949c0be3.art`),{info:a(`.info_col`),description:a(`.description_text`).html(),photo:l(`.desktop_photo_selector`).html()}),t});export{c as baseUrl,l as parseItem,u as parseTradeItem};