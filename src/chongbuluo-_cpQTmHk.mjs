import{t as e}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t}from"./cache-Bv3_kFbE.mjs";import{t as n}from"./parse-date-_GmTZfjS.mjs";import{load as r}from"cheerio";const i={path:`/newthread`,categories:[`bbs`],example:`/chongbuluo/newthread`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.chongbuluo.com/`]}],name:`最新发表`,maintainers:[`qiye45`],handler:a};async function a(){let i=`https://www.chongbuluo.com`,a=`${i}/forum.php?mod=guide&view=newthread`,o=r(await e(a));return{title:`虫部落 - 最新发表`,link:a,description:`虫部落最新发表的帖子`,item:await Promise.all(o(`#threadlist tbody[id^="normalthread_"]`).toArray().map(async a=>{let s=o(a),c=s.find(`th.common a.xst`),l=c.text().trim(),u=c.attr(`href`)||``,d=u.startsWith(`http`)?u:`${i}/${u}`,f=s.find(`td.by cite a`).text().trim(),p=n(s.find(`td.by em a span`).attr(`title`)||s.find(`td.by em a`).text().trim());return await t.tryGet(d,async()=>{try{return{title:l,link:d,description:r(await e(d))(`.t_f`).first().html()?.trim()||``,pubDate:p,author:f}}catch{return{title:l,link:d,description:`内容获取失败`,pubDate:p,author:f}}})}))}}export{i as route};