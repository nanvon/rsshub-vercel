import{n as e,t}from"./esm-shims-L08rKynx.mjs";import"./config-Bs8nOQqi.mjs";import"./logger-BvLYiR5T.mjs";import"./ofetch-1TBKTiHL.mjs";import"./helpers-mo8InLYm.mjs";import{t as n}from"./render-CBhnapAf.mjs";import{t as r}from"./parse-date-bKmkZ9gg.mjs";import{t as i}from"./md5-C60PKNTZ.mjs";import{t as a}from"./got-Be7Twwza.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/pulse/:user/:repo/:period?`,categories:[`programming`],example:`/github/pulse/DIYgod/RSSHub`,parameters:{user:`User name`,repo:`Repo name`,period:"Time frame, selected from a repository's Pulse/Insights page. Possible values are: `daily`, `halfweekly`, `weekly`, or `monthly`. Default: `weekly`. If your RSS client supports it, consider aligning the polling frequency of the feed to the period."},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`github.com/:user/:repo/pulse`,`github.com/:user/:repo/pulse/:period`]}],name:`Repo Pulse`,maintainers:[`jameschensmith`],handler:l};async function l(e){let{user:c,repo:l,period:u}=e.req.param(),d=[`daily`,`halfweekly`,`weekly`,`monthly`],f=d.includes(u)?u:d[2],p=`https://github.com/${c}/${l}/pulse/${f}`,{data:m}=await a(p),h=s(m),g=h(`main .Layout-main`).children(),[_,v]=g.eq(0).find(`h2`).text().split(`â€“`),y=g.eq(1).find(`ul ul li`).toArray().map(e=>h(e).text()),b=g.eq(2),x,S=b.find(`.js-pulse-contribution-data`);x=S.length?(await a(`https://github.com${S.attr(`data-pulse-diffstat-summary-url`)}`)).data:b.text();let C=g.eq(3),w,T=C.find(`h3`);return T.length&&(w=T.toArray().map(e=>{let t=h(e),n=t.nextUntil(`h3`),r=t.nextUntil(`ul`),i=n.last();return{heading:t.text(),paragraph:r.length>0?r.text():void 0,items:i.children().toArray().map(e=>{let t=h(e),n=t.find(`a`),r=t.find(`p`),i=r.find(`relative-time`);return i.replaceWith(i.attr(`datetime`)),{link:{text:n.text(),url:n.attr(`href`)},details:r.text()}})}})),{title:`${c}/${l} ${f} Pulse`,link:p,item:[{guid:i(`${c}${l}${u}${_}${v}`),title:`${_} - ${v}`,description:n(o.join(t,`templates/pulse-description-eccd13db.art`),{overviewItems:y,commitActivity:x,githubActivity:w}),pubDate:r(v)}]}}export{c as route};