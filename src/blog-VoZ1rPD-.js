import"./esm-shims-Dqvxr0BZ.js";import"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import"./ofetch-B4O0sZDE.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-CjzVN0X7.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-CW2W8CRN.js";import{invalid_parameter_default as r}from"./invalid-parameter-B0jPSaWz.js";import{isValidHost as i}from"./valid-host-yksGEaHF.js";import{load as a}from"cheerio";const o=new Set([`all`,`design-resources`,`learn-design`,`inside-eagle`]),s={path:`/blog/:cate?/:language?`,categories:[`blog`],example:`/eagle/blog/en`,parameters:{cate:"Category, get by URL, `all` by default",language:{description:`Language`,options:[{value:`cn`,label:`cn`},{value:`tw`,label:`tw`},{value:`en`,label:`en`}],default:`en`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cn.eagle.cool/blog`],target:`/blog`}],name:`Blog`,maintainers:[`Fatpandac`],handler:c,url:`cn.eagle.cool/blog`};async function c(s){let c=s.req.param(`cate`)??`all`,l=s.req.param(`language`)??`cn`;if(!i(c)||!i(l))throw new r(`Invalid host`);o.has(c)||(l=c,c=`all`);let u=`https://${l}.eagle.cool`,d=`${u}/blog/${c===`all`?``:c}`,f=await n(d),p=a(f.data),m=p(`div.categories-list > div > div > div > ul > li.active`).text(),h=p(`div.post-item`).toArray().map(e=>({title:p(e).find(`div.title`).text(),link:new URL(p(e).find(`a`).attr(`href`),u).href,pubDate:t(p(e).find(`div.metas > a > span`).text().replace(`ãƒ»`,``))})),g=await Promise.all(h.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link),r=a(e.data);return t.description=r(`div.post-html`).html(),t})));return{title:`eagle - ${m}`,link:d,item:g}}export{s as route};