import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import{config as n}from"./config-CVBRPN4O.js";import{ofetch_default as r}from"./ofetch-rK3Yp7nj.js";import{cache_default as i}from"./cache-Dfid4xgQ.js";import{art as a}from"./render-DftO2d-b.js";import{got_default as o}from"./got-CoH3ye0k.js";import s from"node:path";import{load as c}from"cheerio";t();const l=new URL(`https://openai.com`),u=async e=>{let t=c(await r(e)),n=t(`#main article`),i=t(`h1`).prev().find(`a[href]`).toArray().map(e=>t(e).text());return t(n.find(`h1`).parents().get(4)).remove(),n.children().last().remove(),n.find(`#citations`).remove(),{content:n.html()??void 0,categories:i,image:t(`meta[property="og:image"]`).attr(`content`)}},d=async e=>{let t=c(await r(`https://openai.com/news/rss.xml`,{responseType:`text`,headers:{"User-Agent":n.ua}}),{xml:!0});return Promise.all(t(`item`).toArray().slice(0,e).map(e=>{let n=t(e).find(`guid`).text();return i.tryGet(`openai:news:${n}`,async()=>{let r=t(e).find(`title`).text(),i=t(e).find(`pubDate`).text(),a=t(e).find(`link`).text(),{content:o,categories:s}=await u(a);return{guid:n,title:r,link:a,pubDate:i,description:o,category:s}})}))},f=async()=>{let e=(await o({method:`get`,url:`https://openai.com/blog`})).data.toString().match(/(?<=TWILL_API_BASE:").+?(?=")/)[0].replaceAll(String.raw`\u002F`,`/`);return new URL(e)},p=(t,n,r)=>i.tryGet(r.slug,async()=>{let t=`${n}/${r.slug}`,i=c((await o({method:`get`,url:t})).data),l=i(`[aria-labelledby="metaAuthorsHeading"] > li > a > span > span`).toArray().map(e=>i(e).text()).join(`, `);i(`*`).contents().filter(function(){return this.nodeType===8}).remove(),i=i(`#content`);let u=r.seo.ogImageSrc,d=r.seo.ogImageAlt,f=a(s.join(e,`templates/article-88d59063.art`),{content:i,imageSrc:u,imageAlt:d});return r.tags=r.tags||[],{title:r.title,author:l,description:f,pubDate:r.createdAt,category:r.tags.map(e=>e.title),link:t}});export{l as BASE_URL,d as fetchArticles,f as getApiUrl,p as parseArticle};