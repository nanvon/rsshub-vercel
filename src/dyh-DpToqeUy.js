import"./esm-shims-Dqvxr0BZ.js";import"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import"./ofetch-e4r9n7lx.js";import"./helpers-gUVC02jt.js";import"./cache-BjesfGXD.js";import"./parse-date-DHsdom8D.js";import"./md5-15Cn4YyR.js";import{got_default as e}from"./got-DF7DsGgk.js";import{invalid_parameter_default as t}from"./invalid-parameter-B0jPSaWz.js";import{utils_default as n}from"./utils-ChvrVqPR.js";const r={path:`/dyh/:dyhId`,categories:[`social-media`],example:`/coolapk/dyh/1524`,parameters:{dyhId:`看看号ID`},features:{requireConfig:[{name:`ALLOW_USER_HOTLINK_TEMPLATE`,optional:!0,description:"设置为`true`并添加`image_hotlink_template`参数来代理图片"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`看看号`,maintainers:[`xizeyoupan`],handler:i,description:`::: tip
  仅限于采集**站内订阅**的看看号的内容。看看号 ID 可在看看号界面右上分享 - 复制链接得到。
:::`};async function i(r){let i=r.req.param(`dyhId`),a=n.base_url+`/v6/dyhArticle/list?dyhId=${i}&type=all&page=1`,o=await e(`${n.base_url}/v6/dyh/detail?dyhId=${i}`,{headers:n.getHeaders()}),s=o.data.data.title,c=o.data.data.description,l=(await e(a,{headers:n.getHeaders()})).data.data,u=await Promise.all(l.map(e=>(s||(s=e.targetRow.title),n.parseDynamic(e))));if(u=u.filter(Boolean),u.length===0)throw new t(`仅限于采集站内订阅的看看号的图文及动态内容。这个ID可能是站外订阅。`);return{title:`酷安看看号-${s}`,link:`https://www.coolapk.com/dyh/${i}`,description:c,item:u}}export{r as route};