import"./esm-shims-BGJi2y--.js";import{config as e}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CbgiXYAi.js";import"./helpers-gUVC02jt.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{got_default as r}from"./got-Do9KqzqD.js";import{timezone as i}from"./timezone-CMz5pnRe.js";import{load as a}from"cheerio";const o={path:`/bbs/hot`,categories:[`university`],example:`/pku/bbs/hot`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`bbs.pku.edu.cn/v2/hot-topic.php`,`bbs.pku.edu.cn/`]}],name:`北大未名 BBS 全站十大`,maintainers:[`wooddance`],handler:s,url:`bbs.pku.edu.cn/v2/hot-topic.php`,description:`::: warning
  论坛部分帖子正文内容的获取需要用户登录后的 Cookie 值，详情见部署页面的配置模块。
:::`};async function s(){let o=e.pkubbs.cookie,s={};o&&(s.cookie=o);let c=await r(`https://bbs.pku.edu.cn/v2/hot-topic.php`,{headers:s}),l=a(c.body),u=l(`#list-content .list-item`).toArray().map(e=>({url:new URL(l(e).find(`> a.link`).attr(`href`),`https://bbs.pku.edu.cn/v2/`).href,title:l(e).find(`.title`).text()})).slice(0,10);return{title:`北大未名BBS 全站十大`,link:`https://bbs.pku.edu.cn/v2/hot-topic.php`,description:`北大未名BBS 全站热门话题前十名`,item:await Promise.all(u.map(({url:e,title:o})=>t.tryGet(e,async()=>{try{let t=await r(e,{headers:s}),c=a(t.body),l=c(`.post-card:first-child .sl-triangle-container .down-list span`).text()||c(`.post-card:first-child .sl-triangle-container .title span`).text();return{title:o,description:c(`.post-card:first-child .content`).html(),link:e,guid:e,pubDate:i(n(l,`发表于YYYY-MM-DD HH:mm:ss`),8)}}catch{return{title:o,link:e,guid:e}}})))}}export{o as route};