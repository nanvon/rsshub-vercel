import{n as e,t}from"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-BMqiDsx_.mjs";import"./helpers-mo8InLYm.mjs";import{t as n}from"./cache-ZTWfXd2T.mjs";import{t as r}from"./render-CBhnapAf.mjs";import{t as i}from"./parse-date-bKmkZ9gg.mjs";import{t as a}from"./got-2jXbf1Li.mjs";import{t as o}from"./types-BD1MU_-b.mjs";import s from"node:path";e();const c=`https://www3.nhk.or.jp`,l=`https://api.nhkworld.jp`,u={path:`/news/:lang?`,categories:[`traditional-media`],view:o.Articles,example:`/nhk/news/en`,parameters:{lang:{description:`Language, see below`,options:[{value:`ar`,label:`العربية`},{value:`bn`,label:`বাংলা`},{value:`my`,label:`မြန်မာဘာသာစကား`},{value:`zh`,label:`中文（简体）`},{value:`zt`,label:`中文（繁體）`},{value:`en`,label:`English`},{value:`fr`,label:`Français`},{value:`hi`,label:`हिन्दी`},{value:`id`,label:`Bahasa Indonesia`},{value:`ko`,label:`코리언`},{value:`fa`,label:`فارسی`},{value:`pt`,label:`Português`},{value:`ru`,label:`Русский`},{value:`es`,label:`Español`},{value:`sw`,label:`Kiswahili`},{value:`th`,label:`ภาษาไทย`},{value:`tr`,label:`Türkçe`},{value:`uk`,label:`Українська`},{value:`ur`,label:`اردو`},{value:`vi`,label:`Tiếng Việt`}],default:`en`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www3.nhk.or.jp/nhkworld/:lang/news/list/`,`www3.nhk.or.jp/nhkworld/:lang/news/`],target:`/news/:lang`}],name:`WORLD-JAPAN - Top Stories`,maintainers:[`TonyRL`,`pseudoyu`,`cscnk52`],handler:d};async function d(e){let{lang:o=`en`}=e.req.param(),{data:u}=await a(`${l}/nwapi/rdnewsweb/v7b/${o}/outline/list.json`),d=await a(`${c}/nhkworld/common/assets/news/config/${o}.json`),f=u.data.map(e=>({title:e.title,description:e.description,link:`${c}${e.page_url}`,pubDate:i(e.updated_at,`x`),id:e.id}));return f=await Promise.all(f.map(e=>n.tryGet(e.link,async()=>{let{data:n}=await a(`${l}/nwapi/rdnewsweb/v6b/${o}/detail/${e.id}.json`);return e.category=Object.values(n.data.categories),e.description=r(s.join(t,`templates/news-cb748a69.art`),{img:n.data.thumbnails,description:n.data.detail.replaceAll(`

`,`<br><br>`)}),delete e.id,e}))),{title:`${Object.values(d.data.config.navigation.header).find(e=>e.keyname===`topstories`)?.name} | NHK WORLD-JAPAN News`,link:`${c}/nhkworld/${o}/news/list/`,item:f}}export{u as route};