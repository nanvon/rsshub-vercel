import{n as e,t}from"./esm-shims-DhF_MXa4.mjs";import"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import"./ofetch-DVhBwO41.mjs";import"./helpers-vRt84cId.mjs";import{t as n}from"./render-ZYpwNl2L.mjs";import{t as r}from"./parse-date-9Tu6hSFW.mjs";import{r as i}from"./common-utils-Cj5w6--o.mjs";import{t as a}from"./got-D_XeVuz-.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/:type/:keyword{.*}?`,categories:[`multimedia`],name:`通用`,maintainers:[`cgkings`,`nczitzk`],parameters:{type:`类型，可查看下表的类型说明`,keyword:`关键词，可查看下表的关键词说明`},handler:l,description:"**类型**\n\n| 最新 | 热门    | 随机   | 指定演员 | 指定标签 | 日期 |\n| ---- | ------- | ------ | -------- | -------- | ---- |\n| new  | popular | random | actress  | tag      | date |\n\n**关键词**\n\n| 空 | 日期范围    | 演员名       | 标签名         | 年月日     |\n| -- | ----------- | ------------ | -------------- | ---------- |\n|    | 7 / 30 / 60 | Yua%20Mikami | Adult%20Awards | 2020/07/30 |\n\n**示例说明**\n\n-  `/141jav/new`\n\n      仅当类型为 `new` `popular` 或 `random` 时关键词为 **空**\n\n-  `/141jav/popular/30`\n\n      `popular` `random` 类型的关键词可填写 `7` `30` 或 `60` 三个 **日期范围** 之一，分别对应 **7 天**、**30 天** 或 **60 天内**\n\n-  `/141jav/actress/Yua%20Mikami`\n\n      `actress` 类型的关键词必须填写 **演员名** ，可在 [此处](https://141jav.com/actress/) 演员单页链接中获取\n\n-  `/141jav/tag/Adult%20Awards`\n\n      `tag` 类型的关键词必须填写 **标签名** 且标签中的 `/` 必须替换为 `%2F` ，可在 [此处](https://141jav.com/tag/) 标签单页链接中获取\n\n-  `/141jav/date/2020/07/30`\n\n      `date` 类型的关键词必须填写 **日期(年/月/日)**",features:{nsfw:!0}};async function l(e){let c=`https://www.141jav.com`,l=e.req.param(`type`),u=e.req.param(`keyword`)??``,d=`${c}/${l}${u?`/${u}`:``}`,f=s((await a({method:`get`,url:d})).data);if(i(e)===`/`){e.set(`redirect`,`/141jav${f(`.overview`).first().attr(`href`)}`);return}let p=f(`.columns`).toArray().map(e=>{e=f(e);let i=e.find(`.title a`).text(),a=e.find(`.title span`).text(),s=e.find(`.subtitle a`).attr(`href`).split(`/date/`).pop(),l=e.find(`.has-text-grey-dark`).text(),u=e.find(`.panel-block`).toArray().map(e=>f(e).text().trim()),d=e.find(`.tag`).toArray().map(e=>f(e).text().trim()),p=e.find(`a[title="Magnet torrent"]`).attr(`href`),m=e.find(`a[title="Download .torrent"]`).attr(`href`),h=e.find(`.image`).attr(`src`);return{title:`${i} ${a}`,pubDate:r(s,`YYYY/MM/DD`),link:new URL(e.find(`a`).first().attr(`href`),c).href,description:n(o.join(t,`templates/description-bb12249e.art`),{image:h,id:i,size:a,pubDate:s,description:l,actresses:u,tags:d,magnet:p,link:m}),author:u.join(`, `),category:[...d,...u],enclosure_type:`application/x-bittorrent`,enclosure_url:p}});return{title:`141JAV - ${f(`title`).text().split(`-`)[0].trim()}`,link:d,item:p}}export{c as route};