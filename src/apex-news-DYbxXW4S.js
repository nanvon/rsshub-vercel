import"./esm-shims-DE2PJqdr.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-CJF2SF6b.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ViewType as r}from"./types-Bi82qguM.js";import{invalid_parameter_default as i}from"./invalid-parameter-B0jPSaWz.js";import a from"markdown-it";const o=a({html:!0,breaks:!0}),s=new Set([`zh-hant`,`en`]),c=new Set([`latest`,`game-updates`,`news-article`]);async function l(r){let{lang:a=`en`,type:l=`latest`}=r.req.param(),u=new URLSearchParams({limit:`13`,gameSlug:`apex-legends`,offset:`0`});if(!s.has(a))throw new i(`Invalid language: ${a}`);if(!c.has(l))throw new i(`Invalid type: ${l}`);l!==`latest`&&u.append(`typeSlug`,l),a!==`en`&&u.append(`locale`,a);let d=`https://drop-api.ea.com/news-articles/pagination?${u}`,f=await e(d),p=[f.featured,...f.items].filter(Boolean).map(e=>({title:e.title,description:e.summary,link:`https://www.ea.com${a===`en`?`/`:`/`+a+`/`}games/apex-legends/apex-legends/news/${e.slug}`,pubDate:n(e.publishingDate),slug:e.slug})),m=await Promise.all(p.map(n=>t.tryGet(n.link??``,async()=>{let t=await e(`https://drop-api.ea.com/news-articles/${n.slug}${a===`en`?``:`?locale=`+a}`);return n.description=o.render(t.body),n})));return{title:`Apex Legends 官网资讯${l===`latest`?``:`（${l===`news-article`?`最新消息`:`游戏更新`}）`}`,link:`https://www.ea.com${a===`en`?`/`:`/`+a+`/`}games/apex-legends/apex-legends/news${l===`latest`?``:`?type=${l}`}`,item:m.map(e=>({title:e.title,description:e.description,link:e.link,pubDate:e.pubDate})),image:`https://drop-assets.ea.com/images/F1GeiHWipvvKj7GtUVP3U/31bb122451e2dea6d14c9b497f8e09d4/apex-white-nav-logo.svg`}}const u={path:`/apex-news/:lang?/:type?`,categories:[`game`],example:`/ea/apex-news/zh-hant/game-updates`,parameters:{lang:{description:`语言`,options:[{value:`zh-hant`,label:`中文(繁体)`},{value:`en`,label:`English`}],default:`en`},type:{description:`资讯类型（可选）`,options:[{value:`news-article`,label:`最新消息`},{value:`game-updates`,label:`游戏更新`},{value:`latest`,label:`全部`}],default:`latest`}},name:`APEX Legends 官网资讯`,maintainers:[`IceChestnut`],handler:l,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},view:r.Articles};export{u as route};