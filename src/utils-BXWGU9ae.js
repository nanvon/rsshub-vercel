import{n as e,t}from"./esm-shims-mGm6WwCc.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import i from"node:path";import{load as a}from"cheerio";e();const o=`https://www.science.org`,s=(e,r,o)=>Promise.all(e.map(e=>o(e.link,async()=>{let o=await r.newPage();await o.setRequestInterception(!0),o.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),await o.goto(e.link,{waitUntil:`domcontentloaded`}),await o.waitForSelector(`section#bodymatter, .news-article-content, .news-article-content--featured`);let s=await o.evaluate(()=>document.documentElement.innerHTML);await o.close();let c=a(s),l=c(`div#abstracts`).html(),u=c(`.news-article-content--featured`).length?c(`.news-article-content--featured`).html():c(`.news-article-content`).length?c(`.news-article-content`).html():c(`.info-panel__formats a.btn__request-access`).length||c(`.info-panel__formats a.btn--access`).length?``:c(`section#bodymatter`).html();return e.description=n(i.join(t,`templates/article-581213b2.art`),{abs:l,content:u}),e}))),c=(e,t)=>(e=t(e),{title:e.find(`.article-title a`).attr(`title`),link:`${o}${e.find(`.article-title a`).attr(`href`)}`,doi:e.find(`.article-title a`).attr(`href`).replace(`/doi/`,``),pubDate:r(e.find(`.card-meta__item time`).text()),author:e.find(`.card-meta ul[title="list of authors"] li`).toArray().map(e=>t(e).text()).join(`, `)});export{s as n,c as r,o as t};