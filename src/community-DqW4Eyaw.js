import"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./dist-BrnquCU2.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{rofetch as t}from"./ofetch-Of9UBhau.js";const n={path:`/community/:communityUrl`,name:`Community Events`,url:`app.questn.com`,maintainers:[`cxheng315`],example:`/questn/community/gmnetwork`,parameters:{community_url:`Community URL`},categories:[`other`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`app.questn.com/:communityUrl`],target:`/community/:communityUrl`}],handler:r};async function r(n){let r={count:n.req.query(`limit`)||`20`,page:`1`,community_url:n.req.param(`communityUrl`)||`questn`},i=await t(`https://api.questn.com/consumer/explore/entity_list/?${new URLSearchParams(r)}`,{method:`GET`,headers:{"Content-Type":`application/json`}}),a=await i.result.data,o=a.map(t=>({title:t.title,link:`https://app.questn.com/quest/${t.id}`,author:t.community_info?t.community_info.name:``,guid:t.id,pubDate:e(t.start_time*1e3),itunes_duration:t.end_time>0?t.end_time-t.start_time:0}));return{title:`QuestN Community - ${a[0].community_info?a[0].community_info.name:``} Events`,link:`https://app.questn.com/${n.req.param(`community_url`)}`,description:a[0].community_info?a[0].community_info.introduction:``,image:a[0].community_info?a[0].community_info.logo:``,logo:a[0].community_info?a[0].community_info.logo:``,item:o&&o.length>0?o:[{title:`No events found`,link:`https://app.questn.com/${n.req.param(`community_url`)}`,description:`No events found`}]}}export{n as route};