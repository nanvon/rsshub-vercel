import{n as e,t}from"./esm-shims-D5mxTuu_.mjs";import"./config-CDM38Tpk.mjs";import"./logger-B0B1yUZ6.mjs";import"./ofetch-FkpIOIxH.mjs";import"./helpers-CMl_ndRq.mjs";import{t as n}from"./cache-C6z2tE2n.mjs";import{t as r}from"./render-D2i47mnC.mjs";import{t as i}from"./parse-date-Cv8vEJfE.mjs";import"./got-CxBlPaz_.mjs";import{t as a}from"./types-CypZ_btd.mjs";import{a as o,n as s,r as c}from"./utils-BRVSrUQC.mjs";import l from"node:path";e();const u={path:`/profile/:handle/feed/:space/:routeParams?`,categories:[`social-media`],view:a.SocialMedia,example:`/bsky.app/profile/jaz.bsky.social/feed/cv:cat`,parameters:{handle:`User handle, can be found in URL`,space:`Space ID, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Feeds`,maintainers:[`FerrisChi`],handler:d};async function d(e){let a=e.req.param(`handle`),u=e.req.param(`space`),d=await o(a,n.tryGet),f=`at://${d}/app.bsky.feed.generator/${u}`,p=await c(f,n.tryGet),m=await s(f,n.tryGet),h=m.feed.map(({post:e})=>({title:e.record.text.split(`
`)[0],description:r(l.join(t,`templates/post-7b0043bb.art`),{text:e.record.text.replaceAll(`
`,`<br>`),embed:e.embed}),author:e.author.displayName,pubDate:i(e.record.createdAt),link:`https://bsky.app/profile/${e.author.handle}/post/${e.uri.split(`app.bsky.feed.post/`)[1]}`,upvotes:e.likeCount,comments:e.replyCount}));return e.set(`json`,{DID:d,profile:p,feeds:m}),{title:`${p.view.displayName} â€” Bluesky`,description:p.view.description?.replaceAll(`
`,` `),link:`https://bsky.app/profile/${a}/feed/${u}`,image:p.view.avatar,icon:p.view.avatar,logo:p.view.avatar,item:h,allowEmpty:!0}}export{u as route};