import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-rK3Yp7nj.js";import{art as r}from"./render-DftO2d-b.js";import{ViewType as i}from"./types-Bi82qguM.js";import a from"node:path";import{load as o}from"cheerio";t();const s=async t=>{let{filter:i=`order=sell_desc`}=t.req.param(),s=Number.parseInt(t.req.query(`limit`)??`24`,10),c=`https://www.bookwalker.com.tw`,l=new URL(`search?${i}`,c).href,u=o(await n(l)),d=u(`html`).attr(`lang`)??`zh-TW`,f=u(`div.bwbook_package`).slice(0,s).toArray().map(t=>{let n=u(t),i=n.find(`h4.bookname`).text(),o=n.find(`h5.bprice`).text(),s=n.find(`h5.booknamesub`).text().trim(),l=`${i} - ${s} ${o}`,f=n.find(`img`).attr(`data-src`)?.replace(/_\d+(\.\w+)$/,`$1`),p=r(a.join(e,`templates/description-463c9506.art`),{images:f?[{src:f,alt:i}]:void 0}),m=n.find(`div.bwbookitem a`).attr(`href`),h=s.split(/,/).map(e=>({name:e}));return{title:l,description:p,link:m?new URL(m,c).href:void 0,author:h,content:{html:p,text:p},image:f,banner:f,language:d}});return{title:u(`title`).text(),description:u(`meta[property="og:description"]`).attr(`content`),link:l,item:f,allowEmpty:!0,image:u(`meta[property="og:image"]`).attr(`content`),author:u(`meta[property="og:site_name"]`).attr(`content`),language:d,id:u(`meta[property="og:url"]`).attr(`content`)}},c={path:`/search/:filter?`,name:`搜尋`,url:`www.bookwalker.com.tw`,maintainers:[`nczitzk`],handler:s,example:`/bookwalker/search/order=sell_desc&s=34`,parameters:{filter:{description:"过滤器，默认为 `order=sell_desc`，即依發售日新至舊排序"}},description:"::: tip\n订阅 [依發售日新至舊排序的文學小說](https://www.bookwalker.com.tw/search?order=sell_desc&s=34)，其源网址为 `https://www.bookwalker.com.tw/search?order=sell_desc&s=34`，请参考该 URL 指定部分构成参数，此时路由为 [`/bookwalker/search/order=sell_desc&s=34`](https://rsshub.app/bookwalker/search/order=sell_desc&s=34)。\n:::",categories:[`shopping`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.bookwalker.com.tw/search`],target:`/bookwalker/search`}],view:i.Articles};export{s as handler,c as route};