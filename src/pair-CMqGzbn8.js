import{__dirname as e,init_esm_shims as t}from"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-CSnicFA3.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-D5TEN1xL.js";import o from"node:path";import s from"dayjs";import c from"dayjs/plugin/customParseFormat.js";t(),s.extend(c);const l=t=>r(o.join(e,`templates/description-db72f51b.art`),t),u={path:`/pair/:source/:target`,categories:[`other`],example:`/wise/pair/GBP/USD`,parameters:{source:`Base currency abbreviation`,target:`Quote currency abbreviation`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`FX Pair Yesterday`,maintainers:[`HenryQW`],handler:d,description:`Refer to [the list of supported currencies](https://wise.com/tools/exchange-rate-alerts/).`};async function d(e){let t=s().subtract(1,`day`),r=t.subtract(1,`day`).format(`YYYY-MM-DD`);t=t.format(`YYYY-MM-DD`);let o=e.req.param(`source`).toUpperCase(),c=e.req.param(`target`).toUpperCase(),u=`https://wise.com/tools/exchange-rate-alerts/`,d=`wise:rates:${e.req.param(`source`)}-${e.req.param(`target`)}-${t}`,f=await n.tryGet(d,async()=>{let{data:e}=await a(`https://wise.com/rates/history`,{searchParams:{source:o,target:c,length:1,unit:`year`,resolution:`daily`},headers:{referer:u}}),n=e.at(-1),s=e.at(-2),f=n.value,p=s.value,m=f>p,h=(f-p)/f,g=(Math.abs(h)*100).toFixed(4);return{title:`${o}/${c} ${m?`ðŸ“ˆ`:`ðŸ“‰`} @${f} ${h>0?``:`-`}${g}%`,description:l({source:o,target:c,yesterday:t,yRate:f,dayBefore:r,byRate:p}),pubDate:i(n.time,`x`),guid:d,link:u}});return{title:`${o} to ${c} by Wise`,link:u,description:`Exchange Rate from Wise`,item:[f]}}export{u as route};