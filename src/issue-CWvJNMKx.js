import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DqHh1IN2.js";import"./helpers-gUVC02jt.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-CSnicFA3.js";import{got_default as i}from"./got-VGofQtEf.js";import a from"node:path";import{load as o}from"cheerio";import{CookieJar as s}from"tough-cookie";t();const c=new s,l={path:[`/:journal/vol/:issue`,`/:journal/:issue`],radar:[{source:[`www.sciencedirect.com/journal/:journal/*`],target:`/:journal`}],name:`Unknown`,maintainers:[],handler:u};async function u(t){let s=t.req.param(`journal`),l=`Volume `+t.req.param(`issue`).replace(`-`,` Issue `),u=`https://www.sciencedirect.com`,d=`${u}/journal/${s}/vol/${t.req.param(`issue`).replace(`-`,`/issue/`)}`,f=await i(d,{cookieJar:c}),p=o(f.data),m=p(`.anchor.js-title-link`).text(),h=p(`.js-article`).toArray().map(e=>{let t=p(e).find(`.js-article-title`).text(),n=p(e).find(`.js-article__item__authors`).text(),r=p(e).find(`.article-content-title`).attr(`href`),i=p(e).find(`.article-content-title`).attr(`id`);return{title:t,link:r,id:i,authors:n,issue:l}}),g=t=>r(a.join(e,`templates/description-cc75687b.art`),{item:t}),_=await Promise.all(h.map(e=>n.tryGet(e.link,async()=>{let t=await i(`${u}/science/article/pii/${e.id}`,{cookieJar:c}),n=o(t.data);return n(`.section-title`).remove(),e.doi=n(`.doi`).attr(`href`).replace(`https://doi.org/`,``),e.abstract=n(`.abstract.author`).text(),e.description=g(e),e})));return{title:`${m} - ${l}`,link:d,item:_}}export{l as route};