import"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as e}from"./ofetch-BASlBuka.js";import"./cache-CpEhLexq.js";import"./parse-date-CHEO0z5G.js";import"./timezone-BPfwRbwD.js";import{t}from"./types-Bn7An2Wc.js";import{t as n}from"./invalid-parameter-CLGd_tte.js";import{n as r,t as i}from"./util-CAWS-Ick.js";import{load as a}from"cheerio";const o={questions:`101`,answers:`201`},s=async t=>{let{id:s,type:c=`questions`}=t.req.param();if(c&&c!==`answers`&&c!==`questions`)throw new n("请填入合法的类型 id，可选值为 `questions` 即 `主题` 或 `answer` 即 `回复`，默认为空，即全部");let l=Number.parseInt(t.req.query(`limit`)??`30`,10),u=new URL(`/people/${s}`,r).href,d=await e(u),f=a(d),p=f(`html`).prop(`lang`)??`zh`,m=d.match(/var\sPEOPLE_USER_ID\s=\s'(\d+)';/)?.[1];if(!m)throw new n(`请填入合法的用户 id，参见用户排名 https://www.jisilu.cn/users/`);let h=new URL(`people/ajax/user_actions/uid-${m}__actions-${o[c]}__page-1`,r).href,g=a(await e(h)),_=await i(g,g(`*`),l),v=f(`meta[name="keywords"]`).prop(`content`).split(/,/)[0],y=f(`div.aw-logo img`).prop(`src`);return{title:`${f(`title`).text()}${c?` - ${f(`div#${c} h3`).text()}`:``}`,description:f(`meta[name="description"]`).prop(`content`),link:u,item:_,allowEmpty:!0,image:y,author:v,language:p,id:u}},c={path:`/people/:id/:type?`,name:`用户`,url:`www.jisilu.cn`,maintainers:[`nczitzk`],handler:s,example:`/jisilu/people/天书`,parameters:{id:`用户 id，可在对应用户页 URL 中找到`,type:"类型，可选值为 `questions` 即 `主题` 或 `answer` 即 `回复`，默认为 `questions` 即 `主题`"},description:"::: tip\n若订阅 [天书的主题](https://www.jisilu.cn/people/天书)，网址为 `https://www.jisilu.cn/people/天书`，请截取 `https://www.jisilu.cn/people/` 到末尾的部分 `天书` 作为 `id` 参数填入，此时目标路由为 [`/jisilu/people/天书`](https://rsshub.app/jisilu/people/天书)。\n:::\n\n::: tip\n前往 [用户排名](https://www.jisilu.cn/users/) 查看更多用户。\n:::\n",categories:[`finance`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.jisilu.cn/people/:id`],target:`/people/:id`}],view:t.Articles};export{s as handler,c as route};