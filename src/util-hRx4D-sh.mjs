import{n as e,t}from"./esm-shims-L08rKynx.mjs";import{t as n}from"./render-CBhnapAf.mjs";import{t as r}from"./parse-date-bKmkZ9gg.mjs";import{t as i}from"./got-Be7Twwza.mjs";import a from"node:path";import o from"node:zlib";e();const s={labelHot:`热门`,labelImportant:`重要消息`,defaultType:`article`},c={article:`article`,event:`timeline`,news:`news`},l=`https://foresightnews.pro`,u=`https://api.foresightnews.pro`,d=new URL(`foresight.ico`,l).href,f=new URL(`vertical_logo.png`,`https://img.foresightnews.pro`).href,p=async(e,u,...d)=>{let f={size:u};for(let e of d)f={...f,...e};let p={column:``},{data:m}=await i(e,{searchParams:f}),h=JSON.parse(String(o.inflateSync(Buffer.from(m.data?.list??m.data,`base64`))));return h=(h?.list??h).slice(0,u).map(e=>{let i=e.source_type??(e.source_link?e.column?.title?`article`:`news`:e.event_type?`event`:s.defaultType);e=e.source_type?e[e.source_type]:e;let o=e.column?.title;p.column=p.column||o;let u=[o,e.event_type,e.is_hot?s.labelHot:void 0,e.is_important?e.important_tag?.name??s.labelImportant:``,e.label,...e.tags?.map(e=>e.name)??[]].filter((e,t,n)=>e&&n.indexOf(e)===t),d=new URL(`${c[i]}/detail/${e.id}`,l).href;return{title:e.title,link:d,description:n(a.join(t,`templates/description-d0fddedb.art`),{image:e.img.split(`?`)[0],description:e.content??e.brief,source:e.source_link}),author:e.column?.title??e.author?.username??void 0,category:u,guid:`foresightnews-${i}#${e.id}`,pubDate:e.published_at?r(e.published_at*1e3):void 0,updated:e.last_update_at?r(e.last_update_at*1e3):void 0}}),{items:h,info:p}};export{l as a,p as i,d as n,f as r,u as t};