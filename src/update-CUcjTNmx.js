import{__dirname as e,init_esm_shims as t}from"./esm-shims-rNwigI-Q.js";import{config as n}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CeMUzp5K.js";import"./helpers-qpI1t-yV.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-DftO2d-b.js";import{got_default as a}from"./got-Di2lBekK.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/:appId`,categories:[`program-update`],example:`/winstall/Mozilla.Firefox`,parameters:{appId:`Application ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`winstall.app/apps/:appId`]}],name:`Apps Update`,maintainers:[`TonyRL`],handler:l};async function l(t){let c=`https://winstall.app`,l=t.req.param(`appId`),{data:u}=await a(`${c}/_next/data/${await r.tryGet(`winget:buildId`,async()=>{let{data:e}=await a(c),t=s(e);return JSON.parse(t(`#__NEXT_DATA__`).text()).buildId},n.cache.routeExpire,!1)}/apps/${l}.json`),{app:d}=u.pageProps,f=d.versions.map(t=>({title:`${d.name} ${t.version}`,description:i(o.join(e,`templates/desc-22b8f3f4.art`),{installers:t.installers}),author:d.publisher,category:d.tags,guid:`winstall:${l}:${t.version}`}));return{title:`${d.name} - winstall`,description:d.desc,link:`${c}/apps/${l}`,image:`https://api.winstall.app/icons/next/${l}.webp`,language:`en`,item:f}}export{c as route};