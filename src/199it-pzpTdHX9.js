import{n as e,t}from"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CfXAR0UO.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./types-Bn7An2Wc.js";import s from"node:path";import{load as c}from"cheerio";e();const l=async e=>{let{category:o=`newly`}=e.req.param(),l=Number.parseInt(e.req.query(`limit`)??`30`,10),u=`https://www.199it.com`,d=new URL(o,u).href,f=c(await n(d)),p=f(`html`).attr(`lang`)??`zh-CN`,m=[];m=f(`article.newsplus`).slice(0,l).toArray().map(e=>{let t=f(e),n=t.find(`h2.entry-title`).text(),r=t.find(`time.entry-date`).attr(`datetime`),i=t.find(`h2.entry-title a`).attr(`href`),o=t.find(`ul.post-categories li:not(submenu-parent)`).toArray(),s=[...new Set(o.map(e=>f(e).text()).filter(Boolean))],c=t.find(`img.attachment-post-thumbnail`).attr(`src`),l=r;return{title:n,pubDate:r?a(r):void 0,link:i?new URL(i,u).href:void 0,category:s,image:c,banner:c,updated:l?a(l):void 0,language:p}}),m=(await Promise.all(m.map(e=>e.link?r.tryGet(e.link,async()=>{let r=c(await n(e.link));r(`div.entry-content img.alignnone`).each((e,n)=>{let a=r(n);a.replaceWith(i(s.join(t,`templates/description-97150e54.art`),{images:a.attr(`src`)?[{src:a.attr(`src`),width:a.attr(`width`),height:a.attr(`height`)}]:void 0}))});let o=r(`h1.entry-title`).text(),l=r(`time.entry-date`).attr(`datetime`),u=r(`ul.post-categories li`).toArray(),d=[...new Set(u.map(e=>r(e).text()).filter(Boolean))],f=l,m={title:o,pubDate:l?a(l):e.pubDate,category:d,updated:f?a(f):e.updated,language:p},h=r(`ul.related_post li a`).toArray().map(e=>{let t=r(e);return{url:t.attr(`href`),type:`related`,content_html:t.text()}}).filter(e=>!0);h&&(m={...m,_extra:{links:h}}),r(`ul.related_post`).parent().remove();let g=r(`div.entry-content`).html();return m={...m,description:g,content:{html:g,text:g}},{...e,...m}}):e))).filter(e=>!0);let h=f(`title`).text();return{title:h,description:f(`meta[name="description"]`).attr(`content`),link:d,item:m,allowEmpty:!0,image:f(`h3.site-title img`).attr(`src`),author:h.split(/-/).pop()?.trim(),language:p,id:d}},u={path:`/:category{.+}?`,name:`资讯`,url:`199it.com`,maintainers:[`nczitzk`],handler:l,example:`/199it/newly`,parameters:{category:{description:"分类，默认为 `newly`，即最新，可在对应分类页 URL 中找到",options:[{label:`最新`,value:`newly`},{label:`报告`,value:`archives/category/report`},{label:`新兴产业`,value:`archives/category/emerging`},{label:`金融科技`,value:`archives/category/fintech`},{label:`共享经济`,value:`archives/category/sharingeconomy`},{label:`移动互联网`,value:`archives/category/mobile-internet`},{label:`电子商务`,value:`archives/category/electronic-commerce`},{label:`社交网络`,value:`archives/category/social-network`},{label:`网络广告`,value:`archives/category/advertising`},{label:`投资&amp;经济，互联网金融`,value:`archives/category/economic-data`},{label:`服务`,value:`archives/category/service`},{label:`网络服务行业`,value:`archives/category/dataindustry`},{label:`用户研究`,value:`archives/category/internet-users`}]}},description:`::: tip
若订阅 [研究报告](https://www.199it.com/archives/category/report)，网址为 \`https://www.199it.com/archives/category/report\`，请截取 \`https://www.199it.com/archives/category/report\` 到末尾的部分 \`archives/category/report\` 作为 \`category\` 参数填入，此时目标路由为 [\`/199it/archives/category/report\`](https://rsshub.app/199it/archives/category/report)。
:::

<details>
  <summary>更多分类</summary>

| 分类                                                                              | ID                                                                                                      |
| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| [报告](http://www.199it.com/archives/category/report)                             | [archives/category/report](https://rsshub.app/199it/archives/category/report)                           |
| [新兴产业](http://www.199it.com/archives/category/emerging)                       | [archives/category/emerging](https://rsshub.app/199it/archives/category/emerging)                       |
| [金融科技](http://www.199it.com/archives/category/fintech)                        | [archives/category/fintech](https://rsshub.app/199it/archives/category/fintech)                         |
| [共享经济](http://www.199it.com/archives/category/sharingeconomy)                 | [archives/category/sharingeconomy](https://rsshub.app/199it/archives/category/sharingeconomy)           |
| [移动互联网](http://www.199it.com/archives/category/mobile-internet)              | [archives/category/mobile-internet](https://rsshub.app/199it/archives/category/mobile-internet)         |
| [电子商务](http://www.199it.com/archives/category/electronic-commerce)            | [archives/category/electronic-commerce](https://rsshub.app/199it/archives/category/electronic-commerce) |
| [社交网络](http://www.199it.com/archives/category/social-network)                 | [archives/category/social-network](https://rsshub.app/199it/archives/category/social-network)           |
| [网络广告](http://www.199it.com/archives/category/advertising)                    | [archives/category/advertising](https://rsshub.app/199it/archives/category/advertising)                 |
| [投资&amp;经济，互联网金融](http://www.199it.com/archives/category/economic-data) | [archives/category/economic-data](https://rsshub.app/199it/archives/category/economic-data)             |
| [服务](http://www.199it.com/archives/category/service)                            | [archives/category/service](https://rsshub.app/199it/archives/category/service)                         |
| [网络服务行业](http://www.199it.com/archives/category/dataindustry)               | [archives/category/dataindustry](https://rsshub.app/199it/archives/category/dataindustry)               |
| [用户研究](http://www.199it.com/archives/category/internet-users)                 | [archives/category/internet-users](https://rsshub.app/199it/archives/category/internet-users)           |

</details>
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.199it.com/:category`],target:e=>{let t=e.category;return`/199it${t?`/${t}`:``}`}},{title:`最新`,source:[`www.199it.com/newly`],target:`/newly`},{title:`报告`,source:[`www.199it.com/archives/category/report`],target:`/archives/category/report`},{title:`新兴产业`,source:[`www.199it.com/archives/category/emerging`],target:`/archives/category/emerging`},{title:`金融科技`,source:[`www.199it.com/archives/category/fintech`],target:`/archives/category/fintech`},{title:`共享经济`,source:[`www.199it.com/archives/category/sharingeconomy`],target:`/archives/category/sharingeconomy`},{title:`移动互联网`,source:[`www.199it.com/archives/category/mobile-internet`],target:`/archives/category/mobile-internet`},{title:`电子商务`,source:[`www.199it.com/archives/category/electronic-commerce`],target:`/archives/category/electronic-commerce`},{title:`社交网络`,source:[`www.199it.com/archives/category/social-network`],target:`/archives/category/social-network`},{title:`网络广告`,source:[`www.199it.com/archives/category/advertising`],target:`/archives/category/advertising`},{title:`投资&amp;经济，互联网金融`,source:[`www.199it.com/archives/category/economic-data`],target:`/archives/category/economic-data`},{title:`服务`,source:[`www.199it.com/archives/category/service`],target:`/archives/category/service`},{title:`网络服务行业`,source:[`www.199it.com/archives/category/dataindustry`],target:`/archives/category/dataindustry`},{title:`用户研究`,source:[`www.199it.com/archives/category/internet-users`],target:`/archives/category/internet-users`}],view:o.Articles};export{l as handler,u as route};