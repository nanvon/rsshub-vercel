import"./esm-shims-DE2PJqdr.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CJF2SF6b.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import"./render-CSnicFA3.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-Baw2Nbdf.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{apiUrl as i,getBoards as a,renderDesc as o,rootUrl as s,token as c}from"./utils-CfywIh0M.js";const l={path:`/student5/:board?`,categories:[`bbs`],example:`/zuvio/student5/34`,parameters:{board:`看板 ID，空为全站文章，可在看板 URL 或下方路由找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`校園話題`,maintainers:[`TonyRL`],handler:u};async function u(l){let{board:u=``}=l.req.param(),d=u?(await a(e.tryGet)).find(e=>e.boardId===u).title:`全部`,{data:f}=await n(`${i}/article`,{searchParams:{api_token:c,user_id:`0`,board_id:u,sort:`time`,page:`1`,device:`web`,my_school_opinion:`1`}}),p=f.articles.map(e=>({title:e.title,description:e.abstract,pubDate:r(t(e.created_at),8),link:`${s}/article/${e.id}`,api:`${i}/article/${e.id}`,author:`${e.university} ${e.user_name}`,category:e.board_name}));return await Promise.all(p.map(t=>e.tryGet(t.link,async()=>{let{data:e}=await n(t.api,{searchParams:{api_token:c,user_id:`0`,device:`web`,ref:``}});return t.description=o(e),delete t.api,t}))),{title:`Zuvio 校園${d}話題 - 大學生論壇`,description:`Zuvio 校園話題千種動物頭像交流心得。最萌的匿名論壇，上千種逗趣動物頭像隨你變換，點頭像立即私訊功能，讓你找到共同話題的小夥伴！多人分享配對心得、聊天交友心情在此，快加入17分享！`,image:`https://s3.hicloud.net.tw/zuvio.public/public/system/images/irs_v4/chicken/shared/webshare.png`,link:`${s}/articles`,item:p,language:`zh-Hant`}}export{l as route};