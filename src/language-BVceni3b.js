import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CRUPiVpr.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./timezone-BPfwRbwD.js";import{t as s}from"./types-Bn7An2Wc.js";import c from"node:path";import{load as l}from"cheerio";e();const u=async e=>{let{category:s=`thelatest`}=e.req.param(),u=Number.parseInt(e.req.query(`limit`)??`30`,10),d=new URL(s,`https://language.chinadaily.com.cn`).href,f=l(await n(d)),p=f(`html`).attr(`lang`)??`zh-CN`,m=[];m=f(`div.gy_box, ul.content_list li`).slice(0,u).toArray().map(e=>{let n=f(e),r=n.find(`a:not(.gy_box_img):not(.a_img)`).first(),a=r.text(),o=n.find(`a.gy_box_img img, a.a_img img`).attr(`src`),s=i(c.join(t,`templates/description-881baa33.art`),{images:o?[{src:o,alt:a}]:void 0,intro:n.find(`p.gy_box_txt3 a`).text()}),l=r.attr(`href`);return{title:a,description:s,link:l?.startsWith(`//`)?`https:${l}`:l,content:{html:s,text:s},image:o,banner:o,language:p}}),m=(await Promise.all(m.map(e=>e.link?r.tryGet(e.link,async()=>{let r=l(await n(e.link)),s=r(`meta[ property="og:title"]`).attr(`content`),u=r(`p.main_title3`).text().split(/\s/).pop(),d=r(`meta[name="keywords"]`).attr(`content`)?.split(/,/),f=r(`meta[name="source"], meta[name="author"], meta[name="editor"]`).toArray(),m=[...new Set(f.map(e=>r(e).attr(`content`)).filter(e=>e!==void 0))].map(e=>({name:e})),h=r(`meta[property="og:image"]`).attr(`content`),g=u,_={title:s,pubDate:u?o(a(u),8):e.pubDate,category:d,author:m,image:h,banner:h,updated:g?o(a(g),8):e.updated,language:p},v=r(`iframe#playerFrame, audio`).first().attr(`src`);v&&(_={..._,enclosure_url:v?.startsWith(`//`)?`https:${v}`:v,enclosure_title:s,enclosure_length:void 0,itunes_duration:void 0,itunes_item_image:h}),r(`div.urlShareArea`).remove();let y=e.description+i(c.join(t,`templates/description-881baa33.art`),{description:r(`div#Content`).html()});return _={..._,description:y,content:{html:y,text:y}},{...e,..._}}):e))).filter(e=>!0);let h=f(`title`).text(),g=h.split(/-\s/).pop();return{title:h,description:f(`meta[name="description"]`).attr(`content`),link:d,item:m,allowEmpty:!0,image:f(`a.header2_logo1 img`).attr(`src`),author:g,language:p,itunes_author:g,itunes_category:`Language`,id:d}},d={path:`/language/:category{.+}?`,name:`英语点津`,url:`language.chinadaily.com.cn`,maintainers:[`nczitzk`],handler:u,example:`/chinadaily/language/thelatest`,parameters:{category:{description:"分类，默认为 `thelatest`，即精彩推荐，可在对应分类页 URL 中找到, Category, `thelatest`，即精彩推荐  by default",options:[{label:`精彩推荐`,value:`thelatest`},{label:`每日一词`,value:`news_hotwords/word_of_the_day`},{label:`双语新闻`,value:`news_bilingual`},{label:`新闻热词`,value:`news_hotwords`},{label:`实用口语`,value:`practice_tongue`},{label:`译词课堂`,value:`trans_collect`},{label:`图片新闻`,value:`news_photo`},{label:`视频精选`,value:`video_links`},{label:`新闻播报`,value:`audio_cd`},{label:`专栏作家`,value:`columnist`},{label:`权威发布`,value:`5af95d44a3103f6866ee845c`}]}},description:`::: tip
若订阅 [精彩推荐](https://language.chinadaily.com.cn/thelatest)，网址为 \`https://language.chinadaily.com.cn/thelatest\`，请截取 \`https://language.chinadaily.com.cn/\` 到末尾的部分 \`thelatest\` 作为 \`category\` 参数填入，此时目标路由为 [\`/chinadaily/language/thelatest\`](https://rsshub.app/chinadaily/language/thelatest)。
:::

<details>
  <summary>更多分类</summary>

| 分类                                                                         | ID                                                                                                    |
| ---------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| [精彩推荐](https://language.chinadaily.com.cn/thelatest)                     | [thelatest](https://rsshub.app/chinadaily/language/thelatest)                                         |
| [每日一词](https://language.chinadaily.com.cn/news_hotwords/word_of_the_day) | [news_hotwords/word_of_the_day](https://rsshub.app/chinadaily/language/news_hotwords/word_of_the_day) |
| [双语新闻](https://language.chinadaily.com.cn/news_bilingual)                | [news_bilingual](https://rsshub.app/chinadaily/language/news_bilingual)                               |
| [新闻热词](https://language.chinadaily.com.cn/news_hotwords)                 | [news_hotwords](https://rsshub.app/chinadaily/language/news_hotwords)                                 |
| [实用口语](https://language.chinadaily.com.cn/practice_tongue)               | [practice_tongue](https://rsshub.app/chinadaily/language/practice_tongue)                             |
| [译词课堂](https://language.chinadaily.com.cn/trans_collect)                 | [trans_collect](https://rsshub.app/chinadaily/language/trans_collect)                                 |
| [图片新闻](https://language.chinadaily.com.cn/news_photo)                    | [news_photo](https://rsshub.app/chinadaily/language/news_photo)                                       |
| [视频精选](https://language.chinadaily.com.cn/video_links)                   | [video_links](https://rsshub.app/chinadaily/language/video_links)                                     |
| [新闻播报](https://language.chinadaily.com.cn/audio_cd)                      | [audio_cd](https://rsshub.app/chinadaily/language/audio_cd)                                           |
| [专栏作家](https://language.chinadaily.com.cn/columnist)                     | [audio_cd](https://rsshub.app/chinadaily/language/columnist)                                          |
| [权威发布](https://language.chinadaily.com.cn/5af95d44a3103f6866ee845c)      | [5af95d44a3103f6866ee845c](https://rsshub.app/chinadaily/language/5af95d44a3103f6866ee845c)           |

</details>
`,categories:[`traditional-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!0,supportScihub:!1},radar:[{source:[`language.chinadaily.com.cn/:category`],target:e=>{let t=e.category;return`/chinadaily/language${t?`/${t}`:``}`}},{title:`精彩推荐`,source:[`language.chinadaily.com.cn/thelatest`],target:`/language/thelatest`},{title:`每日一词`,source:[`language.chinadaily.com.cn/news_hotwords/word_of_the_day`],target:`/language/news_hotwords/word_of_the_day`},{title:`双语新闻`,source:[`language.chinadaily.com.cn/news_bilingual`],target:`/language/news_bilingual`},{title:`新闻热词`,source:[`language.chinadaily.com.cn/news_hotwords`],target:`/language/news_hotwords`},{title:`实用口语`,source:[`language.chinadaily.com.cn/practice_tongue`],target:`/language/practice_tongue`},{title:`译词课堂`,source:[`language.chinadaily.com.cn/trans_collect`],target:`/language/trans_collect`},{title:`图片新闻`,source:[`language.chinadaily.com.cn/news_photo`],target:`/language/news_photo`},{title:`视频精选`,source:[`language.chinadaily.com.cn/video_links`],target:`/language/video_links`},{title:`新闻播报`,source:[`language.chinadaily.com.cn/audio_cd`],target:`/language/audio_cd`},{title:`专栏作家`,source:[`language.chinadaily.com.cn/columnist`],target:`/language/columnist`},{title:`权威发布`,source:[`language.chinadaily.com.cn/5af95d44a3103f6866ee845c`],target:`/language/5af95d44a3103f6866ee845c`}],view:s.Articles};export{u as handler,d as route};