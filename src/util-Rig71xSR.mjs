import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./ofetch-BRplXtiZ.mjs";import{t as r}from"./cache-Bv3_kFbE.mjs";import{t as i}from"./parse-date-_GmTZfjS.mjs";import{t as a}from"./render-CSqLtqb8.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c=`https://www.dgtle.com`,l=async(e,l)=>{let u=[];return u=l.slice(0,e).map(e=>{let n=e.title||e.content,r=e.cover,s=a(o.join(t,`templates/description-36fefaf3.art`),{images:r?[{src:r,alt:n}]:void 0,intro:e.content}),l=e.created_at,u=`${e.live_status===void 0?e.category_name?`article`:`news`:`live`}-${e.id}-1.html`,d=[...new Set([e.column,e.category_name].filter(Boolean))],f=[{name:e.user?.username??e.user_name,url:new URL(`user?uid=${e.user_id}`,c).href,avatar:e.user?.avatar_path??e.avatar_path}],p=`dgtle-${e.id}`,m=l;return{title:n,description:s,pubDate:l?i(l,`X`):void 0,link:new URL(u,c).href,category:d,author:f,guid:p,id:p,content:{html:s,text:s},image:r,banner:r,updated:m?i(m,`X`):void 0,live_status:e.live_status}}),u=await Promise.all(u.map(e=>e.live_status!==void 0||!e.link?(delete e.live_status,e):(delete e.live_status,r.tryGet(e.link,async()=>{let r=s(await n(e.link));r(`div.logo`).remove(),r(`p.tip`).remove(),r(`p.dgtle`).remove(),r(`figure`).each((e,n)=>{let i=r(n);i.replaceWith(a(o.join(t,`templates/description-36fefaf3.art`),{images:[{src:i.find(`img`).attr(`data-original`)?.replace(/_\d+_\d+_w/,``)}]}))});let i={description:a(o.join(t,`templates/description-36fefaf3.art`),{description:r(`div.whale_news_detail-daily-content, div#articleContent, div.forum-viewthread-article-box`).html()})};return{...e,...i}})))),u};export{c as n,l as t};