import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{ViewType as t}from"./types-Bi82qguM.js";import{invalid_parameter_default as n}from"./invalid-parameter-B0jPSaWz.js";import"./config-not-found-mNOcOzCd.js";import{CONFIG_OPTIONS as r,getClient as i,parsePost as a,postFilter as o}from"./utils-F1WPWM_y.js";const s={path:`/user/:name/:media?`,name:`ユーザー`,categories:[`social-media`],example:`/mixi2/user/@deyo`,parameters:{name:{description:`@で始まるユーザー名`},media:{description:"`media`を入力するとメディアを含むポストのみを取得、デフォルトは空で全てのポストを取得"}},features:{requireConfig:r,supportRadar:!0},radar:[{source:[`mixi.social/:id`],target:`/user/:id`,title:`ユーザー - ポスト`},{source:[`mixi.social/:id`],target:`/user/:id/media`,title:`ユーザー - メディア`}],view:t.SocialMedia,handler:async t=>{let r=Number.parseInt(t.req.query(`limit`)??`20`,10),s=t.req.param(`name`),c=t.req.param(`media`)===`media`;if(!s.startsWith(`@`))throw new n(`ユーザー名は@で始まる必要があります`);let l=i(),u=(await l.getPersonaByName({name:s.slice(1)})).persona,d=await l.getPersonalTimeline({personaId:u?.personaId,limit:r,mediaOnly:c});return{title:`${u?.name} - ${c?`メディア`:`ポスト`}`,image:u?.avatarUrl,item:d?.posts?.filter(o).map(t=>({title:`@${u?.name}`,description:a(t),pubDate:e(t.createdAt.seconds*1e3),guid:t.postId,author:u?.name,link:`https://mixi.social/@${u?.name}/posts/${t.postId}`}))??[]}},maintainers:[`KarasuShin`]};export{s as route};