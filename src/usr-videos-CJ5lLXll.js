import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import{t as i}from"./got-BlqYKpVp.js";import{t as a}from"./types-Bn7An2Wc.js";import o from"node:path";e();const s={path:`/user/:username/:cat?`,categories:[`social-media`],view:a.Videos,example:`/vimeo/user/filmsupply/picks`,parameters:{username:"In this example [https://vimeo.com/filmsupply](https://vimeo.com/filmsupply)  is `filmsupply`",cat:"deafult for all latest videos, others categories in this example such as `Docmentary`, `Narrative`, `Drama`. Set `picks` for promote orders, just orderd like web page. When `picks` added, published date won't show up"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`User Profile`,maintainers:[`MisteryMonster`],handler:c,description:"::: tip Special category name attention\n  Some of the categories contain slash like `3D/CG` , must change the slash `/` to the vertical bar`|`.\n:::"};async function c(e){let a=(await i({method:`get`,url:`https://vimeo.com/_rv/viewer`})).data.jwt,{username:s,cat:c}=e.req.param(),l=await i({method:`get`,url:`https://api.vimeo.com/users/${s}?fields=name,gender,bio,uri,link,categories&fetch_user_profile=1`,headers:{Authorization:`jwt ${a}`}}),u=l.data,d=l.data.categories,f;if(c&&d.length>0)for(let e of d)decodeURIComponent(c).replaceAll(`|`,`/`)===e.name&&(f=e.word);let p=`&filter=category&filter_category=${f}`;if(c||(p=``),!f&&c&&c!==`picks`)return``;let m=c&&c===`picks`,h=`${u.uri}/videos?fields=name,uri,description,created_time&include_videos=1&page=1&per_page=10${p}`,g=`/users/${s}/profile_sections?fields=videos.data.clip.name,videos.data.clip.uri,videos.data.clip.description,videos.data.clip.created_time&include_videos=1&badge=1&page=1&per_page=10`,_=await i({method:`get`,url:`https://api.vimeo.com${m?g:h}`,headers:{Authorization:`jwt ${a}`}}),v=m?_.data.data[0].videos.data:_.data.data;return{title:`${u.name} ${f?c.replace(`|`,`/`):``} ${m?`picks`:``} | Vimeo `,link:u.link,description:u.bio,item:v.map(e=>{let i=m?e.clip.description:e.description;return{title:m?e.clip.name:e.name,description:n(o.join(t,`templates/description-f7979603.art`),{videoUrl:m?e.clip.uri.replace(`/videos`,``):e.uri.replace(`/videos`,``),vdescription:i?i.replaceAll(`
`,`<br>`):``}),pubDate:r(m||c?``:e.created_time),link:`https://vimeo.com${m?e.clip.uri.replace(`videos/`,``):e.uri.replace(`videos/`,``)}`,author:u.name}})}}export{s as route};