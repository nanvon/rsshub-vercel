import"./esm-shims-BKVRry6h.mjs";import{t as e}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import{t}from"./logger-CkUWGGaS.mjs";import"./cache-Bv3_kFbE.mjs";import"./parse-date-_GmTZfjS.mjs";import"./render-CSqLtqb8.mjs";import{n,t as r}from"./utils-CKJUYJAW.mjs";import{load as i}from"cheerio";import a from"dayjs";const o={path:`/newsToday/:filter?`,example:`/visionias/newsToday`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},parameters:{filter:{description:`Period to fetch news for the current month. All news for the current month or only the latest`,default:`latest`,options:[{value:`all`,label:`All`},{value:`latest`,label:`Latest`}]}},radar:[{source:[`visionias.in/current-affairs/news-today`],target:`/newsToday`}],name:`News Today`,maintainers:[`Rjnishant530`],handler:s};async function s(n){let i=n.req.param(`filter`)??`latest`,o=a().year(),s=a().month()+1;t.debug(`Getting news for month ${s} and year ${o}`);let l=await e(`${r}/current-affairs/news-today/getbymonth?year=${o}&month=${s}`),u=[];if(l.length!==0)if(i===`latest`){let e=l[0].url;u=await c(e)}else{let e=await Promise.all(l.map(e=>c(e.url)));u.push(...e.flat())}return{title:`News Today | Current Affairs | Vision IAS`,link:`${r}/current-affairs/news-today/archive`,description:`News Today is a daily bulletin providing readers with a comprehensive overview of news developments, news types, and technical terms.`,language:`en`,item:u,image:`${r}/current-affairs/images/news-today-logo.svg`,icon:`https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,logo:`https://cdn.visionias.in/new-system-assets/images/home_page/home/vision-logo-footer.png`,allowEmpty:!0}}async function c(t){let a=i(await e(`${r}${t}`)),o=a(`#table-of-content > ul > li > a`).toArray().map(e=>{let t=a(e).attr(`href`),n=a(e).clone().children(`span`).remove().end().text().trim();return{title:n,link:n===`Also in News`?t:`${r}${t}`,guid:t}});return(await Promise.allSettled(o.map(e=>n(e,`main > div > div.mt-6 > div.flex > div.flex.mt-6`)))).flatMap(e=>e.status===`fulfilled`?Array.isArray(e.value)?e.value:[e.value]:[{title:`Error Parse News`}])}export{o as route};