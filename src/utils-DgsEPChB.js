import{n as e,t}from"./esm-shims-mGm6WwCc.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-CgQXMNWI.js";import o from"node:path";import{load as s}from"cheerio";e();const c=e=>{let n=s(e),i=n(`h2`).first().text(),a=n(`h2.author`).first().text(),c=n(`.desc`).first().text(),l=n(`img.cover__backcover`).attr(`src`),u=n(`img.cover__backcover`).attr(`alt`);return l||(l=n(`img.img-responsive`).attr(`data-src`),u=n(`img.img-responsive`).attr(`alt`)),r(o.join(t,`templates/book-e2535a5a.art`),{title:i,author:a,description:c,imageSrc:l,imageAlt:u})},l=e=>{let t=e(`script`).toArray().find(e=>{let t=e.children[0];return!t||!t.data?!1:t.data.includes(`post_date`)});if(t.length===0)return;let n=t.children[0].data.match(/(?<="post_date":").*?(?=")/);if(n)return i(n[0])};var u={parseList:(e,t,r)=>Promise.all(e.map(e=>n.tryGet(e.url,async()=>{let t=(await a(e.url)).data,n=r(t);return{title:e.title,description:n.description+`<br>`+n.content,pubDate:n.pubDate,link:e.url}}))),parseBooks:e=>{let t=s(e),n=t(`h2.read-down-text`).first().html(),r=``;return t(`.awesome-list>li`).map((e,t)=>{let n=c(t);return r+=n,n}),{description:n,content:r,pubDate:l(t)}},parseArticle:e=>{let n=s(e),i=n(`h2.hdr-smalltxt`).first().html(),a=n(`div.img-block>img`).first().attr(`src`),c=n(`div.img-block>img`).first().attr(`alt`),u=``,d=r(o.join(t,`templates/articleHeader-7457abf4.art`),{description:i,imageSrc:a,imageAlt:c});return n(`div.main-content>p,div.main-content>ul`).map((e,t)=>{let n=s(t);return u+=n.html(),n}),{description:d,content:u,pubDate:l(n)}}};export{u as t};