import"./esm-shims-BKVRry6h.mjs";import{t as e}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t}from"./cache-Bv3_kFbE.mjs";import{t as n}from"./parse-date-_GmTZfjS.mjs";const r={path:`/newsroom/:category?/:region?`,categories:[`new-media`],example:`/netflix/newsroom`,parameters:{category:{description:`Category`,default:`all`,options:[{value:`all`,label:`All News`},{value:`business`,label:`Business`},{value:`entertainment`,label:`Entertainment`},{value:`product`,label:`Product`},{value:`impact`,label:`Social Impact`}]},region:{description:`Region, can be found in the region URL`,default:`en`,options:[{value:`ar`,label:`اللغة العربية`},{value:`de`,label:`Deutsch`},{value:`el`,label:`Ελληνικά`},{value:`en`,label:`English`},{value:`es`,label:`Español (LatAm)`},{value:`es-es`,label:`Español (España)`},{value:`fr`,label:`Français`},{value:`id`,label:`Bahasa Indonesia`},{value:`it`,label:`Italiano`},{value:`ja`,label:`日本語`},{value:`ko`,label:`한국어`},{value:`pl`,label:`Polski`},{value:`pt-br`,label:`Português (Brasil)`},{value:`pt-pt`,label:`Português (Portugal)`},{value:`ro`,label:`Română`},{value:`ru`,label:`русский`},{value:`th`,label:`ไทย`},{value:`tr`,label:`Türkçe`},{value:`vi`,label:`Tiếng Việt`},{value:`zh-hans`,label:`简体中文`},{value:`zh-hant`,label:`繁體中文`}]}},radar:[{source:[`about.netflix.com/:region/newsroom`,`netflix.com`]}],name:`Newsroom`,maintainers:[`nczitzk`],handler:l,url:`about.netflix.com/`},i={all:{title:`All News`,id:`0`},business:{title:`Business`,id:`1GnkLu7bxeOTxTRNCeu5qm`},entertainment:{title:`Entertainment`,id:`3SGbaxYYG5U05Z0G4piPV7`},product:{title:`Product`,id:`5TzuQELMABTu9jOPjXXlFU`},impact:{title:`Social Impact`,id:`2bUcGjE2800LAsk3JDurGA`}},a=({url:e,alt:t,caption:n})=>`<figure><img src="${e}" alt="${t||``}">${n?`<figcaption>${n}</figcaption>`:``}</figure>`,o=({url:e,poster:t,contentType:n})=>`<video controls preload="metadata"${t?` poster="${t}"`:``}><source src="${e}" type="${n}"></video>`,s=e=>`<iframe id="ytplayer" type="text/html" width="640" height="360" src="https://www.youtube-nocookie.com/embed/${e}" frameborder="0" allowfullscreen referrerpolicy="strict-origin-when-cross-origin"></iframe>`,c=e=>{if(!e)return``;switch(e.nodeType){case`document`:return e.content?.map(e=>c(e)).join(``)||``;case`paragraph`:return`<p>${e.content?.map(e=>c(e)).join(``)||``}</p>`;case`heading-2`:return`<h2>${e.content?.map(e=>c(e)).join(``)||``}</h2>`;case`heading-3`:return`<h3>${e.content?.map(e=>c(e)).join(``)||``}</h3>`;case`heading-4`:return`<h4>${e.content?.map(e=>c(e)).join(``)||``}</h4>`;case`heading-6`:return`<h6>${e.content?.map(e=>c(e)).join(``)||``}</h6>`;case`hr`:return`<hr>`;case`text`:{let t=e.value||``;if(!e.marks||e.marks.length===0)return t;for(let n of e.marks)switch(n.type){case`bold`:t=`<strong>${t}</strong>`;break;case`italic`:t=`<em>${t}</em>`;break;case`underline`:t=`<u>${t}</u>`;break;case`strikethrough`:t=`<s>${t}</s>`;break;default:throw Error(`Unhandled mark type: ${n.type}`)}return t}case`hyperlink`:return`<a href="${e.data?.uri||`#`}" target="_blank" rel="noopener noreferrer">${e.content?.map(e=>c(e)).join(``)||``}</a>`;case`embedded-asset-block`:{let t=Object.values(e.data?.file)[0];if(!t||!t.url)return``;let n=t.url.startsWith(`//`)?`https:`+t.url:t.url,r=t.contentType||``,i=Object.values(e.data?.title)[0]||``;return r.startsWith(`image/`)?`<img src="${n}" alt="${i}">`:r.startsWith(`video/`)?o({url:n,contentType:r}):``}case`embedded-entry-block`:{let t=``;if(e.data.display===`carousel`)for(let n of e.data.images){let e=Object.values(n.file)[0],r=e.url.startsWith(`//`)?`https:`+e.url:e.url;t+=a({url:r,alt:Object.values(n.title)[0],caption:n.description?Object.values(n.description)[0]:``})}return t}case`embedded-entry-inline`:{let t=e.data.embedLink;return t.startsWith(`https://www.youtube.com/`)||t.startsWith(`https://youtu.be/`)?s(e.data.embedLink.split(`youtube.com/watch?v=`)[1]?.split(`&`)[0]||e.data.embedLink.split(`youtu.be/`)[1]?.split(`?`)[0]):`<a href="${t}" target="_blank" rel="noopener noreferrer">${e.data.title??t}</a>`}case`list-item`:return`<li>${e.content?.map(e=>c(e)).join(``)||``}</li>`;case`unordered-list`:return`<ul>${e.content?.map(e=>c(e)).join(``)||``}</ul>`;case`ordered-list`:return`<ol>${e.content?.map(e=>c(e)).join(``)||``}</ol>`;default:throw Error(`Unhandled node type: ${e.nodeType}`)}};async function l(r){let{category:l=`all`,region:u=`en`}=r.req.param(),d=`https://about.netflix.com`,f=await e(`${d}/api/data/articles`,{query:{language:u,category:i[l].id}}),p=[...f.entities.region.regionArticles,...f.entities.global.globalArticles].map(e=>({title:e.title,link:`${d}/${u}/news/${e.slug}`,pubDate:n(e.rawPublishedDate),category:[...new Set([...e.categories.map(e=>e.label),...e.locations.map(e=>e.label)])],image:e.heroImage?.url?`https:${e.heroImage.url.replace(`?w=2560`,``)}`:null,slug:e.slug})),m=await Promise.all(p.map(n=>t.tryGet(n.link,async()=>{let t=(await e(`https://about.netflix.com/api/data/entity`,{query:{language:u,entity:`slug`,slug:n.slug}})).entity.slug;if(n.description=``,t.heroVideoUrl&&!t.heroVideoUrl.startsWith(`https://www.youtube.com/`))n.description+=o({url:t.heroVideoUrl,poster:t.heroImage?.url?`https:${t.heroImage.url.replace(`?w=2560`,``)}`:``,contentType:`video/mp4`});else if(t.youtubeHero)n.description+=s(t.youtubeHero.videoLink.split(`youtube.com/watch?v=`)[1]);else if(t.heroGallery?.length)for(let e of t.heroGallery)n.description+=a({url:`https:${e.url}`,alt:e.alt,caption:e.description||e.alt});else n.description+=a({url:`https:${t.heroImage.url.replace(`?w=2560`,``)}`,alt:t.heroImage.alt,caption:t.heroImage.description||t.heroImage.alt});return n.description+=c(t.body),n})));return{title:`${i[l].title} - Newsroom - Netflix`,link:`${d}/${u}/newsroom`,image:`${d}/favicon.ico`,item:m}}export{r as route};