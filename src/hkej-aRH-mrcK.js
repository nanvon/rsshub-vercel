import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{n as i,t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./got-CgQXMNWI.js";import{t as s}from"./timezone-BPfwRbwD.js";import c from"node:path";import{load as l}from"cheerio";import{CookieJar as u}from"tough-cookie";e();const d=new u,f={index:{name:``,link:`/instantnews/`,title:`即時香港中國 國際金融 股市經濟新聞`,description:`全天候即時港股、香港財經、國際金融和經濟新聞、中國經濟新聞資訊和分析`},stock:{name:`港股直擊`,link:`/instantnews/stock`,title:`即時香港股市 股份板塊 攻略分析`,description:`全天候即時港股追蹤和直擊分析，股份異動、大行報告、沽空、速評`},hongkong:{name:`香港財經`,link:`/instantnews/hongkong`,title:`即時香港經濟 中港經濟融合追蹤分析`,description:`香港經濟和焦點行業 中港融合和商機的分析`},china:{name:`中國財經`,link:`/instantnews/china`,title:`即時中國經濟 國策焦點 中港融合追蹤分析`,description:`香港經濟和焦點行業 中港融合和商機的分析`},international:{name:`國際財經`,link:`/instantnews/international`,title:`即時國際財經 股市匯市 央行政策`,description:`國際財經 金融股市 央行政策的新聞和分析`},property:{name:`地產新聞`,link:`/property/news`,title:`地產投資`,description:`即時地產新聞, 新盤資訊, 樓市分析, 藍籌屋苑數據及室內設計鑑賞`},current:{name:`時事脈搏`,link:`/instantnews/current`,title:`即時香港中國 國際金融 股市經濟新聞`,description:`全天候即時香港股市、金融、經濟新聞資訊和分析，致力與讀者一起剖釋香港、關注兩岸、放眼全球政經格局`}},p={path:`/:category?`,categories:[`traditional-media`],example:`/hkej/index`,parameters:{category:`分类，默认为全部新闻`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hkej.com/`]}],name:`即时新闻`,maintainers:[`TonyRL`],handler:m,url:`hkej.com/`,description:`| index    | stock    | hongkong | china    | international | property | current  |
| -------- | -------- | -------- | -------- | ------------- | -------- | -------- |
| 全部新闻 | 港股直击 | 香港财经 | 中国财经 | 国际财经      | 地产新闻 | 时事脉搏 |`};async function m(e){let u=f[e.req.param(`category`)??`index`],p=`https://www2.hkej.com`,m=l((await o({method:`get`,url:p+u.link,headers:{Referer:p},cookieJar:d})).data),h=m(`h3.in_news_u_t a, h4.hkej_hl-news_topic_2014 a, div.hkej_toc_listingAll_news2_2014 h3 a, div.hkej_toc_cat_top_detail h3 a, div.allNews div.news h1 a, div#div_listingAll div.news2 h3 a`).toArray().map(e=>(e=m(e),{title:e.text().trim(),link:p+e.attr(`href`).slice(0,e.attr(`href`).lastIndexOf(`/`))})),g=e=>r(c.join(t,`templates/articleImg-cbd9e08e.art`),{pics:e}),_=(e,n)=>r(c.join(t,`templates/description-d7fb5ed6.art`),{pics:g(e),desc:n}),v=await Promise.all(h&&h.map(e=>n.tryGet(e.link,async()=>{let t=l((await o({method:`get`,url:e.link,headers:{Referer:u.link},cookieJar:d})).data);t(`#ad_popup`).remove(),t(`[class^=ad-]`).remove(),t(`[id^=ad-]`).remove(),t(`[id^=div-gpt-ad-]`).remove(),t(`.hkej_sub_ex_article_nonsubscriber_ad_2014`).remove();let n=(t(`div.hkej_detail_thumb_2014 td a`).length?t(`div.hkej_detail_thumb_2014 td a`):t(`div.thumb td a`)).toArray().map(e=>(e=m(e),{href:e.attr(`href`),title:e.attr(`title`)})),r=t(`p.info span.date`).text().trim();return e.category=t(`p.info span.cate a`).toArray().map(e=>t(e).text().trim()),e.description=_(n,t(`div#article-content`).html()),e.pubDate=s(/(今|昨)/.test(r)?i(r):a(r,`YYYY M D`),8),e}))),y={title:`信報網站 - ${u.title} - 信報網站 hkej.com`,link:p+u.link,description:`信報網站(www.hkej.com)即時新聞${u.name}，提供${u.description}。`,item:v,language:`zh-hk`};return e.set(`json`,{...y,cookieJar:d}),y}export{p as route};