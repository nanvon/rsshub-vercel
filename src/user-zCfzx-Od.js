import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CbgiXYAi.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-Do9KqzqD.js";import a from"node:path";t();const o={0:`动态`,7:`书评`,12:`视频`},s={path:`/user/:id/:type?`,categories:[`new-media`],example:`/dedao/user/VkA5OqLX4RyGxmZRNBMlwBrDaJQ9og`,parameters:{id:`用户 id，可在对应用户主页 URL 中找到`,type:"类型，见下表，默认为`0`，即动态"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`用户主页`,maintainers:[`nczitzk`],handler:c,description:`| 动态 | 书评 | 视频 |
| ---- | ---- | ---- |
| 0    | 7    | 12   |`};async function c(t){let s=t.req.param(`id`)??``,c=t.req.param(`type`)?Number.parseInt(t.req.param(`type`)):0,l=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):100,u=`https://m.igetget.com`,d=`${u}/native/mine/account#/user/detail?enId=${s}`,f=`${u}/native/api/homePage/topicNote`,p=`${u}/native/api/homePage/userInfo`,m=(await i({method:`post`,url:p,json:{hazy:s}})).data,h=m.c.nickname,g=m.c.avatar,_=`${m.c.v_info}: ${m.c.slogan}`,v=(await i({method:`post`,url:f,json:{uid:null,max_id_str:`0`,count:l,max_createtime:0,is_only_repost:0,load_chain:!0,load_tag:1,source:0,note_type:c,only_origin:!1,with_highlight:!0,hazy:s}})).data.c.list.map(t=>({author:h,title:t.content||t.note||t.extra.title,link:t.share_url,pubDate:r(t.create_time*1e3),description:n(a.join(e,`templates/user-7264910a.art`),{rootUrl:u,name:t.origin_notes_owner.name,vinfo:t.origin_notes_owner.Vinfo,content:t.content,note:t.note,extra:t.extra,video:t.video.video_cover})}));return{title:`${h}的得到主页 - ${o[c]}`,link:d,item:v,image:g,description:_,allowEmpty:!0}}export{s as route};