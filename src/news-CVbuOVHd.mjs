import"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as e}from"./cache-Bv3_kFbE.mjs";import"./helpers-Tm7Pw8Vq.mjs";import{t}from"./parse-date-_GmTZfjS.mjs";import{t as n}from"./got-BglkE51W.mjs";import{t as r}from"./util-DKFaeyia.mjs";const i={path:`/news`,categories:[`game`],example:`/xiaoheihe/news`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`游戏新闻`,maintainers:[`tssujt`],handler:a};async function a(){let i=(await n({method:`get`,url:r(`https://api.xiaoheihe.cn/bbs/app/feeds/news?os_type=web&app=heybox&client_type=mobile&version=999.0.3&x_client_type=web&x_os_type=Mac&x_app=heybox&heybox_id=-1&appid=900018355&offset=0&limit=20`)})).data.result.links.filter(e=>e.linkid!==void 0).map(e=>({linkId:e.linkid,link:`https://api.xiaoheihe.cn/v3/bbs/app/api/web/share?link_id=${e.linkid}`,title:e.title,pubDate:t(e.modify_at*1e3),description:e.description}));return i=await Promise.all(i.map(t=>e.tryGet(t.link,async()=>(t.description=(await n({method:`get`,url:r(`https://api.xiaoheihe.cn/bbs/app/api/share/data/?os_type=web&app=heybox&client_type=mobile&version=999.0.3&x_client_type=web&x_os_type=Mac&x_app=heybox&heybox_id=-1&offset=0&limit=3&link_id=${t.linkId}&use_concept_type=`)})).data.link.content[0].text,delete t.linkId,t)))),{title:`小黑盒游戏新闻`,link:`https://xiaoheihe.cn`,item:i}}export{i as route};