import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-D4MiciTC.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-07RFwdy7.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{ViewType as i}from"./types-Bi82qguM.js";import{invalid_parameter_default as a}from"./invalid-parameter-B0jPSaWz.js";import{isValidHost as o}from"./valid-host-C5HGyJZ_.js";import{load as s}from"cheerio";async function c(e){let i=`https://www.solidot.org`;/^\/.*$/.test(e)&&(e=i+e);let a=(await n({method:`get`,url:e})).data,o=s(a),c=o(`div.talk_time`).clone().children().remove().end().text().replaceAll(/^[^`]*发表于(.*分)[^`]*$/g,`$1`).replaceAll(/[年月]/g,`-`).replaceAll(`时`,`:`).replaceAll(/[分日]/g,``),l=o(`div.block_m > div.ct_tittle > div.bg_htit > h2`).text(),u=o(`div.icon_float > a`).attr(`title`),d=o(`div.talk_time > b`).text().replaceAll(/^来自(.*)部门$/g,`$1`);o(`div.ct_tittle`).remove(),o(`div.talk_time`).remove();let f=o(`div.block_m`).html().replaceAll(/(href.*?)<u>(.*?)<\/u>/g,`$1$2`).replaceAll(`href="/`,`href="`+i+`/`).replaceAll(/(<img.*liiLIZF8Uh6yM.*?>)/g,`<br><br>$1`);return{title:l,pubDate:r(t(c),8),author:d,link:e,description:f,category:u}}const l={path:`/:type?`,categories:[`traditional-media`],view:i.Articles,example:`/solidot/linux`,parameters:{type:{description:`消息类型，在网站上方选择后复制子域名或参见 [https://www.solidot.org/index.rss](https://www.solidot.org/index.rss) 即可`,options:[{value:`www`,label:`全部`},{value:`startup`,label:`创业`},{value:`linux`,label:`Linux`},{value:`science`,label:`科学`},{value:`technology`,label:`科技`},{value:`mobile`,label:`移动`},{value:`apple`,label:`苹果`},{value:`hardware`,label:`硬件`},{value:`software`,label:`软件`},{value:`security`,label:`安全`},{value:`games`,label:`游戏`},{value:`books`,label:`书籍`},{value:`ask`,label:`ask`},{value:`idle`,label:`idle`},{value:`blog`,label:`博客`},{value:`cloud`,label:`云计算`},{value:`story`,label:`奇客故事`}],default:`www`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`最新消息`,maintainers:[`sgqy`,`hang333`,`TonyRL`],handler:u};async function u(t){let r=t.req.param(`type`)??`www`;if(!o(r))throw new a(`Invalid type`);let i=`https://${r}.solidot.org`,l=(await n({method:`get`,url:i})).data,u=s(l),d=u(`div.block_m`).find(`div.bg_htit > h2 > a`),f=[];for(let e of d)f.push(u(e).attr(`href`));let p=await Promise.all(f.map(t=>e.tryGet(t,()=>c(t))));return{title:`奇客的资讯，重要的东西`,link:i,item:p}}export{l as route};