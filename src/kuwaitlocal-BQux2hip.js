import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-CmdBCkM8.js";import{load as r}from"cheerio";const i={path:`/:category?`,categories:[`new-media`],example:`/kuwaitlocal/article`,parameters:{category:"Category name, can be found in URL, `latest` by default"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`kuwaitlocal.com/news/categories/:category`],target:`/:category`}],name:`Categorised News`,maintainers:[`TonyRL`],handler:a,url:`kuwaitlocal.com/news/latest`};async function a(i){let{category:a=`latest`}=i.req.param(),o=`https://kuwaitlocal.com/news/${a===`latest`?a:`categories/${a}`}`,{data:s}=await n(o),c=r(s),l=c(`a.ggrid`).toArray().map(e=>(e=c(e),{title:e.find(`.txt`).text().trim(),link:e.attr(`href`)})),u=await Promise.all(l.map(i=>e.tryGet(i.link,async()=>{let{data:e}=await n(i.link),a=r(e);return i.pubDate=t(a(`.single_news_meta span`).eq(0).text().trim()),i.category=a(`.tags .tag`).toArray().map(e=>a(e).text().trim()),a(`[id^=div-gpt-ad]`).remove(),a(`.tags_sec2, .tags_sec, .comment`).remove(),i.description=a(`.single_news_img`).html()+a(`#news_description`).html(),i})));return{title:c(`head title`).text().trim(),description:c(`head meta[name="description"]`).attr(`content`).trim(),link:o,item:u,language:`en`}}export{i as route};