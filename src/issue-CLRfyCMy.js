import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./got-BlqYKpVp.js";import a from"node:path";import{load as o}from"cheerio";import{CookieJar as s}from"tough-cookie";e();const c=new s,l={path:[`/:journal/vol/:issue`,`/:journal/:issue`],radar:[{source:[`www.sciencedirect.com/journal/:journal/*`],target:`/:journal`}],name:`Unknown`,maintainers:[],handler:u};async function u(e){let s=e.req.param(`journal`),l=`Volume `+e.req.param(`issue`).replace(`-`,` Issue `),u=`https://www.sciencedirect.com`,d=`${u}/journal/${s}/vol/${e.req.param(`issue`).replace(`-`,`/issue/`)}`,f=o((await i(d,{cookieJar:c})).data),p=f(`.anchor.js-title-link`).text(),m=f(`.js-article`).toArray().map(e=>{let t=f(e).find(`.js-article-title`).text(),n=f(e).find(`.js-article__item__authors`).text();return{title:t,link:f(e).find(`.article-content-title`).attr(`href`),id:f(e).find(`.article-content-title`).attr(`id`),authors:n,issue:l}}),h=e=>r(a.join(t,`templates/description-cc75687b.art`),{item:e}),g=await Promise.all(m.map(e=>n.tryGet(e.link,async()=>{let t=o((await i(`${u}/science/article/pii/${e.id}`,{cookieJar:c})).data);return t(`.section-title`).remove(),e.doi=t(`.doi`).attr(`href`).replace(`https://doi.org/`,``),e.abstract=t(`.abstract.author`).text(),e.description=h(e),e})));return{title:`${p} - ${l}`,link:d,item:g}}export{l as route};