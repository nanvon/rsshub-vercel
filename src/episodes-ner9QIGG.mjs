import{t as e}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t}from"./cache-Bv3_kFbE.mjs";import{t as n}from"./parse-date-_GmTZfjS.mjs";import{t as r}from"./timezone-BAp4uBjD.mjs";import{load as i}from"cheerio";import a from"dayjs";import o from"dayjs/plugin/duration.js";a.extend(o);const s={path:`/explore/:type`,categories:[`multimedia`],example:`/podwise/explore/latest`,parameters:{type:`latest or all episodes.`},radar:[{source:[`podwise.ai/explore/:type`]}],name:`Episodes`,maintainers:[`lyling`],handler:async a=>{let o=`https://podwise.ai/explore/${a.req.param(`type`)}`,s=i(await e(o)),u=s(`#navigator`).next(),d=u.find(`h1`).first().text(),f=u.find(`p`).eq(1).text(),p=u.find(`.group`).toArray().map(e=>{e=s(e);let t=e.find(`a`).first().attr(`href`),i=e.find(`p`).first().text(),a=e.find(`a`).next().children(`span`).text();return{link:`https://podwise.ai${t}`,description:i,pubDate:r(n(a,`DD MMM YYYY`,`en`),8)}});return{title:d,description:f,link:o,item:await Promise.all(p.map(n=>t.tryGet(n.link,async()=>{let t=i(await e(n.link));n.description=t(`summary`).first().html();let r=t(`img[alt="Podcast cover"]`).eq(1).next().find(`span`).eq(2),a=JSON.parse(t(`script:contains("podName")`).first().text().match(/self\.__next_f\.push\((.+)\)/)?.[1]??``),o=JSON.parse(a[1].slice(2))[1][3].children[3].episode;return n.title=o.title,n.author=o.podName,n.itunes_item_image=o.cover,n.itunes_duration=c(r.text()),n.enclosure_url=o.link,n.enclosure_type=l(o.linkType),n})))}}};function c(e){let t=e.match(/(\d+h)?(\d+m)?/),n=t[1]?Number.parseInt(t[1]):0,r=t[2]?Number.parseInt(t[2]):0;return a.duration({hours:n,minutes:r}).asSeconds()}function l(e){switch(e){case`mp3`:return`audio/mpeg`;case`m4a`:return`audio/x-m4a`;case`mp4`:return`video/mp4`;default:return e}}export{s as route};