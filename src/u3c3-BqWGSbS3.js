import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CeMUzp5K.js";import"./helpers-qpI1t-yV.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{got_default as t}from"./got-Di2lBekK.js";import{load as n}from"cheerio";const r={path:[`/search/:keyword/:preview?`,`/:type?/:preview?`],categories:[`multimedia`],example:`/u3c3/search/新片速递`,parameters:{keyword:`Search keyword`,preview:`Show image preview, off by default, non empty value means on`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!0,supportPodcast:!1,supportScihub:!1},name:`Search`,maintainers:[`storytellerF`],handler:i};async function i(r){let{type:i,keywoard:a,preview:o}=r.req.param(),s=`https://www.u3c3.com`,c,l;a?(c=`${s}/?search=${a}`,l=`search ${a} - u3c3`):i===void 0?(c=s,l=`home - u3c3`):(c=`${s}/?type=${i}&p=1`,l=`${i} - u3c3`);let u=n((await t(c)).data),d=u(`body > div.container > div.table-responsive > table > tbody > tr`).toArray().map(e=>{e=u(e);let t=e.find(`td:nth-of-type(2) > a `).attr(`title`),n=s+e.find(`td:nth-of-type(2) > a`).attr(`href`);return{title:t,guid:n,link:n,pubDate:e.find(`td:nth-of-type(5)`).text(),enclosure_url:e.find(`td:nth-of-type(3) > a:nth-of-type(2)`).attr(`href`),enclosure_type:`application/x-bittorrent`}}),f=o?await Promise.all(d.map(r=>e.tryGet(r.link,async()=>{let{data:e}=await t(r.link);return r.description=n(e)(`div.panel-footer > img:first-child`).parent().html(),r}))):d;return{title:l,description:l,link:c,item:f}}export{r as route};