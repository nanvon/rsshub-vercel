import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CeMUzp5K.js";import"./helpers-qpI1t-yV.js";import"./cache-Dfid4xgQ.js";import"./parse-date-DHsdom8D.js";import{got_default as e}from"./got-Di2lBekK.js";import{ViewType as t}from"./types-Bi82qguM.js";import{fetchArticle as n,removeDuplicateByKey as r}from"./utils-CG7PfmfS.js";import{load as i}from"cheerio";import a from"p-map";const o=`https://apnews.com`,s={path:[`/topics/:topic?`,`/nav/:nav{.*}?`],categories:[`traditional-media`],example:`/apnews/topics/apf-topnews`,view:t.Articles,parameters:{topic:{description:"Topic name, can be found in URL. For example: the topic name of AP Top News [https://apnews.com/apf-topnews](https://apnews.com/apf-topnews) is `apf-topnews`",default:`trending-news`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`apnews.com/hub/:topic`],target:`/topics/:topic`}],name:`Topics`,maintainers:[`zoenglinghou`,`mjysci`,`TonyRL`],handler:c};async function c(t){let{topic:s=`trending-news`,nav:c=``}=t.req.param(),l=t.req.routePath===`/apnews/nav/:nav{.*}?`?`${o}/${c}`:`${o}/hub/${s}`,u=i((await e(l)).data),d=u(`:is(.PagePromo-content, .PageListStandardE-leadPromo-info) bsp-custom-headline`).toArray().slice(0,t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):1/0).map(e=>({title:u(e).find(`span.PagePromoContentIcons-text`).text(),link:u(e).find(`a`).attr(`href`)})).filter(e=>typeof e.link==`string`),f=t.req.query(`fulltext`)===`true`?await a(d,e=>n(e),{concurrency:10}):d;return{title:u(`title`).text(),description:u(`meta[property='og:description']`).text(),link:l,item:r(f,`link`),language:u(`html`).attr(`lang`)}}export{s as route};