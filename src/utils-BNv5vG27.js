import{ofetch_default as e}from"./ofetch-CJF2SF6b.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";const i=`https://www.joshwcomeau.com`;async function a(t,n){let i=await e(t),a=r(i),o=a(`header>h1`).text(),s=a(n).toArray().map(e=>{let t=a(e).attr(`href`),n=a(e).find(`span`).text();return{url:t,cardTitle:n}});return{heading:o,urls:s}}async function o(e){return(await Promise.allSettled(e.map(async e=>await t.tryGet(`joshwcomeau:${e.url}`,async()=>await s(e))))).map((t,n)=>t.status===`fulfilled`?t.value:{title:`Error Reading Item`,link:`${i}${e[n]?.url}`})}async function s({url:t,cardTitle:n}){if(t.startsWith(`https`))return{title:n??`External Content`,description:`Read it on external Site`,link:t};let a=await e(`${i}${t}`),o=r(a),s=o(`meta[property="og:title"]`).attr(`content`)?.replace(`â€¢ Josh W. Comeau`,``),l=o(`meta[property="og:description"]`).attr(`content`),u=o(`meta[name="author"]`).attr(`content`),d=o(`div[data-parent-layout]`),f=d.find(`dl:first-child > dd > a`).text(),p=d.find(`dl:first-child > dd:has(span):not(:last-child)`).text(),m=d.find(`dl:last-child > dd:has(span):not(:last-child)`).text(),h=o(`main > article`).html();return{title:s,description:h,author:u,pubDate:c(p),updated:c(m),link:`${i}${t}`,content:{html:h,text:l},category:[f]}}function c(e){let t=e.trim().replaceAll(` `,`/`).replace(`,`,``);return n(t,`MMMM/Do/YYYY`,`en`)}export{a as getRelativeUrlList,o as processList,i as rootUrl};