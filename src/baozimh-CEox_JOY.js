import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CbgiXYAi.js";import"./helpers-gUVC02jt.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-CSnicFA3.js";import{got_default as i}from"./got-Do9KqzqD.js";import a from"node:path";import{load as o}from"cheerio";t();const s=`https://www.baozimh.com`,c={path:`/comic/:name`,categories:[`anime`],example:`/baozimh/comic/guowangpaiming-shiricaofu`,parameters:{name:"漫画名称，在漫画链接可以得到(`comic/` 后的那段)"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.baozimh.com/comic/:name`]}],name:`订阅漫画`,maintainers:[`Fatpandac`],handler:l};async function l(t){let c=t.req.param(`name`),l=`${s}/comic/${c}`,u=await i(l),d=o(u.data),f=d(`div > div.pure-u-1-1.pure-u-sm-2-3.pure-u-md-3-4 > div > h1`).text(),p=d(`#chapter-items`).first().children().toArray().map(e=>{let t=d(e).find(`span`).text(),n=s+d(e).find(`a`).attr(`href`);return{title:t,link:n}}),m=d(`#chapters_other_list`).first().children().toArray().map(e=>{let t=d(e).find(`span`).text(),n=s+d(e).find(`a`).attr(`href`);return{title:t,link:n}}),h=[...p,...m];h.reverse();let g=await Promise.all(h.map(t=>n.tryGet(t.link,async()=>{let n=await i(t.link),s=o(n.data);return t.description=r(a.join(e,`templates/desc-8ab6b3de.art`),{imgUrlList:s(`.comic-contain`).find(`amp-img`).toArray().map(e=>s(e).attr(`src`))}),t})));return{title:`包子漫画-${f}`,description:d(`.comics-detail__desc`).text(),link:l,item:g}}export{c as route};