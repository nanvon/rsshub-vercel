import"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./dist-Bbb0mfHh.js";import"./helpers-DzX-lcQO.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./ofetch-Dnmc-sKl.js";import{got_default as t}from"./got-CdHCxDMi.js";import{load as n}from"cheerio";const r={path:`/daily/:id?`,categories:[`programming`],example:`/luogu/daily`,parameters:{id:"年度日报所在帖子 id，可在 URL 中找到，不填默认为 `47327`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`luogu.com.cn/discuss/47327`,`luogu.com.cn/`],target:`/daily`}],name:`日报`,maintainers:[`LogicJake`,`prnake`,`nczitzk`],handler:i,url:`luogu.com.cn/discuss/47327`};async function i(r){let i=r.req.param(`id`)??47327,a=`https://www.luogu.com.cn/discuss/${i}`,o=await t(a),s=n(o.data),c=s(`head title`).text(),l=s(`head script:contains("window._feInjection")`).text(),u=l.match(/window\._feInjection = JSON\.parse\(decodeURIComponent\("(.*?)"\)\);/)[1],d=JSON.parse(decodeURIComponent(u)),f=d.currentData.post.content,p=f.match(/<([^>]*)>/)[1],{data:m}=await t(p),h=n(m),g=h(`.am-article-title`).first().text().trim(),_=[{title:c,description:h(`#article-content`).html(),link:a,author:d.currentData.post.author.name,guid:`${a}#${g}`,pubDate:e(d.currentData.post.time)}];return{title:`洛谷日报`,link:a,item:_}}export{r as route};