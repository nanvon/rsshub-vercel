import{n as e,t}from"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CfXAR0UO.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./timezone-BPfwRbwD.js";import{t as s}from"./types-Bn7An2Wc.js";import c from"node:path";import{load as l}from"cheerio";e();const u=async e=>{let{id:s=`jinritan`}=e.req.param(),u=Number.parseInt(e.req.query(`limit`)??`30`,10),d=`http://www.banyuetan.org`,f=new URL(`byt/${s}/index.html`,d).href,p=l(await n(f)),m=p(`html`).attr(`lang`)??`zh`,h=[];h=p(`div.bty_tbtj_list ul.clearFix li`).slice(0,u).toArray().map(e=>{let n=p(e),r=n.find(`h3 a`),o=r.text(),s=n.find(`img`).attr(`src`),l=i(c.join(t,`templates/description-881baa33.art`),{images:s?[{src:s,alt:o}]:void 0,intro:n.find(`p`).text()}),u=n.find(`span.tag3`).text(),d=r.attr(`href`),f=u;return{title:o,description:l,pubDate:u?a(u):void 0,link:d,content:{html:l,text:l},image:s,banner:s,updated:f?a(f):void 0,language:m}}),h=await Promise.all(h.map(e=>e.link?r.tryGet(e.link,async()=>{let r=l(await n(e.link)),s=r(`div.detail_tit h1`).text(),u=e.description+i(c.join(t,`templates/description-881baa33.art`),{description:r(`div#detail_content`).html()}),d=r(`meta[property="og:release_date"]`).attr(`content`),f=r(`META[name="keywords"]`).attr(`content`)?.split(/,/)??[],p=[...r(`META[name="author"]`).toArray(),...r(`META[name="source"]`).toArray()].map(e=>({name:r(e).attr(`content`),url:void 0,avatar:void 0})),h=r(`meta[property="og:image"]`).attr(`content`),g=d,_={title:s,description:u,pubDate:d?o(a(d),8):e.pubDate,category:f,author:p,content:{html:u,text:u},image:h,banner:h,updated:g?o(a(g),8):e.updated,language:m};return{...e,..._}}):e));let g=p(`title`).text();return{title:g,description:g,link:f,item:h,allowEmpty:!0,image:new URL(`static/v1/image/logo.png`,d).href,author:g.split(/—/).pop(),language:m,id:f}},d={path:`/:id?`,name:`栏目`,url:`www.banyuetan.org`,maintainers:[`nczitzk`],handler:u,example:`/banyuetan/jinritan`,parameters:{id:{description:"栏目 ID，默认为 `jinritan`，即今日谈，可在对应分类页 URL 中找到",options:[{label:`今日谈`,value:`jinritan`},{label:`时政讲解`,value:`shizhengjiangjie`},{label:`评论`,value:`banyuetanpinglun`},{label:`基层治理`,value:`jicengzhili`},{label:`文化`,value:`wenhua`},{label:`教育`,value:`jiaoyu`}]}},description:`::: tip
订阅 [今日谈](http://www.banyuetan.org/byt/jinritan/)，其源网址为 \`http://www.banyuetan.org/byt/jinritan/\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/banyuetan/jinritan\`](https://rsshub.app/banyuetan/jinritan)。
:::

| 栏目                                                                 | ID                                                                |
| -------------------------------------------------------------------- | ----------------------------------------------------------------- |
| [今日谈](http://www.banyuetan.org/byt/jinritan/index.html)           | [jinritan](https://rsshub.app/banyuetan/jinritan)                 |
| [时政讲解](http://www.banyuetan.org/byt/shizhengjiangjie/index.html) | [shizhengjiangjie](https://rsshub.app/banyuetan/shizhengjiangjie) |
| [评论](http://www.banyuetan.org/byt/banyuetanpinglun/index.html)     | [banyuetanpinglun](https://rsshub.app/banyuetan/banyuetanpinglun) |
| [基层治理](http://www.banyuetan.org/byt/jicengzhili/index.html)      | [jicengzhili](https://rsshub.app/banyuetan/jicengzhili)           |
| [文化](http://www.banyuetan.org/byt/wenhua/index.html)               | [wenhua](https://rsshub.app/banyuetan/wenhua)                     |
| [教育](http://www.banyuetan.org/byt/jiaoyu/index.html)               | [jiaoyu](https://rsshub.app/banyuetan/jiaoyu)                     |

`,categories:[`traditional-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.banyuetan.org/byt/:id`],target:`/:id`},{title:`今日谈`,source:[`www.banyuetan.org/byt/jinritan/index.html`],target:`/jinritan`},{title:`时政讲解`,source:[`www.banyuetan.org/byt/shizhengjiangjie/index.html`],target:`/shizhengjiangjie`},{title:`评论`,source:[`www.banyuetan.org/byt/banyuetanpinglun/index.html`],target:`/banyuetanpinglun`},{title:`基层治理`,source:[`www.banyuetan.org/byt/jicengzhili/index.html`],target:`/jicengzhili`},{title:`文化`,source:[`www.banyuetan.org/byt/wenhua/index.html`],target:`/wenhua`},{title:`教育`,source:[`www.banyuetan.org/byt/jiaoyu/index.html`],target:`/jiaoyu`}],view:s.Articles};export{u as handler,d as route};