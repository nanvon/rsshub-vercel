import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import"./helpers-Tm7Pw8Vq.mjs";import{t as n}from"./parse-date-_GmTZfjS.mjs";import{t as r}from"./render-CSqLtqb8.mjs";import{t as i}from"./got-BglkE51W.mjs";import{r as a,t as o}from"./query-C8S2TKOf.mjs";import s from"node:path";e();const c={path:`/thread/:id`,radar:[{source:[`lkong.com/thread/:id`,`lkong.com/`]}],name:`Unknown`,maintainers:[`nczitzk`,`ma6254`],handler:l};async function l(e){let c=e.req.param(`id`),l=`https://www.lkong.com`,u=`https://api.lkong.com/api`,d=`${l}/thread/${c}`,f=await i({method:`post`,url:u,json:o(c)});if(f.data.errors)throw Error(f.data.errors[0].message);let p=await i({method:`post`,url:u,json:a(c,Math.ceil(f.data.data.thread.replies/20))}),m=p.data.data.posts.map(e=>({guid:e.pid,author:e.user.name,title:`#${e.lou} ${e.user.name}`,link:`${l}/thread/${c}?pid=${e.pid}`,pubDate:n(e.dateline),description:(e.quote?r(s.join(t,`templates/quote-0d63bb36.art`),{target:`${l}/thread/${c}?pid=${e.quote.pid}`,author:e.quote.author.name,content:r(s.join(t,`templates/content-b0aebebb.art`),{content:JSON.parse(e.quote.content)})}):``)+r(s.join(t,`templates/content-b0aebebb.art`),{content:JSON.parse(e.content)})}));return{title:`${p.data.data.thread.title} - 龙空`,link:d,item:m}}export{c as route};