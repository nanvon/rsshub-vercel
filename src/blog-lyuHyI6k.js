import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-DqHh1IN2.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ViewType as r}from"./types-Bi82qguM.js";import{load as i}from"cheerio";const a=async r=>{let a=Number.parseInt(r.req.query(`limit`)??`30`,10),o=`https://kiro.dev`,s=new URL(`blog/`,o).href,c=await e(s),l=i(c),u=l(`html`).attr(`lang`)??`en`,d=[];return d=l(`main a.group`).slice(0,a).toArray().map(e=>{let t=l(e),r=t.find(`h4`).text(),i=t.find(`time`).text(),a=t.attr(`href`),s=i;return{title:r,pubDate:i?n(i):void 0,link:a?new URL(a,o).href:void 0,updated:s?n(s):void 0,language:u}}),d=await Promise.all(d.map(r=>r.link?t.tryGet(r.link,async()=>{let t=await e(r.link),a=i(t),o=a(`header h1`).text(),s=a(`div.prose`).html()??void 0,c=a(`time`).text(),l=a(`img.aspect-square`).parent().parent(),d=[{name:l.find(`p`).first().text(),url:void 0,avatar:l.find(`img`).attr(`src`)}],f=a(`meta[property="og:image"]`).attr(`content`),p=c,m={title:o,description:s,pubDate:c?n(c):r.pubDate,author:d,content:{html:s,text:s},image:f,banner:f,updated:p?n(p):r.updated,language:u};return{...r,...m}}):r)),{title:l(`title`).text(),description:l(`meta[property="og:description"]`).attr(`content`),link:s,item:d,allowEmpty:!0,image:l(`meta[property="og:image"]`).attr(`content`),author:l(`meta[property="og:site_name"]`).attr(`content`),language:u,id:s}},o={path:`/blog`,name:`Blog`,url:`kiro.dev`,maintainers:[`nczitzk`],handler:a,example:`/kiro/blog`,parameters:void 0,description:void 0,categories:[`programming`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`kiro.dev`,`kiro.dev/blog/`],target:`/blog`}],view:r.Articles};export{a as handler,o as route};