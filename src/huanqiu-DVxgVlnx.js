import"./esm-shims-DE2PJqdr.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CJF2SF6b.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-Baw2Nbdf.js";import{invalid_parameter_default as r}from"./invalid-parameter-B0jPSaWz.js";import{isValidHost as i}from"./valid-host-C5HGyJZ_.js";import{load as a}from"cheerio";function o(e,t,n,r){for(let i of Object.values(e))i[t]===void 0?r.push(i[n]):o(i[t],t,n,r);return r}const s={path:`/news/:category?`,categories:[`traditional-media`],example:`/huanqiu/news/china`,parameters:{category:`类别，可以使用二级域名作为参数，默认为：china`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`huanqiu.com/`]}],name:`分类`,maintainers:[`yuxinliu-alex`],handler:c,url:`huanqiu.com/`,description:`| 国内新闻 | 国际新闻 | 军事 | 台海   | 评论    |
| -------- | -------- | ---- | ------ | ------- |
| china    | world    | mil  | taiwai | opinion |`};async function c(s){let c=s.req.param(`category`)??`china`;if(!i(c))throw new r(`Invalid category`);let l=`https://${c}.huanqiu.com`,u=await n({method:`get`,url:`${l}/api/channel_pc`}),d=o(u.data.children,`children`,`domain_name`,[])[0],f=o(u.data.children,`children`,`node`,[]).map(e=>`"${e}"`).join(`,`),p=(await n({method:`get`,url:`${l}/api/list?node=${f}&offset=0&limit=${s.req.query(`limit`)??20}`})).data.list.filter(e=>e.aid).map(e=>({link:`${l}/article/${e.aid}`,title:e.title}));return p=await Promise.all(p.map(r=>e.tryGet(r.link,async()=>{let e=await n({method:`get`,url:r.link}),i=a(e.data);return r.description=i(`textarea.article-content`).text(),r.author=i(`span`,`.source`).text(),r.pubDate=t(Number.parseInt(i(`textarea.article-time`).text())),r.category=i(`meta[name="keywords"]`).attr(`content`).split(`,`),r}))),{title:`${d} - 环球网`,link:l,description:`环球网`,language:`zh-cn`,item:p}}export{s as route};