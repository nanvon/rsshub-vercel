import"./esm-shims-DE2PJqdr.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CJF2SF6b.js";import"./cache-Dfid4xgQ.js";import"./render-CSnicFA3.js";import"./parse-date-DHsdom8D.js";import"./timezone-CMz5pnRe.js";import"./config-not-found-mNOcOzCd.js";import{INDEX_URL as e,LOGO_URL as t,POST_PART as n,POST_TYPE as r,REQUIRE_CONFIG as i,checkConfig as a,generatePostFeeds as o,getPosts as s}from"./utils-B-fNSdOm.js";const c={path:`/ff14risingstones/posts/:pid?/:type?`,example:`/sdo/ff14risingstones/posts/all/hot`,name:`帖子`,categories:[`bbs`],maintainers:[`KarasuShin`],features:{requireConfig:i},parameters:{pid:{description:"分区id，默认显示所有分区，可通过 `,` 拼接多个分区 id 进行筛选",default:`all`,options:[{label:`全部`,value:`all`},...n]},type:{description:`帖文类型，默认不做筛选`,options:[{label:`置顶`,value:`top`},{label:`精华`,value:`refine`},{label:`周热门`,value:`hot`}]}},handler:l};async function l(i){a();let c=i.req.query(`limit`)||20,l=i.req.param(`pid`)?.split(`,`).filter(e=>n.some(t=>t.value===e))??[],u=i.req.param(`type`),d=l.length?l.map(e=>n.find(t=>t.value===e)?.label).join(`，`):``,f=await s({type:1,limit:c,order:`latest`,hotType:u===`hot`?`postsHotWeek`:`postsHotNow`,is_refine:u===`refine`?1:0,is_top:u===`top`?1:0,part_id:l.length?l.join(`,`):void 0});return{title:`石之家 - ${r[u]??``}帖文${d?` - ${d}`:``}`,link:`${e}#/post`,image:t,item:await o(f)}}export{c as route};