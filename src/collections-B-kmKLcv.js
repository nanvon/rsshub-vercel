import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import{ofetch_default as r}from"./ofetch-e4r9n7lx.js";import{art as i}from"./render-CSnicFA3.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{timezone as o}from"./timezone-CMz5pnRe.js";import s from"node:path";t();const c=e=>{let t={1:`想看`,2:`看过`,3:`在看`,4:`搁置`,5:`抛弃`};switch(e){case`1`:return{1:`想读`,2:`读过`,3:`在读`,4:`搁置`,5:`抛弃`};case`2`:case`6`:return t;case`3`:return{1:`想听`,2:`听过`,3:`在听`,4:`搁置`,5:`抛弃`};case`4`:return{1:`想玩`,2:`玩过`,3:`在玩`,4:`搁置`,5:`抛弃`};default:return t}},l={path:`/user/collections/:id/:subjectType/:type`,categories:[`anime`],example:`/bangumi.tv/user/collections/sai/1/1`,parameters:{id:`用户 id, 在用户页面地址栏查看`,subjectType:{description:"全部类别: `空`、book: `1`、anime: `2`、music: `3`、game: `4`、real: `6`",options:[{value:`ALL`,label:`all`},{value:`book`,label:`1`},{value:`anime`,label:`2`},{value:`music`,label:`3`},{value:`game`,label:`4`},{value:`real`,label:`6`}]},type:{description:"全部类别: `空`、想看: `1`、看过: `2`、在看: `3`、搁置: `4`、抛弃: `5`",options:[{value:`ALL`,label:`all`},{value:`想看`,label:`1`},{value:`看过`,label:`2`},{value:`在看`,label:`3`},{value:`搁置`,label:`4`},{value:`抛弃`,label:`5`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`bgm.tv/anime/list/:id`],target:`/bangumi.tv/user/collections/:id/all/all`},{source:[`bangumi.tv/anime/list/:id`],target:`/bangumi.tv/user/collections/:id/all/all`},{source:[`bgm.tv/anime/list/:id/wish`],target:`/bangumi.tv/user/collections/:id/2/1`},{source:[`bangumi.tv/anime/list/:id/wish`],target:`/bangumi.tv/user/collections/:id/2/1`}],name:`Bangumi 用户收藏列表`,maintainers:[`youyou-sudo`,`honue`],handler:u};async function u(t){let l=t.req.param(`id`),u=t.req.param(`subjectType`)||``,d=t.req.param(`type`)||``,f={1:`书籍`,2:`动画`,3:`音乐`,4:`游戏`,6:`三次元`},p=c(u)[d]||``,m=f[u]||``,h=``;h=p&&m?`${p}的${m}列表`:p?`${p}的列表`:m?`收藏的${m}列表`:`的Bangumi收藏列表`;let g=`https://api.bgm.tv/v0/users/${l}`,_=await r(g,{headers:{"User-Agent":n.trueUA}}),v=`https://api.bgm.tv/v0/users/${l}/collections?${u&&u!==`all`?`subject_type=${u}`:``}${d&&d!==`all`?`&type=${d}`:``}`,y=await r(v,{headers:{"User-Agent":n.trueUA}}),b=_.nickname,x=y.data.map(t=>{let n=t.subject.name_cn||t.subject.name,r=t.updated_at,l=t.subject_id;return{title:`${d===`all`?`${c(t.subject_type)[t.type]}：`:``}${n}`,description:i(s.join(e,`templates/subject-b5a6d9b1.art`),{routeSubjectType:u,subjectTypeName:f[t.subject_type],subjectType:t.subject_type,subjectEps:t.subject.eps,epStatus:t.ep_status,score:t.subject.score,date:t.subject.date,picUrl:t.subject.images.large}),link:`https://bgm.tv/subject/${l}`,pubDate:o(a(r),0)}});return{title:`${b}${h}`,link:`https://bgm.tv/user/${l}/collections`,item:x,description:`${b}${h}`}}export{l as route};