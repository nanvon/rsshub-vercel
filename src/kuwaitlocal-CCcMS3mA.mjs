import"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-BMqiDsx_.mjs";import"./helpers-mo8InLYm.mjs";import{t as e}from"./cache-ZTWfXd2T.mjs";import{t}from"./parse-date-bKmkZ9gg.mjs";import{t as n}from"./got-2jXbf1Li.mjs";import{load as r}from"cheerio";const i={path:`/:category?`,categories:[`new-media`],example:`/kuwaitlocal/article`,parameters:{category:"Category name, can be found in URL, `latest` by default"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`kuwaitlocal.com/news/categories/:category`],target:`/:category`}],name:`Categorised News`,maintainers:[`TonyRL`],handler:a,url:`kuwaitlocal.com/news/latest`};async function a(i){let{category:a=`latest`}=i.req.param(),o=`https://kuwaitlocal.com/news/${a===`latest`?a:`categories/${a}`}`,{data:s}=await n(o),c=r(s),l=c(`a.ggrid`).toArray().map(e=>(e=c(e),{title:e.find(`.txt`).text().trim(),link:e.attr(`href`)})),u=await Promise.all(l.map(i=>e.tryGet(i.link,async()=>{let{data:e}=await n(i.link),a=r(e);return i.pubDate=t(a(`.single_news_meta span`).eq(0).text().trim()),i.category=a(`.tags .tag`).toArray().map(e=>a(e).text().trim()),a(`[id^=div-gpt-ad]`).remove(),a(`.tags_sec2, .tags_sec, .comment`).remove(),i.description=a(`.single_news_img`).html()+a(`#news_description`).html(),i})));return{title:c(`head title`).text().trim(),description:c(`head meta[name="description"]`).attr(`content`).trim(),link:o,item:u,language:`en`}}export{i as route};