import"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import{t as e}from"./ofetch-BMqiDsx_.mjs";import{t}from"./cache-ZTWfXd2T.mjs";import{t as n}from"./parse-date-bKmkZ9gg.mjs";import{load as r}from"cheerio";const i={path:`/blog`,categories:[`blog`],example:`/railway/blog`,url:`blog.railway.com`,name:`Blog`,maintainers:[`jihuayu`],handler:a};async function a(e){return{title:`Railway articles`,link:`https://blog.railway.com`,item:await o(Number.parseInt(e.req.query(`limit`)||`10`))}}const o=async i=>{let a=r(await e(`https://blog.railway.com/rss.xml`,{responseType:`text`}),{xml:!0});return Promise.all(a(`item`).toArray().slice(0,i).map(e=>{let r=a(e).find(`guid`).text();return t.tryGet(`railway:blogs:${r}`,async()=>{let t=a(e).find(`title`).text(),i=a(e).find(`pubDate`).text(),o=a(e).find(`link`).text(),{content:c}=await s(o);return{guid:r,title:t,link:o,pubDate:n(i),description:c}})}))},s=async t=>({content:r(await e(t))(`article > section `).html()??void 0});export{s as fetchArticleDetails,o as fetchArticles,i as route};