import"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-D5TEN1xL.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{load as i}from"cheerio";const a=`https://u9a9.com`,o={path:[`/:preview?`,`/search/:keyword/:preview?`],example:`/u9a9/search/新片速递`,radar:[{source:[`u9a9.com/`],target:``}],name:`Search`,maintainers:[`TonyRL`],handler:s,url:`u9a9.com/`};async function s(o){let{preview:s,keyword:c}=o.req.param(),l,u;c?(l=`${a}/?type=2&search=${c}`,u=`${c} - U9A9`):(l=a,u=`U9A9`);let{data:d}=await n(l),f=i(d),p=f(`table tr`).slice(1).toArray().map(e=>{e=f(e);let n=e.find(`td`).eq(1).find(`a`),{size:i,unit:o}=e.find(`td`).eq(3).text().match(/(?<size>\d+\.\d+)\s(?<unit>\w+)/).groups;return{title:n.attr(`title`),link:`${a}${n.attr(`href`)}`,pubDate:r(t(e.find(`td`).eq(4).text()),8),enclosure_url:e.find(`td`).eq(2).find(`a`).eq(1).attr(`href`),enclosure_length:Number.parseInt(i*(o===`GB`?1024*1024*1024:1024*1024)),enclosure_type:`application/x-bittorrent`}}),m=s?await Promise.all(p.map(t=>e.tryGet(t.link,async()=>{let{data:e}=await n(t.link);return t.description=i(e)(`.panel-body`).eq(1).html(),t}))):p;return{title:u,link:l,item:m}}export{o as route};