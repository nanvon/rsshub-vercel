import"./esm-shims-Dqvxr0BZ.js";import"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import"./ofetch-e4r9n7lx.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-BjesfGXD.js";import{got_default as t}from"./got-DF7DsGgk.js";import{load as n}from"cheerio";const r=`https://ipsw.me/`,i={path:`/index/:ptype/:pname`,categories:[`program-update`],example:`/ipsw/index/ipsws/iPad8,11`,parameters:{ptype:`Fill in ipsws or otas to get different versions of firmware`,pname:"Product name, `http://rsshub.app/ipsw/index/ipsws/iPod`, if you fill in the iPad, follow the entire iPad series(ptype default to ipsws).`http://rsshub.app/ipsw/index/ipsws/iPhone11,8`, if you fill in the specific iPhone11,8, submit to the ipsws firmware information of this model"},name:`Apple Firmware Update-IPSWs/OTAs version`,maintainers:[`Jeason0228`],handler:o};function a(e){return e=e.replace(`';`,``),e=e.replace(`window.location = '/`,r),e}async function o(i){let{pname:o,ptype:s}=i.req.param(),c=`https://ipsw.me/product/${o}`;o.includes(`,`)?s===`otas`?c=`https://ipsw.me/${s}/${o}`:s===`ipsws`&&(c=`https://ipsw.me/${o}`):c=`https://ipsw.me/product/${o}`;let l=await t({method:`get`,url:c,headers:{Referer:r}}),u=n(l.data),d=o.includes(`,`)?u(`.firmware`).toArray().map(e=>({title:u(e).find(`td`).eq(1).text(),link:a(u(e).attr(`onclick`))})):u(`.products a`).toArray().map(e=>({title:u(e).find(`img`).attr(`alt`),link:u(e).attr(`href`)})),f=await Promise.all(d.map(i=>{let a=i.title,s=new URL(i.link,r).href;return e.tryGet(s,async()=>{let e=await t({method:`get`,url:s,headers:{Referer:r}}),i=n(e.data),c=i(`div.selector__wizard`).html(),l=o.includes(`,`)?i(`div.table-responsive table tr`).first().find(`td`).text().trim():i(`tr.firmware`).first().find(`td`).eq(2).text().trim();l=l.replace(`th`,``).replace(`nd`,``).replace(`st`,``).replace(`rd`,``);let u=l.replaceAll(` `,`,`);return{title:a,link:s,description:c,pubDate:new Date(u).toLocaleDateString(),guid:a}})}));return{title:`${o} - ${s} Released`,link:c,description:`查看Apple-${o}- ${s} 固件-是否关闭验证`,item:f}}export{i as route};