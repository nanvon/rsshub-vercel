import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-BlqYKpVp.js";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/news/:category/:article_type?`,categories:[`traditional-media`],example:`/nikkei/news/news`,parameters:{category:`Category, see table below`,article_type:"Only includes free articles, set `free` to enable, disabled by default"},radar:[{source:[`www.nikkei.com/:category/archive`,`www.nikkei.com/:category`],target:`/:category`}],name:`News`,maintainers:[`Arracc`,`ladeng07`],handler:l,description:`| 総合 | オピニオン | 経済    | 政治     | 金融      | マーケット | ビジネス | マネーのまなび | テック     | 国際          | スポーツ | 社会・調査 | 地域  | 文化    | ライフスタイル |
| ---- | ---------- | ------- | -------- | --------- | ---------- | -------- | -------------- | ---------- | ------------- | -------- | ---------- | ----- | ------- | -------------- |
| news | opinion    | economy | politics | financial | business   | 不支持   | 不支持         | technology | international | sports   | society    | local | culture | lifestyle      |`};async function l(e){let c=`https://www.nikkei.com`,{category:l,article_type:u=`paid`}=e.req.param(),d=``;d=l===`news`?`${c}/news/category/`:`${c}/${l}/archive/`;let f=(await a(d)).data,p=s(f),m=``,h=p(`[class^="container_"]  [class^="default_"]:has(article)`),g=`img[class^="icon_"]`,_=h.toArray().map(e=>(e=p(e),e.find(`p a`).remove(),{title:e.find(`[class^="titleLink_"]`).text(),link:`${c}${e.find(`[class^="title_"] a`).attr(`href`)}`,image:e.find(`[class^="image_"] img`).removeAttr(`style`).removeAttr(`width`).removeAttr(`height`).parent().html(),category:e.find(`[class^="topicItem_"] a`).toArray().map(e=>p(e).text()),paywall:!!e.find(g).length}));l===`news`?(m=`総合`,_=[..._,...p(`div#CONTENTS_MAIN .m-miM32_itemTitle`).toArray().map(e=>{e=p(e);let t=e.find(`a`).first();return{title:t.text(),link:`${c}${t.attr(`href`)}`,category:e.find(`.m-miM32_itemkeyword a`).toArray().map(e=>p(e).text()),paywall:!!e.find(g).length}})]):m=p(`h1.l-miH11_title`).text().trim();let v=await Promise.all(_.map(e=>n.tryGet(e.link,async()=>{let{data:n}=await a(e.link),c=s(n);return c(`.notFloated_n1oadkwi`).remove(),e.pubDate=i(c(`meta[property="article:published_time"]`).attr(`content`)),e.description=r(o.join(t,`templates/news-b626ffdc.art`),{item:e,description:c(`section[class^=container_]`).html()}),e})));return{title:`日本経済新聞 - `+m,description:p(`meta[name="description"]`).attr(`content`),link:d,image:p(`meta[property="og:image"]`).attr(`content`),language:`ja`,item:u===`free`?v.filter(e=>!e.paywall):v}}export{c as route};