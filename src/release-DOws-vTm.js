import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-CHIwZNTj.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ViewType as r}from"./types-Bi82qguM.js";import{load as i}from"cheerio";const a=async r=>{let a=Number.parseInt(r.req.query(`limit`)??`30`,10),o=new URL(`downloads`,`https://www.python.org`).href,s=await e(o),c=i(s),l=c(`html`).attr(`lang`)??`en`,u=[];return u=c(`div.active-release-list-widget ol.list-row-container li`).slice(0,a).toArray().map(e=>{let t=c(e),r=t.find(`span.release-version`).text(),i=t.find(`span.release-start`).text()?.match(/(\d{4}-\d{2}-\d{2})/)?.[1],a=t.find(`span.release-pep a`).attr(`href`),o=i;return{title:r,pubDate:i?n(i):void 0,link:a,updated:o?n(o):void 0,language:l}}),u=await Promise.all(u.map(n=>n.link?t.tryGet(n.link,async()=>{let t=await e(n.link),r=i(t),a=r(`h1.page-title`).text(),o=r(`section#pep-content`).html(),s=r(`meta[property="og:image"]`).attr(`content`),c={title:a,description:o,content:{html:o,text:o},image:s,banner:s,language:l};return{...n,...c}}):n)),{title:c(`div.active-release-list-widget h2.widget-title`).text(),description:c(`meta[property="og:description"]`).attr(`content`),link:o,item:u,allowEmpty:!0,image:c(`meta[property="og:image"]`).attr(`content`),language:l,id:c(`meta[property="og:url"]`).attr(`content`)}},o={path:`/release`,name:`Active Python Releases`,url:`www.python.org`,maintainers:[`nczitzk`],handler:a,example:`/python/release`,parameters:void 0,description:void 0,categories:[`programming`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.python.org`,`www.python.org/downloads`],target:`/release`}],view:r.Articles};export{a as handler,o as route};