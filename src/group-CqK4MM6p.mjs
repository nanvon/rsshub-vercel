import{n as e,t}from"./esm-shims-C3MSy80G.mjs";import"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import"./ofetch-Byd8Ct7M.mjs";import"./helpers-vRt84cId.mjs";import{t as n}from"./render-ZYpwNl2L.mjs";import{t as r}from"./parse-date-9Tu6hSFW.mjs";import{t as i}from"./got-BYElsd7I.mjs";import{t as a}from"./timezone-CQaZZkB1.mjs";import o from"node:path";e();const s={path:`/group/:id/:sort?`,categories:[`bbs`],example:`/douyu/group/1011`,parameters:{id:`鱼吧 id，可在鱼吧页 URL 中找到`,sort:`排序方式，见下表，默认为发布时间排序`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`yuba.douyu.com/group/:id`,`yuba.douyu.com/group/newself/:id`,`yuba.douyu.com/group/newall/:id`,`yuba.douyu.com/`],target:`/group/:id`}],name:`鱼吧帖子`,maintainers:[`nczitzk`],handler:c,description:`| 回复时间排序 | 发布时间排序 |
| ------------ | ------------ |
| 1            | 2            |`};async function c(e){let s=e.req.param(`id`),c=e.req.param(`sort`)??`2`,l=`https://yuba.douyu.com`,u=`${l}/wbapi/web/group/head?group_id=${s}`,d=`${l}/wbapi/web/group/postlist?group_id=${s}&page=1&sort=${c}`,f=`${l}/group/${c===`1`?`newall`:`newself`}/${s}`,p=await i({method:`get`,url:d}),m=await i({method:`get`,url:u}),h=p.data.data.map(e=>({title:e.title,link:`${l}/p/${e.post_id}`,pubDate:a(r(e.created_at_std),8),description:n(o.join(t,`templates/description-45e4c66d.art`),{content:e.describe,images:e.imglist.map(e=>({size:e.size,url:e.url}))})}));return{title:`斗鱼鱼吧 - ${m.data.data.group_name}`,link:f,item:h,description:m.data.data.describe}}export{s as route};