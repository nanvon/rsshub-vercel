import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import"./config-uQhBoCds.mjs";import"./logger-DQf7gybc.mjs";import"./ofetch-7N8fmlQ6.mjs";import"./helpers-C6Jountz.mjs";import{t as n}from"./cache-BXZZTZVV.mjs";import{t as r}from"./render-_fW2cbJz.mjs";import{t as i}from"./parse-date-C2HciIa2.mjs";import{t as a}from"./got-DcbI0XpN.mjs";import{t as o}from"./rss-parser-DqGWi9PH.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l=e=>{let n=e(`figure.mainPhoto`),i=n.find(`img`),a=n.find(`span.copyright`),o=n.find(`span.imageDescription`);return r(s.join(t,`templates/image-230aff8e.art`),{url:i.attr(`src`),alt:i.attr(`alt`)?.trim(),author:a.text()?.trim(),caption:o.text()?.trim()})},u=e=>{let n=e(`[itemprop="articleBody"]`);return e(`*`).contents().filter(function(){return this.nodeType===8}).remove(),n.find(`aside`).remove(),n.find(`.videoPlayerContainer`).remove(),n.find(`.pulsevideo`).remove(),n.find(`.adsContainer`).remove(),n.find(`.placeholder`).remove(),n.find(`.contentPremium`).removeAttr(`style`),n.find(`div.image`).each((n,i)=>{let a=e(i).find(`img`),o=e(i).find(`span.author`),c=e(i).find(`span.caption`),l=r(s.join(t,`templates/image-230aff8e.art`),{url:a.attr(`src`),alt:a.attr(`alt`)?.trim(),caption:c.text()?.trim(),author:o.text()?.trim()});e(i).replaceWith(l)}),n};e();const d={path:`/news`,categories:[`new-media`],example:`/onet/news`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wiadomosci.onet.pl/`]}],name:`News`,maintainers:[`Vegann`],handler:f,url:`wiadomosci.onet.pl/`,description:"This route provides a better reading experience (full text articles) over the official one for `https://wiadomosci.onet.pl`."};async function f(){let e=await o.parseURL(`https://wiadomosci.onet.pl/.feed`),d=await Promise.all(e.items.map(async e=>{let{description:o,author:d,category:f}=await n.tryGet(e.link,async()=>{let{data:n}=await a(e.link,{headers:{referer:`https://www.onet.pl/`}}),i=c(n),o=u(i),d=l(i);return{description:r(s.join(t,`templates/article-fc2b2fbf.art`),{mainImage:d,lead:i(`#lead`).text()?.trim(),content:o.html()?.trim()}),author:i(`.authorNameWrapper span[itemprop="name"]`).text()?.trim(),category:i(`span.relatedTopic`).text()?.trim()}});return{title:e.title,link:e.link,description:o,author:d,category:f,pubDate:i(e.pubDate),guid:e.id}}));return{title:e.title,link:e.link,description:e.title,item:d,language:`pl`,image:`https://ocdn.eu/wiadomosciucs/static/logo2017/onet2017big_dark.png`}}export{d as route};