import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import{t as i}from"./got-BlqYKpVp.js";import{t as a}from"./invalid-parameter-CLGd_tte.js";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/album/:id`,categories:[`multimedia`],example:`/iqiyi/album/神武天尊-2020-1b4lufwxd7h`,parameters:{id:`剧集 id, 可在该主页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`剧集`,maintainers:[`TonyRL`],handler:l,description:`::: tip
  可抓取內容根据服务器所在地区而定
:::`};async function l(e){let{data:c}=await i(`https://www.iq.com/album/${e.req.param(`id`)}`),l=s(c),{album:u}=JSON.parse(l(`#__NEXT_DATA__`).text()).props.initialState,{data:{data:d}}=await i(`https://pcw-api.iqiyi.com/album/album/baseinfo/${u.videoAlbumInfo.albumId}`);if(Object.keys(u.cacheAlbumList).length===0)throw new a(`${d.name} is not available in this server region.`);let f=1,p=!1,m=[];do{let{data:{data:e}}=await i(`https://pcw-api.iq.com/api/v2/episodeListSource/${u.videoAlbumInfo.albumId}`,{searchParams:{platformId:3,modeCode:`intl`,langCode:`zh_cn`,endOrder:u.videoAlbumInfo.maxOrder,startOrder:f}});m=[...m,...e.epg],f=e.pos,p=e.hasMore}while(p);let h=m.map(e=>({title:e.name,description:n(o.join(t,`templates/album-456d4501.art`),{item:e}),link:`https://www.iq.com/play/${e.playLocSuffix}`,pubDate:r(e.initIssueTime)}));return{title:d.name,description:d.description,image:u.videoAlbumInfo.albumFocus1024,link:`https://www.iq.com/album/${u.videoAlbumInfo.albumLocSuffix}`,item:h,allowEmpty:!0}}export{c as route};