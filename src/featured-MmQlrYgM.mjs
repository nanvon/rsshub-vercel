import{n as e,t}from"./esm-shims-D5mxTuu_.mjs";import"./config-CDM38Tpk.mjs";import"./logger-B0B1yUZ6.mjs";import"./ofetch-FkpIOIxH.mjs";import"./helpers-CMl_ndRq.mjs";import{t as n}from"./render-D2i47mnC.mjs";import{t as r}from"./got-CxBlPaz_.mjs";import i from"node:path";import{load as a}from"cheerio";e();const o={today:`left`,newest:`right`},s={path:`/featured/:category?`,categories:[`other`],example:`/tvtropes/featured/today`,parameters:{category:`Category, see below, Today's Featured Trope by default`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Featured`,maintainers:[`nczitzk`],handler:c,description:`| Today's Featured Trope | Newest Trope |
| ---------------------- | ------------ |
| today                  | newest       |`};async function c(e){let{category:s=`today`}=e.req.param(),c=`https://tvtropes.org`,{data:l}=await r(c),u=a(l),d=u(`div#featured-tropes div.${o[s]}`),f=new URL(d.find(`h2.entry-title a`).prop(`href`),c).href,{data:p}=await r(f),m=a(p);m(`div.folderlabel`).remove(),m(`div.lazy_load_img_box`).each((e,r)=>{r=m(r);let a=r.find(`img`);r.replaceWith(n(i.join(t,`templates/description-be2da49d.art`),{images:[{src:a.prop(`src`),alt:a.prop(`alt`),width:a.prop(`width`),height:a.prop(`height`)}]}))});let h=[{title:d.find(`h2.entry-title`).text(),link:f,description:m(`div#main-article`).html()}],g=new URL(u(`img.logo-big`).prop(`src`),c).href,_=u(`link[rel="shortcut icon"]`).prop(`href`);return{item:h,title:`${u(`title`).text()} - ${d.find(`span.box-title`).text()}`,link:c,description:u(`meta[name="description"]`).prop(`content`),language:u(`html`).prop(`lang`),image:g,icon:_,logo:_,subtitle:u(`meta[property="og:title"]`).prop(`content`),author:u(`meta[property="og:site_name"]`).prop(`content`),allowEmpty:!0}}export{s as route};