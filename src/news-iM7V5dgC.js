import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import"./dist-BYIKqG8W.js";import{cache_default as e}from"./cache-BWStd97H.js";import{ofetch_default as t}from"./ofetch-CSKgrsrO.js";import{load as n}from"cheerio";import r from"p-map";const i={path:`/news`,categories:[`programming`],example:`/anthropic/news`,parameters:{},radar:[{source:[`www.anthropic.com/news`,`www.anthropic.com`]}],name:`News`,maintainers:[`etShaw-zh`],handler:a,url:`www.anthropic.com/news`};async function a(i){let a=`https://www.anthropic.com/news`,o=await t(a),s=n(o),c=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):20,l=s(`.contentFadeUp a`).toArray().slice(0,c).map(e=>{let t=s(e),n=t.find(`h3`).text().trim(),r=t.attr(`href`)??``,i=t.find(`p.detail-m.agate`).text().trim()||t.find(`div[class^="PostList_post-date__"]`).text().trim(),a=r.startsWith(`http`)?r:`https://www.anthropic.com${r}`;return{title:n,link:a,pubDate:i}}),u=await r(l,r=>e.tryGet(r.link,async()=>{let e=await t(r.link),i=n(e);i(`div[class^="PostDetail_b-social-share"]`).remove();let a=i(`div[class*="PostDetail_post-detail__"]`);return a.find(`img`).each((e,t)=>{let n=i(t);n.removeAttr(`style srcset`);let r=n.attr(`src`),a=new URLSearchParams(r),o=a.get(`/_next/image?url`);o&&n.attr(`src`,o)}),r.description=a.html()??void 0,r}),{concurrency:5});return{title:`Anthropic News`,link:a,description:`Latest news from Anthropic`,item:u}}export{i as route};