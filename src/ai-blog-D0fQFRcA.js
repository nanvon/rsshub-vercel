import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-CeMUzp5K.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{load as n}from"cheerio";const r={path:`/ai/blog`,categories:[`programming`],example:`/meta/ai/blog`,name:`AI Blog`,maintainers:[`TonyRL`],url:`ai.meta.com/blog/`,radar:[{source:[`ai.meta.com/blog/`,`ai.meta.com`]}],handler:i};async function i(r){let i=Number.parseInt(r.req.query(`limit`)||12,10),a=`https://ai.meta.com/blog/`,o=n(await e(a,{headers:{"sec-fetch-dest":`document`,"sec-fetch-mode":`navigate`,"sec-fetch-site":`none`,"sec-fetch-user":`?1`}})),s=o(`script:contains("DTSGInitialData"):first`).text(),c=JSON.parse(s.match(/\(new ServerJS\(\)\)\.handle\((\{[\s\S]*?\})\);/)?.[1]||`{}`),l={LSD:{token:``},SiteData:{haste_session:``,hsi:``,__spin_r:0,__spin_b:`trunk`,__spin_t:Date.now()}};for(let e of c.define){let t=e[0];l[t]=e[2]}let u=(await e(`https://ai.meta.com/api/graphql/`,{method:`POST`,headers:{"content-type":`application/x-www-form-urlencoded`,"sec-fetch-dest":`empty`,"sec-fetch-mode":`cors`,"sec-fetch-site":`same-origin`,"x-asbd-id":`359341`,"x-fb-friendly-name":`MetaAIBlogRecentPostSearchQuery`,"x-fb-lsd":l.LSD.token},body:new URLSearchParams({av:`0`,__user:`0`,__a:`1`,__req:`1`,dpr:`1`,__ccg:`EXCELLENT`,__rev:String(l.SiteData.__spin_r||``),lsd:l.LSD.token,__spin_r:String(l.SiteData.__spin_r||``),__spin_b:String(l.SiteData.__spin_b||`trunk`),__spin_t:String(l.SiteData.__spin_t||Date.now()),fb_api_caller_class:`RelayModern`,fb_api_req_friendly_name:`MetaAIBlogRecentPostSearchQuery`,variables:JSON.stringify({input:{query:``,from:0,limit:i,tags:[],excludeObjectIDs:[`27568536916124137`]}}),server_timestamps:`true`,doc_id:`9516719638450392`}),parseResponse:JSON.parse})).data.query.map(e=>({title:e.title,description:e.description,link:e.href,pubDate:t(e.date),category:[e.research_area],image:e.image}));return{title:o(`#pageTitle`).text(),description:o(`meta[name="description"]`).attr(`content`),image:o(`link[rel="icon"]`).attr(`href`),link:a,item:u}}export{r as route};