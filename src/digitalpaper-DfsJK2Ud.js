import{__dirname as e,init_esm_shims as t}from"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-CeMUzp5K.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-DftO2d-b.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{timezone as o}from"./timezone-CMz5pnRe.js";import s from"node:path";import c from"dayjs";import{load as l}from"cheerio";t();const u=`811c18b08cf04e79be3b67d6902ee1a7`,d=`KJRB`,f=`https://epaper.stdaily.com/stdailynewspaperapi`,p={path:`/digitalpaper`,categories:[`traditional-media`],example:`/stdaily/digitalpaper`,name:`科技日报`,maintainers:[`lyqluis`,`KarasuShin`],handler:m,features:{supportRadar:!0},radar:[{source:[`epaper.stdaily.com/statics/technology-site/index.html`],target:`/digitalpaper`}]};async function m(){let t=(await n(`${f}/uv/article/period/date`,{method:`POST`,body:{code:d,date:c(new Date,`YYYY-MM-01`)},headers:{"X-Requested-With":`XMLHttpRequest`}})).obj.dateList.toSorted().at(-1),p=await n(`${f}/uv/article/period/periodTime`,{method:`POST`,body:{code:d,periodTime:t,siteId:u},headers:{"X-Requested-With":`XMLHttpRequest`}});return{title:`中国科技网 - 科技日报`,link:`https://epaper.stdaily.com`,item:(await Promise.all(p.obj.editionList.map(t=>r.tryGet(`stdaily:epaper:${t.id}`,async()=>{let{list:c}=await n(`${f}/uv/article/article/editionId`,{method:`POST`,body:{id:t.id,siteId:u},headers:{"X-Requested-With":`XMLHttpRequest`}});return await Promise.all(c.map(async c=>await r.tryGet(`stddaily:epaper:article:${c.id}`,async()=>{let{obj:{articleVo:r}}=await n(`${f}/uv/article/article/articleId`,{method:`POST`,body:{code:d,id:c.id,siteId:u},headers:{"X-Requested-With":`XMLHttpRequest`}});return{title:`${r.editionName.match(/：(.*)/)?.[1]} - ${l(r.title).text()}`,description:i(s.join(e,`templates/description-9a4423f3.art`),{subtitle:r.subtitle,pics:r.picList??[],content:r.content}),pubDate:o(a(r.periodTime),8),author:r.author,link:`https://epaper.stdaily.com/statics/technology-site/index.html#/home?isDetail=1&currentNewsId=${c.id}&currentVersionName=${r.editionName}&currentVersion=${Number(t.editionCode)}&timeValue=${r.periodTime}`}})))})))).flat(),image:`https://www.stdaily.com/favicon.ico`}}export{p as route};