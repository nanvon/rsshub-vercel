import"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{got_default as e}from"./got-D5TEN1xL.js";import{baseURL as t}from"./const-CL7Wj50Y.js";import{load as n}from"cheerio";const r={path:`/apps/search/:q`,example:`/shopify/apps/search/flow`,parameters:{q:`需要搜索的 App`},name:`App store search`,maintainers:[`PrintNow`],handler:i,radar:[{source:[`apps.shopify.com/search`],target:(e,t)=>{let n=new URL(t).searchParams;return n.has(`q`)?`/shopify/apps/search/${n.get(`q`)}`:``}}]};async function i(r){let{q:i=``}=r.req.param(),a=await(await e.get(`${t}/search`,{searchParams:{q:i},headers:{accept:`text/html, application/xhtml+xml`,"accept-language":`en-US;q=0.9`,"turbo-frame":`search_page`,referer:t,dnt:`1`}})).data,o=n(a),s=o(`.search-results-component div[data-controller="app-card"]`).toArray().map(e=>{let n=o(e).attr(`data-app-card-handle-value`),r=o(e).find(`div.tw-self-stretch`).clone(),i=r.find(`span`).text().match(/\d\.\d/),a=r.find(`span + span.tw-sr-only`).text().match(/\d+/);return{title:o(e).attr(`data-app-card-name-value`)??``,link:`${t}/${n}`,description:o(e).find(`div.tw-text-fg-tertiary`).first().text().trim(),image:o(e).attr(`data-app-card-icon-url-value`),_extra:{handle:n,description:o(e).find(`div.tw-text-fg-tertiary`).first().text().trim(),built_for_shopify:o(e).find(`span.built-for-shopify-badge`).length>0,ratting:i?Number.parseFloat(i[0]):0,ratting_count:a?Number(a[0]):0}}});return{title:`Search results for "${i}" – Shopify App Store`,link:`https://apps.shopify.com/search?q=${i}`,allowEmpty:!0,language:`en-us`,item:s}}export{r as route};