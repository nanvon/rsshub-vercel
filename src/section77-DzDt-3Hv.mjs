import"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-BMqiDsx_.mjs";import"./helpers-mo8InLYm.mjs";import{t as e}from"./cache-ZTWfXd2T.mjs";import{t}from"./got-2jXbf1Li.mjs";import{t as n}from"./timezone-CE0MDOJ-.mjs";import{load as r}from"cheerio";import{CookieJar as i}from"tough-cookie";const a={path:`/section77/:type?`,categories:[`government`],example:`/parliament/section77`,parameters:{type:`Type of hearing status, see below`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Thailand Parliament Draft of Law's public hearing system`,maintainers:[`itpcc`],handler:o,description:`| Presented by MP *       | Presented by People * | Hearing Ongoing     | Hearing ended   | Hearing result reported  | Waiting for PM approval | Assigned into the session | Processed  | PM Rejected   |
| ------------------------ | ---------------------- | ------------------- | --------------- | ------------------------ | ----------------------- | ------------------------- | ---------- | ------------- |
| presentbymp              | presentbyperson        | openwsu             | closewsu        | reportwsu                | substatus1              | substatus2                | substatus3 | closewsubypm  |
| เสนอโดยสมาชิกสภาผู้แทนราษฏร | เสนอโดยประชาชน         | กำลังเปิดรับฟังความคิดเห็น | ปิดรับฟังความคิดเห็น | รายงานผลการรับฟังความคิดเห็น | รอคำรับรองจากนายกรัฐมนตรี   | บรรจุเข้าระเบียบวาระ         | พิจารณาแล้ว  | นายกฯ ไม่รับรอง |

  *Note:* For \`presentbymp\` and \`presentbyperson\`, it can also add:

  -   \`-m\` for the draft which Speaker of Parliament considered as a monetary draft (ประธานสภาผู้แทนราษฎรวินิจฉัยว่า เป็นร่างการเงิน), or
  -   \`-nm\` for non-monetary one (ประธานสภาผู้แทนราษฎรวินิจฉัยว่า ไม่เป็นร่างการเงิน).`};async function o(a){let o=`https://www.parliament.go.th/section77`,{type:s=``}=a.req.param(),c=new i,l=`ร่างพระราชบัญญัติที่เปิดรับฟังความคิดเห็นตามมาตรา 77 ของรัฐธรรมนูญ`;if(s){let[e,t=``]=s.split(`-`);l+={presentbymp:`ที่เสนอโดยสมาชิกสภาผู้แทนราษฏร`,presentbyperson:`ที่เสนอโดยประชาชน`,openwsu:`ที่กำลังเปิดรับฟังความคิดเห็น`,closewsu:`ที่ปิดรับฟังความคิดเห็น`,reportwsu:` รายงานผลการรับฟังความคิดเห็น`,substatus1:`ซึ่งรอคำรับรองจากนายกรัฐมนตรี`,substatus2:`ที่บรรจุเข้าระเบียบวาระ`,substatus3:`ที่พิจารณาแล้ว`,closewsubypm:`ที่นายกฯ ไม่รับรอง`}[e]??``,l+={m:` (ประธานสภาผู้แทนราษฎรวินิจฉัยว่า เป็นร่างการเงิน)`,nm:` (ประธานสภาผู้แทนราษฎรวินิจฉัยว่า ไม่เป็นร่างการเงิน)`}[t]??``}let u={title:l,link:`${o}/survey_more_news.php${s?`?type=`+s:``}`,language:`th-th`,item:[]},d={page:1,type:s};s&&(d.type=s);let{data:f}=await t({url:`${o}/ajax/pagination.php?${new URLSearchParams(d).toString()}`,cookieJar:c}),p=r(f);if(p.text()===`ยังไม่มีข้อมูล`)return u;let m=p(`div.item-77`).toArray().map(e=>(e=p(e),{title:e.find(`a`).text(),link:`${o}/${e.find(`a`).attr(`href`)}`,category:e.find(`label`).toArray().map(e=>p(e).text())}));if(!m.length)return u;let h=await Promise.all(m.map(i=>e.tryGet(i.link,async()=>{let{data:e}=await t({url:i.link,cookieJar:c}),a=r(e);i.title=a(`.title h5`).first().text(),i.author=a(`.present-by`).first().text().replaceAll(/^\s*เสนอโดย\s*/g,``),i.description=a(`.des`).first().html();let[,o,s]=a(`.type77 h5`).text().split(` `);i.category=[...i.category,a(`.container-fluid .bg-status .col-md-8.p-0 h5 span,a`).toArray().map(e=>a(e).text()),o,s];let l=a(`.row.bg-status .col-md-4.text-right`).text().trim(),u=/^ผู้แสดงความคิดเห็น\s*(\d+)\s*คน\s*(\d+(?:\.\d+)?)%\s*(\d+(?:\.\d+)?)%/g.exec(l);if(u){let e=Number.parseInt(u[0]),t=Number.parseFloat(u[1]),n=Number.parseFloat(u[2]);i.upvotes=Number.parseInt(t/100*e),i.downvotes=Number.parseInt(n/100*e)}let d=a(`.banner-detail .banner-detail-caption .blockquote p:last-child`).text(),f=/^รับฟังตั้งแต่วันที่\s(\d{1,2})\s*([\u0E00-\u0E7F]+)\s*(\d{4})/g.exec(d);return f&&(i.pubDate=n(new Date(Number.parseInt(f[3])-543,{มกราคม:0,กุมภาพันธ์:1,มีนาคม:2,เมษายน:3,พฤษภาคม:4,มิถุนายน:5,กรกฎาคม:6,สิงหาคม:7,กันยายน:8,ตุลาคม:9,พฤศจิกายน:10,ธันวาคม:11}[f[2].trim()],Number.parseInt(f[1])),7)),i})));return h.length&&(u.item=h),u}export{a as route};