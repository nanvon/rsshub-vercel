import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-CeMUzp5K.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{load as i}from"cheerio";const a=`https://yjsy.cjlu.edu.cn/`,o=new Map([[`yjstz`,`中量大研究生院 —— 研究生通知`],[`jstz`,`中量大研究生院 —— 教师通知`]]),s={path:`/yjsy/:cate`,categories:[`university`],example:`/cjlu/yjsy/yjstz`,parameters:{cate:`订阅的类型，支持 yjstz（研究生通知）和 jstz（教师通知）`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{title:`研究生通知`,source:[`yjsy.cjlu.edu.cn/index/yjstz/:suffix`,`yjsy.cjlu.edu.cn/index/yjstz.htm`],target:`/yjsy/yjstz`},{title:`教师通知`,source:[`yjsy.cjlu.edu.cn/index/jstz/:suffix`,`yjsy.cjlu.edu.cn/index/jstz.htm`],target:`/yjsy/jstz`}],name:`研究生院`,maintainers:[`chrisis58`],handler:c,description:`| 研究生通知 | 教师通知 |
| -------- | -------- |
| yjstz    | jstz     |`};async function c(s){let c=s.req.param(`cate`),l=i(await e(`${c}.htm`,{baseURL:`${a}/index/`,responseType:`text`})),u=l(`div.grid685.right div.body ul`).find(`li`).toArray().map(e=>{let t=l(e),i=t.find(`a`).first(),s=t.find(`span`).first().text().trim(),u=i.attr(`href`)??``,d=u.startsWith(`../`)?u.replace(/^\.\.\//,``):u;return{title:i.attr(`title`)??o.get(c),pubDate:r(n(s,`YYYY/MM/DD`),8),link:`${a}${d}`,description:``}}),d=await Promise.all(u.map(n=>t.tryGet(n.link,async()=>{if(!n.link||n.link===a)return n;let t=i(await e(n.link,{responseType:`text`}));return n.description=`${t(`#vsb_content`).html()??``}<br>${t(`form[name="_newscontent_fromname"] div ul`).html()??``}`,n})));return{title:o.get(c),link:`https://yjsy.cjlu.edu.cn/index/${c}.htm`,item:d}}export{s as route};