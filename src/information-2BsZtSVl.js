import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import{ofetch_default as n}from"./ofetch-TsvCL7Kz.js";import{cache_default as r}from"./cache-CzcusEyX.js";import{art as i}from"./render-DE4LRFBD.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{ViewType as o}from"./types-Bi82qguM.js";import s from"node:path";import{load as c}from"cheerio";t();const l=async t=>{let{id:o=`all`}=t.req.param(),l=Number.parseInt(t.req.query(`limit`)??`50`,10),u=`https://www.cbndata.com`,d=new URL(`information?tag_id=${o}`,u).href,f=new URL(`api/v3/informations`,u).href,p=await n(d),m=c(p),h=m(`html`).attr(`lang`)??`zh`,g=await n(f,{query:{page:1,per_page:l}}),_=[];_=g.data.slice(0,l).map(t=>{let n=t.title,r=t.image,o=i(s.join(e,`templates/description-16be3a2a.art`),{images:r?[{src:r,alt:n}]:void 0}),c=t.date,l=t.id?`information/${t.id}`:void 0,d=t.tags,f=`cbndata-information-${t.id}`,p=c,m={title:n,description:o,pubDate:c?a(c):void 0,link:l?new URL(l,u).href:void 0,category:d,guid:f,id:f,content:{html:o,text:o},image:r,banner:r,updated:p?a(p):void 0,language:h};return m}),_=await Promise.all(_.map(t=>t.link?r.tryGet(t.link,async()=>{let r=await n(t.link),o=r.match(/<script>window\.__INITIAL_STATE__=(.*?);<\/script>/)?.[1];if(!o)return t;let c=JSON.parse(o)?.data;if(!c)return t;let l=c.title,d=t.description+i(s.join(e,`templates/description-16be3a2a.art`),{description:c.content}),f=c.date,p=c.id?`information/${c.id}`:void 0,m=[...new Set((c.tags?.map(e=>e.name)??[]).filter(Boolean))],g=[{name:c.author,url:void 0,avatar:void 0}],_=`cbndata-information-${c.id}`,v=c.thumbnail_url,y=f,b={title:l,description:d,pubDate:f?a(f):void 0,link:p?new URL(p,u).href:void 0,category:m,author:g,guid:_,id:_,content:{html:d,text:d},image:v,banner:v,updated:y?a(y):void 0,language:h};return{...t,...b}}):t));let v=g.home_tags.find(e=>String(e.id)===o)?.name??``,y=`${v?`${v}-`:``}${m(`title`).text().trim()}`;return{title:y,description:m(`meta[name="description"]`).attr(`content`),link:d,item:_,allowEmpty:!0,image:m(`img.logo-logoImage`).attr(`src`),author:y.split(/\|/).pop(),language:h,id:d}},u={path:`/information/:id?`,name:`看点`,url:`www.cbndata.com`,maintainers:[`nczitzk`],handler:l,example:`/cbndata/information/all`,parameters:{id:{description:"分类，默认为 `all`，即全部，可在对应分类页 URL 中找到",options:[{label:`全部`,value:`all`},{label:`美妆个护`,value:`1`},{label:`服饰鞋包`,value:`2559`},{label:`宠物`,value:`2419`},{label:`营销`,value:`2484`}]}},description:`:::tip
订阅 [美妆个护](https://www.cbndata.com/information?tag_id=1)，其源网址为 \`https://www.cbndata.com/information?tag_id=1\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/cbndata/information/1\`](https://rsshub.app/cbndata/information/1)。
:::

| 分类                                                        | ID                                                  |
| ----------------------------------------------------------- | --------------------------------------------------- |
| [全部](https://www.cbndata.com/information?tag_id=all)      | [all](https://rsshub.app/cbndata/information/all)   |
| [美妆个护](https://www.cbndata.com/information?tag_id=1)    | [1](https://rsshub.app/cbndata/information/1)       |
| [服饰鞋包](https://www.cbndata.com/information?tag_id=2559) | [2559](https://rsshub.app/cbndata/information/2559) |
| [宠物](https://www.cbndata.com/information?tag_id=2419)     | [2419](https://rsshub.app/cbndata/information/2419) |
| [营销](https://www.cbndata.com/information?tag_id=2484)     | [2484](https://rsshub.app/cbndata/information/2484) |
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.cbndata.com/information`],target:(e,t)=>{let n=new URL(t),r=n.searchParams.get(`tag_id`)??void 0;return`/information${r?`/${r}`:``}`}},{title:`全部`,source:[`www.cbndata.com/information`],target:`/information/all`},{title:`美妆个护`,source:[`www.cbndata.com/information`],target:`/information/1`},{title:`服饰鞋包`,source:[`www.cbndata.com/information`],target:`/information/2559`},{title:`宠物`,source:[`www.cbndata.com/information`],target:`/information/2419`},{title:`营销`,source:[`www.cbndata.com/information`],target:`/information/2484`}],view:o.Articles};export{l as handler,u as route};