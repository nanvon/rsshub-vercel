import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import{t as i}from"./got-CgQXMNWI.js";import{n as a,t as o}from"./utils-djwnjyV6.js";import s from"node:path";e();const c={watch:`看盘`,announcement:`公司`,explain:`解读`,red:`加红`,jpush:`推送`,remind:`提醒`,fund:`基金`,hk:`港股`},l={path:`/telegraph/:category?`,categories:[`finance`],example:`/cls/telegraph`,parameters:{category:`分类，见下表，默认为全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cls.cn/telegraph`,`cls.cn/`],target:`/telegraph`}],name:`电报`,maintainers:[`nczitzk`],handler:u,url:`cls.cn/telegraph`,description:`| 看盘  | 公司         | 解读    | 加红 | 推送  | 提醒   | 基金 | 港股 |
| ----- | ------------ | ------- | ---- | ----- | ------ | ---- | ---- |
| watch | announcement | explain | red  | jpush | remind | fund | hk   |`};async function u(e){let l=e.req.param(`category`)??``,u=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`)):50,d=`${a}/nodeapi/updateTelegraphList`;l&&(d=`${a}/v1/roll/get_roll_list`);let f=`${a}/telegraph`,p=(await i({method:`get`,url:d,searchParams:o({category:l,hasFirstVipArticle:1})})).data.data.roll_data.slice(0,u).map(e=>({title:e.title||e.content,link:e.shareurl,description:n(s.join(t,`templates/telegraph-f8ba0f7b.art`),{item:e}),pubDate:r(e.ctime*1e3),category:e.subjects?.map(e=>e.subject_name)}));return{title:`财联社 - 电报${l===``?``:` - ${c[l]}`}`,link:f,item:p}}export{l as route};