import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./ofetch-BRplXtiZ.mjs";import{t as r}from"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as i}from"./render-CSqLtqb8.mjs";import a from"node:path";import{load as o}from"cheerio";import s from"xxhash-wasm";e();const c={path:`/list/:id`,categories:[`new-media`],example:`/tophub/list/Om4ejxvxEN`,parameters:{id:`榜单id，可在 URL 中找到`},features:{requireConfig:[{name:`TOPHUB_COOKIE`,optional:!0,description:``}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`tophub.today/n/:id`]}],name:`榜单列表`,maintainers:[`akynazh`],handler:l,description:`::: tip
将榜单条目集合到一个列表中，且有热度排序，可避免推送大量条目。
:::`};async function l(e){let{h64ToString:c}=await s(),l=`https://tophub.today/n/${e.req.param(`id`)}`,u=o(await n(l,{headers:{Referer:`https://tophub.today`,Cookie:r.tophub?.cookie??``}})),d=u(`.tt h3`).text().trim(),f=u(`.rank-all-item:not(.history-content) .jc-c tr`).toArray().map(e=>({title:u(e).find(`td a`).text().trim(),link:u(e).find(`td a`).attr(`href`),heatRate:u(e).find(`td:nth-child(3)`).text().trim()})),p=f.map(e=>e.title).join(``),m=i(a.join(t,`templates/rank-efbd7200.art`),{items:f});return{title:d,description:u(`.tt p`).text().trim(),image:u(`.ii img`).attr(`src`),link:l,item:[{title:d,link:l,description:m,guid:c(p)}]}}export{c as route};