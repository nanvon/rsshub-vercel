import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-CbgiXYAi.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-CSnicFA3.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{invalid_parameter_default as o}from"./invalid-parameter-CfUmvEUg.js";import s from"node:path";import*as c from"cheerio";t();const l=`https://kpmg.com`,u={query:``,filters:{all:[{kpmg_tab_type:[`Insights`]},{kpmg_article_type:[`Article-General`]},{kpmg_template_type:[`article-details-template`,`insights-flexible-template`,`editable-flex-template`,`editable-campaign-template`]}]},result_fields:{kpmg_description:{raw:{}},kpmg_banner_flag:{raw:{}},kpmg_primary_tag:{raw:{}},kpmg_article_date:{raw:{}},kpmg_contact_job_ttl:{raw:{}},kpmg_title:{raw:{}},kpmg_contact_city:{raw:{}},kpmg_event_start_time:{raw:{}},kpmg_article_date_time:{raw:{}},kpmg_tab_type:{raw:{}},kpmg_short_desc:{raw:{}},kpmg_image_alt:{raw:{}},kpmg_url:{raw:{}},kpmg_template_type:{raw:{}},kpmg_image:{raw:{}},kpmg_non_decorative_alt_text:{raw:{}},kpmg_article_readtime:{raw:{}},kpmg_contact_fn:{raw:{}},kpmg_contact_ln:{raw:{}},kpmg_event_type:{raw:{}},kpmg_contact_country:{raw:{}},kpmg_is_rendition_optimized:{raw:{}},kpmg_article_primary_format:{raw:{}},kpmg_article_type:{raw:{}},kpmg_event_startdate:{raw:{}}},page:{size:20,current:1},sort:{kpmg_filter_date:`desc`}},d={en:{title:`Insights - KPMG `,link:`${l}/xx/en/home/insights.html`,api:`${l}/esearch/xx-en`},zh:{title:`洞察 - 毕马威`,link:`${l}/cn/zh/home/insights.html`,api:`${l}/esearch/cn-zh`}},f=t=>i(s.join(e,`templates/description-46570299.art`),t),p={path:`/insights/:lang?`,example:`/kpmg/insights`,parameters:{lang:"Language, either `en` or `zh`"},radar:[{source:[`kpmg.com/xx/en/home/insights.html`],target:`/insights/en`},{source:[`kpmg.com/cn/zh/home/insights.html`],target:`/insights/zh`}],name:`Insights`,maintainers:[`LogicJake`],handler:async e=>{let{lang:t=`en`}=e.req.param(),i=d[t];if(!i)throw new o(`Invalid language`);let s=i.link,l=(await n(i.api,{method:`POST`,body:u})).results.map(e=>({title:e.kpmg_title.raw,description:e.kpmg_description.raw,link:e.kpmg_url.raw,pubDate:a(e.kpmg_article_date_time.raw),image:e.kpmg_image.raw,imageAlt:e.kpmg_image_alt?.raw})),p=await Promise.all(l.map(e=>r.tryGet(e.link,async()=>{let t=await n(e.link),r=c.load(t),i=r(`.bodytext-data`).toArray().map(e=>{let t=r(e);return t.find(`.hidden-xs, .sr-only`).remove(),t.parent().html()}).join(``),a=r(`.pdfdetails`).parent().parent().parent();return a.find(`.hidden-xs, .sr-only`).remove(),e.description=f({image:e.image,alt:e.imageAlt,content:i,pdf:a.prop(`outerHTML`)}),e})));return{title:`KPMG Insights`,link:s,item:p}},url:`kpmg.com/xx/en/home/insights.html`,zh:{name:`洞察`}};export{p as route};