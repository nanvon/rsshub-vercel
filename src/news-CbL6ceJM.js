import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i={path:`/:path{.+}?`,radar:[{source:[`rfi.fr/*path`],target:`/:path`}],name:`Generic News`,maintainers:[`nczitzk`],handler:a,url:`rfi.fr`,example:`/rfi`,description:"::: tip\n-   To subscribe to [English News](https://www.rfi.fr/en/), which URL is `https://www.rfi.fr/en`, you can get the route as [`/rfi/en`](https://rsshub.app/rfi/en).\n-   To subscribe to [English Europe News](https://www.rfi.fr/en/europe/), which URL is `https://www.rfi.fr/en/europe`, you can get the route as [`/rfi/en/europe`](https://rsshub.app/rfi/en/europe).\n-   To subscribe to topic [Paris Olympics 2024](https://www.rfi.fr/en/tag/paris-olympics-2024/), which URL is `https://www.rfi.fr/en/tag/paris-olympics-2024`, you can get the route as [`/rfi/en/tag/paris-olympics-2024`](https://rsshub.app/rfi/en/tag/paris-olympics-2024).\n:::\n\n::: warning\nThis route does not support podcasts, please use the Offical RSS feed instead.\n:::\n"};async function a(i){let a=i.req.param(`path`)??`en`,o=`https://www.rfi.fr/${a.endsWith(`/`)?a:`${a}/`}`,s=await n(o),c=r(s.data);c(`aside[data-org-type="aside-content--highlighted"], aside[data-org-type="aside-content--sponsors"]`).remove();let l=c(`.article__title a`).toArray().map(e=>(e=c(e),{title:e.text(),link:new URL(e.attr(`href`),o).href}));return l=await Promise.all(l.map(i=>t.tryGet(i.link,async()=>{let t=await n(i.link),a=r(t.data);a(`.m-interstitial, .m-em-quote svg, .o-self-promo`).remove();let o=JSON.parse(a(`script[type="application/ld+json"]`).text()||`[]`).find(e=>e[`@type`]===`NewsArticle`);return i.description=a(`.t-content__chapo`).prop(`outerHTML`)+a(`.t-content__main-media`).prop(`outerHTML`)+a(`.t-content__body`).html(),i.pubDate=e(o?.datePublished),i.updated=e(o?.dateModified),i.author=o?.author.map(e=>e.name).join(`, `),i.category=o?.keywords,o?.audio&&(i.itunes_item_image=o.audio.thumbnailUrl,i.itunes_duration=o.audio.duration.match(/P0DT(\d+)H(\d+)M(\d+)S/).slice(1).map(e=>Number.parseInt(e)).reduce((e,t)=>e*60+t),i.enclosure_url=o.audio.contentUrl,i.enclosure_type=`audio/mpeg`),i}))),{title:c(`title`).text(),description:c(`meta[name="description"]`).attr(`content`),link:o,image:c(`meta[property="og:image"]`).attr(`content`),icon:new URL(c(`link[rel="apple-touch-icon"]`).attr(`href`),o).href,logo:new URL(c(`link[rel="apple-touch-icon"]`).attr(`href`),o).href,item:l,language:c(`html`).attr(`lang`)}}export{i as route};