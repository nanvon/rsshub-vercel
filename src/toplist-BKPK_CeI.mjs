import"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-BMqiDsx_.mjs";import"./helpers-mo8InLYm.mjs";import{t as e}from"./cache-ZTWfXd2T.mjs";import{t}from"./parse-date-bKmkZ9gg.mjs";import{t as n}from"./got-2jXbf1Li.mjs";import"./timezone-CE0MDOJ-.mjs";import{n as r,r as i,t as a}from"./utils-DiKFSmeo.mjs";import{load as o}from"cheerio";const s={path:[`/ranking/:id?/:period?`,`/toplist/:id?/:period?`],name:`Unknown`,maintainers:[`HenryQW`,`nczitzk`],handler:c,description:`| 文章点击排行 | 最近更新文章 | 文章推荐排行 |
| ------------ | ------------ | ------------ |
| 1            | 10           | 11           |`};async function c(s){let{id:c=`1`,period:l=`1`}=s.req.param(),u=s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`),10):30,d=new URL(`toplist${c?`?id=${c}${c===`1`?`&period=${l}`:``}`:``}`,i).href,{data:f}=await n(d),p=o(f),m=`${p(`a.hl`).text()||``}${p(`title`).text().split(`_`)[0]}`,h=p(`div.tops_list`).slice(0,u).toArray().map(e=>{e=p(e);let n=e.find(`div.tips a`);return{title:n.text(),link:new URL(n.prop(`href`),i).href,author:e.find(`div.name`).text(),pubDate:t(e.find(`div.times`).text())}});return{item:await a(u,e.tryGet,h),title:`爱思想 - ${m}`,link:d,language:`zh-cn`,image:new URL(`images/logo_toplist.jpg`,r).href,subtitle:m}}export{s as route};