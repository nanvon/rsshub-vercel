import"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CfXAR0UO.js";import"./helpers-Cqaav28H.js";import{t as e}from"./cache-CpEhLexq.js";import{t}from"./parse-date-CHEO0z5G.js";import{t as n}from"./got-dCh-Ojgc.js";import{t as r}from"./invalid-parameter-CLGd_tte.js";import{t as i}from"./valid-host-COjFWLEv.js";import{load as a}from"cheerio";const o=new Set([`all`,`design-resources`,`learn-design`,`inside-eagle`]),s={path:`/blog/:cate?/:language?`,categories:[`blog`],example:`/eagle/blog/en`,parameters:{cate:"Category, get by URL, `all` by default",language:{description:`Language`,options:[{value:`cn`,label:`cn`},{value:`tw`,label:`tw`},{value:`en`,label:`en`}],default:`en`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cn.eagle.cool/blog`],target:`/blog`}],name:`Blog`,maintainers:[`Fatpandac`],handler:c,url:`cn.eagle.cool/blog`};async function c(s){let c=s.req.param(`cate`)??`all`,l=s.req.param(`language`)??`cn`;if(!i(c)||!i(l))throw new r(`Invalid host`);o.has(c)||(l=c,c=`all`);let u=`https://${l}.eagle.cool`,d=`${u}/blog/${c===`all`?``:c}`,f=a((await n(d)).data),p=f(`div.categories-list > div > div > div > ul > li.active`).text(),m=f(`div.post-item`).toArray().map(e=>({title:f(e).find(`div.title`).text(),link:new URL(f(e).find(`a`).attr(`href`),u).href,pubDate:t(f(e).find(`div.metas > a > span`).text().replace(`ãƒ»`,``))})),h=await Promise.all(m.map(t=>e.tryGet(t.link,async()=>(t.description=a((await n(t.link)).data)(`div.post-html`).html(),t))));return{title:`eagle - ${p}`,link:d,item:h}}export{s as route};