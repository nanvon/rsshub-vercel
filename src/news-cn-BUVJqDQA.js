import"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as e}from"./ofetch-CfXAR0UO.js";import{t}from"./cache-CpEhLexq.js";import{t as n}from"./parse-date-CHEO0z5G.js";import{load as r}from"cheerio";const i={path:`/news-cn/:category?`,categories:[`game`],example:`/blizzard/news-cn/ow`,parameters:{category:`游戏类别, 默认为 ow`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`ow.blizzard.cn`,`wow.blizzard.cn`,`hs.blizzard.cn`],target:`/news-cn/`}],name:`暴雪游戏国服新闻`,maintainers:[`zhangpeng2k`],description:`
| 守望先锋 | 炉石传说 | 魔兽世界 |
|----------|----------|---------|
| ow       | hs       | wow     |
`,handler:u},a={ow:`守望先锋`,hs:`炉石传说`,wow:`魔兽世界`},o={ow:e=>e(`.list-data-container .list-item-container`).toArray().map(t=>(t=e(t),{title:t.find(`.content-title`).text(),link:t.find(`.fill-link`).attr(`href`),description:t.find(`.content-intro`).text(),pubDate:n(t.find(`.content-date`).text()),image:t.find(`.item-pic`).attr(`src`)})),hs:e=>e(`.article-container>a`).toArray().map(t=>(t=e(t),{title:t.find(`.title`).text(),link:t.attr(`href`),description:t.find(`.desc`).text(),pubDate:n(t.find(`.date`).attr(`data-time`)),image:t.find(`.article-img img`).attr(`src`)})),wow:e=>e(`.Pane-list>a`).toArray().map(t=>(t=e(t),{title:t.find(`.list-title`).text(),link:t.attr(`href`),description:t.find(`.list-desc`).text(),pubDate:n(t.find(`.list-time`).attr(`data-time`)),image:t.find(`.img-box img`).attr(`src`)}))},s={ow:e=>e(`.deatil-content`).first().html(),hs:e=>e(`.article`).first().html(),wow:e=>e(`.detail`).first().html()};function c(e,t){return o[e]?o[e](t):[]}async function l(n,i){return await t.tryGet(n.link,async()=>{let t=r(await e(n.link)),a=s[i];return n.description=a(t),n})}async function u(t){let n=t.req.param(`category`)||`ow`;if(!a[n])throw Error(`Invalid category`);let i=`https://${n}.blizzard.cn/news`,o=c(n,r(await e(i)));if(!o.length)throw Error(`No news found`);let s=await Promise.all(o.map(e=>l(e,n)));return{title:`${a[n]}新闻`,link:i,item:s}}export{i as route};