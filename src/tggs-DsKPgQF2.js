import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CeMUzp5K.js";import"./helpers-qpI1t-yV.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-Di2lBekK.js";import{load as r}from"cheerio";const i={path:`/tggs`,categories:[`university`],example:`/csust/tggs`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.csust.edu.cn/tggs.htm`,`www.csust.edu.cn/`]}],name:`通告公示`,maintainers:[`powerfullz`],handler:o,url:`www.csust.edu.cn/tggs.htm`};async function a(e){let t=r((await n(e.link)).body),i=t(`.v_news_content`);return i.length?(i.find(`script`).remove(),i.find(`style`).remove(),i.find(`.vsbcontent_end`).remove(),i.find(`iframe`).remove(),i.find(`*`).each((e,n)=>{let r=t(n),i=r.attr(`style`);if(i){let e=i.match(/text-align:\s*(\w+)/)?.[1],t=i.match(/text-indent:\s*([\d.]+(?:px|em))/)?.[1],n=``;e&&[`left`,`center`,`right`,`justify`].includes(e)&&(n+=`text-align: ${e};`),t&&(n+=` text-indent: ${t};`),n?r.attr(`style`,n.trim()):r.removeAttr(`style`)}r.removeAttr(`class id`)}),e.description=i.html()||e.title):e.description=e.title,e}async function o(){let i=`https://www.csust.edu.cn`,o=r((await n(`${i}/tggs.htm`)).body),s=o(`.list ul li`).toArray().map(e=>{let n=o(e),r=n.find(`.newTitle`).text().trim(),a=n.find(`a`).attr(`href`),s=n.find(`.data1`).text().trim();if(!a||!r)return null;let c=s.match(/发布时间\s*[:：]\s*(\d{4}-\d{1,2}-\d{1,2})/),l=c?t(c[1]):null;return{title:r,link:a.startsWith(`http`)?a:`${i}${a}`,pubDate:l}}).filter(e=>e!==null),c=await Promise.all(s.map(t=>e.tryGet(t.link,async()=>{try{return await a(t)}catch{return t}})));return{title:`长沙理工大学 - 通告公示`,link:`${i}/tggs.htm`,description:`长沙理工大学通告公示`,item:c}}export{i as route};