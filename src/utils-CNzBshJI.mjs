import{n as e,t}from"./esm-shims-L08rKynx.mjs";import{t as n}from"./cache-ZTWfXd2T.mjs";import{t as r}from"./render-CBhnapAf.mjs";import{t as i}from"./got-2jXbf1Li.mjs";import{t as a}from"./invalid-parameter-Cn6c8J1f.mjs";import o from"node:path";e();const s=`https://apiv3.fansly.com`,c=`https://fansly.com`,l=`${c}/assets/images/icons/apple-touch-icon.png`,u=(e,t)=>{let n=t.find(t=>t.id===e);return{displayName:n.displayName,username:n.username}},d=e=>n.tryGet(`fansly:account:${e.toLowerCase()}`,async()=>{let{data:t}=await i(`${s}/api/v1/account`,{searchParams:{usernames:e,"ngsw-bypass":!0}});if(!t.response.length)throw new a(`This profile or page does not exist.`);return t.response[0]}),f=async e=>{let{data:t}=await i(`${s}/api/v1/timelinenew/${e}`,{searchParams:{before:0,after:0,wallId:``,contentSearch:``,"ngsw-bypass":!0}});return t.response},p=e=>n.tryGet(`fansly:tag:${e.toLowerCase()}`,async()=>{let{data:t}=await i(`${s}/api/v1/contentdiscovery/media/tag`,{searchParams:{tag:e,"ngsw-bypass":!0}});if(!t.response.mediaOfferSuggestionTag)throw Error(`Couldn't find this hashtag.`);return t.response.mediaOfferSuggestionTag.id}),m=async e=>{let{data:t}=await i(`${s}/api/v1/contentdiscovery/media/suggestionsnew`,{searchParams:{before:0,after:0,tagIds:e,limit:25,offset:0,"ngsw-bypass":!0}});return t.response},h=(e,t)=>e.content.replaceAll(`
`,`<br>`)+`<br>`+g(e.attachments,t),g=(e,t)=>e.map(e=>{switch(e.contentType){case 1:return _(e.contentId,t.accountMedia);case 2:{let n=``,r=t.accountMediaBundles.find(t=>t.id===e.contentId);for(let e of r.accountMediaIds)n+=_(e,t.accountMedia);return n}case 8:{let n=`<br><br>`,r=t.aggregatedPosts.find(t=>t.id===e.contentId)||t.posts.find(t=>t.id===e.contentId);return n+=h(r,t),n}case 7100:return b(e.contentId,t.tipGoals);case 32001:return``;case 42001:return y(e.contentId,t.polls);default:throw Error(`Unhandled attachment type: ${e.contentType} for post ${e.postId}`)}}).join(``),_=(e,t)=>{let n=t.find(t=>t.id===e);return n?v(n.preview??n.media):``},v=e=>{switch(e.mimetype){case`image/gif`:case`image/jpeg`:case`image/png`:case`video/mp4`:case`audio/mp4`:return r(o.join(t,`templates/media-e8ba56ad.art`),{poster:e.mimetype===`video/mp4`?e.variants[0].locations[0]:null,src:e.locations[0]});default:throw Error(`Unhandled media type: ${e.mimetype}`)}},y=(e,n)=>{let i=n.find(t=>t.id===e);return r(o.join(t,`templates/poll-cab99125.art`),{title:i.question,options:i.options,version:i.version})},b=(e,n)=>{let i=n.find(t=>t.id===e);return r(o.join(t,`templates/tip-goal-0ea3f03a.art`),{label:i.label,description:i.description,currentAmount:i.currentAmount,goalAmount:i.goalAmount,currentPercentage:i.currentPercentage})};export{m as a,h as c,p as i,u as n,f as o,d as r,l as s,c as t};