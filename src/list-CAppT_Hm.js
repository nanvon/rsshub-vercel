import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import{config as n}from"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as r}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{art as i}from"./render-DOz85fGU.js";import{ofetch_default as a}from"./ofetch-ZUQ1sEMc.js";import o from"node:path";t();const s={path:`/post/list/:sort?`,example:`/bc3ts/post/list`,parameters:{sort:"排序方式，`1` 為最新，`2` 為熱門，默认為 `1`"},features:{antiCrawler:!0},radar:[{source:[`web.bc3ts.net`]}],name:`動態`,maintainers:[`TonyRL`],handler:u},c=`https://web.bc3ts.net`,l=t=>i(o.join(e,`templates/media-50bba4a6.art`),{media:t});async function u(e){let{sort:t=`1`}=e.req.param(),i=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`),10):20,o=await a(`https://app.bc3ts.net/post/list/v2`,{headers:{apikey:`zlF+kaPfem%23we$2@90irpE*_RGjdw`,app_version:`3.0.28`,version:`2.0.0`,"User-Agent":n.trueUA},query:{limits:i,sort_type:t}}),s=o.data.map(e=>({title:e.title??e.content.split(`
`)[0],description:e.content.replaceAll(`
`,`<br>`)+(e.media.length&&l(e.media)),link:`${c}/post/${e.id}`,author:e.user.name,pubDate:r(e.created_time,`x`),category:e.group.name,upvotes:e.like_count,comments:e.comment_count}));return{title:`爆料公社${t===`1`?`最新`:`熱門`}動態`,link:c,language:`zh-TW`,image:`https://img.bc3ts.net/image/web/main/logo-white-new-2023.png`,icon:`https://img.bc3ts.net/image/web/main/logo/logo_icon_6th_2024_192x192.png`,item:s}}export{s as route};