import{n as e,t}from"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CfXAR0UO.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-dCh-Ojgc.js";import{t as o}from"./timezone-BPfwRbwD.js";import s from"node:path";import{load as c}from"cheerio";e();const l=`http://www.mztoday.gov.cn`,u={zx:{name:`最新`,url:`/news.html?page=1`},tj:{name:`推荐`,url:`/list/42.html?page=1`},sz:{name:`时政`,url:`/list/39.html?page=1`},jy:{name:`教育`,url:`/list/40.html?page=1`},ms:{name:`民生`,url:`/list/41.html?page=1`},wl:{name:`文旅`,url:`/list/41.html?page=1`},jj:{name:`经济`,url:`/list/53.html?page=1`},wwcj:{name:`文明创建`,url:`/list/54.html?page=1`},bxsh:{name:`文明创建`,url:`/list/55.html?page=1`},bm:{name:`部门`,url:`/list/56.html?page=1`},zj:{name:`镇（街道）`,url:`/list/57.html?page=1`},jkmz:{name:`健康绵竹`,url:`/list/59.html?page=1`},nxjt:{name:`南轩讲堂`,url:`/list/70.html?page=1`},sp:{name:`视频`,url:`/vlist.html?page=1`},wmsj:{name:`文明实践`,url:`/list/71.html?page=1`},lhzg:{name:`领航中国`,url:`/list/74.html?page=1`},mznh:{name:`绵竹年画`,url:`/list/36.html?page=1`},mzls:{name:`绵竹历史`,url:`/list/16.html?page=1`},mzly:{name:`绵竹旅游`,url:`/list/37.html?page=1`},wwkmz:{name:`外媒看绵竹`,url:`/list/50.html?page=1`}},d=async e=>{let t=c((await a(e)).data);return t(`div.sl`).toArray().map(e=>({title:t(`a`,e).attr(`title`),url:`${l}${t(`a`,e).attr(`href`)}`,pubDate:i(o(t(`div > div:nth-child(4)`,e).html().trim()),8)}))},f=e=>n.tryGet(e.url,async()=>{let t=c((await a(e.url)).data);return{title:e.title,content:t(`td:nth-child(2)`).html(),link:e.url,pubDate:e.pubDate}}),p={path:`/sichuan/deyang/mztoday/:infoType?`,categories:[`government`],example:`/gov/sichuan/deyang/mztoday/zx`,parameters:{infoType:`信息栏目名称。默认最新(zx)`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.mztoday.gov.cn/*`],target:`/sichuan/deyang/mztoday`}],name:`今日绵竹`,maintainers:[`zytomorrow`],handler:m,url:`www.mztoday.gov.cn/*`,description:`| 最新 | 推荐 | 时政 | 教育 | 民生 | 文旅 | 经济 | 文明创建 | 部门 | 镇（街道） | 健康绵竹 | 南轩讲堂 | 视频 | 文明实践 | 领航中国 | 绵竹年画 | 绵竹历史 | 绵竹旅游 | 外媒看绵竹 |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | -------- | ---- | ---------- | -------- | -------- | ---- | -------- | -------- | -------- | -------- | -------- | ---------- |
| zx   | tj   | sz   | jy   | ms   | wl   | jj   | wmcj     | bm   | zj         | jkmz     | nxjt     | sp   | wmsj     | lhzg     | mznh     | mzls     | mzly     | wmkmz      |`};async function m(e){let n=e.req.param(`infoType`)||`zx`,i=`${l}${u[n].url}`,a=await d(i),o=await Promise.all(a.map(e=>f(e)));return{title:`今日绵竹-${u[n].name}`,link:`${i}1`,item:o.map(e=>({title:e.title,description:r(s.join(t,`templates/mztoday-85d6fcf2.art`),{item:e}),link:e.link,pubDate:e.pubDate}))}}export{p as route};