import{n as e,t}from"./esm-shims-D4LgnpSl.mjs";import{t as n}from"./render-CBhnapAf.mjs";import{t as r}from"./parse-date-bKmkZ9gg.mjs";import{t as i}from"./got-AYh7EWi-.mjs";import a from"node:path";import{load as o}from"cheerio";e();const s=`https://www.javlibrary.com`,c=`1`,l=`amjq`,u=`arlq`,d=`ja`,f=async(e,c,l)=>{let u=o((await i({method:`get`,url:c})).data);u(`.toolbar, .info, .videoinfo`).remove();let d=u(`.videotextlist, #video_comments`).find(`a`).toArray().filter(e=>u(e).parent().hasClass(`video`)||u(e).parent().get(0).tagName===`strong`).map(t=>{t=u(t);let n=t.parentsUntil(`table`),i=`${s}/${e}/${t.attr(`href`).replace(/^\.\//,``)}`;return{link:i,url:i.replace(/video.*\.php/,``),title:t.text(),description:n.find(`textarea`).text(),pubDate:r(n.find(`.date`).text())}});return d=await Promise.all(d.map(e=>l(e.url,async()=>{let s=await i({method:`get`,url:e.url}),c=o(s.data);return c(`.icn_edit, .btn_videoplayer, a[rel="bookmark"]`).remove(),c(`span`).each(function(){c(this).attr(`class`)?.startsWith(`icn_`)&&c(this).remove()}),e.author=c(`.star`).toArray().map(e=>c(e).text()).filter(e=>e!==``).join(`,`),e.category=c(`a[rel]`).toArray().map(e=>c(e).text()).filter(e=>e!==``),e.description=n(a.join(t,`templates/description-bc841822.art`),{cover:c(`#video_jacket_img`).attr(`src`),info:c(`#video_info`).html().replaceAll(`span><span`,`span>,&nbsp;<span`),comment:e.description?.replaceAll(`[img]`,`<img src="`)?.replaceAll(`[/img]`,`"/>`),thumbs:c(`.previewthumbs img`).toArray().map(e=>c(e).attr(`src`).replaceAll(`-`,`jp-`)),videos:[...new Set(s.data.match(/(http[^"[\]]+\.mp4)/g))]}),e.pubDate=e.pubDate.toString()===`Invalid Date`?r(c(`#video_date`).find(`.text`).text()):e.pubDate,delete e.url,e}))),{title:u(`title`).text(),link:c,item:d,allowEmpty:!0}};export{c as a,u as i,l as n,s as o,d as r,f as t};