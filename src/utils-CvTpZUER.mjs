import{n as e,t}from"./esm-shims-DIdKin6S.mjs";import{t as n}from"./render-ZYpwNl2L.mjs";import{t as r}from"./parse-date-9Tu6hSFW.mjs";import{t as i}from"./got-BeQM9q-W.mjs";import{t as a}from"./timezone-CQaZZkB1.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c=`https://www.yicai.com`,l=async(e,s)=>{let l=(await i({method:`get`,url:e})).data.map(e=>({title:e.NewsTitle,link:e.url.startsWith(`http`)?e.url:`${c}${e.AppID===0?`/vip`:``}${e.url}`,author:e.NewsAuthor||e.NewsSource||e.CreaterName,pubDate:a(r(e.CreateDate),8),category:[e.ChannelName],description:n(o.join(t,`templates/description-55895928.art`),{image:{src:e.originPic,alt:e.NewsTitle},video:{src:e.VideoUrl,type:e.VideoUrl?.split(/\./).pop()??void 0},intro:e.NewsNotes})}));return Promise.all(u(l,s))};function u(e,t){return e.map(e=>t(e.link,async()=>{let t=s((await i({method:`get`,url:e.link})).data);if(!e.pubDate){let n=t(`script[src='/js/alert.min.js']`).next().text()||t(`title`).next().text();e.pubDate=r(`${new Map(JSON.parse(n.match(/_pb = (\[.*?]);/)[1].replaceAll(`'`,`"`))).get(`actime`)}:00`)}return t(`h1`).remove(),t(`.u-btn6, .m-smallshare, .topic-hot`).remove(),e.description=(e.description??``)+(t(`.multiText, #multi-text, .txt`).html()??``),e}))}export{u as n,c as r,l as t};