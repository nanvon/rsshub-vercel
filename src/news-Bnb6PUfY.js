import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import{ofetch_default as e}from"./ofetch-TsvCL7Kz.js";import{cache_default as t}from"./cache-CzcusEyX.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";const i={path:`/news`,categories:[`game`],example:`/warhammer-community/news`,radar:[{source:[`www.warhammer-community.com/en-gb/all-news-and-features/`,`www.warhammer-community.com/en-gb/`]}],name:`News`,maintainers:[`TonyRL`],handler:a,url:`www.warhammer-community.com/en-gb/all-news-and-features/`};async function a(i){let a=`https://www.warhammer-community.com`,o=Number.parseInt(i.req.query(`limit`)||`16`,10),s=await e(`${a}/api/search/news/`,{method:`POST`,body:{sortBy:`date_desc`,category:``,collections:[`articles`],game_systems:[],index:`news`,locale:`en-gb`,page:0,perPage:o,topics:[]}}),c=s.news.map(e=>({title:e.title,link:`${a}/en-gb${e.uri}/`,description:e.excerpt,image:`https://assets.warhammer-community.com/${e.image.path}`,pubDate:n(e.date),category:e.topics.map(e=>e.title)})),l=await Promise.all(c.map(n=>t.tryGet(n.link,async()=>{let t=await e(n.link),i=r(t),a=i(`.article-content`);return a.find(`button`).remove(),n.description=a.html()||n.description,n})));return{title:`All News and Features - Warhammer Community`,link:`${a}/en-gb/all-news-and-features/`,image:`${a}/images/apple-favicon.png`,item:l}}export{i as route};