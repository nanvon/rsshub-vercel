import{Fragment as e,jsx as t,jsxs as n}from"hono/jsx/jsx-runtime";import r from"dayjs";import i from"art-template";var a=({data:e})=>n(`feed`,{xmlns:`http://www.w3.org/2005/Atom`,"xmlns:rsshub":`http://rsshub.app/xml/schemas`,children:[t(`title`,{children:e.title||`RSSHub`}),t(`link`,{href:e.link||`https://docs.rsshub.app`}),t(`id`,{children:e.id||e.link}),n(`subtitle`,{children:[e.description||e.title,` - Powered by RSSHub`]}),t(`generator`,{children:`RSSHub`}),t(`webMaster`,{children:`contact@rsshub.app (RSSHub)`}),t(`language`,{children:e.language||`en`}),t(`updated`,{children:e.lastBuildDate}),t(`author`,{children:t(`name`,{children:e.author||`RSSHub`})}),e.icon&&t(`icon`,{children:e.icon}),e.logo&&t(`logo`,{children:e.logo}),e.item?.map(e=>n(`entry`,{children:[t(`title`,{children:e.title}),t(`content`,{type:`html`,src:e.link,children:e.description}),t(`link`,{href:e.link}),t(`id`,{children:e.guid||e.link||e.title}),e.pubDate&&t(`published`,{children:e.pubDate}),e.updated&&t(`updated`,{children:e.updated||e.pubDate}),e.author&&t(`author`,{children:t(`name`,{children:e.author})}),typeof e.category==`string`?t(`category`,{term:e.category}):e.category?.map(e=>t(`category`,{term:e})),e.media&&Object.entries(e.media).map(([e,n])=>t(`media:${e}`,{...n})),e.upvotes?t(`rsshub:upvotes`,{children:e.upvotes}):``,e.downvotes?t(`rsshub:downvotes`,{children:e.downvotes}):``,e.comments?t(`rsshub:comments`,{children:e.comments}):``]}))]}),o=e=>{let t={version:`https://jsonfeed.org/version/1.1`,title:e.title||`RSSHub`,home_page_url:e.link||`https://docs.rsshub.app`,feed_url:e.feedLink,description:`${e.description||e.title} - Powered by RSSHub`,icon:e.image,authors:typeof e.author==`string`?[{name:e.author}]:e.author,language:e.language||`zh-cn`,items:e.item?.map(e=>({id:e.guid||e.id||e.link,url:e.link,title:e.title,content_html:e.content&&e.content.html||e.description||e.title,content_text:e.content&&e.content.text,image:e.image||e.itunes_item_image,banner_image:e.banner,date_published:e.pubDate,date_modified:e.updated,authors:typeof e.author==`string`?[{name:e.author}]:e.author,tags:typeof e.category==`string`?[e.category]:e.category,language:e.language,attachments:e.attachments||(e.enclosure_url?[{url:e.enclosure_url,mime_type:e.enclosure_type,title:e.enclosure_title,size_in_bytes:e.enclosure_length,duration_in_seconds:e.itunes_duration}]:void 0),_extra:e._extra||void 0}))};return JSON.stringify(t)},s=({data:r})=>{let i=r.itunes_author||r.itunes_category||r.item&&r.item.some(e=>e.itunes_item_image||e.itunes_duration),a=r.item?.some(e=>e.media),o=r.link?.startsWith(`https://t.me/s/`);return t(`rss`,{"xmlns:atom":`http://www.w3.org/2005/Atom`,"xmlns:itunes":i?`http://www.itunes.com/dtds/podcast-1.0.dtd`:void 0,"xmlns:media":a?`http://search.yahoo.com/mrss/`:void 0,version:`2.0`,children:n(`channel`,{children:[t(`title`,{children:r.title||`RSSHub`}),t(`link`,{children:r.link||`https://docs.rsshub.app`}),t(`atom:link`,{href:r.atomlink,rel:`self`,type:`application/rss+xml`}),n(`description`,{children:[r.description||r.title,` - Powered by RSSHub`]}),t(`generator`,{children:`RSSHub`}),t(`webMaster`,{children:`contact@rsshub.app (RSSHub)`}),r.itunes_author&&t(`itunes:author`,{children:r.itunes_author}),r.itunes_category&&t(`itunes:category`,{text:r.itunes_category}),r.itunes_author&&t(`itunes:explicit`,{children:r.itunes_explicit||`false`}),t(`language`,{children:r.language||`en`}),r.image&&n(`image`,{children:[t(`url`,{children:r.image}),t(`title`,{children:r.title||`RSSHub`}),t(`link`,{children:r.link}),o&&n(e,{children:[t(`height`,{children:`31`}),t(`width`,{children:`88`})]})]}),t(`lastBuildDate`,{children:r.lastBuildDate}),t(`ttl`,{children:r.ttl}),r.item?.map(e=>n(`item`,{children:[t(`title`,{children:e.title}),t(`description`,{children:e.description}),t(`link`,{children:e.link}),t(`guid`,{isPermaLink:`false`,children:e.guid||e.link||e.title}),e.pubDate&&t(`pubDate`,{children:e.pubDate}),e.author&&t(`author`,{children:e.author}),e.image&&t(`enclosure`,{url:e.image,type:`image/jpeg`}),e.itunes_item_image&&t(`itunes:image`,{href:e.itunes_item_image}),e.enclosure_url&&t(`enclosure`,{url:e.enclosure_url,length:e.enclosure_length,type:e.enclosure_type}),e.itunes_duration&&t(`itunes:duration`,{children:e.itunes_duration}),typeof e.category==`string`?t(`category`,{children:e.category}):e.category?.map(e=>t(`category`,{children:e})),e.media&&Object.entries(e.media).map(([e,n])=>t(`media:${e}`,{...n}))]}))]})})};const c=`feed`,l=e=>{let t=r().unix();return{data:e.item.map(e=>{let n=u(e);return{owner:n,id:e.link,network:`rsshub`,from:n,to:n,tag:`RSS`,type:c,direction:`out`,feeValue:`0`,actions:[{tag:`RSS`,type:c,platform:`RSSHub`,from:n,to:n,metadata:{authors:typeof e.author==`string`?[{name:e.author}]:e.author,description:e.description,pub_date:e.pubDate,tags:typeof e.category==`string`?[e.category]:e.category,title:e.title},related_urls:[e.link]}],timestamp:r(e.updated).unix()||t}})}};function u(e){try{return new URL(e.link).hostname}catch{return e.link}}var d=l;export{a,o as i,d as n,s as r,i as t};