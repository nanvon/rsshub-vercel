import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./ofetch-BRplXtiZ.mjs";import{t as r}from"./parse-date-_GmTZfjS.mjs";import{t as i}from"./render-CSqLtqb8.mjs";import a from"node:path";e();async function o(e){let o=(await n(`https://go-api.twreporter.org/v2/posts/${e}?full=true`)).data,s=o.published_date,c=``;o.writers&&(c=o.writers.map(e=>e.job_title?e.job_title+` / `+e.name:`文字 / `+e.name).join(`，`));let l=``;o.photographers&&(l=o.photographers.map(e=>{let t=`攝影 / `;return e.job_title&&(t=e.job_title+` / `),t+e.name}).join(`，`),c+=`；`+l);let u=o.hero_image??o.og_image,d=u?.resized_targets.desktop.url,f=o.leading_image_description,p=u?.description??``,m=o.og_description,h=u?i(a.join(t,`templates/image-51014ea7.art`),{image:d,description:p,caption:f}):``;function g(e,n){let r=``;if(n!==``&&e!==`embeddedcode`)switch(e){case`image`:case`slideshow`:r=n.map(e=>i(a.join(t,`templates/image-51014ea7.art`),{image:e.desktop.url,description:e.description,caption:e.description})).join(`<br>`);break;case`blockquote`:r=`<blockquote>${n}</blockquote>`;break;case`header-one`:r=`<h1>${n}</h1>`;break;case`header-two`:r=`<h2>${n}</h2>`;break;case`infobox`:{let e=n[0];r=`<h2>${e.title}</h2>${e.body}`;break}case`youtube`:{let e=n[0].youtubeId.split(`?`)[0];r=i(a.join(t,`templates/youtube-29c80cf5.art`),{video:e});break}case`quoteby`:{let e=n[0];r=`<blockquote>${e.quote}</blockquote><p>${e.quoteBy}</p>`;break}default:r=`${n}<br>`}return r}let _=[h,m,o.content.api_data.map(e=>{let t=e.content,n=e.type;return g(n,t)}).filter(Boolean).join(`<br>`)].filter(Boolean).join(`<br><br>`);return{author:c,description:_,link:`https://www.twreporter.org/a/${e}`,guid:`https://www.twreporter.org/a/${e}`,pubDate:r(s,`YYYY-MM-DDTHH:mm:ssZ`)}}export{o as t};