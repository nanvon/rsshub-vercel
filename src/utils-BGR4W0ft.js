import{ofetch_default as e}from"./ofetch-B4O0sZDE.js";import{cache_default as t}from"./cache-CjzVN0X7.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{load as i}from"cheerio";const a=async t=>{let n=await e(`https://db2.gamersky.com/LabelJsonpAjax.aspx?${new URLSearchParams({jsondata:JSON.stringify({type:`updatenodelabel`,isCache:!0,cacheTime:60,nodeId:t,isNodeId:`true`,page:1})})}`,{parseResponse:e=>JSON.parse(e.match(/\((.+)\);/)?.[1]??`{}`)});return n.body},o=e=>{let t=i(e);return t(`li`).toArray().map(e=>{let i=t(e),a=i.find(`.tt`).length?i.find(`.tt`):i.find(`a`),o=a.text(),s=a.attr(`href`),c=r(n(i.find(`.time`).text()),8),l=i.find(`.txt`).text();if(s)return{title:o,link:s,pubDate:c,description:l}}).filter(e=>e!==void 0)},s=n=>t.tryGet(n.link,async()=>{let t=await e(n.link),r=i(t),a=r(`.Mid2L_con, .MidLcon`);return a.find(`.appGameBuyCardIframe, .GSAppButton, .Mid2L_down`).remove(),a.find(`a`).each((e,t)=>{t.attribs.href?.startsWith(`https://www.gamersky.com/showimage/id_gamersky.shtml?`)&&(t.attribs.href=t.attribs.href.replace(`https://www.gamersky.com/showimage/id_gamersky.shtml?`,``))}),a.find(`img`).each((e,t)=>{t.attribs.src===`http://image.gamersky.com/webimg13/zhuanti/common/blank.png`?t.attribs.src=t.attribs[`data-origin`]:t.attribs.src.endsWith(`_S.jpg`)&&(t.attribs.src=t.attribs.src.replace(`_S.jpg`,`.jpg`))}),a.find(`.Slides li`).each((e,t)=>{t.attribs.style===`display: none;`&&(t.attribs.style=`display: list-item;`)}),n.description=a.html()||n.description,n});function c(e){let t=`|`+e.map(e=>`${e.type}|`).join(``)+`
|`+Array.from({length:e.length}).fill(`---|`).join(``)+`
|`+e.map(e=>`${e.name}|`).join(``)+`
`;return t}export{s as getArticle,a as getArticleList,c as mdTableBuilder,o as parseArticleList};