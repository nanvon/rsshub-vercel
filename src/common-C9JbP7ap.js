import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import{config as n}from"./config-1ATZGjxb.js";import{ofetch_default as r}from"./ofetch-B4O0sZDE.js";import{cache_default as i}from"./cache-CjzVN0X7.js";import{art as a}from"./render-DE4LRFBD.js";import{got_default as o}from"./got-CW2W8CRN.js";import s from"node:path";import{load as c}from"cheerio";t();const l=new URL(`https://openai.com`),u=async e=>{let t=await r(e),n=c(t),i=n(`#main article`),a=n(`h1`).prev().find(`a[href]`).toArray().map(e=>n(e).text());return n(i.find(`h1`).parents().get(4)).remove(),i.children().last().remove(),i.find(`#citations`).remove(),{content:i.html()??void 0,categories:a,image:n(`meta[property="og:image"]`).attr(`content`)}},d=async e=>{let t=await r(`https://openai.com/news/rss.xml`,{responseType:`text`,headers:{"User-Agent":n.ua}}),a=c(t,{xml:!0});return Promise.all(a(`item`).toArray().slice(0,e).map(e=>{let t=a(e).find(`guid`).text();return i.tryGet(`openai:news:${t}`,async()=>{let n=a(e).find(`title`).text(),r=a(e).find(`pubDate`).text(),i=a(e).find(`link`).text(),{content:o,categories:s}=await u(i);return{guid:t,title:n,link:i,pubDate:r,description:o,category:s}})}))},f=async()=>{let e=await o({method:`get`,url:`https://openai.com/blog`}),t=e.data.toString().match(/(?<=TWILL_API_BASE:").+?(?=")/)[0].replaceAll(String.raw`\u002F`,`/`);return new URL(t)},p=(t,n,r)=>i.tryGet(r.slug,async()=>{let t=`${n}/${r.slug}`,i=await o({method:`get`,url:t}),l=c(i.data),u=l(`[aria-labelledby="metaAuthorsHeading"] > li > a > span > span`).toArray().map(e=>l(e).text()).join(`, `),d=l(`*`).contents().filter(function(){return this.nodeType===8});d.remove(),l=l(`#content`);let f=r.seo.ogImageSrc,p=r.seo.ogImageAlt,m=a(s.join(e,`templates/article-88d59063.art`),{content:l,imageSrc:f,imageAlt:p});return r.tags=r.tags||[],{title:r.title,author:u,description:m,pubDate:r.createdAt,category:r.tags.map(e=>e.title),link:t}});export{l as BASE_URL,d as fetchArticles,f as getApiUrl,p as parseArticle};