import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./got-CgQXMNWI.js";import i from"node:path";import{load as a}from"cheerio";e();const o={path:`/new-arrivals/:query?`,categories:[`shopping`],example:`/zagg/new-arrivals/brand=164&cat=3038,3041`,parameters:{query:`query, search page querystring`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`New Arrivals`,maintainers:[`EthanWng97`],handler:s,description:"For instance, in `https://www.zagg.com/en_us/new-arrivals?brand=164&cat=3038%2C3041`, the query is `brand=164&cat=3038%2C3041`"};async function s(e){let o=e.req.param(`query`),s=new URLSearchParams(o),c=s.get(`brand`),l=s.get(`cat`),u=await r({headers:{"X-Requested-With":`XMLHttpRequest`},method:`post`,url:`https://www.zagg.com/en_us/new-arrivals`,searchParams:{cat:l,brand:c}}),d=u.data.products,f=a(d),p=f(`.item.product.product-item`).toArray().map(e=>{let r={},a=f(e).find(`.product.details-box`).html();r.link=f(e).find(`.product-item-link`).eq(0).attr(`href`),r.title=f(e).find(`.product-item-link`).text();let o=f(e).find(`img`).eq(0).attr(`data-src`).match(/(https.*?)\?/)[1];return r.description=a+n(i.join(t,`templates/new-arrivals-5b741265.art`),{imgUrl:o}),r});return{title:`Zagg - New Arrivals`,link:u.url,description:`Zagg - New Arrivals`,item:p.map(e=>({title:e.title,description:e.description,link:e.link}))}}export{o as route};