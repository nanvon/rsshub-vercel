import{t as e}from"./ofetch-CRUPiVpr.js";import{t}from"./parse-date-CHEO0z5G.js";import{t as n}from"./md5-CWsm3r0H.js";import{load as r}from"cheerio";const i=`https://www.techpowerup.com`,a={cookie:`botcheck=${n(Date.now().toString())}`},o=e=>{e(`div.responsive-image-xx`).each((e,t)=>{l(t)}),e(`figure`).each((e,t)=>{c(t)}),e(`.newspost img`).each((e,t)=>{s(t)})},s=e=>{e.attribs.src=e.attribs.src.replace(`_thm`,``).replace(`_small`,``),e.parentNode.name===`a`&&e.parentNode.attribs[`data-width`]&&e.parentNode.attribs[`data-height`]&&(e.attribs.width=e.parentNode.attribs[`data-width`],e.attribs.height=e.parentNode.attribs[`data-height`])},c=e=>{delete e.attribs.style},l=e=>{delete e.attribs.style},u=async(n,o)=>{let{review:u}=JSON.parse(n(`script[type="application/ld+json"]`).text()),d=n(`.text`),f=n(`#pagesel option`).toArray().map(e=>`${i}${e.attribs.value}`).slice(1,-1);if(f.length){let t=await Promise.all(f.map(async t=>{let n=r(await e(t,{headers:a}));return n(`.text div.responsive-image-xx`).each((e,t)=>{l(t)}),n(`.text figure`).each((e,t)=>{c(t)}),n(`.text img`).each((e,t)=>{s(t)}),n(`.text`).html()}));d.append(t)}o.author=u.author.name,o.pubDate=t(u.datePublished),o.updated=t(u.dateModified),o.description=d.html()};export{u as i,o as n,a as r,i as t};