import{n as e,t}from"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CfXAR0UO.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-dCh-Ojgc.js";import o from"node:path";e();const s=`https://vcb-s.com`,c=`${s}/wp-json/wp/v2/categories`,l=`${s}/wp-json/wp/v2/posts`,u={path:`/category/:cate`,categories:[`anime`],example:`/vcb-s/category/works`,parameters:{cate:`分类`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`vcb-s.com/archives/category/:cate`]}],name:`分类文章`,maintainers:[`cxfksword`],handler:d,url:`vcb-s.com/`,description:`| 作品项目 | 科普系列 | 计划与日志 |
| -------- | -------- | ---------- |
| works    | kb       | planlog    |`};async function d(e){let u=e.req.param(`cate`),d=e.req.query(`limit`)??7,f=`${c}?slug=${u}`,p=await n.tryGet(f,async()=>{let e=await a.get(f);return typeof e.data==`string`&&(e.data=JSON.parse(e.body.trim())),e.data[0]}),m=`${l}?categories=${p.id}&page=1&per_page=${d}&_embed`,h=await a.get(m);typeof h.data==`string`&&(h.data=JSON.parse(h.body.trim()));let g=h.data.map(e=>{let n=r(o.join(t,`templates/post-a0d5f24f.art`),{post:e.content.rendered.replaceAll(/<pre class="js-medie-info-detail.*?>(.*?)<\/pre>/gs,`<pre><code>$1</code></pre>`).replaceAll(/<div.+?dw-box-download.+?>(.*?)<\/div>/gs,`<pre>$1</pre>`),medias:e._embedded[`wp:featuredmedia`]});return{title:e.title.rendered,link:e.link,description:n,pubDate:i(e.date_gmt),author:e._embedded.author[0].name}});return{title:`${p.name} | VCB-Studio`,link:`${s}/archives/category/${p.slug}`,item:g}}export{u as route};