import{__dirname as e,init_esm_shims as t}from"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-D4MiciTC.js";import"./helpers-gUVC02jt.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-CSnicFA3.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-07RFwdy7.js";import o from"node:path";import s from"markdown-it";t();const c={path:`/release/:user/:app/:distribution_group`,categories:[`program-update`],example:`/app-center/release/cloudflare/1.1.1.1-windows/beta`,parameters:{user:`User`,app:`App name`,distribution_group:`Distribution group`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`install.appcenter.ms/users/:user/apps/:app/distribution_groups/:distribution_group`,`install.appcenter.ms/orgs/:user/apps/:app/distribution_groups/:distribution_group`]}],name:`Release`,maintainers:[`Rongronggg9`],handler:l,description:`::: tip
  The parameters can be extracted from the Release page URL: \`https://install.appcenter.ms/users/:user/apps/:app/distribution_groups/:distribution_group\`
:::`};async function l(t){let c=t.req.param(`user`),l=t.req.param(`app`),u=t.req.param(`distribution_group`),d=`https://install.appcenter.ms/api/v0.1/apps/${c}/${l}/distribution_groups/${u}`,f=`${d}/public_releases?scope=tester`,p=`https://install.appcenter.ms/users/${c}/apps/${l}/distribution_groups/${u}`,m=(await a(f)).data.map(e=>({pubDate:i(e.uploaded_at),link:`${d}/releases/${e.id}?is_install_page=true`})),h=new s;m=await Promise.all(m.map(t=>n.tryGet(t.link,async()=>{let n=(await a(t.link)).data,i=n.owner.display_name,s=n.app_os,c=n.short_version,l=n.version,u=n.is_external_build,d=n.mandatory_update,f=(n.size/(1024*1024)).toFixed(2),m=n.uploaded_at,g=n.fingerprint,_=n.min_os,v=n.android_min_api_level,y=n.device_family,b=n.bundle_identifier,x=n.release_notes,S=n.download_url,C=n.install_url,w=n.fileExtension,T=n.app_display_name,E=n.distribution_group_id,D=n.distribution_groups.find(e=>e.id===E).display_name;t._feed_title=`${T} (${D}) for ${s} by ${i} - App Center Releases`,t._feed_icon=n.app_icon_url;let O=c&&l?`${c} (${l})`:c||l;return t.title=`${T}: `+(d?`[Mandatory]`:``)+(u?`[External Build]`:``)+`Version ${O}`,t.link=p,t.author=i,t.description=r(o.join(e,`templates/description-13bc6869.art`),{releaseDate:m,sizeInMBytes:f,minOS:_,deviceFamily:y,androidMinApiLevel:v,bundleId:b,downloadUrl:S,installUrl:C,fingerprint:g,appOS:s,fileExtension:w,releaseNotes:x&&h.render(x)},{minimize:!0}),t.guid=g,t})));let g=m&&m[0]._feed_icon,_=m&&m[0]._feed_title;return{title:_,link:p,description:_,image:g,item:m}}export{c as route};