import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-rK3Yp7nj.js";import"./helpers-qpI1t-yV.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-DftO2d-b.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-CoH3ye0k.js";import{timezone as o}from"./timezone-CMz5pnRe.js";import s from"node:path";import{load as c}from"cheerio";t();const l={ggtz:{url:`https://www.hafu.edu.cn/index/ggtz.htm`,root:`https://www.hafu.edu.cn/`,title:`河南财院 - 公告通知`,parseFn:m},jwc:{url:`https://jwc.hafu.edu.cn/tzgg.htm`,root:`https://jwc.hafu.edu.cn/`,title:`河南财院 教务处 - 公告通知`,parseFn:h},zsjyc:{url:`https://zsjyc.hafu.edu.cn/tztg.htm`,root:`https://zsjyc.hafu.edu.cn/`,title:`河南财院 招生就业处 - 公告通知`,parseFn:g}};let u=10;var d=async(e,t)=>{let n=l[t].url,r=l[t].title,i=c((await a(n)).data);return u=e.req.query(`limit`)||u,{title:r,link:n,resultList:await l[t].parseFn(e,i)}};async function f(t,n,i){let o=``,l=``;try{o=c((await a(n)).data);let t=o(`div[class=v_news_content]`).html();o(`[id^=nattach]`).length!==0&&(t=p(o,t,i)),l=r(s.join(e,`templates/hafu-458f12c2.art`),t)()}catch{l=t}return{articleData:o,description:l}}function p(e,t,n){return n===`ggtz`?e(`[id^=nattach]`).prev().map((n,r)=>{let i=e(r).attr(`href`).slice(1),a=l.ggtz.root+i,o=e(r).text();return t+=`<br/>`,t+=`<a href=${a}>${o}</a>`,null}):e(`[id^=nattach]`).parent().prev().map((r,i)=>{let a=e(i).find(`a`).attr(`href`).slice(1),o=l[n].root+a,s=e(i).find(`a`).find(`span`).text();return t+=`<br/>`,t+=`<a href=${o}> ${s} </a>`,null}),t}async function m(e,t){let r=t(`a[class=c269582]`).parent().slice(0,u);return await Promise.all(r.toArray().map(async e=>{let r=t(e).find(`a[class=c269582]`).attr(`href`).slice(3),a=l.ggtz.root+r,s=t(e).find(`a[class=c269582]`).attr(`title`);return await n.tryGet(a,async()=>{let{articleData:n,description:c}=await f(r,a,`ggtz`),l=``,u=``;if(typeof n==`function`){let e=n(`h1`).next().text(),t=e.indexOf(`日期`);l=e.slice(0,t-2)||``,u=i(e.substring(t+3,t+19),`YYYY-MM-DD HH:mm`)}else u=i(t(e).find(`a[class=c269582_date]`).text(),`YYYY-MM-DD`);return{title:s,description:c,pubDate:o(u,8),link:a,author:l}})}))}async function h(e,t){let r=t(`a[class=c259713]`).parent().parent().slice(0,u);return await Promise.all(r.toArray().map(async e=>{let r=t(e).find(`a[class=c259713]`).attr(`href`),a=l.jwc.root+r,s=t(e).find(`a[class=c259713]`).attr(`title`),c=i(t(e).find(`span[class=timestyle259713]`).text(),`YYYY/MM/DD`);return await n.tryGet(a,async()=>{let{articleData:e,description:t}=await f(r,a,`jwc`),n=``;return typeof e==`function`&&(n=e(`span[class=authorstyle259690]`).text()),{title:s,description:t,pubDate:o(c,8),link:a,author:`供稿单位：`+n}})}))}async function g(e,t){let r=t(`a[class=c127701]`).parent().parent().slice(0,u);return await Promise.all(r.toArray().map(async e=>{let r=t(e).find(`a[class=c127701]`).attr(`href`),a=l.zsjyc.root+r,s=t(e).find(`a[class=c127701]`).attr(`title`);return await n.tryGet(a,async()=>{let{articleData:n,description:c}=await f(r,a,`zsjyc`),l=``;return l=typeof n==`function`?i(n(`span[class=timestyle127702]`).text(),`YYYY-MM-DD HH:mm`):i(t(e).find(`a[class=c269582_date]`).text(),`YYYY-MM-DD`),{title:s,description:c,pubDate:o(l,8),link:a,author:`供稿单位：招生就业处`}})}))}const _={path:`/news/:type?`,categories:[`university`],example:`/hafu/news/ggtz`,parameters:{type:"分类，见下表（默认为 `ggtz`)"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`河南财政金融学院`,maintainers:[],handler:v,description:`| 校内公告通知 | 教务处公告通知 | 招生就业处公告通知 |
| ------------ | -------------- | ------------------ |
| ggtz         | jwc            | zsjyc              |`};async function v(e){let{link:t,title:n,resultList:r}=await d(e,e.req.param(`type`)??`ggtz`);return{title:n,link:t,description:`河南财政金融学院 - 公告通知`,item:r}}export{_ as route};