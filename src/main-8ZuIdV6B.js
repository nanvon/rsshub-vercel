import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./got-BlqYKpVp.js";import a from"node:path";import{load as o}from"cheerio";e();async function s(e){let t=`article.g-main-video-article`,n=o((await i(e)).data),r=[],a=[],s=[],c=[],l=`https://oreno3d.com`+n(`header > figure.video-figure > a `).find(`img`).attr(`src`),u=n(`header > h1.video-h1 `).text();n(t).find(`section:nth-child(4) > a > div.video-center`).each(function(e){a[e]=n(this).text(),a[e].replace(` `,``),a[e].trim()}),n(t).find(`section:nth-child(5) > a > div.video-center`).each(function(e){s[e]=n(this).text(),s[e].replace(` `,``),s[e].trim()}),n(t).find(`section:nth-child(6) > a > div.video-center`).each(function(e){c[e]=n(this).text(),c[e].replace(` `,``),c[e].trim()}),n(t).find(`section:nth-child(7) > ul > li > a div.tag-text`).each(function(e){r[e]=n(this).text(),r[e].replace(` `,``),r[e].trim()});let d=n(t).find(`section blockquote.video-information-comment`).text(),f=n(`header > figure.video-figure > a`).attr(`href`);return{raw_pic_link:l,video_name:u,authors:a.join(` `),origins:s.join(` `),characters:c.join(` `),tags:r.join(` `),desc:d,iwara_link:f,oreno3d_link:e}}var c=s;const l={favorites:`高評価`,hot:`急上昇`,latest:`新着`,popularity:`人気`};function u(e,t,n){let r=``;return t.req.param(`keyword`)?r=`${e}/search?sort=${n}&keyword=${t.req.param(`keyword`)}`:t.req.param(`characterid`)?r=`${e}/characters/${t.req.param(`characterid`)}?sort=${n}`:t.req.param(`authorid`)?r=`${e}/authors/${t.req.param(`authorid`)}?sort=${n}`:t.req.param(`tagid`)?r=`${e}/tags/${t.req.param(`tagid`)}?sort=${n}`:t.req.param(`originid`)&&(r=`${e}/origins/${t.req.param(`originid`)}?sort=${n}`),r}const d={path:[`/authors/:authorid/:sort/:pagelimit?`,`/characters/:characterid/:sort/:pagelimit?`,`/origins/:originid/:sort/:pagelimit?`,`/search/:keyword/:sort/:pagelimit?`,`/tags/:tagid/:sort/:pagelimit?`],categories:[`anime`],example:`/oreno3d/authors/3189/latest/1`,parameters:{authorid:`Author id, can be found in URL`,sort:`Sort method, see the table above`,pagelimit:`The maximum number of pages to be crawled, the default is 1`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},name:`Author Search`,maintainers:[`xueli_sherryli`],handler:f,description:`| favorites | hot | latest | popularity |
| --------- | --- | ------ | ---------- |
| favorites | hot | latest | popularity |`};async function f(e){function s(e){let t=o(e.data);return{title:t(`div.g-main-list`).find(`h1.main-h`).text(),list:t(`a.box`)}}async function d(e){let i=o(e.data),l=s(e).title,u=s(e).list;return{items:await Promise.all(u.toArray().map(async e=>{let o=await c(i(e).attr(`href`)),s=o.raw_pic_link,l=o.video_name,u=o.authors,d=o.origins,f=o.characters,p=o.tags,m=o.desc,h=o.iwara_link,g=o.oreno3d_link,_=r(a.join(t,`templates/description-cefeafec.art`),{raw_pic_link:s,video_name:l,authors:u,origins:d,characters:f,tags:p,desc:m,iwara_link:h,oreno3d_link:g}),v=`${l} - ${u}`;return await n.tryGet(g,()=>({title:v,author:u,link:g,category:p.split(` `),description:_}))})),title:l}}let f=e.req.param(`sort`),p=e.req.param(`pagelimit`)??1,m=u(`https://oreno3d.com`,e,f),h=await i(m),g=o(h.data),_=`div.container > main > div.g-main-list > ul.pagination > li:last-child > a`;if(g(_)){let e=new URLSearchParams(g(_).attr(`href`)).get(`page`);Number.parseInt(p)>=Number.parseInt(e)&&(p=e)}else p=1;let v=[];v.push(h);let y=[];for(let e=1;e<p;e++)y.push(`${m}&page=${e+1}`);await Promise.all(y.map(async e=>{let t=await i(e);v.push(t)}));let b=[];await Promise.all(v.map(async e=>{let t=await d(e);b.push(t)}));let x=[];for(let e of b)x=[...x,...e.items];let S={title:b[0].title,item:x};return{title:`${S.title} - ${l[f]}(Page 1-${p})`,link:m,item:S.item}}export{d as route};