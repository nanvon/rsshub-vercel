import{n as e,t}from"./esm-shims-D5mxTuu_.mjs";import"./config-CDM38Tpk.mjs";import"./logger-B0B1yUZ6.mjs";import"./ofetch-FkpIOIxH.mjs";import"./helpers-CMl_ndRq.mjs";import{t as n}from"./render-D2i47mnC.mjs";import{t as r}from"./parse-date-Cv8vEJfE.mjs";import"./got-CxBlPaz_.mjs";import{t as i}from"./invalid-parameter-DQLT-Ijk.mjs";import{t as a}from"./utils-DO1doJqD.mjs";import o from"node:path";e();const s={path:`/news/coronavirus/data/:province?/:city?`,name:`Unknown`,maintainers:[`CaoMeiYouRen`],handler:c};async function c(e){let s=e.req.param(`province`)||``,c=e.req.param(`city`)||``,l=`https://news.qq.com/zt2020/page/feiyan.htm#/`,u=[],{lastUpdateTime:d,areaTree:f}=(await a([`diseaseh5Shelf`]))?.data?.diseaseh5Shelf||{},p=f?.[0],m=p?.children,h=0,g=0,_=0,v=0,y={},b=``;if(!s||s===`中国`||s===`全国`?(y=p,b=`中国`):(y=m?.find(e=>e.name===s),b=s,c&&(y=y?.children?.find(e=>e.name===c),y&&(b=`${s}-${c}`))),!y)throw new i(`未找到 ${b} 的疫情数据，请检查输入的省市名称是否正确`);h=y.today?.confirm,g=y.total?.nowConfirm,_=y.total?.confirm,v=y.total?.dead;let x=r(y.total?.mtime||d),S=`${b} - 腾讯新闻 - 新型冠状病毒肺炎疫情实时追踪`,C={title:`${b} - 疫情数据`,description:n(o.join(t,`templates/data-1fa59e84.art`),{todayConfirm:h,totalNowConfirm:g,totalConfirm:_,totalDead:v}),pubDate:x,guid:`${l}${b}?pubDate=${x.toISOString()}`};return u.push(C),{title:S,link:l,item:u}}export{s as route};