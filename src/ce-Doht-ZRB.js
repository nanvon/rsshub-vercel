import"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CfXAR0UO.js";import"./helpers-Cqaav28H.js";import{t as e}from"./cache-CpEhLexq.js";import{t}from"./parse-date-CHEO0z5G.js";import{t as n}from"./got-dCh-Ojgc.js";import{t as r}from"./rss-parser-CbA1uKIl.js";import{r as i}from"./wechat-mp-BY2BKK6n.js";import{load as a}from"cheerio";const o=`Mozilla/5.0 (X11; Linux x86_64) RSS Reader`,s={path:`/ce/:id`,categories:[`new-media`],example:`/wechat/ce/595a5b14d7164e53908f1606`,parameters:{id:`公众号 id，在 [CareerEngine](https://search.careerengine.us/) 搜索公众号，通过 URL 中找到对应的公众号 id`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cimidata.com/a/:id`]}],name:`公众号（CareerEngine 来源）`,maintainers:[`HenryQW`],handler:c};async function c(s){let c=s.req.param(`id`),l=await r.parseString(await n.get(`https://posts.careerengine.us/author/${c}/rss`,{headers:{"User-Agent":o}}).then(e=>e.data)),u=await Promise.all(l.items.splice(0,10).map(r=>(r.link=r.link.replace(/^http:\/\//,`https://`),e.tryGet(r.link,async()=>{let e=a((await n.get(r.link,{headers:{"User-Agent":o}})).data),s=i(e(`.post`)),c=r.pubDate;return(!c||c===`Invalid Date`)&&(c=t(e(`.post-date`).text().replaceAll(/\s+|发表/g,``),`YYYY年MM月DD日`),c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),{title:r.title,description:s,pubDate:c,link:r.link}}))));return{title:`微信公众号 - ${l.title}`,link:`https://posts.careerengine.us/author/${c}/posts`,description:l.description,item:u}}export{s as route};