import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import"./ofetch-TsvCL7Kz.js";import"./helpers-LVq640iW.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-lNAQakSo.js";import{getSearchParams as a,rootUrl as o}from"./utils-CBi_V_1m.js";import s from"node:path";t();const c={watch:`看盘`,announcement:`公司`,explain:`解读`,red:`加红`,jpush:`推送`,remind:`提醒`,fund:`基金`,hk:`港股`},l={path:`/telegraph/:category?`,categories:[`finance`],example:`/cls/telegraph`,parameters:{category:`分类，见下表，默认为全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cls.cn/telegraph`,`cls.cn/`],target:`/telegraph`}],name:`电报`,maintainers:[`nczitzk`],handler:u,url:`cls.cn/telegraph`,description:`| 看盘  | 公司         | 解读    | 加红 | 推送  | 提醒   | 基金 | 港股 |
| ----- | ------------ | ------- | ---- | ----- | ------ | ---- | ---- |
| watch | announcement | explain | red  | jpush | remind | fund | hk   |`};async function u(t){let l=t.req.param(`category`)??``,u=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):50,d=`${o}/nodeapi/updateTelegraphList`;l&&(d=`${o}/v1/roll/get_roll_list`);let f=`${o}/telegraph`,p=await i({method:`get`,url:d,searchParams:a({category:l,hasFirstVipArticle:1})}),m=p.data.data.roll_data.slice(0,u).map(t=>({title:t.title||t.content,link:t.shareurl,description:n(s.join(e,`templates/telegraph-f8ba0f7b.art`),{item:t}),pubDate:r(t.ctime*1e3),category:t.subjects?.map(e=>e.subject_name)}));return{title:`财联社 - 电报${l===``?``:` - ${c[l]}`}`,link:f,item:m}}export{l as route};