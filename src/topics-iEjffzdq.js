import"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import"./cache-Dfid4xgQ.js";import"./parse-date-DHsdom8D.js";import{got_default as e}from"./got-D5TEN1xL.js";import{ViewType as t}from"./types-Bi82qguM.js";import{fetchArticle as n,removeDuplicateByKey as r}from"./utils-edEiT_fm.js";import{routePath as i}from"hono/route";import{load as a}from"cheerio";import o from"p-map";const s=`https://apnews.com`,c={path:[`/topics/:topic?`,`/nav/:nav{.*}?`],categories:[`traditional-media`],example:`/apnews/topics/apf-topnews`,view:t.Articles,parameters:{topic:{description:"Topic name, can be found in URL. For example: the topic name of AP Top News [https://apnews.com/apf-topnews](https://apnews.com/apf-topnews) is `apf-topnews`",default:`trending-news`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`apnews.com/hub/:topic`],target:`/topics/:topic`}],name:`Topics`,maintainers:[`zoenglinghou`,`mjysci`,`TonyRL`],handler:l};async function l(t){let{topic:c=`trending-news`,nav:l=``}=t.req.param(),u=i(t)===`/apnews/nav/:nav{.*}?`?`${s}/${l}`:`${s}/hub/${c}`,d=await e(u),f=a(d.data),p=f(`:is(.PagePromo-content, .PageListStandardE-leadPromo-info) bsp-custom-headline`).toArray().slice(0,t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):1/0).map(e=>({title:f(e).find(`span.PagePromoContentIcons-text`).text(),link:f(e).find(`a`).attr(`href`)})).filter(e=>typeof e.link==`string`),m=t.req.query(`fulltext`)===`true`?await o(p,e=>n(e),{concurrency:10}):p;return{title:f(`title`).text(),description:f(`meta[property='og:description']`).text(),link:u,item:r(m,`link`),language:f(`html`).attr(`lang`)}}export{c as route};