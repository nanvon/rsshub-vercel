import"./esm-shims-Dqvxr0BZ.js";import"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import{ofetch_default as e}from"./ofetch-B4O0sZDE.js";import{cache_default as t}from"./cache-CjzVN0X7.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";const i={path:`/blog`,categories:[`blog`],example:`/railway/blog`,url:`blog.railway.com`,name:`Blog`,maintainers:[`jihuayu`],handler:a};async function a(e){let t=Number.parseInt(e.req.query(`limit`)||`10`),n=await o(t);return{title:`Railway articles`,link:`https://blog.railway.com`,item:n}}const o=async i=>{let a=await e(`https://blog.railway.com/rss.xml`,{responseType:`text`}),o=r(a,{xml:!0});return Promise.all(o(`item`).toArray().slice(0,i).map(e=>{let r=o(e).find(`guid`).text();return t.tryGet(`railway:blogs:${r}`,async()=>{let t=o(e).find(`title`).text(),i=o(e).find(`pubDate`).text(),a=o(e).find(`link`).text(),{content:c}=await s(a);return{guid:r,title:t,link:a,pubDate:n(i),description:c}})}))},s=async t=>{let n=await e(t),i=r(n),a=i(`article > section `);return{content:a.html()??void 0}};export{s as fetchArticleDetails,o as fetchArticles,i as route};