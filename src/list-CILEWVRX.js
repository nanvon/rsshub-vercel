import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-D4MiciTC.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-07RFwdy7.js";import{load as r}from"cheerio";const i=`https://www.zju.edu.cn/`,a={path:`/list/:type`,categories:[`university`],example:`/zju/list/xs`,parameters:{type:"`xs`为学术，`xw`为新闻，`5461`是图片新闻，`578`是浙大报道，具体参数参考左侧的菜单"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`普通栏目 如学术 / 图片 / 新闻等`,maintainers:[`Jeason0228`],handler:o};async function o(a){let o=a.req.param(`type`)??`xs`,s=i+o+`/list.htm`,c=await n({method:`get`,url:s,headers:{Referer:i}}),l=r(c.data);function u(e){return e.search(`redirect`)===-1?e:s}let d=l(`#wp_news_w7 ul.news li`).toArray().map(e=>({title:l(e).find(`a`).attr(`title`),link:u(l(e).find(`a`).attr(`href`)),date:l(e).text().match(/\d{4}-\d{2}-\d{2}/)[0]})),f=await Promise.all(d.map(a=>{let o=a.title,c=a.date,l=new URL(a.link,i).href;return e.tryGet(l,async()=>{let e=await n({method:`get`,url:l,headers:{Referer:s}}),i=r(e.data)(`.right_content`).html();return{title:o,link:l,description:i,pubDate:t(c)}})}));return{title:`浙江大学`+l(`ul.submenu .selected`).text(),link:s,item:f}}export{a as route};