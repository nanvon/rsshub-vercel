import{n as e,t}from"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CfXAR0UO.js";import{t as r}from"./render-d6AVTUl2.js";import i from"node:path";import{load as a}from"cheerio";e();const o={path:`/workshopsearch/:appid?/:routeParams?`,categories:[`game`],example:`/steam/workshopsearch/730`,parameters:{appid:`Steam appid, can be found on the community hub page or store page URL, 730 by default.`,routeParams:`Route parameters, can be found on the search result page URL. Route parameters located after the appid.`},radar:[{title:`Workshop Search Results`,source:[`steamcommunity.com/app/:appid/workshop/`],target:`/workshopsearch/:appid`}],description:`Steam Community Workshop Search Results.
The parameter 'l=language' changes the language of search results(if possible).
For example, route \`/workshopsearch/730/l=schinese\` will display the simplified Chinese descriptions of the entry.

Language Parameter:

| English | 简体中文 | 繁體中文 | 日本語   | 한국어  | ภาษาไทย | български | čeština | dansk  | Deutsch | español | latam | ελληνικά | français | italiano | Bahasa Indonesia | magyar    | Nederlands | norsk     | polski | português  | brasileiro | română   | русский | suomi   | svenska | Türkçe  | Tiếng Việt | українська |
| ------- | -------- | -------- | -------- | ------- | ------- | --------- | ------- | ------ | ------- | ------- | ----- | -------- | -------- | -------- | ---------------- | --------- | ---------- | --------- | ------ | ---------- | ---------- | -------- | ------- | ------- | ------- | ------- | ---------- | ---------- |
| english | schinese | tchinese | japanese | koreana | thai    | bulgarian | czech   | danish | german  | spanish | latam | greek    | french   | italian  | indonesian       | hungarian | dutch      | norwegian | polish | portuguese | brazilian  | romanian | russian | finnish | swedish | turkish | vietnamese | ukrainian  |

`,name:`Community Workshop Search`,maintainers:[`NyaaaDoge`],handler:async e=>{let{appid:o=730,routeParams:s}=e.req.param(),c=a(await n(`https://steamcommunity.com/workshop/browse/?appid=${o}${s?`&${s}`:``}`)),l=c(`div.apphub_AppName`).first().text(),u=c(`div.customBrowseText`).first().text(),d=c(`div.apphub_AppIcon`).children(`img`).attr(`src`),f=c(`div.workshopBrowseItems .workshopItem`).toArray().map(e=>{e=c(e);let n=e.find(`a`).first().attr(`data-publishedfileid`),a=e.find(`.workshopItemTitle`).first().text(),o=e.find(`.workshop_author_link`).first().text(),s=e.find(`.workshopItemPreviewImage`).first().attr(`src`),l=e.find(`.fileRating`).first().attr(`src`),u=[];c(e).find(`.workshop_checkmark`).each((e,t)=>{let n=c(t),r=n.attr(`style`);(!r||!r.includes(`display: none;`))&&u.push(n.attr(`src`)||``)});let d=e.next(`script`).text().match(/SharedFileBindMouseHover\(\s*"sharedfile_\d+",\s*(?:true|false),\s*({.*?})\s*\);/),f=``;if(d){let e=d[1],t=JSON.parse(e);t.id===n&&(f=t.description)}return{title:a,link:`https://steamcommunity.com/sharedfiles/filedetails/?id=${n}`,description:r(i.join(t,`templates/workshop-search-description-3efef187.art`),{image:s,rating:l,checkmark:u,description:f}),author:o}});return{title:`${l} Steam Workshop Content`,link:`https://steamcommunity.com/workshop/browse/?appid=${o}${s?`&${s}`:``}`,item:f,icon:d,description:u}}};export{o as route};