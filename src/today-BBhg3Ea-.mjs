import"./esm-shims-DIdKin6S.mjs";import"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import"./ofetch-rVU2XYFs.mjs";import"./helpers-vRt84cId.mjs";import{t as e}from"./cache-KwJARS5Z.mjs";import{t}from"./parse-date-9Tu6hSFW.mjs";import{t as n}from"./got-BeQM9q-W.mjs";import{t as r}from"./timezone-CQaZZkB1.mjs";import{load as i}from"cheerio";const a={path:`/today/:need_content?`,categories:[`new-media`],example:`/163/today`,parameters:{need_content:`需要获取全文，填写 true/yes 表示需要，默认需要`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wp.m.163.com/163/html/newsapp/todayFocus/index.html`,`wp.m.163.com/`],target:`/today`}],name:`今日关注`,maintainers:[`nczitzk`],handler:o,url:`wp.m.163.com/163/html/newsapp/todayFocus/index.html`,description:"::: tip\n  参数 **需要获取全文** 设置为 `true` `yes` `t` `y` 等值后，RSS 会携带该新闻条目的对应全文。\n:::"};async function o(a){let o=/t|y/i.test(a.req.param(`need_content`)??`true`),s=(await n({method:`get`,url:`https://gw.m.163.com/nc/api/v1/feed/static/normal-list?start=0&tid=T1573700340788&size=${a.req.query(`limit`)??(o?30:200)}`})).data.data.items.map(e=>({title:e.title,author:e.source,pubDate:r(t(e.ptime),8),description:`<p>${e.digest}</p><img src="${e.imgsrc}">`,link:e.url||`https://c.m.163.com/news/a/${e.docid}.html`}));return o&&(s=await Promise.all(s.map(t=>e.tryGet(t.link,async()=>{let e=i((await n({method:`get`,url:t.link})).data);return e(`.bot_word`).remove(),e(`img`).each((e,t)=>{t.attribs.src=t.attribs[`data-src`]??t.attribs.src}),t.description=e(`.content, article`).html(),t})))),{title:`今日关注 - 网易新闻`,link:`https://wp.m.163.com/163/html/newsapp/todayFocus/index.html`,item:s}}export{a as route};