import{__dirname as e,init_esm_shims as t}from"./esm-shims-DtWyl6zt.js";import{art as n}from"./render-sowsPyZZ.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import{got_default as i}from"./got-Cw3q2eEq.js";import{InvalidParameterError as a}from"./invalid-parameter-BQKLs9qN.js";import o from"node:path";t();const s=e=>e(`4gamers:categories`,async()=>{let{data:e}=await i(`https://www.4gamers.com.tw/site/api/news/category`);return e.data.map(e=>({id:e.id,name:e.name}))}),c=e=>e.map(e=>({title:e.title,author:e.author.nickname,intro:e.intro,pubDate:r(e.createPublishedAt,`x`),link:e.canonicalUrl,category:[...new Set([e.category.name,...e.tags])],articleId:e.id})),l=async e=>{let{data:t}=await i(`https://www.4gamers.com.tw/site/api/news/find-section`,{searchParams:{sub:e.articleId}});return e.description=u(e.intro,t.data.contentSection.sections.map(t=>{switch(t[`@type`]){case`ContentAdsSection`:case`ScrollerAdsSection`:case`textScrollerAdsSection`:return``;case`RawHtmlSection`:return t.html;case`ImageGroupSection`:return d(t.items);default:throw new a(`Unhandled section type: ${t[`@type`]} on ${e.link}`)}}).join(``)),e},u=(t,r)=>n(o.join(e,`templates/description-f7ad79ff.art`),{intro:t,content:r}),d=t=>n(o.join(e,`templates/image-6e82a0bb.art`),{images:t});export{s as getCategories,l as parseItem,c as parseList};