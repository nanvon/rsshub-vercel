import{n as e,t}from"./esm-shims-CMsyBHYK.js";import{t as n}from"./config-DZMnNPig.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-BlqYKpVp.js";import o from"node:path";import{load as s}from"cheerio";e();const c=`https://api.followin.io`,l=`https://followin.io`,u=`${l}/favicon.ico`,d=e=>({a:`web`,b:``,c:e,d:0,e:``,f:``,g:``,h:`0.1.0`,i:`official`}),f=e=>e(`followin:buildId`,async()=>{let{data:e}=await a(l),t=s(e),{buildId:n}=JSON.parse(t(`script#__NEXT_DATA__`).text());return n},n.cache.routeExpire,!1),p=e=>e(`followin:gtoken`,async()=>{let{data:e}=await a.post(`${c}/user/gtoken`);return e.data.gtoken}),m=(e,t,n)=>e.map(e=>({title:e.translated_title||e.title,description:e.translated_content||e.content,link:`${l}/${t===`en`?``:`${t}/`}feed/${e.id}`,pubDate:i(e.publish_time,`x`),category:e.tags.map(e=>e.name),author:e.nickname,nextData:`${l}/_next/data/${n}/${t}/feed/${e.id}.json`})),h=(e,n)=>n(e.link,async()=>{let{data:n}=await a(e.nextData),{queries:s}=n.pageProps.dehydratedState,c=s.find(e=>e.queryKey[0]===`/feed/info`).state,l=s.find(e=>e.queryKey[0]===`/feed/thread`);return e.description=l?r(o.join(t,`templates/thread-1c70519d.art`),{list:l.state.data.list}):c.data.translated_full_content||c.data.full_content,e.updated=i(c.dataUpdatedAt,`x`),e.category=[...new Set([...e.category,...c.data.tags.map(e=>e.name)])],e});export{f as a,m as c,d as i,l as n,p as o,u as r,h as s,c as t};