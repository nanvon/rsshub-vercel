import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CISb_5Uo.js";import"./helpers-gUVC02jt.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BOnMlRH6.js";import{load as n}from"cheerio";const r={path:`/:uid`,categories:[`anime`],example:`/xmanhua/73xm`,parameters:{uid:"漫画 id,在浏览器中可见，例如鬼灭之刃对应的 id 为 `73xm`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`xmanhua.com/:uid`]}],name:`最新动态`,maintainers:[`Ye11`],handler:i};async function i(r){let i=r.req.param(`uid`),a=`https://xmanhua.com`,o=`https://xmanhua.com/${i}/`,s=(await t({method:`get`,url:o,headers:{Referer:a}})).data,c=n(s),l=c(`div #chapterlistload`).find(`.detail-list-form-item`),u=c(`body > div.detail-info-1 > div > div > p.detail-info-tip > span:nth-child(1)`).text().split(`：`)[1],d=c(`div.detail-list-form-title`).clone().children().remove().end().text(),f=!1,p=d.split(`,`)[1];if(p.includes(`月`)&&p.includes(`號`)){let e=Number.parseInt(p.split(`月`)[0]),t=Number.parseInt(p.split(`月`)[1].split(`號`)[0]),n=new Date().getFullYear();p=new Date(n,e-1,t+1)}else p=new Date(p),p.setDate(p.getDate()+1);(d.includes(`已完結`)||d.includes(`已完结`))&&(f=!0);let m=c(`div.detail-list-form-title span.s a`).attr(`href`),h=l.toArray().map(t=>{t=c(t);let n=t.text(),r=t.attr(`href`),i=r===m?e(p):``;return{title:n,link:a+r,auther:u,pubDate:i,guid:a+r}}),g=c(`body > div.detail-info-1 > div > div > p.detail-info-title`).text(),_=f?`已完结`:`连载中`;return{title:`x漫画  ${g}`,link:`https://xmanhua.com/${i}`,description:_,allowEmpty:!0,item:h}}export{r as route};