import"./esm-shims-L08rKynx.mjs";import"./config-Bs8nOQqi.mjs";import"./logger-BvLYiR5T.mjs";import{t as e}from"./ofetch-1TBKTiHL.mjs";import{t}from"./cache-BDs-9Wd7.mjs";import{t as n}from"./parse-date-bKmkZ9gg.mjs";import{t as r}from"./timezone-CE0MDOJ-.mjs";import{t as i}from"./types-BD1MU_-b.mjs";import{load as a}from"cheerio";const o=async i=>{let{category:o=`gzdt`}=i.req.param(),s=Number.parseInt(i.req.query(`limit`)??`30`,10),c=`http://www.gjs.moa.gov.cn`,l=new URL(o.endsWith(`/`)?o:`${o}/`,c).href,u=a(await e(l)),d=u(`html`).attr(`lang`)??`zh-CN`,f=[];f=u(`ul#div li`).slice(0,s).toArray().map(e=>{let t=u(e),r=t.find(`a`),i=r.attr(`title`)??t.find(`span.sj_gztzle`).text(),a=t.find(`span.sj_gztzri`).text(),o=r.attr(`href`),s=a;return{title:i,pubDate:n(a),link:o?new URL(o,l).href:void 0,updated:n(s),language:d}}),f=(await Promise.all(f.map(i=>i.link?t.tryGet(i.link,async()=>{let t=a(await e(i.link)),o=t(`meta[name="ArticleTitle"]`).attr(`content`)??``,s=t(`div.TRS_Editor`).html()??``,c=t(`meta[name="PubDate"]`).attr(`content`),l=t(`meta[name="Url"]`).attr(`content`),u=t(`meta[name="ColumnName"], meta[name="ContentSource"], meta[name="Keywords"]`).toArray(),f=[...new Set(u.map(e=>t(e).attr(`content`)).filter(Boolean))],p=t(`meta[name="Author"]`).attr(`content`),m=c,h={title:o,description:s,pubDate:c?r(n(c),8):i.pubDate,link:l??i.link,category:f,author:p,content:{html:s,text:s},updated:m?r(n(m),8):i.updated,language:d},g=t(`div.sj_fujianxia_right ul li a`).first(),_=g.attr(`href`);if(_){let e=`application/${_.split(`.`).pop()}`,t=g.text();h={...h,enclosure_url:new URL(_,i.link).href,enclosure_type:e,enclosure_title:t||o}}return{...i,...h}}):i))).filter(e=>!0);let p=`中华人民共和国农业农村部国际合作司`,m=u(`meta[name="ColumnName"]`).attr(`content`)??``;return{title:`${p} - ${m}`,description:m,link:l,item:f,allowEmpty:!0,image:new URL(`images/logo-china.png`,c).href,author:p,language:d}},s={path:`/moa/gjs/:category{.+}?`,name:`中华人民共和国农业农村部国际合作司`,url:`www.gjs.moa.gov.cn`,maintainers:[`nczitzk`],handler:o,example:`/gov/moa/gjs/gzdt`,parameters:{category:{description:"分类，默认为 `gzdt`，即工作动态，可在对应分类页 URL 中找到",options:[{label:`工作动态`,value:`gzdt`},{label:`通知公告`,value:`tzgg`},{label:`“一带一路”合作和农业走出去`,value:`ydylhzhhnyzcq`},{label:`农业国际贸易监测与展望`,value:`ncpmy`},{label:`多双边合作`,value:`dsbhz`}]}},description:"::: tip\n若订阅 [中华人民共和国农业农村部国际合作司工作动态](https://www.gjs.moa.gov.cn/gzdt/)，网址为 `https://www.gjs.moa.gov.cn/gzdt/`，请截取 `https://www.gjs.moa.gov.cn/` 到末尾 `/` 的部分 `gzdt` 作为 `category` 参数填入，此时目标路由为 [`/gov/moa/gjs/gzdt`](https://rsshub.app/gov/moa/gjs/gzdt)。\n:::\n\n| [工作动态](http://www.gjs.moa.gov.cn/gzdt/) | [通知公告](http://www.gjs.moa.gov.cn/tzgg/) | [“一带一路”合作和农业走出去](http://www.gjs.moa.gov.cn/ydylhzhhnyzcq/) | [农业国际贸易监测与展望](http://www.gjs.moa.gov.cn/ncpmy/) | [多双边合作](http://www.gjs.moa.gov.cn/dsbhz/) |\n| ------------------------------------------- | ------------------------------------------- | ---------------------------------------------------------------------- | ---------------------------------------------------------- | ---------------------------------------------- |\n| [gzdt](https://rsshub.app/gov/moa/gjs/gzdt) | [tzgg](https://rsshub.app/gov/moa/gjs/tzgg) | [ydylhzhhnyzcq](https://rsshub.app/gov/moa/gjs/ydylhzhhnyzcq)          | [ncpmy](https://rsshub.app/gov/moa/gjs/ncpmy)              | [dsbhz](https://rsshub.app/gov/moa/gjs/dsbhz)  |\n",categories:[`government`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.gjs.moa.gov.cn/:category{.+}?`],target:e=>{let t=e.category;return`/gov/moa/gjs${t?`/${t}`:``}`}},{title:`工作动态`,source:[`www.gjs.moa.gov.cn/gzdt/`],target:`/moa/gjs/gzdt`},{title:`通知公告`,source:[`www.gjs.moa.gov.cn/tzgg/`],target:`/moa/gjs/tzgg`},{title:`“一带一路”合作和农业走出去`,source:[`www.gjs.moa.gov.cn/ydylhzhhnyzcq/`],target:`/moa/gjs/ydylhzhhnyzcq`},{title:`农业国际贸易监测与展望`,source:[`www.gjs.moa.gov.cn/ncpmy/`],target:`/moa/gjs/ncpmy`},{title:`多双边合作`,source:[`www.gjs.moa.gov.cn/dsbhz/`],target:`/moa/gjs/dsbhz`}],view:i.Articles};export{o as handler,s as route};