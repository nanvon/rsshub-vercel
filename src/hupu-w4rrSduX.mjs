import"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import"./cache-Bv3_kFbE.mjs";import"./helpers-Tm7Pw8Vq.mjs";import{t as e}from"./parse-date-_GmTZfjS.mjs";import{t}from"./got-BglkE51W.mjs";import{t as n}from"./timezone-BAp4uBjD.mjs";import{t as r}from"./utils-ntNRveHk.mjs";function i(e){return`url`in e&&`isNews`in e}const a={nba:{title:`NBA`,data:`newsData`},cba:{title:`CBA`,data:`newsData`},soccer:{title:`足球`,data:`news`},"":{title:`首页`,data:`res`}},o={path:[`/dept/:category?`,`/:category?`],name:`手机虎扑网`,url:`m.hupu.com`,maintainers:[`nczitzk`,`hyoban`],example:`/hupu/nba`,parameters:{category:{description:`分类，可选值：nba、cba、soccer，默认为空（首页）`,default:``,options:Object.entries(a).map(([e,t])=>({label:t.title,value:e}))}},description:`::: tip
电竞分类参见 [游戏热帖](https://bbs.hupu.com/all-gg) 的对应路由 [\`/hupu/all/all-gg\`](https://rsshub.app/hupu/all/all-gg)。
:::`,categories:[`bbs`],radar:[{source:[`m.hupu.com/:category`,`m.hupu.com/`],target:`/:category`}],handler:async o=>{let s=o.req.param(`category`)||``;if(!(s in a))throw Error(`Invalid category. Valid options are: `+Object.keys(a).filter(Boolean).join(`, `));let c=s,l=`https://m.hupu.com/${c}`,u=(await t({method:`get`,url:l})).data.match(/<script id="__NEXT_DATA__" type="application\/json">(.*?)<\/script>/);if(!u||!u[1])throw Error(`Failed to find __NEXT_DATA__ script tag in page: ${l}`);let d=u[1],f;try{f=JSON.parse(d)}catch(e){throw Error(`Failed to parse full JSON data: ${e instanceof Error?e.message:String(e)}`)}let{pageProps:p}=f.props,m=a[c].data;if(!(m in p))throw Error(`Expected '${m}' property not found in pageProps for category: ${c||`home`}`);let h=(()=>{let e=p[m];return Array.isArray(e)?e:[]})().map(t=>i(t)?{title:t.title,link:t.url.replace(/bbs\.hupu.com/,`m.hupu.com/bbs`),guid:t.tid,category:t.label?[t.label]:void 0}:{title:t.title,pubDate:n(e(t.publishTime),8),link:t.link.replace(/bbs\.hupu.com/,`m.hupu.com/bbs`),guid:t.tid});return h=await Promise.all(h.filter(e=>e.link&&!/subject/.test(e.link)).map(e=>r(e))),{title:`虎扑 - ${a[c].title}`,link:l,item:h}}};export{o as route};