import{parseDate as e,parseRelativeDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-DF7DsGgk.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{load as i}from"cheerio";const a=e=>e.startsWith(`http`)?e:`https:${e}`,o=e=>e(`.item`).toArray().map(e=>{let t=e.attribs.pt,n=i(e)(`.news-detail`),r=n.find(`img`).toArray().map(e=>`<img src="${e.attribs.src.split(`?x-`)[0]}">`).join(`<br>`),a=n.find(`.content a`).first().attr(`href`),o=n.text().trim().replace(/展开全文$/,``);return{title:o,link:a.startsWith(`http`)?a:`https:${a}`,description:[o,r].filter(e=>!!e).join(`<br>`),pubDate:new Date(t*1e3).toUTCString()}}),s=async(n,o,s)=>await Promise.all(n(`.item`).toArray().map(async n=>{let l=i(n),u,d;l(`.news-detail`).children().length<=2?(u=l(`.news-detail .content .text`),d=l(`.news-detail .content .op`)):(u=l(`.news-detail .title`),d=l(`.news-detail .author`));let f=u.find(`a`).text(),p=u.find(`a`).attr(`href`),m=a(p),h=l(`.news-img img`)?.attr(`src`)?.split(`?x-`)[0],g=d.children().first().text(),_=d.find(`.time`).text(),v=/小时前/.test(_)?t(_):e(_,[`YYYY M D`,`M D`]),y=l(`.desc`).text(),b=h?`<br><img src="${h}">`:``;return y+=o?await c(m,s):b,{title:f,link:m,description:y,author:g,pubDate:r(v,8)}})),c=(e,t)=>t.tryGet(e,async()=>{let{data:t}=await n(e),r=i(t);return r(`img`).each((e,t)=>{t.attribs.src.includes(`?x-`)&&(t.attribs.src=t.attribs.src.split(`?x-`)[0])}),r(`section .article-style`).html()});var l={articleListParser:s,statusListParser:o};export{l as utils_default};