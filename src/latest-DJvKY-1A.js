import"./esm-shims-Dqvxr0BZ.js";import"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import"./ofetch-e4r9n7lx.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-BjesfGXD.js";import{got_default as t}from"./got-DF7DsGgk.js";import{load as n}from"cheerio";const r={path:`/chinatax/latest`,categories:[`government`],example:`/gov/chinatax/latest`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.chinatax.gov.cn/*`]}],name:`最新文件`,maintainers:[`nczitzk`,`fuzy112`],handler:i,url:`www.chinatax.gov.cn/*`};async function i(){let r=`http://www.chinatax.gov.cn/chinatax/n810341/n810755/index.html`,i=await t({method:`get`,url:r}),a=n(i.data),o=a(`ul.list.whlist li`).slice(0,10).toArray().map(e=>{e=a(e);let t=e.find(`a`);return{title:t.text(),link:new URL(t.attr(`href`),`http://www.chinatax.gov.cn`).toString()}}),s=await Promise.all(o.map(r=>e.tryGet(r.link,async()=>{try{let e=await t({method:`get`,url:r.link}),i=n(e.data);return r.pubDate=i(`meta[name="PubDate"]`).attr(`content`),r.description=i(`#fontzoom`).html(),r}catch(e){if(e.name===`HTTPError`||e.name===`FetchError`)return r.description=e.message,r;throw e}})));return{title:`国家税务总局 - 最新文件`,link:r,item:s}}export{r as route};