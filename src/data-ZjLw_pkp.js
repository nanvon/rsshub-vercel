import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import"./ofetch-e4r9n7lx.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import"./got-DF7DsGgk.js";import{invalid_parameter_default as i}from"./invalid-parameter-B0jPSaWz.js";import{getData as a}from"./utils-DJVv2yOk.js";import o from"node:path";t();const s={path:`/news/coronavirus/data/:province?/:city?`,name:`Unknown`,maintainers:[`CaoMeiYouRen`],handler:c};async function c(t){let s=t.req.param(`province`)||``,c=t.req.param(`city`)||``,l=`https://news.qq.com/zt2020/page/feiyan.htm#/`,u=[],{lastUpdateTime:d,areaTree:f}=(await a([`diseaseh5Shelf`]))?.data?.diseaseh5Shelf||{},p=f?.[0],m=p?.children,h=0,g=0,_=0,v=0,y={},b=``;if(!s||s===`中国`||s===`全国`?(y=p,b=`中国`):(y=m?.find(e=>e.name===s),b=s,c&&(y=y?.children?.find(e=>e.name===c),y&&(b=`${s}-${c}`))),!y)throw new i(`未找到 ${b} 的疫情数据，请检查输入的省市名称是否正确`);h=y.today?.confirm,g=y.total?.nowConfirm,_=y.total?.confirm,v=y.total?.dead;let x=r(y.total?.mtime||d),S=`${b} - 腾讯新闻 - 新型冠状病毒肺炎疫情实时追踪`,C={title:`${b} - 疫情数据`,description:n(o.join(e,`templates/data-1fa59e84.art`),{todayConfirm:h,totalNowConfirm:g,totalConfirm:_,totalDead:v}),pubDate:x,guid:`${l}${b}?pubDate=${x.toISOString()}`};return u.push(C),{title:S,link:l,item:u}}export{s as route};