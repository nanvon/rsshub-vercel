import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-BASlBuka.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import o from"node:path";import{load as s}from"cheerio";e();const c=`https://news.google.com`,l={path:`/news/:category/:locale`,categories:[`new-media`],example:`/google/news/Top stories/hl=en-US&gl=US&ceid=US:en`,parameters:{category:`Category Title`,locale:"locales, could be found behind `?`, including `hl`, `gl`, and `ceid` as parameters"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`News`,maintainers:[`zoenglinghou`,`pseudoyu`],handler:u};async function u(e){let l=e.req.param(`category`),u=e.req.param(`locale`),d=(await r.tryGet(`google:news:${u}`,async()=>{let e=s(await n(`${c}/?${u}`));return[...e(`a.brSCsc`).toArray().slice(3).map(t=>(t=e(t),{category:t.text(),url:new URL(t.attr(`href`),c).href})),...e(`a.aqvwYd`).toArray().map(t=>(t=e(t),{category:t.text(),url:new URL(t.attr(`href`),c).href}))]})).find(e=>e.category===l).url,f=s(await n(d)),p=[...f(`.UwIKyb`),...f(`.IBr9hb`),...f(`.IFHyqb`)].map(e=>{e=f(e);let n=e.find(`.gPFEn`).text(),r=e.find(`.bInasb span`).text(),s=r?r.replace(/^By\s+/i,``).replaceAll(/\s+\([^)]*\)/g,``).split(/,|\s+&\s+|\s+and\s+/).map(e=>e.trim()).filter(e=>e?![`et al`,`et al.`].some(t=>e.toLowerCase().endsWith(t)):!1).map(e=>({name:e})):[];return{title:n,description:i(o.join(t,`templates/news-c158a6b5.art`),{img:e.find(`img.Quavad`).attr(`src`),brief:n}),pubDate:a(e.find(`time`).attr(`datetime`)),author:s,link:new URL(e.find(`a.WwrzSb`).first().attr(`href`),c).href}});return{title:f(`title`).text(),link:d,item:p}}export{l as route};