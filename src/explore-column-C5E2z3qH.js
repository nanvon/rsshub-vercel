import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{got_default as e}from"./got-CmdBCkM8.js";import*as t from"node:url";import{load as n}from"cheerio";const r={path:`/explore/column/:id`,name:`Unknown`,maintainers:[],handler:i};async function i(r){let i=r.req.param(`id`),a=t.resolve(`https://www.douban.com/explore/column/`,i),o=await e.get(a),s=n(o.data),c=s(`div.h1`).text(),l=s(`div.item`).slice(0,10).toArray().map(e=>({title:s(e).find(`div.title a`).text(),link:s(e).find(`div.title a`).attr(`href`),author:s(e).find(`div.usr-pic a`).text()}));for(let e=l.length-1;e>=0;e--)l[e].author===`[已注销]`&&l.splice(e,1);let u=await Promise.all(l.map(async t=>{let r=t.title,i=t.author,a=t.link,o=await e.get(a),s=n(o.data)(`#link-report`).html();return{title:r,link:a,description:s,author:i}}));return{title:`${c}-豆瓣发现`,link:a,item:u}}export{r as route};