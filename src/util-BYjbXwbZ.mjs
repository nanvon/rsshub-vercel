import{n as e,t}from"./esm-shims-D5mxTuu_.mjs";import{t as n}from"./render-D2i47mnC.mjs";import{t as r}from"./parse-date-Cv8vEJfE.mjs";import{t as i}from"./got-CxBlPaz_.mjs";import a from"node:path";import o from"dayjs";e();const s=`readhub.cn`,c=`https://${s}`,l=`https://api.${s}`,u=new URL(`topic/list`,l).href,d=(e,t)=>o(e).format(t),f=e=>new URL(`topic/${e}`,c).href;n.defaults.imports={...n.defaults.imports,formatDate:d,toTopicUrl:f};const p=async(e,o)=>await Promise.all(e.map(e=>o(e.link,async()=>{try{if(!e.link.startsWith(c))throw Error(`"${e.link}" is an external URL`);let{data:o}=await i(e.link),s=JSON.parse(o.match(/{\\"topic\\":(.*?)}]\\n"]\)<\/script>/)[1].replaceAll(String.raw`\"`,`"`));e.title=s.title,e.link=s.url??new URL(`topic/${s.uid}`,c).href,e.description=n(a.join(t,`templates/description-71daa88b.art`),{description:s.summary,news:s.newsAggList,timeline:s.timeline}),e.author=s.siteNameDisplay,e.category=[...s.entityList.map(e=>e.name)??[],...s.tagList.map(e=>e.name)??[]],e.guid=`readhub-${s.uid}`,e.pubDate=r(s.publishDate.replaceAll(/\s/g,``))}catch{e.guid=`readhub-${e.guid}`}return e})));export{c as i,u as n,p as r,l as t};