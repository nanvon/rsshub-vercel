import"./esm-shims-BKVRry6h.mjs";import"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as e}from"./cache-Bv3_kFbE.mjs";import"./helpers-Tm7Pw8Vq.mjs";import"./parse-date-_GmTZfjS.mjs";import{t}from"./got-BglkE51W.mjs";import{t as n}from"./types-CaC5w-Pp.mjs";import{n as r,t as i}from"./utils-CKNpnQ84.mjs";import{load as a}from"cheerio";import o from"dayjs";const s=/(https?:\/\/[^\s"'<>]+)/g,c={path:`/topic/:id/:showUid?`,categories:[`social-media`],view:n.SocialMedia,example:`/jike/topic/556688fae4b00c57d9dd46ee`,parameters:{id:`圈子 id, 可在即刻 web 端圈子页或 APP 分享出来的圈子页 URL 中找到`,showUid:{description:`是否在内容中显示用户信息，设置为 1 则开启`,options:[{value:`1`,label:`显示`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`web.okjike.com/topic/:id`],target:`/topic/:id`}],name:`圈子`,maintainers:[`DIYgod`,`prnake`],handler:l};async function l(n){let c=n.req.param(`id`),l=await i(n,`https://m.okjike.com/topics/${c}`);if(l){let i=l.result;return i.item=r(l,n),(c===`553870e8e4b0cafb0a1bef68`||c===`55963702e4b0d84d2c30ce6f`)&&(i.item=await Promise.all(i.item.map(async n=>{let r={...n},i=/https:\/\/www\.okjike\.com\/medium\/[\dA-Za-z]*/.exec(r.description);if(i){let n=i[0];r.description=await e.tryGet(n,async()=>{let{data:e}=await t(n),r=a(e),i=r(`ul.main > li.item`),o=i.find(`a`).map((e,t)=>r(t).attr(`href`)),s=i.find(`span.text`).map((e,t)=>r(t).text()),c=``;for(let[e,t]of o.entries())c+=`${e+1}、<a href="${t}">${s[e]}</a><br>`;return c=c.replace(/<br>$/,``),c})}return r.description=r.description.replaceAll(s,e=>`<a href="${e}">${e}</a>`),r.title=`${l.topic.content} ${o(n.pubDate).format(`MM月DD日`)}`,r}))),i}}export{c as route};