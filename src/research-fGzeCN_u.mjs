import{t as e}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t}from"./parse-date-_GmTZfjS.mjs";import{load as n}from"cheerio";const r={path:`/research`,categories:[`new-media`],example:`/netflix/research`,radar:[{source:[`research.netflix.com/archive`,`research.netflix.com`]}],name:`Research`,maintainers:[`TonyRL`],handler:a,url:`research.netflix.com/`},i=(e,t)=>{if(typeof e!=`object`||!e)return e;if(Array.isArray(e))return e.map(e=>i(e,t));if(e.type===`id`){let n=t[e.id];return n===void 0?null:i(n,t)}let n=Array.isArray(e)?[]:{};for(let[r,a]of Object.entries(e))n[r]=i(a,t);return n};async function a(){let r=`https://research.netflix.com/archive`,a=n(await e(r)),o=JSON.parse(a(`#__NEXT_DATA__`).text()).props.pageProps.serverState.apollo.data,s=Object.values(o.ROOT_QUERY).map(e=>i(e,o)).flatMap(e=>e.items),c=new Set,l=s.filter(e=>{let t=e.title.trim();return c.has(t)?!1:(c.add(t),!0)}).map(e=>({title:e.title,description:e.description,link:e.link,pubDate:e.date??e.startDate?t(e.date??e.startDate):void 0,category:e.tags?.json,image:e.image?.url}));return{title:a(`head title`).text(),link:r,image:`${r}/favicon.ico`,item:l}}export{r as route};