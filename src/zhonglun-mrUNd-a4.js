import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-BlqYKpVp.js";import o from"node:path";import{load as s}from"cheerio";e();const c=async e=>{let{language:c=`zh`}=e.req.param(),l=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`),10):30,u=`https://${c===`zh`?`www`:c.replaceAll(/[^\dA-Za-z-]/g,``)}.zhonglun.com`,d=new URL(`research/articles`,u).href,{data:f}=await a(d),p=s(f),m=p(`div#dataList > dl > dd, div#dataList > ul > li`).slice(0,l).toArray().map(e=>{e=p(e);let n=r(o.join(t,`templates/description-ca64252b.art`),{intro:e.find(`p`).text()});return{title:e.find(`h3 > a`).text(),description:n,pubDate:i(e.find(`span`).text()),link:e.find(`h3 > a`).prop(`href`),language:c}});m=await Promise.all(m.map(e=>n.tryGet(e.link,async()=>{let{data:n}=await a(e.link),l=s(n),u=l(`div.news_dtitle h2`).text(),d=e.description+r(o.join(t,`templates/description-ca64252b.art`),{description:l(`div.edit_con_original`).html()}),f=l(`img.raw-image`).first().prop(`src`);return e.title=u,e.description=d,e.pubDate=i(l(`span.posttime`).text()),e.author=l(`span.author`).text().split(/：/).pop(),e.content={html:d,text:l(`div.edit_con_original`).text()},e.image=f,e.banner=f,e.language=c,e})));let h=new URL(p(`header.header h1 a img`).prop(`src`),u).href;return{title:`${p(`title`).text()} - ${p(`div.siteban_text`).text()}`,description:p(`meta[name="description"]`).prop(`content`),link:d,item:m,allowEmpty:!0,image:h,author:p(`meta[name="author"]`).prop(`content`),language:c}},l={path:`/research/article/:language{[a-zA-Z0-9-]+}?`,name:`中伦研究专业文章`,url:`zhonglun.com`,maintainers:[`nczitzk`],handler:c,example:`/zhonglun/research/article/zh`,parameters:{category:`语言，默认为 zh，即简体中文，可在对应分类页 URL 中找到`},description:`
| ENG | 简体中文 | 日本語 | 한국어 |
| --- | -------- | ------ | ------ |
| en  | zh       | ja     | kr     |
    `,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{title:`专业文章`,source:[`zhonglun.com/research/articles`],target:`/research/article/zh`},{title:` Articles`,source:[`en.zhonglun.com/research/articles`],target:`/research/article/en`},{title:`論評`,source:[`ja.zhonglun.com/research/articles`],target:`/research/article/ja`},{title:`전문기사`,source:[`kr.zhonglun.com/research/articles`],target:`/research/article/kr`}]};export{c as handler,l as route};