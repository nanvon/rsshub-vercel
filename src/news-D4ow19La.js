import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-rK3Yp7nj.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-Bnno2HfO.js";import{load as r}from"cheerio";const i={path:`/:path{.+}?`,radar:[{source:[`rfi.fr/*path`],target:`/:path`}],name:`Generic News`,maintainers:[`nczitzk`],handler:a,url:`rfi.fr`,example:`/rfi`,description:"::: tip\n-   To subscribe to [English News](https://www.rfi.fr/en/), which URL is `https://www.rfi.fr/en`, you can get the route as [`/rfi/en`](https://rsshub.app/rfi/en).\n-   To subscribe to [English Europe News](https://www.rfi.fr/en/europe/), which URL is `https://www.rfi.fr/en/europe`, you can get the route as [`/rfi/en/europe`](https://rsshub.app/rfi/en/europe).\n-   To subscribe to topic [Paris Olympics 2024](https://www.rfi.fr/en/tag/paris-olympics-2024/), which URL is `https://www.rfi.fr/en/tag/paris-olympics-2024`, you can get the route as [`/rfi/en/tag/paris-olympics-2024`](https://rsshub.app/rfi/en/tag/paris-olympics-2024).\n:::\n\n::: warning\nThis route does not support podcasts, please use the Offical RSS feed instead.\n:::\n"};async function a(i){let a=i.req.param(`path`)??`en`,o=`https://www.rfi.fr/${a.endsWith(`/`)?a:`${a}/`}`,s=r((await n(o)).data);s(`aside[data-org-type="aside-content--highlighted"], aside[data-org-type="aside-content--sponsors"]`).remove();let c=s(`.article__title a`).toArray().map(e=>(e=s(e),{title:e.text(),link:new URL(e.attr(`href`),o).href}));return c=await Promise.all(c.map(i=>e.tryGet(i.link,async()=>{let e=r((await n(i.link)).data);e(`.m-interstitial, .m-em-quote svg, .o-self-promo`).remove();let a=JSON.parse(e(`script[type="application/ld+json"]`).text()||`[]`).find(e=>e[`@type`]===`NewsArticle`);return i.description=e(`.t-content__chapo`).prop(`outerHTML`)+e(`.t-content__main-media`).prop(`outerHTML`)+e(`.t-content__body`).html(),i.pubDate=t(a?.datePublished),i.updated=t(a?.dateModified),i.author=a?.author.map(e=>e.name).join(`, `),i.category=a?.keywords,a?.audio&&(i.itunes_item_image=a.audio.thumbnailUrl,i.itunes_duration=a.audio.duration.match(/P0DT(\d+)H(\d+)M(\d+)S/).slice(1).map(e=>Number.parseInt(e)).reduce((e,t)=>e*60+t),i.enclosure_url=a.audio.contentUrl,i.enclosure_type=`audio/mpeg`),i}))),{title:s(`title`).text(),description:s(`meta[name="description"]`).attr(`content`),link:o,image:s(`meta[property="og:image"]`).attr(`content`),icon:new URL(s(`link[rel="apple-touch-icon"]`).attr(`href`),o).href,logo:new URL(s(`link[rel="apple-touch-icon"]`).attr(`href`),o).href,item:c,language:s(`html`).attr(`lang`)}}export{i as route};