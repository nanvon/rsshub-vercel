import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-CHIwZNTj.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ViewType as n}from"./types-Bi82qguM.js";import r from"sanitize-html";import i from"rss-parser";const a=new i,o={path:`/activity/:user`,name:`User Activities`,maintainers:[`hyoban`],example:`/github/activity/DIYgod`,categories:[`programming`],view:n.Notifications,parameters:{user:`GitHub username`},description:`Get the activities of a user on GitHub, based on the GitHub official RSS feed`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`github.com/:user`],target:`/activity/:user`}],handler:async n=>{let{user:i}=n.req.param(),o=await(await e(`https://github.com/${i}.atom`)).text(),s=o.match(/<media:thumbnail height="30" width="30" url="(.+?)"/)?.[1],c=await a.parseString(o);return{title:`${i}'s GitHub activities`,link:c.link,image:s,item:c.items.map(e=>({title:e.title??``,link:e.link,description:r(e.content?.replaceAll(/href="\/(.+?)"/g,`href="https://github.com/$1"`)??``,{allowedTags:[...r.defaults.allowedTags,`img`]}),pubDate:e.pubDate?t(e.pubDate):void 0,author:e.author,guid:e.id,image:s})),allowEmpty:!0}}};export{o as route};