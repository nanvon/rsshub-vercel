import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as e}from"./cache-GwMhal7i.js";import{ofetch_default as t}from"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i={path:`/:section?`,categories:[`finance`],example:`/okx/new-listings`,parameters:{section:{description:`公告版块`,default:`latest-announcements`,options:[{value:`latest-announcements`,label:`最新公告`},{value:`new-listings`,label:`新币种上线`},{value:`delistings`,label:`币对下线`},{value:`trading-updates`,label:`交易规则更新`},{value:`deposit-withdrawal-suspension-resumption`,label:`充提暂停/恢复公告`},{value:`p2p-trading`,label:`C2C 公告`},{value:`web3`,label:`Web3`},{value:`earn`,label:`赚币`},{value:`jumpstart`,label:`Jumpstart`},{value:`api`,label:`API公告`},{value:`okb-buy-back-burn`,label:`OKB销毁`},{value:`others`,label:`其他`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.okx.com/zh-hans/help/section/:section`],target:`/:section`}],name:`公告`,maintainers:[`lxl66566`],handler:a};async function a(i){let a=`https://www.okx.com`,{section:o=`latest-announcements`}=i.req.param();o=o.replace(/^announcements-/,``);let s=await t(`${a}/zh-hans/help/section/announcements-${o}`),c=r(s),l=JSON.parse(c(`script[data-id="__app_data_for_ssr__"]`).text()),u=l?.appContext?.initialProps?.sectionData?.articleList?.items?.map(e=>({title:e.title,link:`${a}/zh-hans/help/${e.slug}`,pubDate:new Date(e.publishTime)}))||[],d=await Promise.all(u.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link).then(e=>{let t=r(e.data);return t(`div[class^="index_richTextContent"]`).html()});return{...t,description:e||`内容获取失败`}})));return{title:l?.appContext?.serverSideProps?.sectionOutline?.title||`Unknown`,link:`${a}/zh-hans/help/section/announcements-${o}`,item:d,allowEmpty:!0}}export{i as route};