import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import"./helpers-Tm7Pw8Vq.mjs";import{t as n}from"./render-CSqLtqb8.mjs";import{t as r}from"./got-BglkE51W.mjs";import i from"node:path";import{load as a}from"cheerio";e();const o={path:`/call-for-paper/:subject`,categories:[`journal`],example:`/sciencedirect/call-for-paper/education`,parameters:{subject:`学科分类，例如“education”`},radar:[{source:[`sciencedirect.com`]}],name:`Call for Papers`,maintainers:[`etShaw-zh`],handler:s,url:`sciencedirect.com/browse/calls-for-papers`,description:"`sciencedirect.com/browse/calls-for-papers?subject=education` -> `/sciencedirect/call-for-paper/education`"};async function s(e){let{subject:o=``}=e.req.param(),s=`https://www.sciencedirect.com/browse/calls-for-papers?subject=${o}`,c=a((await r(s,{headers:{accept:`text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7`,"user-agent":`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36`}})).body)(`script[data-iso-key="_0"]`).text();if(!c)throw Error(`Cannot find the script with data-iso-key="_0"`);let l;try{l=JSON.parse(JSON.parse(c))}catch(e){throw Error(`Failed to parse embedded script JSON: ${e.message}`)}let u=l?.callsForPapers?.list||[];if(!u.length)throw Error(`No Calls for Papers found`);let d=u.map(e=>{let r=`https://www.sciencedirect.com/special-issue/${e.contentId}/${e.url}`,a=n(i.join(t,`templates/description-7826a6be.art`),{summary:e.summary,submissionDeadline:e.submissionDeadline,displayName:e.journal.displayName,impactFactor:e.journal.impactFactor,citeScore:e.journal.citeScore});return{title:e.title,author:`${e.journal.displayName} (IF: ${e.journal.impactFactor})`,link:r,description:a,pubDate:e.submissionDeadline||``}});return{title:`ScienceDirect Calls for Papers - ${o}`,link:s,description:`Calls for Papers on ScienceDirect for subject: ${o}`,item:d}}export{o as route};