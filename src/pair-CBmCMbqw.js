import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-CgQXMNWI.js";import o from"node:path";import s from"dayjs";import c from"dayjs/plugin/customParseFormat.js";e(),s.extend(c);const l=e=>r(o.join(t,`templates/description-db72f51b.art`),e),u={path:`/pair/:source/:target`,categories:[`other`],example:`/wise/pair/GBP/USD`,parameters:{source:`Base currency abbreviation`,target:`Quote currency abbreviation`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`FX Pair Yesterday`,maintainers:[`HenryQW`],handler:d,description:`Refer to [the list of supported currencies](https://wise.com/tools/exchange-rate-alerts/).`};async function d(e){let t=s().subtract(1,`day`),r=t.subtract(1,`day`).format(`YYYY-MM-DD`);t=t.format(`YYYY-MM-DD`);let o=e.req.param(`source`).toUpperCase(),c=e.req.param(`target`).toUpperCase(),u=`https://wise.com/tools/exchange-rate-alerts/`,d=`wise:rates:${e.req.param(`source`)}-${e.req.param(`target`)}-${t}`,f=await n.tryGet(d,async()=>{let{data:e}=await a(`https://wise.com/rates/history`,{searchParams:{source:o,target:c,length:1,unit:`year`,resolution:`daily`},headers:{referer:u}}),n=e.at(-1),s=e.at(-2),f=n.value,p=s.value,m=f>p,h=(f-p)/f,g=(Math.abs(h)*100).toFixed(4);return{title:`${o}/${c} ${m?`ðŸ“ˆ`:`ðŸ“‰`} @${f} ${h>0?``:`-`}${g}%`,description:l({source:o,target:c,yesterday:t,yRate:f,dayBefore:r,byRate:p}),pubDate:i(n.time,`x`),guid:d,link:u}});return{title:`${o} to ${c} by Wise`,link:u,description:`Exchange Rate from Wise`,item:[f]}}export{u as route};