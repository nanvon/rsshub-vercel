import{n as e,t}from"./esm-shims-CaZMYoY8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-VsB2Peor.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-BVCqvF6m.js";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/:bookName/book-series/:bookId`,radar:[{source:[`routledge.com/:bookName/book-series/:bookId`]}],name:`Unknown`,maintainers:[`TonyRL`],handler:l};async function l(e){let{bookName:c,bookId:l}=e.req.param(),u=`https://www.routledge.com/${c}/book-series/${l}`,{data:d}=await a(u,{headers:{accept:`text/html, */*; q=0.01`},searchParams:{publishedFilter:`alltitles`,pd:`published,forthcoming`,pg:1,pp:12,so:`pub`,view:`list`}}),f=s(d),p=f(`.row.book`).toArray().map(e=>{e=f(e);let t=e.find(`h3 a`),n=e.find(`p.description`),r=e.find(`p.description`).prev().text().split(`
`);return{title:t.text(),link:t.attr(`href`),description:n.text(),pubDate:i(r.pop().trim(),`MMMM DD, YYYY`),author:r.map(e=>e.trim()).filter(Boolean).join(`, `)}}),m=await Promise.all(p.map(e=>n.tryGet(e.link,async()=>{let{data:n}=await a(e.link),i=s(n),{data:c}=await a(`https://productimages.routledge.com`,{searchParams:{isbn:i(`meta[property="books:isbn"]`).attr(`content`),size:`amazon`,ext:`jpg`}}),l=i(`.sticky-div`);return l.find(`button.accordion-button`).contents().unwrap(),l.find(`.fa-shopping-cart`).parent().parent().remove(),e.description=r(o.join(t,`templates/description-c2244266.art`),{image:c,description:l.html()}),e})));return{title:f(`head title`).text(),description:f(`head meta[name="description"]`).attr(`content`),link:u,item:m}}export{c as route};