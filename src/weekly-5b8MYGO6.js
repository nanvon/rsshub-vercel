import{__dirname as e,init_esm_shims as t}from"./esm-shims-2LyWUseo.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-BLnIkXRv.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-DPq_2TLS.js";import a from"node:path";t();const o={path:`/weekly/:category?`,categories:[`other`],example:`/iresearch/weekly`,parameters:{category:`分类，见下表，默认为全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`周度市场观察`,maintainers:[`nczitzk`],handler:s,description:`| 家电行业 | 服装行业 | 美妆行业 | 食品饮料行业 |
| -------- | -------- | -------- | ------------ |`};async function s(t){let o=t.req.param(`category`)??``,s=`https://www.iresearch.com.cn`,c=`${s}/report?type=3`,l=`${s}/api/json/report/ireport.json`,u=await i({method:`get`,url:l}),d=JSON.parse(u.data.slice(1)).filter(e=>o?e.classname===o:!0).slice(0,t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):200).map(t=>({title:t.reportname,pubDate:r(t.addtime),link:`${s}/report/detail?id=${t.id}`,category:[t.classname,...t.keywords.split(`,`)],description:n(a.join(e,`templates/weekly-3f327868.art`),{id:t.id,cover:t.reportpic,content:t.shortcoutent,pages:t.PagesCount})}));return{title:`艾瑞咨询 - 周度市场观察`,link:c,item:d}}export{o as route};