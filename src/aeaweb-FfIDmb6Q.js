import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-CgQXMNWI.js";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/:id`,categories:[`journal`],example:`/aeaweb/aer`,parameters:{id:`Journal id, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!0},radar:[{source:[`aeaweb.org/journals/:id`,`aeaweb.org/`]}],name:`Journal`,maintainers:[`nczitzk`],handler:l,description:"The URL of the journal [American Economic Review](https://www.aeaweb.org/journals/aer) is `https://www.aeaweb.org/journals/aer`, where `aer` is the id of the journal, so the route for this journal is `/aeaweb/aer`.\n\n::: tip\n  More jounals can be found in [AEA Journals](https://www.aeaweb.org/journals).\n:::"};async function l(e){let c=e.req.param(`id`),l=`https://www.aeaweb.org`,u=`${l}/journals/${c}`,d=await a({method:`get`,url:u}),f=s(d.data);f(`.read-more`).remove(),c=f(`input[name="journal"]`).attr(`value`);let p=f(`.page-title`).text(),m=f(`.intro-copy`).text();d=await a({method:`get`,url:`${l}/journals/search-results?journal=${c}&ArticleSearch[current]=1`}),f=s(d.data);let h=f(`h4.title a`).toArray().map(e=>(e=f(e),{link:`${l}${e.attr(`href`).split(`&`)[0]}`}));return h=await Promise.all(h.map(e=>n.tryGet(e.link,async()=>{let n=s((await a({method:`get`,url:e.link})).data);return e.doi=n(`meta[name="citation_doi"]`).attr(`content`),e.guid=e.doi,e.title=n(`meta[name="citation_title"]`).attr(`content`),e.author=n(`.author`).toArray().map(e=>n(e).text().trim()).join(`, `),e.pubDate=i(n(`meta[name="citation_publication_date"]`).attr(`content`),`YYYY/MM`),e.description=r(o.join(t,`templates/description-384bc71e.art`),{description:n(`meta[name="twitter:description"]`).attr(`content`).replace(/\(\w+ \d+\)( - )?/,``)}),e}))),{title:p,description:m,link:u,item:h,language:f(`html`).attr(`lang`)}}export{c as route};