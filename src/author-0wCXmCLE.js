import{__dirname as e,init_esm_shims as t}from"./esm-shims-wKwH419_.js";import"./config-CCdhzIDL.js";import"./logger-tpjCqWRm.js";import"./dist-CTnfpkZH.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import{parseDate as r,parseRelativeDate as i}from"./parse-date-Bgabdhlb.js";import"./ofetch-CeSje37P.js";import{got_default as a}from"./got-CgIPcr_1.js";import{timezone as o}from"./timezone-BrNu6iXe.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/author/:id`,categories:[`reading`],example:`/qidian/author/9639927`,parameters:{id:`作者 id, 可在作者页面 URL 找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`my.qidian.com/author/:id`]}],name:`作者`,maintainers:[`miles170`],handler:u};async function u(t){let l=t.req.param(`id`),u=`https://my.qidian.com/author/${l}/`,d=await a(u),f=c(d.data),p=f(`.header-msg h1`).contents().first().text().trim(),m=f(`.author-work .author-item`).toArray().map(t=>{t=f(t);let a=t.find(`.author-item-msg`),c=a.find(`.author-item-update span`).text().replace(`·`,``).trim();return{title:a.find(`.author-item-title`).text().trim(),author:p,category:a.find(`.author-item-exp a`).first().text().trim(),description:n(s.join(e,`templates/description-9e9a1db4.art`),{description:a.find(`.author-item-update a`).attr(`title`),image:t.find(`a img`).attr(`src`)}),pubDate:o(/(今|昨)/.test(c)?i(c):r(c,`YYYY-MM-DD HH:mm`),8),link:a.find(`.author-item-update a`).attr(`href`)}});return{title:`${p} - 起点中文网`,description:f(`.header-msg-desc`).text().trim(),link:u,item:m}}export{l as route};