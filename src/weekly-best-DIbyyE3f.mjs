import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import"./config-uQhBoCds.mjs";import"./logger-DQf7gybc.mjs";import"./ofetch-7N8fmlQ6.mjs";import"./helpers-C6Jountz.mjs";import{t as n}from"./render-_fW2cbJz.mjs";import{t as r}from"./got-DcbI0XpN.mjs";import i from"node:path";e();const a={path:`/movie/weekly/:type?`,categories:[`social-media`],example:`/douban/movie/weekly`,parameters:{type:`分类，可在榜单页 URL 中找到，默认为一周口碑电影榜`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`一周口碑榜`,maintainers:[`numm233`,`nczitzk`],handler:o,description:`| 一周口碑电影榜      | 华语口碑剧集榜            |
| ------------------- | ------------------------- |
| movie_weekly_best | tv_chinese_best_weekly |`};async function o(e){let a=e.req.param(`type`)||`movie_weekly_best`,o=`https://m.douban.com/movie`,s=`https://m.douban.com/rexxar/api/v2/subject_collection/${a}`,c=await r({method:`get`,url:`${s}/items?start=0&count=10`,headers:{Referer:o}}),l=await r({method:`get`,url:s,headers:{Referer:o}}),u=c.data.subject_collection_items;return{title:l.data.title,link:`https://m.douban.com/subject_collection/${a}`,description:l.data.description,item:u.map(({title:e,cover:r,cover_url:a,url:o,rating:s,null_rating_reason:c,description:l,card_subtitle:u,photos:d})=>{let f=s?`${s.value.toFixed(1)}分`:c;return r&&r.url&&(a=r.url),{title:e,description:n(i.join(t,`templates/weekly_best-71f344cb.art`),{title:e,card_subtitle:u,description:l,rate:f,cover_url:a,photos:d}),link:o}})}}export{a as route};