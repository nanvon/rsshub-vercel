import"./esm-shims-Dqvxr0BZ.js";import{config as e}from"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import"./ofetch-B4O0sZDE.js";import"./helpers-LVq640iW.js";import{cache_default as t}from"./cache-CjzVN0X7.js";import"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./not-found-o393tAVF.js";import{got_default as r}from"./got-CW2W8CRN.js";import{config_not_found_default as i}from"./config-not-found-mNOcOzCd.js";import{utils_default as a}from"./utils-BEJxFoq0.js";import{load as o}from"cheerio";const s={path:`/live/:username/:embed?`,categories:[`live`],example:`/youtube/live/@GawrGura`,parameters:{username:`YouTuber id`,embed:`Default to embed the video, set to any value to disable embedding`},features:{requireConfig:[{name:`YOUTUBE_KEY`,description:" YouTube API Key, support multiple keys, split them with `,`, [API Key application](https://console.developers.google.com/)"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Live`,maintainers:[`sussurr127`],handler:c};async function c(s){if(!e.youtube||!e.youtube.key)throw new i(`YouTube RSS is disabled due to the lack of <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config</a>`);let c=s.req.param(`username`),l=!s.req.param(`embed`),u,d,f=`https://www.youtube.com/${c}`,p=await r(f),m=o(p.data);if(d=m(`meta[itemprop="identifier"]`).attr(`content`),u=m(`meta[itemprop="name"]`).attr(`content`),!d){let e=(await a.getChannelWithUsername(c,`snippet`,t)).data.items[0];d=e.id,u=e.snippet.title}let h=(await a.getLive(d,t)).data.items;return{title:`${u||c}'s Live Status`,link:`https://www.youtube.com/channel/${d}`,description:`$${u||c}'s live streaming status`,item:h.map(e=>{let t=e.snippet,r=e.id.videoId,i=a.getThumbnail(t.thumbnails);return{title:t.title,description:a.renderDescription(l,r,i,a.formatDescription(t.description)),pubDate:n(t.publishedAt),guid:r,link:`https://www.youtube.com/watch?v=${r}`,image:i.url}}),allowEmpty:!0}}export{s as route};