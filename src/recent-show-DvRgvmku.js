import{__dirname as e,init_esm_shims as t}from"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-CSnicFA3.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-D5TEN1xL.js";import o from"node:path";t();const s={path:`/recent-show`,categories:[`shopping`],example:`/shoac/recent-show`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`shoac.com.cn/`]}],name:`演出月历`,maintainers:[`TonyRL`],handler:c,url:`shoac.com.cn/`};async function c(){let t=`https://www.shoac.com.cn`,s={Channel:`theatre_pc`,Location:`121.458563,31.250315`,Theater:1323,"Flagship-Store":!0},{data:c}=await a.post(`${t}/platform-backend/good/theater/dongyi-products`,{headers:s,json:{page:1,size:12,calendar:!1,timeSort:!0,venueId:``}}),l=c.data.records.map(e=>({title:e.productNameShort,category:[e.categoryName,e.subCategoryName],link:`${t}/#/detail?projectId=${e.projectId}`,projectId:e.projectId,minPrice:e.minPrice,maxPrice:e.maxPrice,placeCname:e.placeCname})),u=await Promise.all(l.map(c=>n.tryGet(c.link,async()=>{let{data:n}=await a(`${t}/platform-backend/good/project/detail/old/${c.projectId}`,{headers:s,searchParams:{distributionSeriesId:``,distributionChannelId:``}}),{data:l}=await a(`${t}/platform-backend/good/shows/old/${c.projectId}`,{headers:s,searchParams:{distributionSeriesId:``,distributionChannelId:``}});return c.description=r(o.join(e,`templates/detail-25b153ac.art`),{item:c,detail:n.data,show:l.data}),c.pubDate=l.data.showInfoDetailList?i(l.data.showInfoDetailList[0].saleBeginTime,`x`):null,c})));return{title:`演出月历 - 上海东方艺术中心管理有限公司`,link:t,item:u}}export{s as route};