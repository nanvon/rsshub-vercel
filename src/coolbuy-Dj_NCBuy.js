import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CRUPiVpr.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./types-Bn7An2Wc.js";import a from"node:path";import{load as o}from"cheerio";e();const s=async e=>{let i=Number.parseInt(e.req.query(`limit`)??`50`,10),s=`https://coolbuy.com`,c=new URL(`api/v1.4/product_preview`,s).href,l=await n(c,{query:{order_by:`-id`,limit:i,page:0,offset:0}}),u=o(await n(s)),d=u(`html`).attr(`lang`)??`zh`,f=l.objects.slice(0,i).map(e=>{let n=e.title,i=e.cover_image?.split(/\?/)?.[0],o=e.display_image?.split(/\?/)?.[0],c=r(a.join(t,`templates/description-63ae3544.art`),{summary:e.summary,price:e.price,original_price:e.original_price,highest_price:e.highest_price,highest_original_price:e.highest_original_price,images:[o,i].filter(Boolean).map(e=>({src:e,alt:n}))}),l=e.visit_url,u=`coolbuy-${e.id}#${e.price}`;return{title:n,description:c,link:l??new URL(e.id,s).href,guid:u,id:u,content:{html:c,text:c},image:i,banner:i,language:d}});return{title:u(`title`).text(),description:u(`meta[property="og:description"]`).attr(`content`),link:s,item:f,allowEmpty:!0,image:new URL(`static/coolbuy/packages/dongguan/dist/images/97be46f6.png`,`https://mcache.ifanr.cn`).href,language:d,id:s}},c={path:`/`,name:`产品`,url:`coolbuy.com`,maintainers:[`nczitzk`],handler:s,example:`/coolbuy`,parameters:void 0,description:void 0,categories:[`shopping`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`coolbuy.com`],target:`/`}],view:i.Articles};export{s as handler,c as route};