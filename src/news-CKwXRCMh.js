import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-CbgiXYAi.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-CSnicFA3.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import o from"node:path";import{load as s}from"cheerio";t();const c=`https://news.google.com`,l={path:`/news/:category/:locale`,categories:[`new-media`],example:`/google/news/Top stories/hl=en-US&gl=US&ceid=US:en`,parameters:{category:`Category Title`,locale:"locales, could be found behind `?`, including `hl`, `gl`, and `ceid` as parameters"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`News`,maintainers:[`zoenglinghou`,`pseudoyu`],handler:u};async function u(t){let l=t.req.param(`category`),u=t.req.param(`locale`),d=(await r.tryGet(`google:news:${u}`,async()=>{let e=await n(`${c}/?${u}`),t=s(e);return[...t(`a.brSCsc`).toArray().slice(3).map(e=>(e=t(e),{category:e.text(),url:new URL(e.attr(`href`),c).href})),...t(`a.aqvwYd`).toArray().map(e=>(e=t(e),{category:e.text(),url:new URL(e.attr(`href`),c).href}))]})).find(e=>e.category===l).url,f=await n(d),p=s(f),m=[...p(`.UwIKyb`),...p(`.IBr9hb`),...p(`.IFHyqb`)].map(t=>{t=p(t);let n=t.find(`.gPFEn`).text(),r=t.find(`.bInasb span`).text(),s=r?r.replace(/^By\s+/i,``).replaceAll(/\s+\([^)]*\)/g,``).split(/,|\s+&\s+|\s+and\s+/).map(e=>e.trim()).filter(e=>e?![`et al`,`et al.`].some(t=>e.toLowerCase().endsWith(t)):!1).map(e=>({name:e})):[];return{title:n,description:i(o.join(e,`templates/news-c158a6b5.art`),{img:t.find(`img.Quavad`).attr(`src`),brief:n}),pubDate:a(t.find(`time`).attr(`datetime`)),author:s,link:new URL(t.find(`a.WwrzSb`).first().attr(`href`),c).href}});return{title:p(`title`).text(),link:d,item:m}}export{l as route};