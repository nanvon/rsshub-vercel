import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-DftO2d-b.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-CoH3ye0k.js";import o from"node:path";import{load as s}from"cheerio";t();const c=t=>{let n=s(t),i=n(`h2`).first().text(),a=n(`h2.author`).first().text(),c=n(`.desc`).first().text(),l=n(`img.cover__backcover`).attr(`src`),u=n(`img.cover__backcover`).attr(`alt`);return l||(l=n(`img.img-responsive`).attr(`data-src`),u=n(`img.img-responsive`).attr(`alt`)),r(o.join(e,`templates/book-e2535a5a.art`),{title:i,author:a,description:c,imageSrc:l,imageAlt:u})},l=e=>{let t=e(`script`).toArray().find(e=>{let t=e.children[0];return!t||!t.data?!1:t.data.includes(`post_date`)});if(t.length===0)return;let n=t.children[0].data.match(/(?<="post_date":").*?(?=")/);if(n)return i(n[0])};var u={parseList:(e,t,r)=>Promise.all(e.map(e=>n.tryGet(e.url,async()=>{let t=(await a(e.url)).data,n=r(t);return{title:e.title,description:n.description+`<br>`+n.content,pubDate:n.pubDate,link:e.url}}))),parseBooks:e=>{let t=s(e),n=t(`h2.read-down-text`).first().html(),r=``;return t(`.awesome-list>li`).map((e,t)=>{let n=c(t);return r+=n,n}),{description:n,content:r,pubDate:l(t)}},parseArticle:t=>{let n=s(t),i=n(`h2.hdr-smalltxt`).first().html(),a=n(`div.img-block>img`).first().attr(`src`),c=n(`div.img-block>img`).first().attr(`alt`),u=``,d=r(o.join(e,`templates/articleHeader-7457abf4.art`),{description:i,imageSrc:a,imageAlt:c});return n(`div.main-content>p,div.main-content>ul`).map((e,t)=>{let n=s(t);return u+=n.html(),n}),{description:d,content:u,pubDate:l(n)}}};export{u as utils_default};