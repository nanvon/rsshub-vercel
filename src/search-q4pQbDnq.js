import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-CRTt8uUM.js";import"./helpers-DzX-lcQO.js";import"./ofetch-BHWobzJG.js";import{got_default as e}from"./got-DLgbOU4j.js";import{baseURL as t}from"./const-Bp7onCgM.js";import{load as n}from"cheerio";const r={path:`/apps/search/:q`,example:`/shopify/apps/search/flow`,parameters:{q:`需要搜索的 App`},name:`App store search`,maintainers:[`PrintNow`],handler:i,radar:[{source:[`apps.shopify.com/search`],target:(e,t)=>{let n=new URL(t).searchParams;return n.has(`q`)?`/shopify/apps/search/${n.get(`q`)}`:``}}]};async function i(r){let{q:i=``}=r.req.param(),a=await e.get(`${t}/search`,{searchParams:{q:i},headers:{accept:`text/html, application/xhtml+xml`,"accept-language":`en-US;q=0.9`,"turbo-frame":`search_page`,referer:t,dnt:`1`}}),o=await a.data,s=n(o),c=s(`.search-results-component div[data-controller="app-card"]`).toArray().map(e=>{let n=s(e).attr(`data-app-card-handle-value`),r=s(e).find(`div.tw-self-stretch`).clone(),i=r.find(`span`).text().match(/\d\.\d/),a=r.find(`span + span.tw-sr-only`).text().match(/\d+/),o={title:s(e).attr(`data-app-card-name-value`)??``,link:`${t}/${n}`,description:s(e).find(`div.tw-text-fg-tertiary`).first().text().trim(),image:s(e).attr(`data-app-card-icon-url-value`),_extra:{handle:n,description:s(e).find(`div.tw-text-fg-tertiary`).first().text().trim(),built_for_shopify:s(e).find(`span.built-for-shopify-badge`).length>0,ratting:i?Number.parseFloat(i[0]):0,ratting_count:a?Number(a[0]):0}};return o});return{title:`Search results for "${i}" – Shopify App Store`,link:`https://apps.shopify.com/search?q=${i}`,allowEmpty:!0,language:`en-us`,item:c}}export{r as route};