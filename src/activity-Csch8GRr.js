import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import"./dist-BYIKqG8W.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import{ofetch_default as t}from"./ofetch-CSKgrsrO.js";import{ViewType as n}from"./types-A5bA50Mg.js";import r from"sanitize-html";import i from"rss-parser";const a=new i,o={path:`/activity/:user`,name:`User Activities`,maintainers:[`hyoban`],example:`/github/activity/DIYgod`,categories:[`programming`],view:n.Notifications,parameters:{user:`GitHub username`},description:`Get the activities of a user on GitHub, based on the GitHub official RSS feed`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`github.com/:user`],target:`/activity/:user`}],handler:async n=>{let{user:i}=n.req.param(),o=await t(`https://github.com/${i}.atom`),s=await o.text(),c=s.match(/<media:thumbnail height="30" width="30" url="(.+?)"/)?.[1],l=await a.parseString(s);return{title:`${i}'s GitHub activities`,link:l.link,image:c,item:l.items.map(t=>({title:t.title??``,link:t.link,description:r(t.content?.replace(/href="\/(.+?)"/g,`href="https://github.com/$1"`)??``,{allowedTags:[...r.defaults.allowedTags,`img`]}),pubDate:t.pubDate?e(t.pubDate):void 0,author:t.author,guid:t.id,image:c})),allowEmpty:!0}}};export{o as route};