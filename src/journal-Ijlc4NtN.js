import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./got-BlqYKpVp.js";import i from"node:path";import{load as a}from"cheerio";import{CookieJar as o}from"tough-cookie";e();const s=new o,c={path:`/:journal`,categories:[`journal`],example:`/mdpi/analytica`,parameters:{journal:`Journal Name, get it from the journal homepage`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.mdpi.com/journal/:journal`]}],name:`Journal`,maintainers:[`Derekmini`],handler:l};async function l(e){let o=e.req.param(`journal`),c=`https://www.mdpi.com`,l=`${c}/journal/${o}`,u=a((await r(l,{cookieJar:s})).data),d=u(`.journal__description`).find(`h1`).text(),f=a((await r(`${c}${u(`.side-menu-ul`).find(`a`).eq(1).attr(`href`)}`,{cookieJar:s})).data),p=f(`.content__container`).find(`h1`).text().trim(),m=f(`.article-item`).toArray().map(e=>{let t=f(e).find(`.title-link`).text(),n=`${c}${f(e).find(`.title-link`).attr(`href`)}`,r=f(e).find(`.authors`).find(`.inlineblock`).text(),i=f(e).find(`.color-grey-dark`).find(`a`).attr(`href`),a=``;i!==void 0&&(a=i.replace(`https://doi.org/`,``)),f(e).find(`.abstract-full`).find(`a`).remove();let o=f(e).find(`.abstract-full`).text().trim(),s=`${c}${f(e).find(`.openpopupgallery`).find(`img`).attr(`data-src`)}`;return{title:t,authors:r,link:n,doi:a,abstract:o,issue:p,img:s}}),h=e=>n(i.join(t,`templates/description-d979b276.art`),{item:e});return{title:d,link:l,item:m.map(e=>(e.description=h(e),e))}}export{c as route};