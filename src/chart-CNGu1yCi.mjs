import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as r}from"./render-CSqLtqb8.mjs";import{t as i}from"./types-CaC5w-Pp.mjs";import a from"node:path";import*as o from"cheerio";e();const s=e=>r(a.join(t,`templates/chart-2e926210.art`),e),c={path:`/chart/:chart?`,categories:[`multimedia`],view:i.Notifications,parameters:{chart:{description:"The chart to display, `top` by default",options:[{value:`top`,label:`Top 250 Movies`},{value:`moviemeter`,label:`Most Popular Movies`},{value:`toptv`,label:`Top 250 TV Shows`},{value:`tvmeter`,label:`Most Popular TV Shows`}],default:`top`}},example:`/imdb/chart`,radar:[{source:[`www.imdb.com/chart/:chart/`]}],name:`Charts`,maintainers:[`TonyRL`],handler:l,url:`www.imdb.com/chart/top/`,description:`| Top 250 Movies | Most Popular Movies | Top 250 TV Shows | Most Popular TV Shows |
| -------------- | ------------------- | ---------------- | --------------------- |
| top            | moviemeter          | toptv            | tvmeter               |`};async function l(e){let{chart:t=`top`}=e.req.param(),r=`https://www.imdb.com`,i=`${r}/chart/${t}/`,a=await n(i),c=o.load(a),l=JSON.parse(c(`script#__NEXT_DATA__`).text()).props.pageProps.pageData.chartTitles,u=l.edges.map(({currentRank:e,node:t})=>({title:`${e}. ${t.titleText.text} (${t.releaseYear.year}${t.releaseYear.endYear?`-${t.releaseYear.endYear}`:``})`,description:s({primaryImage:t.primaryImage,originalTitleText:t.originalTitleText,certificate:t.certificate,ratingsSummary:t.ratingsSummary,plot:t.plot}),link:`${r}/title/${t.id}`,category:t.titleGenres.genres.map(e=>l.genres.find(t=>t.filterId===e.genre.text)?.text)}));return{title:c(`head title`).text(),description:c(`head meta[name="description"]`).attr(`content`),link:i,item:u}}export{c as route};