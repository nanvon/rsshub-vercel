import{n as e,t}from"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-BMqiDsx_.mjs";import"./helpers-mo8InLYm.mjs";import{t as n}from"./render-CBhnapAf.mjs";import{t as r}from"./parse-date-bKmkZ9gg.mjs";import{t as i}from"./got-2jXbf1Li.mjs";import{r as a,t as o}from"./query-D5g8LK7W.mjs";import s from"node:path";e();const c={path:`/thread/:id`,radar:[{source:[`lkong.com/thread/:id`,`lkong.com/`]}],name:`Unknown`,maintainers:[`nczitzk`,`ma6254`],handler:l};async function l(e){let c=e.req.param(`id`),l=`https://www.lkong.com`,u=`https://api.lkong.com/api`,d=`${l}/thread/${c}`,f=await i({method:`post`,url:u,json:o(c)});if(f.data.errors)throw Error(f.data.errors[0].message);let p=await i({method:`post`,url:u,json:a(c,Math.ceil(f.data.data.thread.replies/20))}),m=p.data.data.posts.map(e=>({guid:e.pid,author:e.user.name,title:`#${e.lou} ${e.user.name}`,link:`${l}/thread/${c}?pid=${e.pid}`,pubDate:r(e.dateline),description:(e.quote?n(s.join(t,`templates/quote-0d63bb36.art`),{target:`${l}/thread/${c}?pid=${e.quote.pid}`,author:e.quote.author.name,content:n(s.join(t,`templates/content-b0aebebb.art`),{content:JSON.parse(e.quote.content)})}):``)+n(s.join(t,`templates/content-b0aebebb.art`),{content:JSON.parse(e.content)})}));return{title:`${p.data.data.thread.title} - 龙空`,link:d,item:m}}export{c as route};