import{n as e,t}from"./esm-shims-C3MSy80G.mjs";import"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import"./ofetch-Byd8Ct7M.mjs";import"./helpers-vRt84cId.mjs";import{t as n}from"./cache-KwJARS5Z.mjs";import{t as r}from"./render-ZYpwNl2L.mjs";import{t as i}from"./parse-date-9Tu6hSFW.mjs";import{t as a}from"./got-BYElsd7I.mjs";import o from"node:path";e();const s={path:`/recent-show`,categories:[`shopping`],example:`/shoac/recent-show`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`shoac.com.cn/`]}],name:`演出月历`,maintainers:[`TonyRL`],handler:c,url:`shoac.com.cn/`};async function c(){let e=`https://www.shoac.com.cn`,s={Channel:`theatre_pc`,Location:`121.458563,31.250315`,Theater:1323,"Flagship-Store":!0},{data:c}=await a.post(`${e}/platform-backend/good/theater/dongyi-products`,{headers:s,json:{page:1,size:12,calendar:!1,timeSort:!0,venueId:``}}),l=c.data.records.map(t=>({title:t.productNameShort,category:[t.categoryName,t.subCategoryName],link:`${e}/#/detail?projectId=${t.projectId}`,projectId:t.projectId,minPrice:t.minPrice,maxPrice:t.maxPrice,placeCname:t.placeCname}));return{title:`演出月历 - 上海东方艺术中心管理有限公司`,link:e,item:await Promise.all(l.map(c=>n.tryGet(c.link,async()=>{let{data:n}=await a(`${e}/platform-backend/good/project/detail/old/${c.projectId}`,{headers:s,searchParams:{distributionSeriesId:``,distributionChannelId:``}}),{data:l}=await a(`${e}/platform-backend/good/shows/old/${c.projectId}`,{headers:s,searchParams:{distributionSeriesId:``,distributionChannelId:``}});return c.description=r(o.join(t,`templates/detail-25b153ac.art`),{item:c,detail:n.data,show:l.data}),c.pubDate=l.data.showInfoDetailList?i(l.data.showInfoDetailList[0].saleBeginTime,`x`):null,c})))}}export{s as route};