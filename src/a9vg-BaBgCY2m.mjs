import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import"./config-uQhBoCds.mjs";import"./logger-DQf7gybc.mjs";import"./ofetch-7N8fmlQ6.mjs";import"./helpers-C6Jountz.mjs";import{t as n}from"./cache-BXZZTZVV.mjs";import{t as r}from"./render-_fW2cbJz.mjs";import{t as i}from"./parse-date-C2HciIa2.mjs";import{t as a}from"./got-DcbI0XpN.mjs";import{t as o}from"./timezone-BAp4uBjD.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l=async e=>{let{category:l=`news/All`}=e.req.param(),u=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`),10):15,d=`http://www.a9vg.com`,f=new URL(`list/${l}`,d).href,{data:p}=await a(f),m=c(p),h=m(`html`).prop(`lang`),g=m(`a.a9-rich-card-list_item`).slice(0,u).toArray().map(e=>{e=m(e);let n=e.find(`img.a9-rich-card-list_image`),a=e.find(`div.a9-rich-card-list_label`).text();return{title:a,link:new URL(e.prop(`href`),d).href,description:r(s.join(t,`templates/description-16be3a2a.art`),{images:n?[{src:n.prop(`src`),alt:a}]:void 0}),pubDate:o(i(e.find(`div.a9-rich-card-list_infos`).text()),8),language:h}});g=await Promise.all(g.map(e=>n.tryGet(e.link,async()=>{let{data:n}=await a(e.link),l=c(n);return l(`ignore_js_op img, p img`).each((e,n)=>{n=l(n),n.parent().replaceWith(r(s.join(t,`templates/description-16be3a2a.art`),{images:n.prop(`file`)?[{src:n.prop(`file`),alt:n.next().find(`div.xs0 p`).first().text()}]:void 0}))}),e.title=l(`h1.ts, div.c-article-main_content-title`).first().text(),e.description=r(s.join(t,`templates/description-16be3a2a.art`),{description:l(`td.t_f, div.c-article-main_contentraw`).first().html()}),e.author=l(`b a.blue`).first().text()||l(l(`span.c-article-main_content-intro-item`).toArray().findLast(e=>l(e).text().startsWith(`作者`))).text().split(/：/).pop(),e.pubDate=o(i(l(`div.authi em`).first().text().trim().match(/发表于 (\d+-\d+-\d+ \d+:\d+)/)?.[1]??l(`span.c-article-main_content-intro-item`).first().text(),[`YYYY-M-D HH:mm`,`YYYY-MM-DD HH:mm`]),8),e.language=h,e})));let _=m(`title`).text(),v=new URL(`images/logo.1cee7c0f.svg`,d).href;return{title:_,description:m(`meta[name="description"]`).prop(`content`),link:f,item:g,allowEmpty:!0,image:v,author:_.split(/-/).pop(),language:h}},u={path:`/:category{.+}?`,name:`新闻`,url:`a9vg.com`,maintainers:[`monnerHenster`,`nczitzk`],handler:l,example:`/a9vg/news`,parameters:{category:`分类，默认为 ，可在对应分类页 URL 中找到, Category, by default`},description:`::: tip
  若订阅 [PS4](http://www.a9vg.com/list/news/PS4)，网址为 \`http://www.a9vg.com/list/news/PS4\`。截取 \`http://www.a9vg.com/list\` 到末尾的部分 \`news/PS4\` 作为参数填入，此时路由为 [\`/a9vg/news/PS4\`](https://rsshub.app/a9vg/news/PS4)。
:::

| 分类                                               | ID                                                     |
| -------------------------------------------------- | ------------------------------------------------------ |
| [All](https://www.a9vg.com/list/news/All)          | [news/All](https://rsshub.app/a9vg/news/All)           |
| [PS4](https://www.a9vg.com/list/news/PS4)          | [news/PS4](https://rsshub.app/a9vg/news/PS4)           |
| [PS5](https://www.a9vg.com/list/news/PS5)          | [news/PS5](https://rsshub.app/a9vg/news/PS5)           |
| [Switch](https://www.a9vg.com/list/news/Switch)    | [news/Switch](https://rsshub.app/a9vg/news/Switch)     |
| [Xbox One](https://www.a9vg.com/list/news/XboxOne) | [news/XboxOne](https://rsshub.app/a9vg/news/XboxOne)   |
| [XSX](https://www.a9vg.com/list/news/XSX)          | [news/XSX](https://rsshub.app/a9vg/news/XSX)           |
| [PC](https://www.a9vg.com/list/news/PC)            | [news/PC](https://rsshub.app/a9vg/news/PC)             |
| [业界](https://www.a9vg.com/list/news/Industry)    | [news/Industry](https://rsshub.app/a9vg/news/Industry) |
| [厂商](https://www.a9vg.com/list/news/Factory)     | [news/Factory](https://rsshub.app/a9vg/news/Factory)   |
  `,categories:[`game`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.a9vg.com/list/:category`],target:e=>{let t=e.category;return t?`/${t}`:``}},{title:`All`,source:[`www.a9vg.com/list/news/All`],target:`/news/All`},{title:`PS4`,source:[`www.a9vg.com/list/news/PS4`],target:`/news/PS4`},{title:`PS5`,source:[`www.a9vg.com/list/news/PS5`],target:`/news/PS5`},{title:`Switch`,source:[`www.a9vg.com/list/news/Switch`],target:`/news/Switch`},{title:`Xbox One`,source:[`www.a9vg.com/list/news/XboxOne`],target:`/news/XboxOne`},{title:`XSX`,source:[`www.a9vg.com/list/news/XSX`],target:`/news/XSX`},{title:`PC`,source:[`www.a9vg.com/list/news/PC`],target:`/news/PC`},{title:`业界`,source:[`www.a9vg.com/list/news/Industry`],target:`/news/Industry`},{title:`厂商`,source:[`www.a9vg.com/list/news/Factory`],target:`/news/Factory`}]};export{l as handler,u as route};