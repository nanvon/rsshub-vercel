import{n as e,t}from"./esm-shims-D5mxTuu_.mjs";import{t as n}from"./config-CDM38Tpk.mjs";import"./logger-B0B1yUZ6.mjs";import{t as r}from"./ofetch-FkpIOIxH.mjs";import{t as i}from"./render-D2i47mnC.mjs";import a from"node:path";import o from"xxhash-wasm";import{load as s}from"cheerio";e();const c={path:`/list/:id`,categories:[`new-media`],example:`/tophub/list/Om4ejxvxEN`,parameters:{id:`榜单id，可在 URL 中找到`},features:{requireConfig:[{name:`TOPHUB_COOKIE`,optional:!0,description:``}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`tophub.today/n/:id`]}],name:`榜单列表`,maintainers:[`akynazh`],handler:l,description:`::: tip
将榜单条目集合到一个列表中，且有热度排序，可避免推送大量条目。
:::`};async function l(e){let{h64ToString:c}=await o(),l=`https://tophub.today/n/${e.req.param(`id`)}`,u=s(await r(l,{headers:{Referer:`https://tophub.today`,Cookie:n.tophub?.cookie??``}})),d=u(`.tt h3`).text().trim(),f=u(`.rank-all-item:not(.history-content) .jc-c tr`).toArray().map(e=>({title:u(e).find(`td a`).text().trim(),link:u(e).find(`td a`).attr(`href`),heatRate:u(e).find(`td:nth-child(3)`).text().trim()})),p=f.map(e=>e.title).join(``),m=i(a.join(t,`templates/rank-efbd7200.art`),{items:f});return{title:d,description:u(`.tt p`).text().trim(),image:u(`.ii img`).attr(`src`),link:l,item:[{title:d,link:l,description:m,guid:c(p)}]}}export{c as route};