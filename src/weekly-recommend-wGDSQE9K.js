import"./esm-shims-BGJi2y--.js";import{config as e}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./proxy-DMKMSIEA.js";import"./ofetch-rK3Yp7nj.js";import{parseDuration as t}from"./helpers-qpI1t-yV.js";import"./cache-Dfid4xgQ.js";import"./render-DftO2d-b.js";import"./md5-15Cn4YyR.js";import{got_default as n}from"./got-CoH3ye0k.js";import"./puppeteer-BZKI4hv7.js";import{getVideoUrl as r,utils_default as i}from"./utils-ZI8QAo1G.js";import{cache_default as a}from"./cache-C-D5FUKV.js";const o={path:`/weekly/:embed?`,categories:[`social-media`],example:`/bilibili/weekly`,parameters:{embed:`默认为开启内嵌视频, 任意值为关闭`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`B 站每周必看`,maintainers:[`ttttmr`],handler:s};async function s(o){let s=!o.req.param(`embed`),c=await n({method:`get`,url:`https://app.bilibili.com/x/v2/show/popular/selected/series?type=weekly_selected`,headers:{Referer:`https://www.bilibili.com/h5/weekly-recommend`}}),l=c.data.data[0].number,u=c.data.data[0].name;return{title:`B站每周必看`,link:`https://www.bilibili.com/h5/weekly-recommend`,description:`B站每周必看`,item:(await n({method:`get`,url:`https://app.bilibili.com/x/v2/show/popular/selected?type=weekly_selected&number=${l}`,headers:{Referer:`https://www.bilibili.com/h5/weekly-recommend?num=${l}&navhide=1`}})).data.data.list.map(async n=>{let o=!e.bilibili.excludeSubtitles&&n.bvid?await a.getVideoSubtitleAttachment(n.bvid):[];return{title:n.title,description:i.renderUGCDescription(s,n.cover,`${u} ${n.title} - ${n.rcmd_reason}`,n.param,void 0,n.bvid),link:l>60&&n.bvid?`https://www.bilibili.com/video/${n.bvid}`:`https://www.bilibili.com/video/av${n.param}`,attachments:n.bvid?[{url:r(n.bvid),mime_type:`text/html`,duration_in_seconds:t(n.cover_right_text_1)},...o]:void 0}})}}export{o as route};