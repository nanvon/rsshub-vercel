import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CRUPiVpr.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./types-Bn7An2Wc.js";import s from"node:path";import{load as c}from"cheerio";e();const l=async e=>{let{filter:o}=e.req.param(),l=Number.parseInt(e.req.query(`limit`)??`100`,10),u=`https://0xxx.ws`,d=new URL(o?`?${o}`:``,u).href,f=c(await n(d)),p=f(`html`).attr(`lang`)??`en`,m=[];m=f(`table#home-table tr:not(.gore)`).slice(0,l).toArray().map(e=>{let n=f(e),r=n.find(`td.category`),o=n.find(`td.catalogue`),c=n.find(`td.date`),l=n.find(`td.title`).text(),d=n.find(`a.screenshot`).attr(`rel`),m=i(s.join(t,`templates/description-4206d5b5.art`),{images:d?[{src:d,alt:l}]:void 0,category:r.html(),catalogue:o.html(),title:l,size:n.find(`td.size`).text(),date:c.html()}),h=c.text(),g=n.find(`td.title a`).attr(`href`),_=[...new Set([r.text()?.trim(),o.text()?.trim(),c.text()])].filter(e=>!!(e&&e!==`-`)),v=h;return{title:l,description:m,pubDate:h?a(h,`DD.MM.YYYY`):void 0,link:g?new URL(g,u).href:void 0,category:_,content:{html:m,text:m},image:d,banner:d,updated:v?a(v,`DD.MM.YYYY`):void 0,language:p}}),m=await Promise.all(m.map(e=>e.link?r.tryGet(e.link,async()=>{let r=c(await n(e.link)),a=i(s.join(t,`templates/description-4206d5b5.art`),{images:r(`div.thumbs img`).toArray().map(t=>{let n=r(t);return{src:n.attr(`src`),alt:n.attr(`alt`)??e.title}})})+(e.description??``);return{...e,description:a}}):e));let h=f(`title`).text()?.split(/\|/).pop();return{title:h?`${h} - ${o}`:o,description:f(`meta[name="description"]`).attr(`content`),link:d,item:m,allowEmpty:!0,image:f(`div.logo img`).attr(`src`)?new URL(f(`div.logo img`).attr(`src`),u).href:void 0,author:f(`meta[property="og:site_name"]`).attr(`content`),language:p,id:d}},u={path:`/:filter?`,name:`Source`,url:`0xxx.ws`,maintainers:[`nczitzk`],handler:l,example:`/0xxx/category=Movie-HD-1080p`,parameters:{filter:{description:`Filter`}},description:":::tip\nTo subscribe to [Movie HD 1080p](https://0xxx.ws?category=Movie-HD-1080p), where the source URL is `https://0xxx.ws?category=Movie-HD-1080p`, extract the certain parts from this URL to be used as parameters, resulting in the route as [`/0xxx/category=Movie-HD-1080p`](https://rsshub.app/0xxx/category=Movie-HD-1080p).\n:::\n",categories:[`multimedia`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1,nfsw:!0},radar:[{source:[`0xxx.ws`],target:(e,t)=>{let n=new URL(t);n.searchParams.delete(`next`);let r=n.searchParams.toString();return`/0xxx${r?`/${r}`:``}`}}],view:o.Articles};export{l as handler,u as route};