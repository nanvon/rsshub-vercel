import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CISb_5Uo.js";import"./helpers-gUVC02jt.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-CSnicFA3.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-BOnMlRH6.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/:id`,categories:[`journal`],example:`/aeaweb/aer`,parameters:{id:`Journal id, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!0},radar:[{source:[`aeaweb.org/journals/:id`,`aeaweb.org/`]}],name:`Journal`,maintainers:[`nczitzk`],handler:l,description:"The URL of the journal [American Economic Review](https://www.aeaweb.org/journals/aer) is `https://www.aeaweb.org/journals/aer`, where `aer` is the id of the journal, so the route for this journal is `/aeaweb/aer`.\n\n::: tip\n  More jounals can be found in [AEA Journals](https://www.aeaweb.org/journals).\n:::"};async function l(t){let c=t.req.param(`id`),l=`https://www.aeaweb.org`,u=`${l}/journals/${c}`,d=await a({method:`get`,url:u}),f=s(d.data);f(`.read-more`).remove(),c=f(`input[name="journal"]`).attr(`value`);let p=f(`.page-title`).text(),m=f(`.intro-copy`).text(),h=`${l}/journals/search-results?journal=${c}&ArticleSearch[current]=1`;d=await a({method:`get`,url:h}),f=s(d.data);let g=f(`h4.title a`).toArray().map(e=>(e=f(e),{link:`${l}${e.attr(`href`).split(`&`)[0]}`}));return g=await Promise.all(g.map(t=>n.tryGet(t.link,async()=>{let n=await a({method:`get`,url:t.link}),c=s(n.data);return t.doi=c(`meta[name="citation_doi"]`).attr(`content`),t.guid=t.doi,t.title=c(`meta[name="citation_title"]`).attr(`content`),t.author=c(`.author`).toArray().map(e=>c(e).text().trim()).join(`, `),t.pubDate=i(c(`meta[name="citation_publication_date"]`).attr(`content`),`YYYY/MM`),t.description=r(o.join(e,`templates/description-384bc71e.art`),{description:c(`meta[name="twitter:description"]`).attr(`content`).replace(/\(\w+ \d+\)( - )?/,``)}),t}))),{title:p,description:m,link:u,item:g,language:f(`html`).attr(`lang`)}}export{c as route};