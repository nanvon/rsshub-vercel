import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CISb_5Uo.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{got_default as t}from"./got-BOnMlRH6.js";import{load as n}from"cheerio";const r={path:`/:id?`,categories:[`study`],example:`/camchina`,parameters:{id:`分类，见下表，默认为 1，即新闻`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cste.org.cn/categories/:id`,`cste.org.cn/`]}],name:`栏目`,maintainers:[`nczitzk`],handler:i,description:`| 新闻 | 通告栏 |
| ---- | ------ |
| 1    | 2      |`};async function i(r){let i=r.req.param(`id`)??`1`,a=r.req.query(`limit`)?Number.parseInt(r.req.query(`limit`)):50,o=`http://www.camchina.org.cn`,s=`${o}/categories/${i}`,c=await t({method:`get`,url:s}),l=n(c.data),u=l(`.M-main-l p a`).slice(0,a).toArray().map(e=>(e=l(e),{title:e.text(),link:`${o}${e.attr(`href`)}`}));return u=await Promise.all(u.map(r=>e.tryGet(r.link,async()=>{let e=await t({method:`get`,url:r.link});return r.description=n(e.data)(`.content`).html(),r}))),{title:`中国管理现代化研究会 - ${l(`.title_red`).text()}`,link:s,item:u}}export{r as route};