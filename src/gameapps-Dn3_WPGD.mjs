import{n as e,t}from"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import{t as n}from"./ofetch-DXVwJZV0.mjs";import{t as r}from"./cache-ZTWfXd2T.mjs";import{t as i}from"./render-CBhnapAf.mjs";import{t as a}from"./parse-date-bKmkZ9gg.mjs";import{t as o}from"./rss-parser-CvXeqTsg.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l={path:`/`,example:`/gameapps`,radar:[{source:[`gameapps.hk/`]}],name:`最新消息`,maintainers:[`TonyRL`],handler:u,url:`gameapps.hk/`};async function u(){let e=`https://www.gameapps.hk`,l=await o.parseURL(`${e}/rss`),u=await Promise.all(l.items.map(o=>r.tryGet(o.link,async()=>{let r=c(await n(o.link,{headers:{Referer:e}}));o.title=r(`meta[property="og:title"]`).attr(`content`)??r(`.news-title h1`).text();let l=r(`.pagination li`).not(`.disabled`).not(`.active`).find(`a`).toArray().map(t=>`${e}${t.attribs.href}`);r(`.pages`).remove();let u=r(`.news-content`);if(delete o.content,delete o.contentSnippet,delete o.isoDate,l.length){let e=await Promise.all(l.map(async e=>{let t=c(await n(e,{headers:{referer:o.link}}));return t(`.pages`).remove(),t(`.news-content`).html()}));u.append(e)}return o.description=i(s.join(t,`templates/description-0048aaa9.art`),{intro:r(`div.introduction.media.news-intro div.media-body`).html()?.trim(),desc:u.html()?.trim()}),o.guid=o.guid.slice(0,o.link.lastIndexOf(`/`)),o.pubDate=a(o.pubDate),o.enclosure_url=r(`div.introduction.media.news-intro div.media-left`).find(`img`).attr(`src`),o.enclosure_type=`image/jpeg`,o})));return{title:l.title,link:l.link,description:l.description,image:`${e}/static/favicon/apple-touch-icon.png`,item:u,language:l.language}}export{l as route};