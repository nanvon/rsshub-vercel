import"./esm-shims-BmHUa0Yk.js";import{config as e}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{got_default as r}from"./got-D5TEN1xL.js";import{load as i}from"cheerio";const a=e=>(e(`*[style]`).removeAttr(`style`),e(`br`).remove(),e(`span:empty`).remove(),e(`span`).each((t,n)=>{e(n).html().trim()===`&nbsp;`&&e(n).remove()}),e(`p:empty`).remove(),e(`p`).each((t,n)=>{e(n).html().trim()===``&&e(n).remove()}),e),o=async t=>{let o=await r(t,{headers:{"user-agent":e.trueUA}}),c=a(i(o.data)),l=c(`.content-head h2`).text().trim(),u=c(`.content-persons p span:last`).text().trim(),d=n(c(`.content-time`).text().trim(),`YYYY-MM-DD`),f=c(`div[class=content-list-box]`).html(),p=c(`.content-tags a[rel="tag"]`).toArray().map(e=>c(e).text().trim());return new s(l,u,d,f,p)};var s=class{constructor(e,t,n,r,i){this.title=e,this.author=t,this.pubDate=n,this.description=r,this.category=i}},c={siteLink:`https://chinafactcheck.com`,cleanDom:a,getArticleDetail:o,ArticleDetail:s,trueUA:e.trueUA};const l={path:`/`,radar:[{source:[`chinafactcheck.com/`],target:``}],name:`Unknown`,maintainers:[`kdanfly`],handler:u,url:`chinafactcheck.com/`};async function u(){let e=await r(c.siteLink,{headers:{"user-agent":c.trueUA}}),n=i(e.data),a=n(`.post-info-box .post-thumb a`).toArray().map(e=>({link:n(e).attr(`href`)})),o=await Promise.all(a.map(e=>t.tryGet(e.link,async()=>{let{title:t,author:n,pubDate:r,description:i,category:a}=await c.getArticleDetail(e.link);return e.title=t,e.author=n,e.pubDate=r,e.description=i,e.category=a,e})));return{title:n(`head title`).text(),link:c.siteLink,item:o}}export{l as route};