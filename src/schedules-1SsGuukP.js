import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-DqHh1IN2.js";import{art as r}from"./render-CSnicFA3.js";import i from"node:path";import a from"dayjs";import o from"dayjs/plugin/utc.js";import s from"dayjs/plugin/timezone.js";t();const c=t=>r(i.join(e,`templates/scheduleDesc-2d718798.art`),t);a.extend(o),a.extend(s);const l={path:`/schedules/:serie?/:category?`,parameters:{serie:`Love Live! Series sub-projects abbreviation, see the following table`,category:`The official website lists the categories, see the following table for details`},name:`Schedule`,example:`/lovelive-anime/schedules`,categories:[`anime`],maintainers:[`axojhf`],handler:u,description:"| Sub-project Name (not full name) | 全シリーズ              | Lovelive!  | Lovelive! Sunshine!! | Lovelive! Nijigasaki High School Idol Club | Lovelive! Superstar!! | ラブライブ！スクールアイドルミュージカル |\n| -------------------------------- | ----------------------- | ---------- | -------------------- | ------------------------------------------ | --------------------- | ---------------------------------------- |\n| `serie` parameter                | *No parameter* or `all` | `lovelive` | `sunshine`           | `nijigasaki`                               | `superstar`           | `musical`                                |\n\n| Category Name        | 全て                    | ライブ | イベント | 生配信    |\n| -------------------- | ----------------------- | ------ | -------- | --------- |\n| `category` parameter | *No parameter* or `all` | `live` | `event`  | `haishin` |"};async function u(e){let{serie:t=`all`,category:r=`all`}=e.req.param(),i=a(),o={year:i.year(),month:i.format(`MM`)};t&&t!==`all`&&(o.series=[t]),r&&r!==`all`&&(o.category=[r]);let s=(await n(`https://www.lovelive-anime.jp/common/api/calendar_list.php?site=jp&ip=lovelive&data=${encodeURIComponent(JSON.stringify(o))}`)).data.schedule_list.map(e=>{let t=e.url.select_url,n=e.title,r=e.categories.name,i=a.unix(e.event_startdate).tz(`Asia/Tokyo`).format(`YYYY-MM-DD HH:mm:ss JST`),o=a.unix(e.event_enddate).tz(`Asia/Tokyo`).format(`YYYY-MM-DD HH:mm:ss JST`);return{link:t,pubDate:e.start_endflg?a.unix(e.event_enddate).tz(`Asia/Tokyo`):a.unix(e.event_startdate).tz(`Asia/Tokyo`),title:n,category:r,description:c({desc:e.event_dspdate,startTime:i,endTime:o})}});return{title:`${r} - ${t} - Love Live Official Website Schedule`,link:`https://www.lovelive-anime.jp/schedule/`,item:s,description:`The schedule date and other information shall be subject to the announcement on the official website. The RSS route has not been strictly tested, and the captured information cannot be guaranteed to be correct.`}}export{l as route};