import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import{ofetch_default as n}from"./ofetch-rK3Yp7nj.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-DftO2d-b.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import o from"node:path";import{load as s}from"cheerio";t();const c=`https://www.dcfever.com`,l=e=>r.tryGet(e.link,async()=>{let t=s(await n(e.link)),r=t(`div[itemprop="articleBody"], .column_article_content_html`),i=t(`.article_multi_page a`).not(`.selected`).toArray().map(n=>({link:new URL(t(n).attr(`href`),e.link).href}));if(i.length){let e=await Promise.all(i.map(async e=>s(await n(e.link))(`div[itemprop="articleBody"]`).html()));r.append(e)}return r.find(`img`).each((e,t)=>{t.attribs.src?.includes(`?`)&&(t.attribs.src=t.attribs.src.split(`?`)[0])}),r.find(`p a`).each((e,n)=>{n=t(n),n.text().startsWith(`下一頁為`)&&n.remove()}),r.find(`iframe`).each((e,n)=>{n=t(n),n.attr(`src`).startsWith(`https://www.facebook.com/plugins/like.php`)&&n.remove()}),e.description=r.html(),e.pubDate=a(t(`meta[property="article:published_time"]`).attr(`content`)),e}),u=t=>r.tryGet(t.link,async()=>{let r=s(await n(t.link)),a=s(r(`#trading_item_section .description`).contents().filter((e,t)=>t.type===`comment`).toArray().map(e=>e.data).join(``),null,!1);return a(`.selector_text`).remove(),a(`.selector_image_div`).each((e,t)=>{delete t.attribs.onclick}),a(`.desktop_photo_selector img`).each((e,t)=>{t.attribs.src.endsWith(`_sqt.jpg`)&&(t.attribs.src=t.attribs.src.replace(`_sqt.jpg`,`.jpg`))}),t.description=i(o.join(e,`templates/trading-949c0be3.art`),{info:r(`.info_col`),description:r(`.description_text`).html(),photo:a(`.desktop_photo_selector`).html()}),t});export{c as baseUrl,l as parseItem,u as parseTradeItem};