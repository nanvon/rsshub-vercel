import{__dirname as e,init_esm_shims as t}from"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-DCfHHxuQ.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{got_default as r}from"./got-D5TEN1xL.js";import i from"node:path";t();const a={path:`/:id`,categories:[`study`],example:`/orcid/0000-0002-4731-9700`,parameters:{id:`Open Researcher and Contributor ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Works List`,maintainers:[`OrangeEd1t`],handler:o};async function o(t){let a=t.req.param(`id`),o=`https://orcid.org/${a}/worksPage.json?offset=0&sort=date&sortAsc=false&pageSize=20`,s=(await r(o)).data.groups,c=[],l=[];for(let e of s)for(let t=0;t<e.works.length;t++)c.push(e.works[t]);return c.map(t=>{let r=``;for(let e=0;e<t.workExternalIdentifiers.length;e++)r+=t.workExternalIdentifiers[e].url?`<a href="`+t.workExternalIdentifiers[e].url.value+`">`+t.workExternalIdentifiers[e].externalIdentifierType.value+`: `+t.workExternalIdentifiers[e].externalIdentifierId.value+`</a><br>`:t.workExternalIdentifiers[e].externalIdentifierType.value+`: `+t.workExternalIdentifiers[e].externalIdentifierId.value+`<br>`;let a={title:t.title.value,link:t.url,description:n(i.join(e,`templates/description-15487dd9.art`),{title:t.title.value,journalTitle:t.journalTitle?.value,publicationDate:t.publicationDate,workType:t.workType.value,Str:r,sourceName:t.sourceName}),guid:t.putCode.value};return l.push(a),a}),{title:`ORCID Works List`+a,link:o,item:l}}export{a as route};