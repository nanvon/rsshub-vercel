import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import{t as i}from"./got-BlqYKpVp.js";import a from"node:path";e();const o={0:`动态`,7:`书评`,12:`视频`},s={path:`/user/:id/:type?`,categories:[`new-media`],example:`/dedao/user/VkA5OqLX4RyGxmZRNBMlwBrDaJQ9og`,parameters:{id:`用户 id，可在对应用户主页 URL 中找到`,type:"类型，见下表，默认为`0`，即动态"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`用户主页`,maintainers:[`nczitzk`],handler:c,description:`| 动态 | 书评 | 视频 |
| ---- | ---- | ---- |
| 0    | 7    | 12   |`};async function c(e){let s=e.req.param(`id`)??``,c=e.req.param(`type`)?Number.parseInt(e.req.param(`type`)):0,l=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`)):100,u=`https://m.igetget.com`,d=`${u}/native/mine/account#/user/detail?enId=${s}`,f=`${u}/native/api/homePage/topicNote`,p=(await i({method:`post`,url:`${u}/native/api/homePage/userInfo`,json:{hazy:s}})).data,m=p.c.nickname,h=p.c.avatar,g=`${p.c.v_info}: ${p.c.slogan}`,_=(await i({method:`post`,url:f,json:{uid:null,max_id_str:`0`,count:l,max_createtime:0,is_only_repost:0,load_chain:!0,load_tag:1,source:0,note_type:c,only_origin:!1,with_highlight:!0,hazy:s}})).data.c.list.map(e=>({author:m,title:e.content||e.note||e.extra.title,link:e.share_url,pubDate:r(e.create_time*1e3),description:n(a.join(t,`templates/user-7264910a.art`),{rootUrl:u,name:e.origin_notes_owner.name,vinfo:e.origin_notes_owner.Vinfo,content:e.content,note:e.note,extra:e.extra,video:e.video.video_cover})}));return{title:`${m}的得到主页 - ${o[c]}`,link:d,item:_,image:h,description:g,allowEmpty:!0}}export{s as route};