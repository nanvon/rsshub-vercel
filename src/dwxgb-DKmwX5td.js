import"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as e}from"./cache-CpEhLexq.js";import{t}from"./parse-date-CHEO0z5G.js";import{t as n}from"./got-BlqYKpVp.js";import{load as r}from"cheerio";const i={path:`/dwxgb/:category/:type`,categories:[`university`],example:`/bnu/dwxgb/xwzx/tzgg`,parameters:{category:`大分类`,type:`子分类，例子如下`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`dwxgb.bnu.edu.cn/:category/:type/index.html`]}],name:`党委学生工作部`,maintainers:[`Fatpandac`],handler:a,description:"`https://dwxgb.bnu.edu.cn/xwzx/tzgg/index.html` 则对应为 `/bnu/dwxgb/xwzx/tzgg"};async function a(i){let{category:a,type:o}=i.req.param(),s=`https://dwxgb.bnu.edu.cn`,c=`${s}/${a}/${o}/index.html`,l;try{l=await n(c)}catch{try{l=await n(`${s}/${a}/${o}/index.htm`)}catch{return}}let u=r(l.data),d=u(`ul.container.list > li`).toArray().map(e=>{let n=u(e).find(`a`).attr(`href`),r=new URL(n,c).href;return{title:u(e).find(`a`).text().trim(),pubDate:t(u(e).find(`span`).text()),link:r}}),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>(t.description=r((await n(t.link)).data)(`div.article.typo`).html(),t))));return{title:`${u(`div.breadcrumb1 > a:nth-child(3)`).text()} - ${u(`div.breadcrumb1 > a:nth-child(4)`).text()}`,link:c,item:f}}export{i as route};