import{__dirname as e,init_esm_shims as t}from"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-DCfHHxuQ.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-CSnicFA3.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{ViewType as o}from"./types-Bi82qguM.js";import s from"node:path";import{load as c}from"cheerio";t();const l=(e,t)=>{let n=c(e);return n(`div.informationbox`).remove(),n(`div.contributors`).remove(),n(`*`).not(t.join(`, `)).contents().filter((e,t)=>t.type===`text`).remove(),n(`*`).not(t.join(`, `)).filter((e,t)=>n(t).children().length===0).remove(),n.html()||``},u=async t=>{let{language:o=`zh`,category:u=`trends-and-insights`}=t.req.param(),d=Number.parseInt(t.req.query(`limit`)??`12`,10),f=`https://www.joneslanglasalle.com.cn`,p=new URL(`${o}/${u}`,f).href,m=await n(p),h=c(m),g=h(`html`).prop(`lang`)??`en`,_=h(`div.ti-title`).slice(0,d).toArray().map(t=>{let n=h(t),r=n.closest(`a`),o=n.text(),c=r.prop(`href`),l=i(s.join(e,`templates/description-1b5a0861.art`),{intro:r.find(`p.ti-teaser`).text()}),u=r.find(`div.ti-image-container img`).prop(`src`)?new URL(r.find(`div.ti-image-container img`).prop(`src`),f).href:void 0;return{title:o,description:l,pubDate:a(r.find(`span.ti-date`).text(),[`MM月DD日`,`MMMM DD`]),link:c?new URL(c,f).href:void 0,category:[r.find(`span.ti-type`).text()].filter(Boolean),content:{html:l,text:r.find(`p.ti-teaser`).text()},image:u,banner:u,language:g}});_=(await Promise.all(_.map(t=>!t.link&&typeof t.link!=`string`?t:r.tryGet(t.link,async()=>{try{let r=await n(t.link),o=c(r),u=o(`meta[property="og:title"]`).prop(`content`),d=o(`meta[property="og:url"]`).prop(`content`),p=o(`meta[property="og:image"]`).prop(`content`),m=a(o(`div.publicationdate`).text().trim(),[`YYYY 年MM 月DD 日`,`MMMM DD, YYYY`]),h=o(`div.contributors ul li`).toArray().map(e=>({name:o(e).text()})),_={};o(`picture`).each((t,n)=>{let r=o(n),a=r.find(`source`).last().prop(`srcset`)?new URL(r.find(`source`).last().prop(`srcset`),f).href:void 0;if(a){r.replaceWith(i(s.join(e,`templates/description-1b5a0861.art`),{images:[{src:a}]}));let t=a.split(/\./).pop();t&&(_[t]={url:a})}});let v=o(`div.related-content a.content-card`).toArray().map(e=>{let t=o(e);return{url:new URL(t.prop(`href`),f).href,type:`related`,content_html:t.find(`div.content-card__body`).html()}}).filter(e=>!0),y=i(s.join(e,`templates/description-1b5a0861.art`),{description:l(o(`div.page-section`).eq(1).html()??o(`div.copy-block`).html()??``,[`div.richtext p`,`h3`,`h4`,`h5`,`h6`,`figure`,`img`,`ul`,`li`,`span`,`b`])});return{title:u,description:y,pubDate:m,category:o(`meta[property="article:tag"]`).prop(`content`).split(/,\s/),author:h,guid:d,id:d,content:{html:y,text:y},image:p,banner:p,language:g,media:Object.keys(_).length>0?_:void 0,_extra:{links:v.length>0?v:void 0}}}catch{return t}})))).filter(e=>!0);let v=h(`title`).text(),y=h(`img.logo`).prop(`src`)?new URL(h(`img.logo`).prop(`src`),f).href:void 0;return{title:v,description:h(`meta[property="og:description"]`).prop(`content`),link:p,item:_,allowEmpty:!0,image:y,author:v.split(/\|/).pop(),language:g,id:h(`meta[property="og:url"]`).prop(`content`)}},d={path:`/:language?/:category{.+}?`,name:`Trends & Insights`,url:`joneslanglasalle.com.cn`,maintainers:[`nczitzk`,`pseudoyu`],handler:u,example:`/joneslanglasalle/en/trends-and-insights`,parameters:{language:"Language, `zh` by default",category:"Category, `trends-and-insights` by default"},description:`::: tip
If you subscribe to [Trends & Insights](https://www.joneslanglasalle.com.cn/en/trends-and-insights)，where the URL is \`https://www.joneslanglasalle.com.cn/en/trends-and-insights\`, extract the part \`https://joneslanglasalle.com.cn/\` to the end. Use \`zh\` and \`trends-and-insights\` as the parameters to fill in. Therefore, the route will be [\`/joneslanglasalle/en/trends-and-insights\`](https://rsshub.app/joneslanglasalle/en/trends-and-insights).
:::

| Category  | ID                            |
| --------- | ----------------------------- |
| Latest    | trends-and-insights           |
| Workplace | trends-and-insights/workplace |
| Investor  | trends-and-insights/investor  |
| Cities    | trends-and-insights/cities    |
| Research  | trends-and-insights/research  |
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`joneslanglasalle.com.cn/:language/:category`],target:e=>{let t=e.language,n=e.category;return t?`/${t}${n?`/${n}`:``}`:``}},{title:`Latest`,source:[`joneslanglasalle.com.cn/en/trends-and-insights`],target:`/en/trends-and-insights`},{title:`Workplace`,source:[`joneslanglasalle.com.cn/en/trends-and-insights/workplace`],target:`/en/trends-and-insights/workplace`},{title:`Investor`,source:[`joneslanglasalle.com.cn/en/trends-and-insights/investor`],target:`/en/trends-and-insights/investor`},{title:`Cities`,source:[`joneslanglasalle.com.cn/en/trends-and-insights/cities`],target:`/en/trends-and-insights/cities`},{title:`Research`,source:[`joneslanglasalle.com.cn/en/trends-and-insights/research`],target:`/en/trends-and-insights/research`},{title:`房地产趋势与洞察`,source:[`joneslanglasalle.com.cn/zh/trends-and-insights`],target:`/zh/trends-and-insights`},{title:`办公空间`,source:[`joneslanglasalle.com.cn/zh/trends-and-insights/workplace`],target:`/zh/trends-and-insights/workplace`},{title:`投资者`,source:[`joneslanglasalle.com.cn/zh/trends-and-insights/investor`],target:`/zh/trends-and-insights/investor`},{title:`城市`,source:[`joneslanglasalle.com.cn/zh/trends-and-insights/cities`],target:`/zh/trends-and-insights/cities`},{title:`研究报告`,source:[`joneslanglasalle.com.cn/zh/trends-and-insights/research`],target:`/zh/trends-and-insights/research`}],view:o.Articles,zh:{path:`/:language?/:category{.+}?`,name:`房地产趋势与洞察`,url:`joneslanglasalle.com.cn`,maintainers:[`nczitzk`],handler:u,example:`/joneslanglasalle/zh/trends-and-insights`,parameters:{language:"语言，默认为 `zh`，可在对应分类页 URL 中找到",category:"分类，默认为 `trends-and-insights`，可在对应分类页 URL 中找到"},description:"::: tip\n若订阅 [房地产趋势与洞察](https://www.joneslanglasalle.com.cn/zh/trends-and-insights)，网址为 `https://www.joneslanglasalle.com.cn/zh/trends-and-insights`，请截取 `https://joneslanglasalle.com.cn/` 到末尾的部分 `zh` 和 `trends-and-insights` 作为 `language` 和 `category` 参数填入，此时目标路由为 [`/joneslanglasalle/zh/trends-and-insights`](https://rsshub.app/joneslanglasalle/zh/trends-and-insights)。\n:::\n\n| 分类名称   | 分类 ID                       |\n| ---------- | ----------------------------- |\n| 趋势及洞察 | trends-and-insights           |\n| 办公空间   | trends-and-insights/workplace |\n| 投资者     | trends-and-insights/investor  |\n| 城市       | trends-and-insights/cities    |\n| 研究报告   | trends-and-insights/research  |\n"}};export{u as handler,d as route};