import{n as e,t}from"./esm-shims-mGm6WwCc.js";import{t as n}from"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./got-CgQXMNWI.js";import{t as o}from"./invalid-parameter-CLGd_tte.js";import s from"node:path";e();const c={path:`/news/:category?`,categories:[`traditional-media`],example:`/i-cable/news`,parameters:{category:`分類，默認為新聞資訊`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.i-cable.com`],target:`/news`},{source:[`www.i-cable.com/category/:category`],target:`/news/:category`}],name:`新聞`,maintainers:[`quiniapiezoelectricity`],handler:l,url:`www.i-cable.com/`,description:`
::: tip
分類只可用分類名稱，如：新聞資訊/港聞
:::`};async function l(e){let c=e.req.param(`category`)??`新聞資訊`,l=e.req.query(`limit`)??20,u=`https://www.i-cable.com/wp-json/wp/v2`,d=await r.tryGet(`${u}/categories?slug=${c}`,async()=>await a(`${u}/categories?slug=${c}`),n.cache.routeExpire,!1);if(d.data.length<1)throw new o(`Invalid Category: ${c}`);let f=d.data[0],p=(await a(`${u}/posts?_embed=1&categories=${f.id}&per_page=${l}`)).data.map(e=>{let n=i(s.join(t,`templates/description-0404a122.art`),{media:e._embedded[`wp:featuredmedia`]??[],content:e.content.rendered});return{title:e.title.rendered,link:e.link,pubDate:e.date_gmt,description:n,category:e._embedded[`wp:term`][0].map(e=>e.name)??[]}});return{title:`有線新聞 - ${f.name}`,description:f.description,link:f.link,item:p}}export{c as route};