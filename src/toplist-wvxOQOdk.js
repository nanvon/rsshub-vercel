import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-rK3Yp7nj.js";import"./helpers-qpI1t-yV.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-CoH3ye0k.js";import"./timezone-CMz5pnRe.js";import{ProcessFeed as r,ossUrl as i,rootUrl as a}from"./utils-CClERLPS.js";import{load as o}from"cheerio";const s={path:[`/ranking/:id?/:period?`,`/toplist/:id?/:period?`],name:`Unknown`,maintainers:[`HenryQW`,`nczitzk`],handler:c,description:`| 文章点击排行 | 最近更新文章 | 文章推荐排行 |
| ------------ | ------------ | ------------ |
| 1            | 10           | 11           |`};async function c(s){let{id:c=`1`,period:l=`1`}=s.req.param(),u=s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`),10):30,d=new URL(`toplist${c?`?id=${c}${c===`1`?`&period=${l}`:``}`:``}`,a).href,{data:f}=await n(d),p=o(f),m=`${p(`a.hl`).text()||``}${p(`title`).text().split(`_`)[0]}`,h=p(`div.tops_list`).slice(0,u).toArray().map(e=>{e=p(e);let n=e.find(`div.tips a`);return{title:n.text(),link:new URL(n.prop(`href`),a).href,author:e.find(`div.name`).text(),pubDate:t(e.find(`div.times`).text())}});return{item:await r(u,e.tryGet,h),title:`爱思想 - ${m}`,link:d,language:`zh-cn`,image:new URL(`images/logo_toplist.jpg`,i).href,subtitle:m}}export{s as route};