import"./esm-shims-DE2PJqdr.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CJF2SF6b.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-Baw2Nbdf.js";import{baseUrl as r,journalMap as i}from"./utils-BlBtrn9x.js";import{load as a}from"cheerio";import{CookieJar as o}from"tough-cookie";const s={path:`/cover`,categories:[`journal`],example:`/nature/cover`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`nature.com/`]}],name:`Cover Story`,maintainers:[`y9c`,`pseudoyu`],handler:c,url:`nature.com/`,description:`Subscribe to the cover images of the Nature journals, and get the latest publication updates in time.`};async function c(){let s=new o;await n(`https://www.nature.com`,{cookieJar:s});let c=i.items.filter(e=>e.id).map(e=>({...e,link:`${r}/${e.title}/current-issue`})),l=await Promise.all(c.map(r=>e.tryGet(r.link,async()=>{let{id:e,name:i,link:o}=r,c=await n(o,{cookieJar:s}),l=a(c.data),{volume:u,issue:d}=l(`meta[property="og:url"]`).attr(`content`)?.match(/volumes\/(?<volume>\d+)\/issues\/(?<issue>\d+)/)?.groups??{},f=`<div align="center"><img src="${`https://media.springernature.com/full/springer-static/cover-hires/journal/${e}/${u}/${d}?as=webp`}" alt="Volume ${u} Issue ${d}"></div>`,p=l(`title`).text().split(`,`)[1].trim(),m=l(`div[data-test=issue-description]`).html()??``;return{title:`${i} | Volume ${u} Issue ${d}`,description:f+m,link:c.url,pubDate:t(p,`MMMM YYYY`)}})));return{title:`Nature Covers Story`,description:`Find out the cover story of some Nature journals.`,link:r,item:l}}export{s as route};