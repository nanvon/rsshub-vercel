import{ofetch_default as e}from"./ofetch-CISb_5Uo.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{X_UA as n,appDetail as r,getRootUrl as i}from"./utils-CE5weFyY.js";async function a(a){let o=a.req.path.replace(`/taptap`,``).startsWith(`/intl/`),s=a.req.param(`id`),c=a.req.param(`lang`)??(o?`en_US`:`zh_CN`),l=`${i(o)}/app/${s}`,u=await r(s,c,o),d=u.app.icon.original_url,f=u.app.title,p=`${f}${u.app.developers?` by`+u.app.developers.map(e=>e.name).join(` & `):``}`,m=(await e(`${i(o)}/webapiv2/apk/v1/list-by-app?app_id=${s}&from=0&limit=10&${n(c)}`,{headers:{Referer:l}})).data.list;return{title:`TapTap 更新记录 ${f}`,description:p,link:l,image:d,item:m.map(e=>({title:`${f} / ${e.version_label}`,description:e.whatsnew.text,pubDate:t(e.update_date,`X`),link:l,guid:e.version_label}))}}export{a as handler};