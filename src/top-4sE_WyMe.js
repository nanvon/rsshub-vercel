import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CbgiXYAi.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import"./render-CSnicFA3.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-Do9KqzqD.js";import{ViewType as r}from"./types-Bi82qguM.js";import{extractArticle as i,extractWork as a}from"./utils-D2B_oXNU.js";import{load as o}from"cheerio";const s={path:`/top/:type`,categories:[`design`],view:r.Pictures,example:`/zcool/top/design`,parameters:{type:{description:`推荐类型`,options:[{value:`design`,label:`作品榜单`},{value:`article`,label:`文章榜单`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`作品总榜单`,maintainers:[`yuuow`],handler:c};async function c(r){let s=`https://www.zcool.com.cn/top/${r.req.param(`type`)===`design`?`index.do`:`article.do?rankType=8`}`,{data:c}=await n(s),l=o(c),u=JSON.parse(l(`script#__NEXT_DATA__`).text()),d=u.props.pageProps.listResult.data.map(e=>({title:e.rankingTitle,author:e.member.name,category:[e.productCategoryStr,e.productSubCateStr,...e.tags],link:e.pageUrl,pubDate:t(e.rankingPublishTime)})),f=await Promise.all(d.map(r=>e.tryGet(r.link,async()=>{let{data:e}=await n(r.link),s=o(e),c=JSON.parse(s(`script#__NEXT_DATA__`).text());return r.pubDate=t(c.props.pageProps.data.publishTime,`x`),r.link.startsWith(`https://www.zcool.com.cn/article/`)?r.description=i(c):r.link.startsWith(`https://www.zcool.com.cn/work/`)&&(r.description=a(c)),r})));return{title:u.props.pageProps.seo.title,description:u.props.pageProps.seo.description,link:s,item:f}}export{s as route};