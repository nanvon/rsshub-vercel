import"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-DXVwJZV0.mjs";import"./helpers-mo8InLYm.mjs";import{t as e}from"./cache-ZTWfXd2T.mjs";import{t}from"./parse-date-bKmkZ9gg.mjs";import{t as n}from"./got-D6JCV29k.mjs";import{t as r}from"./timezone-CE0MDOJ-.mjs";import{load as i}from"cheerio";const a=`https://u9a9.com`,o={path:[`/:preview?`,`/search/:keyword/:preview?`],example:`/u9a9/search/新片速递`,radar:[{source:[`u9a9.com/`],target:``}],name:`Search`,maintainers:[`TonyRL`],handler:s,url:`u9a9.com/`};async function s(o){let{preview:s,keyword:c}=o.req.param(),l,u;c?(l=`${a}/?type=2&search=${c}`,u=`${c} - U9A9`):(l=a,u=`U9A9`);let{data:d}=await n(l),f=i(d),p=f(`table tr`).slice(1).toArray().map(e=>{e=f(e);let n=e.find(`td`).eq(1).find(`a`),{size:i,unit:o}=e.find(`td`).eq(3).text().match(/(?<size>\d+\.\d+)\s(?<unit>\w+)/).groups;return{title:n.attr(`title`),link:`${a}${n.attr(`href`)}`,pubDate:r(t(e.find(`td`).eq(4).text()),8),enclosure_url:e.find(`td`).eq(2).find(`a`).eq(1).attr(`href`),enclosure_length:Number.parseInt(i*(o===`GB`?1024*1024*1024:1024*1024)),enclosure_type:`application/x-bittorrent`}}),m=s?await Promise.all(p.map(t=>e.tryGet(t.link,async()=>{let{data:e}=await n(t.link);return t.description=i(e)(`.panel-body`).eq(1).html(),t}))):p;return{title:u,link:l,item:m}}export{o as route};