import"./esm-shims-2LyWUseo.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-BLnIkXRv.js";import"./helpers-gUVC02jt.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-DPq_2TLS.js";import{ViewType as n}from"./types-Bi82qguM.js";import{invalid_parameter_default as r}from"./invalid-parameter-B0jPSaWz.js";import{load as i}from"cheerio";const a={home:{type:`home`,name:`「DLsite 同人」`,url:`/home/new`},comic:{type:`comic`,name:`「DLsite コミック」`,url:`/comic/new`},soft:{type:`soft`,name:`「DLsite PCソフト」`,url:`/soft/new`},maniax:{type:`maniax`,name:`「DLsite 同人 - R18」`,url:`/maniax/new`},books:{type:`books`,name:`「DLsite 成年コミック - R18」`,url:`/books/new`},pro:{type:`pro`,name:`「DLsite 美少女ゲーム」`,url:`/pro/new`},girls:{type:`girls`,name:`「DLsite 乙女」`,url:`/girls/new`},bl:{type:`bl`,name:`「DLsite BL」`,url:`/bl/new`}},o={path:`/new/:type`,categories:[`anime`],view:n.Articles,example:`/dlsite/new/home`,parameters:{type:{description:`类型`,options:Object.values(a).map(e=>({value:e.type,label:e.name}))}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Current Release`,maintainers:[`cssxsh`],handler:s,description:`| Doujin | Comics | PC Games | Doujin (R18) | Adult Comics | H Games | Otome | BL |
| ------ | ------ | -------- | ------------ | ------------ | ------- | ----- | -- |
| home   | comic  | soft     | maniax       | books        | pro     | girls | bl |`};async function s(n){let o=a[n.req.param(`type`)];if(o===void 0)throw new r(`不支持指定类型！`);let s=o.url.slice(1),c=(await t(new URL(s,`https://www.dlsite.com`),{method:`GET`})).data,l=i(c),u=l(`title`).text(),d=l(`meta[name="description"]`).attr(`content`),f=l(`.n_worklist_item`),p=l(`.work_update`).text().trim().replaceAll(/（.*）/g,``),m=e(p,`YYYY年M月D日`),h=f.toArray().map(e=>{let t=l(`.work_name`,e).text(),n=l(`.work_name > a`,e).attr(`href`);l(`a`,e).each((e,t)=>{l(t).attr(`target`,`_blank`)});let r=l(e).html(),i=l(`.search_tag`,e),a=l(`a`,i).toArray().map(e=>l(e).text()),o=l(`.maker_name`,e).text();return{title:t,link:n,description:r,category:a,author:o,pubDate:m}});return{title:u,link:s,description:d,language:`ja-jp`,item:h}}export{o as route};