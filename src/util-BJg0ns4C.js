import{__dirname as e,init_esm_shims as t}from"./esm-shims-B6VgfGYP.js";import{ofetch_default as n}from"./ofetch-D4MiciTC.js";import{art as r}from"./render-CSnicFA3.js";import i from"node:path";import{load as a}from"cheerio";t();const o=`https://www.app-sales.net`,s=(e,t,n)=>t?.trim()?`[${[e&&`${e}â†’`,t,n&&` ${n}`].filter(Boolean).join(``)}]`:``,c=(t,n)=>t(n).toArray().map(n=>{let a=t(n),o=a.find(`p.app-name`).text()?.trim(),c=a.find(`p.app-dev`).text()?.trim(),l=a.find(`p.app-dev`).next(`p`)?.text()?.trim()??``,u=a.find(`p.rating`).contents().last().text()?.trim(),d=a.find(`p.downloads`).contents().last().text()?.trim(),f=a.find(`p.bookmarks`).contents().last().text()?.trim(),p=a.find(`div.price-new`).text()?.trim(),m=a.find(`div.price-old`).text()?.trim(),h=a.find(`div.price-disco`).text()?.trim(),g=a.hasClass(`sale-hot`),_=p?.toLocaleUpperCase()===`FREE`,v=`${o} ${s(m,p,h)}`,y=a.find(`div.app-icon img`).attr(`src`),b=a.find(`div.sale-list-action a`).attr(`href`),x=r(i.join(e,`templates/description-4540098f.art`),{images:y?[{alt:`${o}-${c}`,src:y}]:void 0,appName:o,appDev:c,appNote:l,rating:u,downloads:d,bookmarks:f,priceNew:p,priceOld:m,priceDisco:h,linkUrl:b}),S=[g?`Hot`:void 0,_?`Free`:void 0].filter(Boolean),C=c,w=[o,c,u,d,f,p].filter(Boolean).join(`-`);return{title:v.trim(),description:x,link:b,category:S,author:C,guid:w,id:w,content:{html:x,text:x},image:y,banner:y}}),l=(e,t)=>e(`ul.pagination li.waves-effect a`).slice(0,-1).toArray().filter(t=>e(t).attr(`href`)).map(n=>{let r=e(n);return new URL(r.attr(`href`),t).href}),u=async(e,t,r,i,o)=>{let s=c(e,t);if(s.length>=o)return s.slice(0,o);let u=async(e,r)=>{if(r.length>=o||e.length===0)return r.slice(0,o);let[s,...l]=e;try{let e=await n(s,{headers:{Cookie:`countryId=${i};`}}),d=c(a(e),t),f=[...r,...d];return f.length>=o?f.slice(0,o):u(l,f)}catch{return u(l,r)}};return await u(l(e,r),s)};export{o as baseUrl,u as fetchItems};