import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as r}from"./cache-Bv3_kFbE.mjs";import{t as i}from"./render-CSqLtqb8.mjs";import a from"node:path";import{load as o}from"cheerio";e();const s={path:`/journal/:journal`,categories:[`journal`],example:`/springer/journal/10450`,parameters:{journal:`Journal Code, the number in the URL from the journal homepage`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.springer.com/journal/:journal/*`]}],name:`Journal`,maintainers:[`Derekmini`,`TonyRL`,`xiahaoyun`],handler:c};async function c(e){let s=`https://link.springer.com`,c=`${s}/journal/${e.req.param(`journal`)}/volumes-and-issues`,l=await n.raw(`https://idp.springer.com/authorize`,{query:{response_type:`cookie`,client_id:`springerlink`,redirect_uri:c},redirect:`manual`}),u=l.headers.getSetCookie().map(e=>e.split(`;`)[0]).join(`; `);await n(l.headers.get(`location`),{headers:{cookie:u},redirect:`manual`});let d=o(await n(c,{headers:{cookie:u}})),f=d(`span.app-journal-masthead__title`).text().trim(),p=o(await n(`${s}${d(`li.c-list-group__item:first-of-type`).find(`a`).attr(`href`)}`,{headers:{cookie:u}})),m=p(`h2.app-journal-latest-issue__heading`).text(),h=p(`ol.u-list-reset > li`).toArray().map(e=>{let t=d(e).find(`h3.app-card-open__heading`).find(`a`).text().trim(),n=d(e).find(`h3.app-card-open__heading`).find(`a`).attr(`href`),r=n.replace(`https://link.springer.com/article/`,``),i=d(e).find(`img`).attr(`src`),a=d(e).find(`li`).toArray().map(e=>d(e).text().trim()).join(`; `);return{title:t,link:n.startsWith(`http`)?n:`${s}${n}`,doi:r,issue:m,img:i,authors:a}}),g=e=>i(a.join(t,`templates/description-d979b276.art`),{item:e});return{title:f,link:c,item:await Promise.all(h.map(e=>r.tryGet(e.link,async()=>(e.abstract=o(await n(e.link,{headers:{cookie:u}}))(`div#Abs1-content > p:first-of-type`).text(),e.description=g(e),e))))}}export{s as route};