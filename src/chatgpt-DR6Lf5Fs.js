import"./esm-shims-B6VgfGYP.js";import{config as e}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-D4MiciTC.js";import"./helpers-gUVC02jt.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{got_default as n}from"./got-07RFwdy7.js";import r from"dayjs";import i from"dayjs/plugin/isSameOrBefore.js";import{load as a}from"cheerio";r.extend(i);const o={path:`/chatgpt/release-notes`,categories:[`program-update`],example:`/openai/chatgpt/release-notes`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`ChatGPT - Release Notes`,maintainers:[],handler:s};async function s(){let i=`https://help.openai.com/en/articles/6825453-chatgpt-release-notes`,o=await t.tryGet(i,async()=>{let e=[],t=await n({method:`get`,url:i}),o=a(t.data),s=JSON.parse(o(`script#__NEXT_DATA__`).text()),c=s.props.pageProps.articleContent.title,l=s.props.pageProps.articleContent.description,u=s.props.pageProps.articleContent.author.name,d=s.props.pageProps.articleContent.blocks,f=r(),p=null,m={},h=f.year(),g=-1;for(let t of d){let n=(t.text||``).trim();if(!n)continue;if(t.type===`subheading`){p!==null&&(m.description=m.description.trim().replaceAll(`
`,`<br/>`),e.push(m),m={}),p=n,m.title=p,m.author=u,m.category=`ChatGPT`,m.link=i+`#`+t.idAttribute,m.guid=i+`#`+t.idAttribute,m.description=``;let a=p.match(/\((\w+\s+\d{1,2})\)$/);if(a!==null){let e=1+`Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec`.split(`,`).indexOf(a[1].slice(0,3));g!==-1&&g<e&&h--,g=e;let t=r(`${a[1]}, ${h}`,[`MMMM D, YYYY`,`MMM D, YYYY`],`en`,!0);m.pubDate=r(t.toISOString().replace(/\.\d{3}Z$/,`-08:00`));let n=t.format(`YYYY_MM_DD`);m.guid=i+`#`+n}}else m.description+=t.text.trim()+`

`}return p!==null&&(m.description=m.description.trim().replaceAll(`
`,`<br/>`),e.push(m)),{feedTitle:c,feedDesc:l,items:e}},e.cache.routeExpire,!1);return{title:o.feedTitle,description:o.feedDesc,link:i,item:o.items}}export{o as route};