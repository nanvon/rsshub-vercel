import"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import{logger as e}from"./logger-BsClR5PH.js";import"./dist-Bbb0mfHh.js";import{cache_default as t}from"./cache-DNP0KCHb.js";import{parseDate as n}from"./parse-date-Bgabdhlb.js";import{rofetch as r}from"./ofetch-Dnmc-sKl.js";import{parser as i}from"./rss-parser-D2FEVlMP.js";import{load as a}from"cheerio";const o={path:`/`,categories:[`finance`],example:`/cointelegraph`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`News`,maintainers:[`pseudoyu`],handler:s,radar:[{source:[`cointelegraph.com/`],target:`/`}],description:`Get latest news from Cointelegraph with full text.`};async function s(){let r=await i.parseURL(`https://cointelegraph.com/rss`),a=await Promise.all(r.items.filter(e=>e.link&&/\/news|\/explained|\/innovation-circle/.test(e.link)).map(e=>({...e,link:e.link?.split(`?`)[0]})).map(r=>t.tryGet(r.link,async()=>{let t=r.link,i=await c(t);return i||e.warn(`Failed to extract content from ${t}`),{title:r.title||`Untitled`,description:i||r.content,pubDate:r.pubDate?n(r.pubDate):void 0,link:t,author:r.creator||`CoinTelegraph`,category:r.categories?.map(e=>e.trim())||[],image:r.enclosure?.url}}))),o=a.filter(e=>e!==null);return{title:r.title||`CoinTelegraph News`,link:r.link||`https://cointelegraph.com`,description:r.description||`Latest news from CoinTelegraph`,language:r.language||`en`,item:o}}async function c(t){try{let e=await r(t),n=a(e),i=n(`script:contains("window.__NUXT__")`).text(),o=JSON.parse(i.match(/\.fullText=(".*?");/)?.[1]||`{}`),s=n(`.post-cover__image`);return s.find(`source`).remove(),s.find(`img`).removeAttr(`srcset`),s.find(`img`).attr(`src`,s.find(`img`).attr(`src`)?.match(/(https:\/\/s3\.cointelegraph\.com\/.+)/)?.[1]||``),s.html()+o||null}catch(t){return e.error(`Error fetching article content: ${t}`),null}}export{o as route};