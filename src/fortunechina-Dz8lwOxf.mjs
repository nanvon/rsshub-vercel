import"./esm-shims-DhF_MXa4.mjs";import{n as e}from"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import{t}from"./ofetch-DVhBwO41.mjs";import{t as n}from"./cache-KwJARS5Z.mjs";import{n as r,t as i}from"./parse-date-9Tu6hSFW.mjs";import{load as a}from"cheerio";const o=e({browser:`mobile safari`,os:`ios`,device:`mobile`}),s={path:`/:category?`,categories:[`new-media`],example:`/fortunechina`,parameters:{category:`分类，见下表，默认为首页`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`fortunechina.com/:category`,`fortunechina.com/`]}],name:`分类`,maintainers:[`nczitzk`],handler:c,description:`| 商业    | 领导力    | 科技 | 研究   |
| ------- | --------- | ---- | ------ |
| shangye | lindgaoli | keji | report |`};async function c(e){let s=e.req.param(`category`)??``,c=`https://www.fortunechina.com${s?`/${s}`:``}`,l=a(await t(c)),u=l(`.main`).find(s===``?`a:has(h2)`:`h2 a`).slice(0,e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`)):15).toArray().map(e=>{e=l(e);let t=e.attr(`href`);return{title:e.text(),link:t.indexOf(`http`)===0?t:`${c}/${e.attr(`href`)}`}});return u=await Promise.all(u.map(e=>n.tryGet(e.link,async()=>{let n=a(await t(e.link,{headers:{"User-Agent":o}})),s=n(`.date`).text(),c=s.match(/(\d{4}-\d{2}-\d{2})/);return c?e.pubDate=i(c[1]):(c=s.match(/(\d+小时前)/),c&&(e.pubDate=r(c[1]))),e.author=n(`.author`).text(),n(`.mod-info, .title, .eval-zan, .eval-pic, .sae-more, .ugo-kol, .word-text .word-box .word-cn`).remove(),e.description=n(e.link.includes(`content`)?`.contain .text`:`.contain .top`).html(),e.link.includes(`jingxuan`)?e.description+=n(`.eval-mod_ugo`).html():e.link.includes(`events`)?e.description=a(await t(`https://www.bagevent.com/event/${e.link.match(/\d+/)[0]}`))(`.page_con`).html():e.link.includes(`zhuanlan`)&&(e.description+=n(`.mod-word`).html()),e}))),{title:s?l(`title`).text():`财富中文网`,link:c,item:u}}export{s as route};