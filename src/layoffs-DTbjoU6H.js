import"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-CmdBCkM8.js";import{load as r}from"cheerio";const i=`https://airtable.com/embed/shrqYt5kSqMzHV9R5/tbl8c8kanuNB6bPYr`,a=function(e){let t=new Map,n=new Map;for(let r in e)`name`in e[r]&&`id`in e[r]&&(n.set(e[r].name,e[r].id),t.set(e[r].id,e[r].name));return[t,n]},o={path:`/`,radar:[{source:[`layoffs.fyi/`],target:``}],name:`Unknown`,maintainers:[`BrandNewLifeJackie26`],handler:s,url:`layoffs.fyi/`};async function s(){let o={"x-airtable-application-id":`app1PaujS9zxVGUZ4`,"x-airtable-inter-service-client":`webClient`,"x-requested-with":`XMLHttpRequest`,"x-time-zone":`America/Los_Angeles`},s=await e.get(i),c=!1,l;if(s)try{l=await n({method:`get`,url:s,headers:o}),l.statusCode>=400&&(c=!0)}catch{c=!0}else c=!0;if(c){let t=await n({method:`get`,url:i});s=`https://airtable.com`+r(t.data)(`script`).text().match(/urlWithParams: "(.*?)"/)[1].replaceAll(String.raw`\u002F`,`/`),e.set(i,s),l=await n({method:`get`,url:s,headers:o})}let u=l.data.data.table,d=a(u.columns)[1],f=d.get(`Company`),p=d.get(`Date Added`),m=d.get(`# Laid Off`),h=d.get(`Source`),g=d.get(`Country`),_=a(u.columns.find(e=>e.name===`Country`).typeOptions.choices)[0];return{title:`Tech layoff data feed from layoffs.fyi`,link:`https://layoffs.fyi`,description:`This feed gets tech layoff data from layoffs.fyi and display them in a user friendly way`,item:u.rows.slice(0,100).map(e=>{let n=e.cellValuesByColumnId,r=n[f],i=t(n[p]),a=n[h],o=n[m]||`some`,s=_.get(n[g]),c=`${r} Layoffs Happening!`,l=`${r} lays off ${o} employees in ${s}. For more details, please visit ${a}.`;return{title:c,description:l,pubDate:i,link:a}})}}export{o as route};