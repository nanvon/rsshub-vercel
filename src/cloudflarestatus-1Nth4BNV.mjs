import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as r}from"./parse-date-_GmTZfjS.mjs";import{t as i}from"./render-CSqLtqb8.mjs";import{t as a}from"./types-CaC5w-Pp.mjs";import o from"node:path";import{load as s}from"cheerio";e();const c=async e=>{let a=Number.parseInt(e.req.query(`limit`)??`100`,10),c=`https://www.cloudflarestatus.com`,l=s(await n(c)),u=l(`html`).attr(`lang`)??`en`;l(`div.incidents-list`).remove();let d=l(`div.update`).slice(0,a).toArray().map(e=>{let n=l(e),a=n.parent().parent().find(`a`),s=a.text(),d=n.find(`strong`).first().text(),f=n.find(`span.whitespace-pre-wrap`).first().text(),p=`${d?`${d} - `:``}${f}`,m=i(o.join(t,`templates/description-39418569.art`),{actualTitle:s,description:n.html()}),h=n.find(`span.ago`).attr(`data-datetime-unix`),g=a.attr(`href`)?new URL(a.attr(`href`),c).toString():void 0,_=[d].filter(Boolean),v=g?`${g}#${h}`:``,y=h;return{title:p,description:m,pubDate:h?r(h,`x`):void 0,link:g,category:_,guid:v,id:v,content:{html:m,text:m},updated:y?r(y,`x`):void 0,language:u}});return{title:l(`title`).text(),description:l(`meta[name="description"]`).attr(`content`),link:c,item:d,allowEmpty:!0,language:u,id:c}},l={path:`/`,name:`Status`,url:`www.cloudflarestatus.com`,maintainers:[`nczitzk`],handler:c,example:`/cloudflarestatus`,parameters:void 0,description:void 0,categories:[`programming`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.cloudflarestatus.com`],target:`/`}],view:a.Notifications};export{c as handler,l as route};