import{n as e,t}from"./esm-shims-L08rKynx.mjs";import{t as n}from"./render-CBhnapAf.mjs";import{t as r}from"./parse-date-bKmkZ9gg.mjs";import{t as i}from"./got-Be7Twwza.mjs";import{t as a}from"./timezone-CE0MDOJ-.mjs";import o from"node:path";import{load as s}from"cheerio";import c from"iconv-lite";e();const l=`https://www.56kog.com`,u=async(e,u,d)=>{let{data:f}=await i(u,{responseType:`buffer`}),p=s(c.decode(f,`gbk`)),m=p(`p.line`).toArray().map(e=>{e=p(e);let t=e.find(`a`);return{title:t.text(),link:new URL(t.prop(`href`),l).href,author:e.find(`span`).last().text()}});m=await Promise.all(m.map(e=>d(e.link,async()=>{try{let{data:u}=await i(e.link,{responseType:`buffer`}),d=s(c.decode(u,`gbk`)),f=d(`div.mohe-content p`).toArray().map(e=>{e=d(e);let t=e.find(`a`);return{label:e.find(`span.c-l-depths`).text().split(/：/)[0],value:t.length===0?d(e.contents().toArray().find(e=>e.nodeType===3)).text().trim():{href:new URL(t.first().prop(`href`),l).href,text:t.first().text().trim()}}}),p=f.find(e=>e.label===`更新`).value;e.title=d(`h1`).contents().first().text(),e.description=n(o.join(t,`templates/description-81e40009.art`),{images:[{src:new URL(d(`a.mohe-imgs img`).prop(`src`),l).href,alt:e.title}],details:f}),e.author=f.find(e=>e.label===`作者`).value,e.category=[f.find(e=>e.label===`状态`).value,f.find(e=>e.label===`类型`).value.text].filter(Boolean),e.guid=`56kog-${e.link.match(/\/(\d+)\.html$/)[1]}#${p}`,e.pubDate=a(r(p),8)}catch{}return e})));let h=new URL(`favicon.ico`,l).href;return{item:m.filter(e=>e.description).slice(0,e),title:p(`title`).text(),link:u,description:p(`meta[name="description"]`).prop(`content`),language:p(`html`).prop(`lang`),icon:h,logo:h,subtitle:p(`meta[name="keywords"]`).prop(`content`),author:p(`div.uni_footer a`).text(),allowEmpty:!0}};export{l as n,u as t};