import{__dirname as e,init_esm_shims as t}from"./esm-shims-2LyWUseo.js";import{config as n}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-BLnIkXRv.js";import"./helpers-gUVC02jt.js";import{cache_default as r}from"./cache-Dfid4xgQ.js";import{art as i}from"./render-CSnicFA3.js";import{got_default as a}from"./got-DPq_2TLS.js";import o from"node:path";import{load as s}from"cheerio";t();const c={path:`/:appId`,categories:[`program-update`],example:`/winstall/Mozilla.Firefox`,parameters:{appId:`Application ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`winstall.app/apps/:appId`]}],name:`Apps Update`,maintainers:[`TonyRL`],handler:l};async function l(t){let c=`https://winstall.app`,l=t.req.param(`appId`),u=await r.tryGet(`winget:buildId`,async()=>{let{data:e}=await a(c),t=s(e);return JSON.parse(t(`#__NEXT_DATA__`).text()).buildId},n.cache.routeExpire,!1),{data:d}=await a(`${c}/_next/data/${u}/apps/${l}.json`),{app:f}=d.pageProps,p=f.versions.map(t=>({title:`${f.name} ${t.version}`,description:i(o.join(e,`templates/desc-22b8f3f4.art`),{installers:t.installers}),author:f.publisher,category:f.tags,guid:`winstall:${l}:${t.version}`}));return{title:`${f.name} - winstall`,description:f.desc,link:`${c}/apps/${l}`,image:`https://api.winstall.app/icons/next/${l}.webp`,language:`en`,item:p}}export{c as route};