import{__dirname as e,init_esm_shims as t}from"./esm-shims-B6VgfGYP.js";import{ofetch_default as n}from"./ofetch-CHIwZNTj.js";import{art as r}from"./render-CSnicFA3.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import a from"node:path";t();async function o(t){let o=`https://go-api.twreporter.org/v2/posts/${t}?full=true`,s=(await n(o)).data,c=s.published_date,l=``;s.writers&&(l=s.writers.map(e=>e.job_title?e.job_title+` / `+e.name:`文字 / `+e.name).join(`，`));let u=``;s.photographers&&(u=s.photographers.map(e=>{let t=`攝影 / `;return e.job_title&&(t=e.job_title+` / `),t+e.name}).join(`，`),l+=`；`+u);let d=s.hero_image.resized_targets.desktop.url,f=s.leading_image_description,p=s.hero_image.description,m=s.og_description,h=r(a.join(e,`templates/image-51014ea7.art`),{image:d,description:p,caption:f});function g(t,n){let i=``;if(n!==``&&t!==`embeddedcode`)switch(t){case`image`:case`slideshow`:i=n.map(t=>r(a.join(e,`templates/image-51014ea7.art`),{image:t.desktop.url,description:t.description,caption:t.description})).join(`<br>`);break;case`blockquote`:i=`<blockquote>${n}</blockquote>`;break;case`header-one`:i=`<h1>${n}</h1>`;break;case`header-two`:i=`<h2>${n}</h2>`;break;case`infobox`:{let e=n[0];i=`<h2>${e.title}</h2>${e.body}`;break}case`youtube`:{let t=n[0].youtubeId.split(`?`)[0];i=r(a.join(e,`templates/youtube-b2c9673c.art`),{video:t});break}case`quoteby`:{let e=n[0];i=`<blockquote>${e.quote}</blockquote><p>${e.quoteBy}</p>`;break}default:i=`${n}<br>`}return i}let _=s.content.api_data.map(e=>{let t=e.content,n=e.type;return g(n,t)}).filter(Boolean).join(`<br>`),v=[h,m,_].filter(Boolean).join(`<br><br>`);return{author:l,description:v,link:`https://www.twreporter.org/a/${t}`,guid:`https://www.twreporter.org/a/${t}`,pubDate:i(c,`YYYY-MM-DDTHH:mm:ssZ`)}}export{o as fetch};