import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import{t as n}from"./logger-asV68Lay.js";import"./proxy-CczVputb.js";import{t as r}from"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as i}from"./cache-CpEhLexq.js";import{t as a}from"./render-d6AVTUl2.js";import{t as o}from"./parse-date-CHEO0z5G.js";import{t as s}from"./got-BlqYKpVp.js";import{t as c}from"./timezone-BPfwRbwD.js";import{n as l}from"./puppeteer-e0F06Yyi.js";import u from"node:path";import{load as d}from"cheerio";e();async function f(e,t){try{let n=``,r=await t.newPage();return await r.setRequestInterception(!0),r.on(`request`,e=>{let t=e.resourceType();[`document`,`script`,`stylesheet`,`xhr`].includes(t)?e.continue():e.abort()}),await r.goto(e.link,{waitUntil:`networkidle0`,timeout:29e3}),await r.evaluate(e=>document.querySelector(e).click(),`.item-left .item .title .button`),await r.waitForSelector(`.item-left .item .bg_box div:nth-child(16)`,{timeout:5e3}),n=await r.content(),n||``}catch(e){return n.error(`Error when visiting /gov/hangzhou/zwfw:`,e),``}}function p(e){return{serviceInfo:{serviceTarget:e.find(`.row:nth(1)>div:nth(1)`).find(`.inner`).children().first().attr(`content`),processingMethods:e.find(`.row:nth(1)>div:nth(3)`).find(`.inner`).text(),processingLocation:e.find(`.row:nth(2)>div:nth(1)`).find(`.inner`).text(),processingTime:e.find(`.row:nth(3)>div:nth(1)`).find(`.inner`).text()},applicationInfo:{acceptanceConditions:e.find(`.row:nth(5)>div:nth(1)`).find(`.inner`).text(),prohibitedRequirements:e.find(`.row:nth(6)>div:nth(1)`).find(`.inner`).text(),quantityRestrictions:e.find(`.row:nth(7)>div:nth(1)`).find(`.inner`).text()},resultInfo:{approvalResult:e.find(`.row:nth(9)>div:nth(1)`).find(`.inner`).text(),approvalSample:e.find(`.row:nth(10)>div:nth(1)`).find(`.inner`).html(),approvalResultType:e.find(`.row:nth(10)>div:nth(3)`).find(`.inner`).text()},feeInfo:{isThereAFee:e.find(`.row:nth(12)>div:nth(1)`).find(`.inner`).text(),isOnlinePaymentSupported:e.find(`.row:nth(12)>div:nth(3)`).find(`.inner`).text()},approvalInfo:{authoritySource:e.find(`.row:nth(14)>div:nth(1)`).find(`.inner`).text(),exerciseLevel:e.find(`.row:nth(15)>div:nth(1)`).find(`.inner`).text(),implementingEntity:e.find(`.row:nth(15)>div:nth(3)`).find(`.inner`).text()},deliveryInfo:{isLogisticsSupported:e.find(`.row:nth(17)>div:nth(1)`).find(`.inner`).text(),deliveryTimeframe:e.find(`.row:nth(17)>div:nth(3)`).find(`.inner`).text(),deliveryMethods:e.find(`.row:nth(18)>div:nth(1)`).find(`.inner`).text()},agentService:e.find(`.row:nth(20)>div:nth(1)`).find(`.inner`).text(),otherInfo:{departmentName:e.find(`.row:nth(22)>div:nth(1)`).find(`.inner`).text(),matterType:e.find(`.row:nth(22)>div:nth(3)`).find(`.inner`).text(),acceptingInstitution:e.find(`.row:nth(23)>div:nth(1)`).find(`.inner`).text(),basicCode:e.find(`.row:nth(24)>div:nth(1)`).find(`.inner`).text(),implementationCode:e.find(`.row:nth(24)>div:nth(3)`).find(`.inner`).text(),scopeOfGeneralHandling:e.find(`.row:nth(25)>div:nth(1)`).find(`.inner`).text(),documentType:e.find(`.row:nth(25)>div:nth(3)`).find(`.inner`).text(),decisionMakingAuthority:e.find(`.row:nth(26)>div:nth(1)`).find(`.inner`).text(),delegatedDepartment:e.find(`.row:nth(26)>div:nth(3)`).find(`.inner`).text(),onlineProcessingDepth:e.find(`.row:nth(27)>div:nth(1)`).find(`.inner`).text(),reviewType:e.find(`.row:nth(27)>div:nth(3)`).find(`.inner`).text(),isItAvailableInTheGovernmentServiceHall:e.find(`.row:nth(28)>div:nth(1)`).find(`.inner`).text(),isSelfServiceTerminalProcessingSupported:e.find(`.row:nth(28)>div:nth(3)`).find(`.inner`).text(),isACommitmentSystemImplemented:e.find(`.row:nth(29)>div:nth(1)`).find(`.inner`).text(),authorityAttribute:e.find(`.row:nth(29)>div:nth(3)`).find(`.inner`).text(),isAppointmentBookingSupported:e.find(`.row:nth(30)>div:nth(1)`).find(`.inner`).text(),isOnlineProcessingAvailable:e.find(`.row:nth(30)>div:nth(3)`).find(`.inner`).text(),naturalPersonThemeClassification:e.find(`.row:nth(31)>div:nth(1)`).find(`.inner`).text(),legalPersonThemeClassification:e.find(`.row:nth(31)>div:nth(3)`).find(`.inner`).text(),rightsAndObligationsOfAdministrativeCounterparties:e.find(`.row:nth(32)>div:nth(1)`).find(`.inner`).text(),applicableObjectDescription:e.find(`.row:nth(33)>div:nth(1)`).find(`.inner`).text(),contentInvolved:e.find(`.row:nth(34)>div:nth(1)`).find(`.inner`).text()}}}const m={path:`/hangzhou/zwfw`,categories:[`government`],example:`/gov/hangzhou/zwfw`,features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hangzhou.gov.cn/col/col1256349/index.html`]}],name:`政务服务公开`,maintainers:[`flynncao`],handler:h,url:`hangzhou.gov.cn/col/col1256349/index.html`};async function h(){let e=`https://www.hangzhou.gov.cn/col/col1256349/index.html`,n=await r(e),m=await l(),h=d(n.replace(`<script type="text/xml">`,``).replace(`<\/script>`,``).replaceAll(`<recordset>`,``).replaceAll(`</recordset>`,``).replaceAll(`<record>`,``).replaceAll(`</record>`,``).replaceAll(`<![CDATA[`,``).replaceAll(`]]>`,``)),g=h(`li.clearfix`).toArray().map(t=>{t=h(t);let n=t.find(`a`).first().text(),r=c(o(t.find(`span`).first().text(),`YYYY-MM-DD`),8),i=t.find(`a`).first().attr(`href`);return{title:n,link:new URL(i,e).href,pubDate:r}}).filter(e=>!e.title.includes(`置顶`)),_=await Promise.all(g.map(e=>i.tryGet(e.link,async()=>{let n=new URL(e.link).hostname;if(n===`www.zjzwfw.gov.cn`){let n=d(await f(e,m));e.description=a(u.resolve(t,`templates/jbxx-81ef584c.art`),p(n(`.item-left .item .bg_box`))),e.author=`浙江政务服务网`,e.category=n(`meta[name="ColumnType"]`).attr(`content`)}else{let t=d((await s(e.link)).data);n===`police.hangzhou.gov.cn`?(e.description=t(`.art-content .wz_con_content`).html(),e.author=t(`meta[name="ContentSource"]`).attr(`content`),e.category=t(`meta[name="ColumnType"]`).attr(`content`)):(e.description=t(`.article`).html(),e.author=t(`meta[name="ContentSource"]`).attr(`content`),e.category=t(`meta[name="ColumnType"]`).attr(`content`))}return e.pubDate=h(`meta[name="PubDate"]`).length?c(o(h(`meta[name="PubDate"]`).attr(`content`),`YYYY-MM-DD HH:mm`),8):e.pubDate,e})));return await m.close(),{allowEmpty:!0,title:`杭州市人民政府-政务服务公开`,link:`https://www.hangzhou.gov.cn/col/col1256349/index.html`,item:_}}export{m as route};