import{n as e,t}from"./esm-shims-mGm6WwCc.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import{t as i}from"./got-CgQXMNWI.js";import{t as a}from"./invalid-parameter-CLGd_tte.js";import o from"node:path";e();const s=e=>e(`4gamers:categories`,async()=>{let{data:e}=await i(`https://www.4gamers.com.tw/site/api/news/category`);return e.data.map(e=>({id:e.id,name:e.name}))}),c=e=>e.map(e=>({title:e.title,author:e.author.nickname,intro:e.intro,pubDate:r(e.createPublishedAt,`x`),link:e.canonicalUrl,category:[...new Set([e.category.name,...e.tags])],articleId:e.id})),l=async e=>{let{data:t}=await i(`https://www.4gamers.com.tw/site/api/news/find-section`,{searchParams:{sub:e.articleId}});return e.description=u(e.intro,t.data.contentSection.sections.map(t=>{switch(t[`@type`]){case`ContentAdsSection`:case`ScrollerAdsSection`:case`textScrollerAdsSection`:return``;case`RawHtmlSection`:return t.html;case`ImageGroupSection`:return d(t.items);default:throw new a(`Unhandled section type: ${t[`@type`]} on ${e.link}`)}}).join(``)),e},u=(e,r)=>n(o.join(t,`templates/description-f7ad79ff.art`),{intro:e,content:r}),d=e=>n(o.join(t,`templates/image-6e82a0bb.art`),{images:e});export{l as n,c as r,s as t};