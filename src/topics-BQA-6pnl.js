import"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import"./cache-CpEhLexq.js";import"./parse-date-CHEO0z5G.js";import{t as e}from"./got-BlqYKpVp.js";import{t}from"./types-Bn7An2Wc.js";import{n,t as r}from"./utils-YrykeOkq.js";import{load as i}from"cheerio";import a from"p-map";const o=`https://apnews.com`,s={path:[`/topics/:topic?`,`/nav/:nav{.*}?`],categories:[`traditional-media`],example:`/apnews/topics/apf-topnews`,view:t.Articles,parameters:{topic:{description:"Topic name, can be found in URL. For example: the topic name of AP Top News [https://apnews.com/apf-topnews](https://apnews.com/apf-topnews) is `apf-topnews`",default:`trending-news`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`apnews.com/hub/:topic`],target:`/topics/:topic`}],name:`Topics`,maintainers:[`zoenglinghou`,`mjysci`,`TonyRL`],handler:c};async function c(t){let{topic:s=`trending-news`,nav:c=``}=t.req.param(),l=t.req.routePath===`/apnews/nav/:nav{.*}?`?`${o}/${c}`:`${o}/hub/${s}`,u=i((await e(l)).data),d=u(`:is(.PagePromo-content, .PageListStandardE-leadPromo-info) bsp-custom-headline`).toArray().slice(0,t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):1/0).map(e=>({title:u(e).find(`span.PagePromoContentIcons-text`).text(),link:u(e).find(`a`).attr(`href`)})).filter(e=>typeof e.link==`string`),f=t.req.query(`fulltext`)===`true`?await a(d,e=>r(e),{concurrency:10}):d;return{title:u(`title`).text(),description:u(`meta[property='og:description']`).text(),link:l,item:n(f,`link`),language:u(`html`).attr(`lang`)}}export{s as route};