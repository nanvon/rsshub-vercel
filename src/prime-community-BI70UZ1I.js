import"./esm-shims-BGJi2y--.js";import{config as e}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as t}from"./ofetch-rK3Yp7nj.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";const r={path:`/prime/community`,categories:[`new-media`],example:`/sspai/prime/community`,features:{requireConfig:[{name:`SSPAI_BEARERTOKEN`,optional:!1,description:"少数派会员账号认证 token。获取方式：登陆后打开少数派会员社区界面，打开浏览器开发者工具中 “网络”(Network) 选项卡，筛选 URL 找到任一个地址为 `sspai.com/api` 开头的请求，点击检查其 “消息头”，在 “请求头” 中找到Authorization字段，将其值复制填入配置即可。你的配置应该形如 `SSPAI_BEARERTOKEN: 'Bearer eyJxxxx......xx_U8'`。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`sspai.com/community`]}],name:`会员社区`,maintainers:[`mintyfrankie`],handler:i};async function i(){let r,i=await n.get(`sspai:token`);i?r=i:e.sspai.bearertoken?(r=e.sspai.bearertoken,n.set(`sspai:token`,e.sspai.bearertoken)):r=`Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjcyNzU3NiIsInR5cGUiOiJ1c2VyIiwiZXhwIjoxNzQ4NTI2MDEzfQ.di8RB-lxHI_JMBQHFd2xhcpk6Zd_3bvfQlAti6HAuZA`;let a={Authorization:r},o=(await t(`https://sspai.com/api/v1/community/page/get`,{headers:a})).data.map(e=>({title:e.title,link:`https://sspai.com/t/${e.id_hash}`,pubDate:new Date(e.created_at*1e3),author:e.author.nickname,category:e.channel.title,id_hash:e.id_hash}));return{title:`少数派会员社区`,link:`https://sspai.com/community`,lang:`zh-CN`,description:`少数派会员社区`,item:await Promise.all(o.map(e=>n.tryGet(e.link,async()=>(e.description=(await t(`https://sspai.com/api/v1/community/topic/single/info/get?id_hash=${e.id_hash}`,{headers:a})).data.body||`No content`,e))))}}export{r as route};