import{n as e,t}from"./esm-shims-BC3isTv8.js";import{t as n}from"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as r}from"./ofetch-CfXAR0UO.js";import{t as i}from"./cache-CpEhLexq.js";import{t as a}from"./render-d6AVTUl2.js";import{t as o}from"./parse-date-CHEO0z5G.js";import s from"node:path";import{load as c}from"cheerio";e();const l={path:`/today`,categories:[`other`],example:`/producthunt/today`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.producthunt.com/`]}],name:`Top Products Launching Today`,maintainers:[`miaoyafeng`,`Fatpandac`],handler:u,url:`www.producthunt.com/`};async function u(){let e=c(await r(`https://www.producthunt.com/`,{headers:{"User-Agent":n.trueUA}}))(`script:contains("ApolloSSRDataTransport")`).text().match(/"events":(\[.+\])\}\)/)?.[1]?.trim().replaceAll(`undefined`,`null`),l=JSON.parse(e).find(e=>e.type===`next`&&e.value.data.homefeed).value.data.homefeed.edges.find(e=>e.node.id===`FEATURED-0`).node.items.filter(e=>e.__typename===`Post`).map(e=>({title:e.name,link:`https://www.producthunt.com/products/${e.product.slug}`,postSlug:e.slug,description:e.tagline,pubDate:o(e.createdAt),image:`https://ph-files.imgix.net/${e.thumbnailImageUuid}`,categories:e.topics.edges.map(e=>e.node.name)}));return{title:`Product Hunt Today Popular`,link:`https://www.producthunt.com/`,item:await Promise.all(l.map(e=>i.tryGet(e.link,async()=>{let i=(await r(`https://www.producthunt.com/frontend/graphql`,{method:`POST`,headers:{"User-Agent":n.trueUA},body:{operationName:`PostPage`,variables:{slug:e.postSlug},extensions:{persistedQuery:{version:1,sha256Hash:`488585149898ee974a51884b11e205c34ea8ad34ee01d47d7936a66a6db799ff`}}}})).data.post;return e.author=i.user.name,e.description=a(s.join(t,`templates/description-994faa20.art`),{tagline:i.tagline,description:i.description,media:i.media}),e})))}}export{l as route};