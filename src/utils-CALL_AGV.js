import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import{art as n}from"./render-CSnicFA3.js";import{got_default as r}from"./got-BOnMlRH6.js";import i from"node:path";import{load as a}from"cheerio";t();const o=(t,o)=>o(t.link,async()=>{let o=await r(t.link,{responseType:`buffer`}),s=a(o.data);s(`.post_main img`).each((e,t)=>{if(!t.attribs.src)return;let n=new URL(t.attribs.src);n.host===`nimg.ws.126.net`&&(t.attribs.src=n.searchParams.get(`url`))});let c=t.imgsrc?new URL(t.imgsrc).searchParams.get(`url`):!1;return t.description=n(i.join(e,`templates/dy-b6e04c69.art`),{imgsrc:c,postBody:s(`.post_body`).html()}),t.feedLink=s(`.post_wemedia_name a`).attr(`href`),t.feedDescription=s(`.post_wemedia_title`).text(),t.feedImage=s(`.post_wemedia_avatar img`).attr(`src`),t});export{o as parseDyArticle};