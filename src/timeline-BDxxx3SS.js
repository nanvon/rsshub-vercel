import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./cache-CpEhLexq.js";import{t as n}from"./render-d6AVTUl2.js";import{t as r}from"./parse-date-CHEO0z5G.js";import{a as i,i as a,o,r as s,t as c}from"./utils-DegRjrJx.js";import l from"node:path";e();const u={path:[`/timeline/:user`],categories:[`social-media`],example:`/cara/timeline/fengz`,parameters:{user:`username`},name:`Timeline`,maintainers:[`KarasuShin`],handler:d,radar:[{source:[`cara.app/:user`,`cara.app/:user/*`],target:`/timeline/:user`}]};async function d(e){let u=e.req.param(`user`),d=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`),10):15,f=await s(u),p=(await c(`${a}/posts/getAllByUser?slug=${f.slug}&take=${d}`)).data.map(e=>{let a=n(l.join(t,`templates/post-1d7f2a4f.art`),{content:e.content,images:e.images.filter(e=>!e.isCoverImg).map(e=>({...e,src:`${i}/${e.src}`}))});return{title:e.title||e.content,pubDate:r(e.createdAt),link:`${o}/post/${e.id}`,description:a}});return{title:`Timeline - ${f.name}`,link:`${o}/${u}/all`,image:`${i}/${f.photo}`,item:p}}export{u as route};