import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-rK3Yp7nj.js";import"./helpers-qpI1t-yV.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-DftO2d-b.js";import"./parse-date-DHsdom8D.js";import"./md5-15Cn4YyR.js";import"./got-CoH3ye0k.js";import"./config-not-found-B7nOMdXp.js";import{defaultDomain as i,getApiUrl as a,getRootUrl as o,processApiItems as s}from"./utils-C_ehVyrv.js";import c from"node:path";t();const l={path:`/album/:id`,categories:[`anime`],example:`/18comic/album/292282`,parameters:{id:`专辑 id，可在专辑页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`jmcomic.group/`]}],name:`专辑`,maintainers:[`nczitzk`],handler:u,url:`jmcomic.group/`,description:`::: tip
  专辑 id 不包括 URL 中标题的部分。
:::`};async function u(t){let l=t.req.param(`id`),{domain:u=i}=t.req.query(),d=o(u),f=`${d}/album/${l}`,p=await s(`${a()}/album?id=${l}`),m=p.tags,h=p.author.join(`, `),g=p.description,_=p.addtime,v=[];return p.series.length===0?v.push({title:p.name,link:`${d}/photo/${l}`,guid:`${d}/photo/${l}`,updated:new Date(_*1e3),pubDate:new Date(_*1e3),category:m,author:h,description:r(c.join(e,`templates/description-afe7e434.art`),{introduction:g,images:[`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`,category:m})}):(v=await Promise.all(p.series.map((t,i)=>n.tryGet(`18comic:album:${t.id}`,async()=>{let n=await s(`${a()}/chapter?id=${t.id}`),o={},l=i+1;return o.title=`第${String(l)}話 ${t.name===``?`${String(l)}`:t.name}`,o.link=`${d}/photo/${t.id}`,o.guid=`${d}/photo/${t.id}`,o.updated=new Date(n.addtime*1e3),o.pubDate=_,o.category=m,o.author=h,o.description=r(c.join(e,`templates/description-afe7e434.art`),{introduction:g,images:[`https://cdn-msp3.${u}/media/albums/${t.id}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${t.id}_3x4.jpg`,category:m}),o}))),v=v.toReversed()),{title:`${p.name} - 禁漫天堂`,link:f.replace(/\?$/,``),item:v,allowEmpty:!0,description:g}}export{l as route};