import{n as e,t}from"./esm-shims-DIdKin6S.mjs";import"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import"./ofetch-rVU2XYFs.mjs";import"./helpers-vRt84cId.mjs";import{t as n}from"./render-ZYpwNl2L.mjs";import{t as r}from"./parse-date-9Tu6hSFW.mjs";import{t as i}from"./got-BeQM9q-W.mjs";import a from"node:path";e();const o={global:`要闻`,"a-stock":`A股`,"us-stock":`美股`,"hk-stock":`港股`,forex:`外汇`,commodity:`商品`,financing:`理财`},s={path:`/live/:category?/:score?`,categories:[`finance`],example:`/wallstreetcn/live`,parameters:{category:"快讯分类，默认`global`，见下表",score:"快讯重要度，默认`1`全部快讯，可设置为`2`只看重要的"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wallstreetcn.com/live/:category`,`wallstreetcn.com/`],target:`/live/:category?`}],name:`实时快讯`,maintainers:[`nczitzk`],handler:c,description:`| 要闻   | A 股    | 美股     | 港股     | 外汇  | 商品      | 理财      |
| ------ | ------- | -------- | -------- | ----- | --------- | --------- |
| global | a-stock | us-stock | hk-stock | forex | commodity | financing |`};async function c(e){let s=e.req.param(`category`)??`global`,c=e.req.param(`score`)??1,l=`https://wallstreetcn.com/live/${s}`,u=(await i({method:`get`,url:`https://api-one.wallstcn.com/apiv1/content/lives?channel=${s}-channel&limit=${e.req.query(`limit`)??100}`})).data.data.items.filter(e=>e.score>=c).map(e=>({link:e.uri,title:e.title||e.content_text,pubDate:r(e.display_time*1e3),author:e.author?.display_name??``,description:n(a.join(t,`templates/description-e596fdfe.art`),{description:e.content,more:e.content_more,images:e.images})}));return{title:`华尔街见闻 - 实时快讯 - ${o[s]}`,link:l,item:u}}export{s as route};