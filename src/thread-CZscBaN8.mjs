import"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import{t as e}from"./ofetch-DXVwJZV0.mjs";import{t}from"./cache-ZTWfXd2T.mjs";import{t as n}from"./parse-date-bKmkZ9gg.mjs";const r={path:`/threads/:type?`,categories:[`bbs`],example:`/deepin/threads/latest`,parameters:{type:{description:`主题类型`,options:[{value:`hot`,label:`最热主题`},{value:`latest`,label:`最新主题`}]}},name:`首页主题列表`,maintainers:[`myml`],radar:[{source:[`bbs.deepin.org`],target:`/threads/latest`}],handler:a},i={hot:{where:`hot_value`,title:`最热主题`},latest:{where:`id`,title:`最新主题`}};async function a(r){let a=i.latest;r.req.param(`type`)===`hot`&&(a=i.hot);let o=await e(`https://bbs.deepin.org.cn/api/v1/thread/index`,{query:{languages:`zh_CN`,order:`updated_at`,where:a.where},headers:{accept:`application/json`}}),s=await Promise.all(o.ThreadIndex.map(r=>{let i=`https://bbs.deepin.org.cn/post/`+r.id;return t.tryGet(i,async()=>{let t={id:String(r.id),title:r.subject,link:i,pubDate:n(r.created_at),author:r.user.nickname,category:[r.forum.name],description:``},a=await e(`https://bbs.deepin.org.cn/api/v1/thread/info?id=`+t.id);return a&&(t.description=a.data.post.message),t})}));return{title:`deepin论坛主页 - `+a.title,link:`https://bbs.deepin.org`,item:s}}export{r as route};