import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-rK3Yp7nj.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{got_default as t}from"./got-Bnno2HfO.js";import*as n from"node:url";import{load as r}from"cheerio";const i={path:`/xjpjh/:keyword?/:year?`,categories:[`traditional-media`],example:`/people/xjpjh`,parameters:{keyword:`关键词，默认不填`,year:`年份，默认 all`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`people.com.cn/`],target:`/:site?/:category?`}],name:`习近平系列重要讲话`,maintainers:[],handler:a,url:`people.com.cn/`};async function a(i){let a=i.req.param(`keyword`)||`all`,o=i.req.param(`year`)||0,s=`习近平系列重要讲话`;s=s+`-`+a,a===`all`&&(a=``),o===0?s+=`-all`:(s=s+`-`+o,o-=1811);let c=`http://jhsjk.people.cn/result?keywords=${a}&year=${o}`,l=r((await t.get(c)).data),u=l(`ul.list_14.p1_2.clearfix li`).slice(0,10).toArray().map(e=>({title:l(e).find(`a`).text(),link:l(e).find(`a`).attr(`href`)})),d=await Promise.all(u.map(async i=>{let a=i.title,o=n.resolve(`http://jhsjk.people.cn`,i.link),s=await e.get(o);if(s)return JSON.parse(s);let c={title:a,link:o,description:r((await t.get(o)).data)(`div.d2txt_con.clearfix`).html().trim()};return e.set(o,JSON.stringify(c)),c}));return{title:s,link:c,item:d}}export{i as route};