import"./esm-shims-BmHUa0Yk.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-DCfHHxuQ.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{ViewType as n}from"./types-Bi82qguM.js";import{load as r}from"cheerio";const i=`https://www.newyorker.com`,a={path:`/:category`,categories:[`traditional-media`],view:n.Articles,example:`/newyorker/latest`,parameters:{category:`tab name. can be found at url`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`newyorker.com/:category?`]}],name:`Articles`,maintainers:[`EthanWng97`,`pseudoyu`],handler:o};async function o(n){let{category:a}=n.req.param(),o=`${i}/${a}`,s=await e(o),c=r(s),l=JSON.parse(c(`script:contains("window.__PRELOADED_STATE__")`).text().match(/window\.__PRELOADED_STATE__ = (.*);/)?.[1]??`{}`).transformed.bundle.containers[0].items,u=await Promise.all(l.map(n=>{let a=`${i}${n.url}`;return t.tryGet(a,async()=>{let t=await e(a),i=r(t)(`#main-content`);return i.find(`h1`).remove(),i.find(`.article-body__footer`).remove(),i.find(`.social-icons`).remove(),i.find(`div[class^="ActionBarWrapperContent-"]`).remove(),i.find(`div[class^="ContentHeaderByline-"]`).remove(),{title:n.dangerousHed,pubDate:n.pubDate,link:a,description:i.html()}})}));return{title:`The New Yorker - ${a}`,link:i,description:`Reporting, Profiles, breaking news, cultural coverage, podcasts, videos, and cartoons from The New Yorker.`,item:u}}export{a as route};