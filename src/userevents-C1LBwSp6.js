import{__dirname as e,init_esm_shims as t}from"./esm-shims-DtWyl6zt.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-CKN2M7CD.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-CxhTJIsl.js";import"./ofetch-CWsaZ4vY.js";import{got_default as r}from"./got-RSSJ34bj.js";import i from"node:path";t();const a=t=>n(i.join(e,`templates/userevents-a86ba626.art`),t),o={path:`/music/user/events/:id`,categories:[`multimedia`],name:`用户动态`,maintainers:[`Master-Hash`],handler:s};async function s(e){let t=e.req.param(`id`),n=await r(`https://music.163.com/api/event/get/${t}`,{headers:{Referer:`https://music.163.com/`}}),{data:i}=n,{nickname:o,signature:s,avatarUrl:c}=i.events[0].user;return{title:`${o}的云村动态`,link:`https://music.163.com/#/user/event?id=${t}`,description:`网易云音乐用户动态 - ${s}`,icon:c,image:c,item:i.events.map(e=>{let t=e.info.commentThread.resourceTitle,n=e.user.userId,r=JSON.parse(e.json).msg,i=e.pics.map(({originUrl:e})=>e),s=e.id;return{title:t,description:a({description:r,pics:i}),link:`https://music.163.com/#/event?id=${s}&uid=${n}`,pubDate:new Date(e.eventTime),published:new Date(e.eventTime),author:o,upvotes:e.info.likedCount,comments:e.info.commentCount}})}}export{o as route};