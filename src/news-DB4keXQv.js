import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-rK3Yp7nj.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-Bnno2HfO.js";import{load as r}from"cheerio";const i={path:`/news/:server?`,categories:[`game`],example:`/priconne-redive/news`,parameters:{server:`服务器，默认日服`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`priconne-redive.jp/news`],target:`/news/jp`},{source:[`princessconnect.so-net.tw/news`],target:`/news/zh-tw`},{source:[`game.bilibili.com/pcr/news.html`],target:`/news/zh-cn`}],name:`最新公告`,maintainers:[`SayaSS`,`frankcwl`],handler:a,url:`priconne-redive.jp/news`,description:`服务器

| 国服  | 台服  | 日服  |
| ----- | ----- | ---- |
| zh-cn | zh-tw | jp   |`};async function a(i){let{server:a=`jp`}=i.req.param();switch(a){case`jp`:{let i=e=>{let n=r(e);n(`.contents-body h3`).remove();let i=n(`.meta-info .time`).text().trim();return n(`.meta-info`).remove(),{description:n(`.contents-body`).html(),pubDate:t(i)}},a=(await n({method:`get`,url:`https://priconne-redive.jp/news/`})).data,o=r(a),s=o(`.article_box`);return{title:`公主链接日服-新闻`,link:`https://priconne-redive.jp/news/`,language:`ja`,item:await Promise.all(s.map((t,r)=>{r=o(r);let a=r.find(`a`).first().attr(`href`);return e.tryGet(a,async()=>{let e={title:r.find(`h4`).text(),link:a},t=i((await n(a)).data);return e.description=t.description,e.pubDate=t.pubDate,e})}))}}case`zh-tw`:{let i=e=>{let n=r(e);n(`.news_con h2 > span`).remove();let i=n(`.news_con h2`).text().trim();return n(`.news_con section h4`).first().remove(),{description:n(`.news_con section`).html(),pubDate:t(i)}},a=r((await n({method:`get`,url:`http://www.princessconnect.so-net.tw/news`})).data)(`.news_con dl dd`).toArray();return{title:`公主连结台服-最新公告`,link:`http://www.princessconnect.so-net.tw/news`,item:await Promise.all(a.map(t=>{let a=r(t)(`a`),o=`http://www.princessconnect.so-net.tw${a.attr(`href`)}`;return e.tryGet(o,async()=>{let e={title:a.text().trim(),link:o},t=i((await n(o)).data);return e.description=t.description,e.pubDate=t.pubDate,e})}))}}case`zh-cn`:{let r=(await n({method:`get`,url:`https://api.biligame.com/news/list?gameExtensionId=267&positionId=2&typeId=&pageNum=1&pageSize=5`})).data;return{title:`公主连结国服-最新公告`,link:`https://game.bilibili.com/pcr/news.html`,item:await Promise.all(r.data.map(r=>{let i=`https://game.bilibili.com/pcr/news.html#detail=${r.id}`;return e.tryGet(i,async()=>{let e={title:r.title,link:i,pubDate:t(r.ctime)};return e.description=(await n({method:`get`,url:`https://api.biligame.com/news/${r.id}`})).data.data.content,e})}))}}default:}}export{i as route};