import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import{ofetch_default as e}from"./ofetch-TsvCL7Kz.js";import{cache_default as t}from"./cache-CzcusEyX.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import{URL as i}from"node:url";import{load as a}from"cheerio";const o={path:`/nea/sjzz/ghs`,categories:[`government`],example:`/gov/nea/sjzz/ghs`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`nea.gov.cn/sjzz/ghs/`],target:`/nea/sjzz/ghs`}],name:`发展规划司`,maintainers:[`nczitzk`,`pseudoyu`],handler:s,url:`www.nea.gov.cn/sjzz/ghs/`};async function s(o){let s=o.req.query(`limit`)?Number.parseInt(o.req.query(`limit`),10):35,c=`https://www.nea.gov.cn`,l=new i(`sjzz/ghs/`,c).href,u=await e(l),d=a(u),f=d(`ul#showData0`).attr(`data`)?.split(/:/).pop();if(!f)throw Error(`Data source ID not found`);let p=new i(`ds_${f}.json`,l).href,m=await e(p),h=m.datasource.slice(0,s).map(e=>{let t=new i(e.publishUrl,c).href,o=a(e.showTitle),s=o.text();return{title:s,link:t,pubDate:e.publishTime?r(n(e.publishTime),8):void 0,description:e.summary?.trim()||s,author:[...new Set([e.sourceText,e.author,e.editor,e.responsibleEditor].filter(Boolean))].map(e=>({name:e})),category:e.keywords.split(/,/)}}),g=await Promise.all(h.map(i=>t.tryGet(i.link,async()=>{try{let t=await e(i.link),o=a(t);i.title=o(`meta[name="ArticleTitle"]`).prop(`content`)||i.title,i.description=o(`td.detail`).html()||o(`div.article-content`).html()||i.description,i.category=[...new Set([...i.category??[],...o(`meta[name="keywords"]`).attr(`conetnt`)?.split(/,/)??[]])];let s=o(`meta[name="PubDate"]`).prop(`content`);i.pubDate=s?r(n(s),8):i.pubDate}catch{}return i}))),_=g.filter(Boolean);return{item:_,title:`国家能源局 - 发展规划司工作进展`,link:l,description:`国家能源局 - 发展规划司工作进展`}}export{o as route};