import{__dirname as e,init_esm_shims as t}from"./esm-shims-2LyWUseo.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-BLnIkXRv.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{got_default as r}from"./got-DPq_2TLS.js";import i from"node:path";import{load as a}from"cheerio";t();const o=`https://www.patagonia.com`,s={mens:[`mens-new`,`mens-new-arrivals`],womens:[`womens-new`,`womens-new-arrivals`],kids:[`kids-new-arrivals`,`kids-baby-new-arrivals`],luggage:[`luggage-new-arrivals`,`luggage-new-arrivals`]};function c(e){let t=new URL(e),n=t.searchParams.get(`sfrm`);return t.search=new URLSearchParams({sfrm:n}).toString(),t.toString()}const l={path:`/new-arrivals/:category`,categories:[`shopping`],example:`/patagonia/new-arrivals/mens`,parameters:{category:`category, see below`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`New Arrivals`,maintainers:[],handler:u,description:`| Men's | Women's | Kids' & Baby | Packs & Gear |
| ----- | ------- | ------------ | ------------ |
| mens  | womens  | kids         | luggage      |`};async function u(t){let l=t.req.param(`category`),u=`${o}/on/demandware.store/Sites-patagonia-us-Site/en_US/Search-LazyGrid`,d=(await r({method:`get`,url:u,searchParams:{cgid:s[l][0],isLazyGrid:!0}})).data,f=a(d),p=f(`.product`).toArray().map(t=>{let r={};r.title=f(t).find(`.product-tile`).data(`tealium`).product_name[0];let a=new URL(f(t).find(`[itemprop="image"]`).attr(`content`));a=c(a);let s=f(t).find(`[itemprop="price"]`).eq(0).text();return r.link=o+`/`+f(t).find(`[itemprop="url"]`).attr(`href`),r.description=s+n(i.join(e,`templates/product-description-5678e430.art`),{imgUrl:a}),r.category=f(t).find(`[itemprop="category"]`).attr(`content`),r});return{title:`Patagonia - New Arrivals - ${l.toUpperCase()}`,link:`${o}/shop/${s[l][1]}`,description:`Patagonia - New Arrivals - ${l.toUpperCase()}`,item:p}}export{l as route};