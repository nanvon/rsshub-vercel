import{__dirname as e,init_esm_shims as t}from"./esm-shims-BGJi2y--.js";import{config as n}from"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as r}from"./ofetch-rK3Yp7nj.js";import{cache_default as i}from"./cache-Dfid4xgQ.js";import{art as a}from"./render-DftO2d-b.js";import{parseDate as o}from"./parse-date-DHsdom8D.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/today`,categories:[`other`],example:`/producthunt/today`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.producthunt.com/`]}],name:`Top Products Launching Today`,maintainers:[`miaoyafeng`,`Fatpandac`],handler:u,url:`www.producthunt.com/`};async function u(){let t=c(await r(`https://www.producthunt.com/`,{headers:{"User-Agent":n.trueUA}}))(`script:contains("ApolloSSRDataTransport")`).text().match(/"events":(\[.+\])\}\)/)?.[1]?.trim().replaceAll(`undefined`,`null`),l=JSON.parse(t).find(e=>e.type===`next`&&e.value.data.homefeed).value.data.homefeed.edges.find(e=>e.node.id===`FEATURED-0`).node.items.filter(e=>e.__typename===`Post`).map(e=>({title:e.name,link:`https://www.producthunt.com/products/${e.product.slug}`,postSlug:e.slug,description:e.tagline,pubDate:o(e.createdAt),image:`https://ph-files.imgix.net/${e.thumbnailImageUuid}`,categories:e.topics.edges.map(e=>e.node.name)}));return{title:`Product Hunt Today Popular`,link:`https://www.producthunt.com/`,item:await Promise.all(l.map(t=>i.tryGet(t.link,async()=>{let i=(await r(`https://www.producthunt.com/frontend/graphql`,{method:`POST`,headers:{"User-Agent":n.trueUA},body:{operationName:`PostPage`,variables:{slug:t.postSlug},extensions:{persistedQuery:{version:1,sha256Hash:`488585149898ee974a51884b11e205c34ea8ad34ee01d47d7936a66a6db799ff`}}}})).data.post;return t.author=i.user.name,t.description=a(s.join(e,`templates/description-d8e649eb.art`),{tagline:i.tagline,description:i.description,media:i.media}),t})))}}export{l as route};