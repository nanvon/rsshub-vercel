import"./esm-shims-DhF_MXa4.mjs";import{t as e}from"./config-PItPnVIx.mjs";import"./logger-BoKmWr7Z.mjs";import"./ofetch-DVhBwO41.mjs";import"./helpers-vRt84cId.mjs";import{t}from"./cache-KwJARS5Z.mjs";import{t as n}from"./parse-date-9Tu6hSFW.mjs";import{t as r}from"./got-D_XeVuz-.mjs";const i=`https://www.iwara.tv`,a=`https://api.iwara.tv`,o=`https://i.iwara.tv`,s={video:`Videos`,image:`Images`},c={video:`${a}/videos`,image:`${a}/images`},l=(e,t)=>{if(e===`image`)return`<img src="${o}/image/original/${t.thumbnail.id}/${t.thumbnail.name}">`;if(t.embedUrl===null)return`<img src="${o}/image/original/${t.file.id}/thumbnail-${String(t.thumbnail).padStart(2,`0`)}.jpg">`;let n=/https?:\/\/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)([\w-]*)(&(amp;)?[\w=?]*)?/.exec(t.embedUrl);return n?`<img src="${o}/image/embed/original/youtube/${n[1]}">`:``},u={path:`/users/:username?/:type?`,name:`Unknown`,maintainers:[`Fatpandac`],handler:d,features:{nsfw:!0}};async function d(o){let u=o.req.param(`username`),d=await t.tryGet(`${a}/profile/${u}`,async()=>(await r(`${a}/profile/${u}`)).data.user.id),f=o.req.param(`type`)??`video`,p=(await t.tryGet(`${c[f]}?user=${d}`,async()=>(await r(`${c[f]}?user=${d}`)).data.results,e.cache.routeExpire,!1)).map(e=>({title:e.title,author:u,link:`${i}/${f}/${e.id}/${e.slug}`,category:e.tags.map(e=>e.id),description:l(f,e),pubDate:n(e.createdAt)}));return{title:`${u}'s iwara - ${s[f]}`,link:`${i}/users/${u}`,item:p}}export{u as route};