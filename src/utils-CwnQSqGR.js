import{config as e}from"./config-CVBRPN4O.js";import{ofetch_default as t}from"./ofetch-am9EnuPq.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";const i=e=>{let t=function(e,t){let n=``;for(let r=0;r<e.length&&r<t.length;r+=2){let i=Number.parseInt(e.slice(r,r+2),16),a=Number.parseInt(t.slice(r,r+2),16),o=(i^a).toString(16);o.length===1&&(o=`0`+o),n+=o}return n},n=function(e){let t=[15,35,29,24,33,16,1,38,10,9,19,31,40,27,22,23,25,13,6,11,39,18,20,8,14,21,32,26,2,30,7,4,17,5,3,28,34,37,12,36],n=[];for(let r=0;r<e.length;r++){let i=e[r];for(let[e,a]of t.entries())a===r+1&&(n[e]=i)}return n.join(``)}(e);return t(n,`3000176000856006061501533003690027800375`)},a=`https://segmentfault.com`,o=(n,r)=>r(`segmentfault:acw_sc__v2`,async()=>{let e=await t(n),r=``,a=e.match(/var arg1='(.*?)';/);return a&&(r=i(a[1])),r},e.cache.routeExpire,!1),s=e=>e.map(e=>({title:e.title,link:new URL(e.url,a).href,author:e.user.name,pubDate:n(e.created||e.modified,`X`),description:e.excerpt})),c=(e,n,i)=>i(n.link,async()=>{let i;try{i=await t(n.link,{headers:{cookie:`acw_sc__v2=${e};`}});let a=r(i);n.description=a(`article`).html(),n.category=a(`.badge-tag`).toArray().map(e=>a(e).text())}catch{}return n});export{o as acw_sc__v2,a as host,c as parseItems,s as parseList};