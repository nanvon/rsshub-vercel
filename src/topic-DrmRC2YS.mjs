import"./esm-shims-D4LgnpSl.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import"./ofetch-CvLG4YCQ.mjs";import"./helpers-mo8InLYm.mjs";import{t as e}from"./cache-ZTWfXd2T.mjs";import"./parse-date-bKmkZ9gg.mjs";import{t}from"./got-AYh7EWi-.mjs";import{t as n}from"./types-BD1MU_-b.mjs";import{n as r,t as i}from"./utils-DH23jucl.mjs";import a from"dayjs";import{load as o}from"cheerio";const s=/(https?:\/\/[^\s"'<>]+)/g,c={path:`/topic/:id/:showUid?`,categories:[`social-media`],view:n.SocialMedia,example:`/jike/topic/556688fae4b00c57d9dd46ee`,parameters:{id:`圈子 id, 可在即刻 web 端圈子页或 APP 分享出来的圈子页 URL 中找到`,showUid:{description:`是否在内容中显示用户信息，设置为 1 则开启`,options:[{value:`1`,label:`显示`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`web.okjike.com/topic/:id`],target:`/topic/:id`}],name:`圈子`,maintainers:[`DIYgod`,`prnake`],handler:l};async function l(n){let c=n.req.param(`id`),l=await i(n,`https://m.okjike.com/topics/${c}`);if(l){let i=l.result;return i.item=r(l,n),(c===`553870e8e4b0cafb0a1bef68`||c===`55963702e4b0d84d2c30ce6f`)&&(i.item=await Promise.all(i.item.map(async n=>{let r={...n},i=/https:\/\/www\.okjike\.com\/medium\/[\dA-Za-z]*/.exec(r.description);if(i){let n=i[0];r.description=await e.tryGet(n,async()=>{let{data:e}=await t(n),r=o(e),i=r(`ul.main > li.item`),a=i.find(`a`).map((e,t)=>r(t).attr(`href`)),s=i.find(`span.text`).map((e,t)=>r(t).text()),c=``;for(let[e,t]of a.entries())c+=`${e+1}、<a href="${t}">${s[e]}</a><br>`;return c=c.replace(/<br>$/,``),c})}return r.description=r.description.replaceAll(s,e=>`<a href="${e}">${e}</a>`),r.title=`${l.topic.content} ${a(n.pubDate).format(`MM月DD日`)}`,r}))),i}}export{c as route};