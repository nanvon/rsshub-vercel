import{n as e,t}from"./esm-shims-mGm6WwCc.js";import{t as n}from"./config-DZMnNPig.js";import{t as r}from"./logger-asV68Lay.js";import"./proxy-CczVputb.js";import{t as i}from"./cache-CpEhLexq.js";import{t as a}from"./render-d6AVTUl2.js";import{n as o}from"./puppeteer-e0F06Yyi.js";import s from"node:path";import*as c from"cheerio";e();const l=e=>a(s.join(t,`templates/video-18aee809.art`),e),u={path:`/new_videos`,categories:[`multimedia`],example:`/spankbang/new_videos`,name:`New Porn Videos`,maintainers:[`TonyRL`],features:{antiCrawler:!0,requirePuppeteer:!0,nsfw:!0},radar:[{source:[`spankbang.com/new_videos/`,`spankbang.com/`]}],handler:async()=>{let e=`https://spankbang.com`,t=`${e}/new_videos/`,a=await o(),s=await i.tryGet(t,async()=>{let n=await a.newPage();await n.setRequestInterception(!0),n.on(`request`,e=>{e.resourceType()===`document`?e.continue():e.abort()}),r.http(`Requesting ${t}`),await n.goto(t,{waitUntil:`domcontentloaded`});let i=await n.content(),o=c.load(i),s=o(`.video-item`).toArray().map(t=>{let n=o(t),r=n.find(`.thumb`),i=n.find(`img.cover`);return{title:r.attr(`title`),link:new URL(r.attr(`href`),e).href,description:l({cover:i.data(`src`),preview:i.data(`preview`)})}});return{title:o(`head title`).text(),description:o(`head meta[name="description"]`).attr(`content`),item:s}},n.cache.routeExpire,!1);return await a.close(),{title:s.title,description:s.description,link:t,item:s.item}}};export{u as route};