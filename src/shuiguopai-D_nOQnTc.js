import{n as e,t}from"./esm-shims-mGm6WwCc.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-BASlBuka.js";import"./helpers-Cqaav28H.js";import{t as n}from"./cache-CpEhLexq.js";import{t as r}from"./render-d6AVTUl2.js";import{t as i}from"./parse-date-CHEO0z5G.js";import{t as a}from"./got-CgQXMNWI.js";import{t as o}from"./timezone-BPfwRbwD.js";import s from"node:path";import{load as c}from"cheerio";e();const l={path:`/`,radar:[{source:[`shuiguopai.com/`],target:``}],name:`Unknown`,maintainers:[`nczitzk`],handler:u,url:`shuiguopai.com/`,features:{nsfw:!0}};async function u(e){let l=`https://sgptv.vip`,u=`https://api.cbbee0.com`,d=`${u}/v1_2/homePage`,f=`${u}/v1_2/filmInfo`,p=(await a({method:`post`,url:d,json:{device_id:``,hm:`008-api`,last_page:0,length:e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`)):50,ltype:1,page:1,userToken:``}})).data.data.list.map(e=>({title:e.title,guid:e.library_id,link:`${l}/play-details/${e.library_id}`,pubDate:o(i(e.show_time_origin,`YYYY-MM-DD HH:mm:ss`),8),category:e.tags.map(e=>e.tag_title)}));return p=await Promise.all(p.map(e=>n.tryGet(e.link,async()=>{let n=await a({method:`get`,url:e.link}),i=c(n.data);i(`iframe`).remove();let o,l=n.data.match(/film_id:"([\d,]+)",/)?.[1];if(l){let t=(await a({method:`post`,url:f,json:{device_id:``,film_id:l,hm:`008-api`,userToken:``}})).data.data;o=t.map(e=>e.download_url),e.category=t.flatMap(e=>e.tags.map(e=>e.tag_title)),e.author=t.map(e=>e.actor).join(` `)}return e.description=r(s.join(t,`templates/description-3864cae2.art`),{videos:o,description:i(`.content`).html()}),e}))),{title:`水果派`,link:l,item:p}}export{l as route};