import"./esm-shims-rNwigI-Q.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CeMUzp5K.js";import"./helpers-qpI1t-yV.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-Di2lBekK.js";import{invalid_parameter_default as n}from"./invalid-parameter-CfUmvEUg.js";import{isValidHost as r}from"./valid-host-BYPA8xwv.js";const i={path:`/posts/:id`,categories:[`blog`],example:`/zhubai/posts/via`,parameters:{id:"`id` 为竹白主页 url 中的三级域名，如 via.zhubai.love 的 `id` 为 `via`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`文章`,maintainers:[`naixy28`],handler:a,description:"::: tip\n  在路由末尾处加上 `?limit=限制获取数目` 来限制获取条目数量，默认值为`20`\n:::"};async function a(i){let a=i.req.param(`id`),o=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`)):20;if(!r(a))throw new n(`Invalid id`);let s=(await t({method:`get`,url:`https://${a}.zhubai.love/api/publications/${a}/posts?publication_id_type=token&limit=${o}`,headers:{Referer:`https://${a}.zhubai.love/`}})).data.data,{name:c,description:l}=s[0].publication;return{title:c,link:`https://${a}.zhubai.love/`,description:l,item:s.map(t=>({title:t.title,pubDate:e(t.created_at),link:`https://${a}.zhubai.love/posts/${t.id}`,author:c}))}}export{i as route};