import{randUserAgent as e}from"@tonyrl/rand-user-agent";import"dotenv/config";import{ofetch as t}from"ofetch";var n=({browser:t=`chrome`,os:n=`mac os`,device:r=`desktop`})=>{r=r.toLowerCase(),t=t.toLowerCase(),n=n.toLowerCase();let i=e(r,t,n);if(t===`chrome`)for(;i.includes(`Chrome-Lighthouse`)||i.includes(`Gener8`)||i.includes(`HeadlessChrome`)||i.includes(`SMTBot`)||i.includes(`Electron`)||i.includes(`Code`);)i=e(r,t,n);if(t===`safari`)for(;i.includes(`Applebot`);)i=e(r,t,n);return i};let r=process.env;const i={},a=`RSSHub/1.0 (+http://github.com/DIYgod/RSSHub; like FeedFetcher-Google)`,o=(e,t)=>e===void 0?t:e===``||e===`0`||e===`false`?!1:!!e,s=(e,t)=>e===void 0?t:Number.parseInt(e),c=()=>{let e={},t={},c={},l={},u={};for(let n in r)if(n.startsWith(`BILIBILI_COOKIE_`)){let t=n.slice(16);e[t]=r[n]}else if(n.startsWith(`EMAIL_CONFIG_`)){let e=n.slice(13);t[e]=r[n]}else if(n.startsWith(`DISCUZ_COOKIE_`)){let e=n.slice(14);c[e]=r[n]}else if(n.startsWith(`MEDIUM_COOKIE_`)){let e=n.slice(14).toLowerCase();l[e]=r[n]}else if(n.startsWith(`DISCOURSE_CONFIG_`)){let e=n.slice(17);u[e]=JSON.parse(r[n]||`{}`)}let d={disallowRobot:o(r.DISALLOW_ROBOT,!1),enableCluster:o(r.ENABLE_CLUSTER,!1),isPackage:!!r.IS_PACKAGE,nodeName:r.NODE_NAME,puppeteerWSEndpoint:r.PUPPETEER_WS_ENDPOINT,chromiumExecutablePath:r.CHROMIUM_EXECUTABLE_PATH,connect:{port:s(r.PORT,1200)},listenInaddrAny:o(r.LISTEN_INADDR_ANY,!0),requestRetry:s(r.REQUEST_RETRY,2),requestTimeout:s(r.REQUEST_TIMEOUT,3e4),ua:r.UA??(o(r.NO_RANDOM_UA,!1)?a:n({browser:`chrome`,os:`mac os`,device:`desktop`})),trueUA:a,allowOrigin:r.ALLOW_ORIGIN,cache:{type:r.CACHE_TYPE||(r.CACHE_TYPE===``?``:`memory`),requestTimeout:s(r.CACHE_REQUEST_TIMEOUT,60),routeExpire:s(r.CACHE_EXPIRE,300),contentExpire:s(r.CACHE_CONTENT_EXPIRE,3600)},memory:{max:s(r.MEMORY_MAX,Math.pow(2,8))},redis:{url:r.REDIS_URL||`redis://localhost:6379/`},proxyUri:r.PROXY_URI,proxyUris:r.PROXY_URIS?r.PROXY_URIS.split(`,`).map(e=>e.trim()).filter(Boolean):void 0,proxy:{protocol:r.PROXY_PROTOCOL,host:r.PROXY_HOST,port:r.PROXY_PORT,auth:r.PROXY_AUTH,url_regex:r.PROXY_URL_REGEX||`.*`,strategy:r.PROXY_STRATEGY||`all`,failoverTimeout:s(r.PROXY_FAILOVER_TIMEOUT,5e3),healthCheckInterval:s(r.PROXY_HEALTH_CHECK_INTERVAL,6e4)},pacUri:r.PAC_URI,pacScript:r.PAC_SCRIPT,accessKey:r.ACCESS_KEY,debugInfo:r.DEBUG_INFO||`true`,loggerLevel:r.LOGGER_LEVEL||`info`,noLogfiles:o(r.NO_LOGFILES,!1),otel:{seconds_bucket:r.OTEL_SECONDS_BUCKET||`0.01,0.1,1,2,5,15,30,60`,milliseconds_bucket:r.OTEL_MILLISECONDS_BUCKET||`10,20,50,100,250,500,1000,5000,15000`},showLoggerTimestamp:o(r.SHOW_LOGGER_TIMESTAMP,!1),sentry:{dsn:r.SENTRY,routeTimeout:s(r.SENTRY_ROUTE_TIMEOUT,3e4)},enableRemoteDebugging:o(r.ENABLE_REMOTE_DEBUGGING,!1),hotlink:{template:r.HOTLINK_TEMPLATE,includePaths:r.HOTLINK_INCLUDE_PATHS?r.HOTLINK_INCLUDE_PATHS.split(`,`):void 0,excludePaths:r.HOTLINK_EXCLUDE_PATHS?r.HOTLINK_EXCLUDE_PATHS.split(`,`):void 0},feature:{allow_user_hotlink_template:o(r.ALLOW_USER_HOTLINK_TEMPLATE,!1),filter_regex_engine:r.FILTER_REGEX_ENGINE||`re2`,allow_user_supply_unsafe_domain:o(r.ALLOW_USER_SUPPLY_UNSAFE_DOMAIN,!1),disable_nsfw:o(r.DISABLE_NSFW,!1)},suffix:r.SUFFIX,titleLengthLimit:s(r.TITLE_LENGTH_LIMIT,150),openai:{apiKey:r.OPENAI_API_KEY,model:r.OPENAI_MODEL||`gpt-3.5-turbo-16k`,temperature:s(r.OPENAI_TEMPERATURE,.2),maxTokens:s(r.OPENAI_MAX_TOKENS,0)||void 0,endpoint:r.OPENAI_API_ENDPOINT||`https://api.openai.com/v1`,inputOption:r.OPENAI_INPUT_OPTION||`description`,promptDescription:r.OPENAI_PROMPT||`Please summarize the following article and reply with markdown format.`,promptTitle:r.OPENAI_PROMPT_TITLE||`Please translate the following title into Simplified Chinese and reply only translated text.`},follow:{ownerUserId:r.FOLLOW_OWNER_USER_ID,description:r.FOLLOW_DESCRIPTION,price:s(r.FOLLOW_PRICE),userLimit:s(r.FOLLOW_USER_LIMIT)},bilibili:{cookies:e,dmImgList:r.BILIBILI_DM_IMG_LIST,dmImgInter:r.BILIBILI_DM_IMG_INTER,excludeSubtitles:o(r.BILIBILI_EXCLUDE_SUBTITLES,!1)},bitbucket:{username:r.BITBUCKET_USERNAME,password:r.BITBUCKET_PASSWORD},btbyr:{host:r.BTBYR_HOST,cookies:r.BTBYR_COOKIE},bupt:{portal_cookie:r.BUPT_PORTAL_COOKIE},caixin:{cookie:r.CAIXIN_COOKIE},civitai:{cookie:r.CIVITAI_COOKIE},dianping:{cookie:r.DIANPING_COOKIE},dida365:{username:r.DIDA365_USERNAME,password:r.DIDA365_PASSWORD},discord:{authorization:r.DISCORD_AUTHORIZATION},discourse:{config:u},discuz:{cookies:c},disqus:{api_key:r.DISQUS_API_KEY},douban:{cookie:r.DOUBAN_COOKIE},ehentai:{ipb_member_id:r.EH_IPB_MEMBER_ID,ipb_pass_hash:r.EH_IPB_PASS_HASH,sk:r.EH_SK,igneous:r.EH_IGNEOUS,star:r.EH_STAR,img_proxy:r.EH_IMG_PROXY},email:{config:t},fanbox:{session:r.FANBOX_SESSION_ID},fanfou:{consumer_key:r.FANFOU_CONSUMER_KEY,consumer_secret:r.FANFOU_CONSUMER_SECRET,username:r.FANFOU_USERNAME,password:r.FANFOU_PASSWORD},fantia:{cookies:r.FANTIA_COOKIE},game4399:{cookie:r.GAME_4399},gelbooru:{apiKey:r.GELBOORU_API_KEY,userId:r.GELBOORU_USER_ID},github:{access_token:r.GITHUB_ACCESS_TOKEN},gitee:{access_token:r.GITEE_ACCESS_TOKEN},google:{fontsApiKey:r.GOOGLE_FONTS_API_KEY},guozaoke:{cookies:r.GUOZAOKE_COOKIES},hefeng:{key:r.HEFENG_KEY,apiHost:r.HEFENG_API_HOST},infzm:{cookie:r.INFZM_COOKIE},initium:{username:r.INITIUM_USERNAME,password:r.INITIUM_PASSWORD,bearertoken:r.INITIUM_BEARER_TOKEN},instagram:{username:r.IG_USERNAME,password:r.IG_PASSWORD,proxy:r.IG_PROXY,cookie:r.IG_COOKIE},iwara:{username:r.IWARA_USERNAME,password:r.IWARA_PASSWORD},javdb:{session:r.JAVDB_SESSION},jumeili:{cookie:r.JUMEILI_COOKIE},keylol:{cookie:r.KEYLOL_COOKIE},lastfm:{api_key:r.LASTFM_API_KEY},lightnovel:{cookie:r.SECURITY_KEY},lofter:{cookies:r.LOFTER_COOKIE},lorientlejour:{token:r.LORIENTLEJOUR_TOKEN,username:r.LORIENTLEJOUR_USERNAME,password:r.LORIENTLEJOUR_PASSWORD},malaysiakini:{email:r.MALAYSIAKINI_EMAIL,password:r.MALAYSIAKINI_PASSWORD,refreshToken:r.MALAYSIAKINI_REFRESHTOKEN},mangadex:{username:r.MANGADEX_USERNAME,password:r.MANGADEX_PASSWORD,clientId:r.MANGADEX_CLIENT_ID,clientSecret:r.MANGADEX_CLIENT_SECRET,refreshToken:r.MANGADEX_REFRESH_TOKEN},manhuagui:{cookie:r.MHGUI_COOKIE},mastodon:{apiHost:r.MASTODON_API_HOST,accessToken:r.MASTODON_API_ACCESS_TOKEN,acctDomain:r.MASTODON_API_ACCT_DOMAIN},medium:{cookies:l,articleCookie:r.MEDIUM_ARTICLE_COOKIE||``},mihoyo:{cookie:r.MIHOYO_COOKIE},miniflux:{instance:r.MINIFLUX_INSTANCE||`https://reader.miniflux.app`,token:r.MINIFLUX_TOKEN||``},misskey:{accessToken:r.MISSKEY_ACCESS_TOKEN},mixi2:{authToken:r.MIXI2_AUTH_TOKEN,authKey:r.MIXI2_AUTH_KEY},mox:{cookie:r.MOX_COOKIE},ncm:{cookies:r.NCM_COOKIES||``},newrank:{cookie:r.NEWRANK_COOKIE},nga:{uid:r.NGA_PASSPORT_UID,cid:r.NGA_PASSPORT_CID},nhentai:{username:r.NHENTAI_USERNAME,password:r.NHENTAI_PASSWORD},notion:{key:r.NOTION_TOKEN},patreon:{sessionId:r.PATREON_SESSION_ID},pianyuan:{cookie:r.PIANYUAN_COOKIE},pixabay:{key:r.PIXABAY_KEY},pixiv:{refreshToken:r.PIXIV_REFRESHTOKEN,bypassCdn:o(r.PIXIV_BYPASS_CDN,!1),bypassCdnHostname:r.PIXIV_BYPASS_HOSTNAME||`public-api.secure.pixiv.net`,bypassCdnDoh:r.PIXIV_BYPASS_DOH||`https://1.1.1.1/dns-query`,imgProxy:r.PIXIV_IMG_PROXY||`https://i.pixiv.re`},pkubbs:{cookie:r.PKUBBS_COOKIE},qingting:{id:r.QINGTING_ID},readwise:{accessToken:r.READWISE_ACCESS_TOKEN},saraba1st:{cookie:r.SARABA1ST_COOKIE,host:r.SARABA1ST_HOST||`https://stage1st.com`},sehuatang:{cookie:r.SEHUATANG_COOKIE},scboy:{token:r.SCBOY_BBS_TOKEN},scihub:{host:r.SCIHUB_HOST||`https://sci-hub.se/`},sdo:{ff14risingstones:r.SDO_FF14RISINGSTONES,ua:r.SDO_UA},sis001:{baseUrl:r.SIS001_BASE_URL||`https://sis001.com`},skeb:{bearerToken:r.SKEB_BEARER_TOKEN},sorrycc:{cookie:r.SORRYCC_COOKIES},spotify:{clientId:r.SPOTIFY_CLIENT_ID,clientSecret:r.SPOTIFY_CLIENT_SECRET,refreshToken:r.SPOTIFY_REFRESHTOKEN},sspai:{bearertoken:r.SSPAI_BEARERTOKEN},telegram:{token:r.TELEGRAM_TOKEN,session:r.TELEGRAM_SESSION,apiId:r.TELEGRAM_API_ID,apiHash:r.TELEGRAM_API_HASH,maxConcurrentDownloads:r.TELEGRAM_MAX_CONCURRENT_DOWNLOADS,proxy:{host:r.TELEGRAM_PROXY_HOST,port:r.TELEGRAM_PROXY_PORT,secret:r.TELEGRAM_PROXY_SECRET}},tophub:{cookie:r.TOPHUB_COOKIE},tsdm39:{cookie:r.TSDM39_COOKIES},tumblr:{clientId:r.TUMBLR_CLIENT_ID,clientSecret:r.TUMBLR_CLIENT_SECRET,refreshToken:r.TUMBLR_REFRESH_TOKEN},twitter:{username:r.TWITTER_USERNAME?.split(`,`),password:r.TWITTER_PASSWORD?.split(`,`),authenticationSecret:r.TWITTER_AUTHENTICATION_SECRET?.split(`,`),phoneOrEmail:r.TWITTER_PHONE_OR_EMAIL?.split(`,`),authToken:r.TWITTER_AUTH_TOKEN?.split(`,`),thirdPartyApi:r.TWITTER_THIRD_PARTY_API},uestc:{bbsCookie:r.UESTC_BBS_COOKIE,bbsAuthStr:r.UESTC_BBS_AUTH_STR},weibo:{app_key:r.WEIBO_APP_KEY,app_secret:r.WEIBO_APP_SECRET,cookies:r.WEIBO_COOKIES,redirect_url:r.WEIBO_REDIRECT_URL},wenku8:{cookie:r.WENKU8_COOKIE},wordpress:{cdnUrl:r.WORDPRESS_CDN},xiaoyuzhou:{device_id:r.XIAOYUZHOU_ID,refresh_token:r.XIAOYUZHOU_TOKEN},xiaohongshu:{cookie:r.XIAOHONGSHU_COOKIE},ximalaya:{token:r.XIMALAYA_TOKEN},xsijishe:{cookie:r.XSIJISHE_COOKIE,user_agent:r.XSIJISHE_USER_AGENT},xueqiu:{cookies:r.XUEQIU_COOKIES},yamibo:{salt:r.YAMIBO_SALT,auth:r.YAMIBO_AUTH},youtube:{key:r.YOUTUBE_KEY,clientId:r.YOUTUBE_CLIENT_ID,clientSecret:r.YOUTUBE_CLIENT_SECRET,refreshToken:r.YOUTUBE_REFRESH_TOKEN},zhihu:{cookies:r.ZHIHU_COOKIES},zodgame:{cookie:r.ZODGAME_COOKIE},zsxq:{accessToken:r.ZSXQ_ACCESS_TOKEN},smzdm:{cookie:r.SMZDM_COOKIE}};for(let e in d)i[e]=d[e]};c(),(async()=>{if(r.REMOTE_CONFIG){let{default:e}=await import(`./logger-NsEAItXe.js`);try{let n=await t(r.REMOTE_CONFIG,{headers:{Authorization:`Basic ${r.REMOTE_CONFIG_AUTH}`}});n?(r=Object.assign(r,n),c(),e.info(`Remote config loaded.`)):e.error(`Remote config load failed.`)}catch(t){e.error(`Remote config load failed.`,t)}}})();const l=i;export{l as config,n as rand_user_agent_default};