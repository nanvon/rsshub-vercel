import{n as e,t}from"./esm-shims-mGm6WwCc.js";import{t as n}from"./ofetch-BASlBuka.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import o from"node:path";import{load as s}from"cheerio";e();const c=`https://www.dcfever.com`,l=e=>r.tryGet(e.link,async()=>{let t=s(await n(e.link)),r=t(`div[itemprop="articleBody"], .column_article_content_html`),i=t(`.article_multi_page a`).not(`.selected`).toArray().map(n=>({link:new URL(t(n).attr(`href`),e.link).href}));if(i.length){let e=await Promise.all(i.map(async e=>s(await n(e.link))(`div[itemprop="articleBody"]`).html()));r.append(e)}return r.find(`img`).each((e,t)=>{t.attribs.src?.includes(`?`)&&(t.attribs.src=t.attribs.src.split(`?`)[0])}),r.find(`p a`).each((e,n)=>{n=t(n),n.text().startsWith(`下一頁為`)&&n.remove()}),r.find(`iframe`).each((e,n)=>{n=t(n),n.attr(`src`).startsWith(`https://www.facebook.com/plugins/like.php`)&&n.remove()}),e.description=r.html(),e.pubDate=a(t(`meta[property="article:published_time"]`).attr(`content`)),e}),u=e=>r.tryGet(e.link,async()=>{let r=s(await n(e.link)),a=s(r(`#trading_item_section .description`).contents().filter((e,t)=>t.type===`comment`).toArray().map(e=>e.data).join(``),null,!1);return a(`.selector_text`).remove(),a(`.selector_image_div`).each((e,t)=>{delete t.attribs.onclick}),a(`.desktop_photo_selector img`).each((e,t)=>{t.attribs.src.endsWith(`_sqt.jpg`)&&(t.attribs.src=t.attribs.src.replace(`_sqt.jpg`,`.jpg`))}),e.description=i(o.join(t,`templates/trading-949c0be3.art`),{info:r(`.info_col`),description:r(`.description_text`).html(),photo:a(`.desktop_photo_selector`).html()}),e});export{l as n,u as r,c as t};