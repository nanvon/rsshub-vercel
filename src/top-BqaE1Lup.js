import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import"./dist-BYIKqG8W.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-BWStd97H.js";import"./render-CxhTJIsl.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-CSKgrsrO.js";import{got_default as n}from"./got-CtVGR9YK.js";import{ViewType as r}from"./types-A5bA50Mg.js";import{extractArticle as i,extractWork as a}from"./utils-rYIShrsY.js";import{load as o}from"cheerio";const s={path:`/top/:type`,categories:[`design`],view:r.Pictures,example:`/zcool/top/design`,parameters:{type:{description:`推荐类型`,options:[{value:`design`,label:`作品榜单`},{value:`article`,label:`文章榜单`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`作品总榜单`,maintainers:[`yuuow`],handler:c};async function c(r){let s=r.req.param(`type`),c=`https://www.zcool.com.cn/top/${s===`design`?`index.do`:`article.do?rankType=8`}`,{data:l}=await n(c),u=o(l),d=JSON.parse(u(`script#__NEXT_DATA__`).text()),f=d.props.pageProps.listResult.data.map(e=>({title:e.rankingTitle,author:e.member.name,category:[e.productCategoryStr,e.productSubCateStr,...e.tags],link:e.pageUrl,pubDate:t(e.rankingPublishTime)})),p=await Promise.all(f.map(r=>e.tryGet(r.link,async()=>{let{data:e}=await n(r.link),s=o(e),c=JSON.parse(s(`script#__NEXT_DATA__`).text());return r.pubDate=t(c.props.pageProps.data.publishTime,`x`),r.link.startsWith(`https://www.zcool.com.cn/article/`)?r.description=i(c):r.link.startsWith(`https://www.zcool.com.cn/work/`)&&(r.description=a(c)),r})));return{title:d.props.pageProps.seo.title,description:d.props.pageProps.seo.description,link:c,item:p}}export{s as route};