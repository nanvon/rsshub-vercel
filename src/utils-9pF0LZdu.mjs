import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./render-_fW2cbJz.mjs";import{t as r}from"./parse-date-C2HciIa2.mjs";import{t as i}from"./got-DcbI0XpN.mjs";import a from"node:path";import o from"dayjs";import{load as s}from"cheerio";import c from"dayjs/plugin/localizedFormat.js";import{JSDOM as l}from"jsdom";import"dayjs/locale/zh-cn.js";e(),o.extend(c);function u(e){let t={};try{t=new l(e,{runScripts:`dangerously`}).window.__NUXT__.data[0]}catch{throw Error(`Nuxt 框架信息提取失败，请报告这个问题`)}return t}function d(e){return`<img src="${e}"><br/>`}async function f(e){let t=(await i(e)).data;return{content:s(t)(`.description`).html()}}async function p(e){let t=(await i(e)).data,n=s(t),a=n(`.detail-body-container`).html(),o=n(`.topics-articleHead__date`).text();return a=a.replaceAll(`src="/topics/`,`src="https://www.nintendo.com.hk/topics/`),{content:a,pubDate:r(o,`YYYY.M.D`)}}var m={ProcessItem:(e,t)=>Promise.all(e.map(async e=>{let n=await t.tryGet(e.link,()=>f(e.link));return{...e,...n}})),ProcessNews:(e,t)=>Promise.all(e.map(async e=>{let n=await t.tryGet(e.url,()=>p(`https://www.nintendo.com.hk`+e.url));return{...e,...n}})),ProcessNewsChina:(e,t)=>Promise.all(e.map(async e=>{let n=await t.tryGet(e.link,async()=>u((await i(e.link)).data));return{...e,description:e.description+n.newsData.content,category:n.newsData.category,pubDate:r(n.newsData.releaseTime,`x`)}})),ProcessItemChina:(e,r)=>Promise.all(e.map(async e=>{if(!e.link.startsWith(`https://www.nintendoswitch.com.cn/software/`))return e;let s=(await r.tryGet(e.link,async()=>u((await i(e.link)).data))).data;return{...e,category:[...s.supportLanguages,...s.genre,...s.playMode],description:n(a.join(t,`templates/eshop_cn-23aed242.art`),{item:e,software:s,releaseDatetime:o(s.releaseDatetime).locale(`zh-cn`).format(`lll`)})}})),nuxtReader:u,generateImageLink:d};export{m as t};