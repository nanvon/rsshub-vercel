import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-CbgiXYAi.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{timezone as n}from"./timezone-CMz5pnRe.js";import{load as r}from"cheerio";const i={path:`/detail/:id`,categories:[`reading`],example:`/zongheng/detail/1366535`,parameters:{id:`作品 ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.zongheng.org/detail/:id`]}],name:`章节更新`,maintainers:[`TonyRL`],handler:a,url:`www.zongheng.com`};async function a(i){let{id:a}=i.req.param(),o=`https://www.zongheng.com/detail/${a}`,s=await e(o),c=r(s),l=JSON.parse(c(`script:contains("window.__NUXT__")`).text().match(/description:(.*?),totalWords/)?.[1]||`""`).replaceAll(`<br>`,` `),u=c(`.book-info--tags span`).toArray().map(e=>c(e).text().trim()),d=c(`.author-info--name`).text().trim(),f=(await e(`https://bookapi.zongheng.com/api/chapter/getChapterList`,{method:`POST`,headers:{"Content-Type":`application/x-www-form-urlencoded`},body:new URLSearchParams({bookId:a})})).result.chapterList.flatMap(e=>e.chapterViewList.map(r=>({title:`${e.tome.tomeName?`${e.tome.tomeName} - `:``}${r.chapterName}`,link:`https://read.zongheng.com/chapter/${a}/${r.chapterId}.html`,pubDate:n(t(r.createTime),8),guid:`zongheng:${a}:${e.tome.tomeId}:${r.chapterId}`,author:d,category:u})));return{title:`${c(`.book-info--title span`).text()}（${d}）- 纵横中文网`,description:`${c(`.book-info--nums`).text().trim()} ${l}`,link:o,allowEmpty:!0,image:c(`.book-info--coverImage-img`).attr(`src`),item:f}}export{i as route};