import{n as e,t}from"./esm-shims-L08rKynx.mjs";import"./config-L8Ls2W7q.mjs";import"./logger-C50fTRi5.mjs";import{t as n}from"./ofetch-DXVwJZV0.mjs";import{t as r}from"./cache-ZTWfXd2T.mjs";import{t as i}from"./render-CBhnapAf.mjs";import{t as a}from"./parse-date-bKmkZ9gg.mjs";import{t as o}from"./types-BD1MU_-b.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l=async e=>{let{category:o=`news`}=e.req.param(),l=Number.parseInt(e.req.query(`limit`)??`7`,10),u=`http://www.ccg.org.cn`,d=new URL(o,u).href,f=c(await n(d)),p=f(`html`).attr(`lang`)??`zh`,m=[];m=f(`ul.huodong-list li`).slice(0,l).toArray().map(e=>{let n=f(e),r=n.find(`h5`).text(),o=n.find(`div.huodong-img img`).attr(`src`),c=i(s.join(t,`templates/description-881baa33.art`),{images:o?[{src:o,alt:r}]:void 0,intro:n.find(`p`).html()}),l=n.find(`span`).text(),u=n.find(`a`).attr(`href`),d=l;return{title:r,description:c,pubDate:l?a(l,`YYYY年M月D日`):void 0,link:u,content:{html:c,text:c},image:o,banner:o,updated:d?a(d,`YYYY年M月D日`):void 0,language:p}}),m=await Promise.all(m.map(e=>e.link?r.tryGet(e.link,async()=>{let r=c(await n(e.link)),o=r(`div.pinpai-page h3`).text(),l=r(`span.time`).text();r(`div.pinpai-page h3`).remove(),r(`div.pinpai-page span.time`).remove();let u=i(s.join(t,`templates/description-881baa33.art`),{description:r(`div.pinpai-page`).html()}),d=l,f={title:o,description:u,pubDate:l?a(l,`YYYY年M月D日`):e.pubDate,content:{html:u,text:u},updated:d?a(d,`YYYY年M月D日`):e.updated,language:p};return{...e,...f}}):e));let h=f(`h1.nav-logo`).first().text();return{title:`${h} - ${f(`title`).text()}`,link:d,item:m,allowEmpty:!0,image:new URL(`wp-content/themes/ccg/imgs/nav-logo.png`,u).href,author:h,language:p,id:d}},u={path:`/:category?`,name:`动态`,url:`www.ccg.org.cn`,maintainers:[`nczitzk`],handler:l,example:`/ccg/news`,parameters:{category:{description:"分类，默认为 `news`，即新闻动态，可在对应分类页 URL 中找到",options:[{label:`新闻动态`,value:`news`},{label:`媒体报道`,value:`mtbd`}]}},description:`::: tip
订阅 [新闻动态](http://www.ccg.org.cn/news)，其源网址为 \`http://www.ccg.org.cn/news\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/ccg/news\`](https://rsshub.app/ccg/news)。
:::

| 分类                                   | ID                                  |
| -------------------------------------- | ----------------------------------- |
| [新闻动态](http://www.ccg.org.cn/news) | [news](https://rsshub.app/ccg/news) |
| [媒体报道](http://www.ccg.org.cn/mtbd) | [mtbd](https://rsshub.app/ccg/mtbd) |
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.ccg.org.cn/category`],target:`/:category`},{title:`新闻动态`,source:[`www.ccg.org.cn/news`],target:`/news`},{title:`媒体报道`,source:[`www.ccg.org.cn/mtbd`],target:`/mtbd`}],view:o.Articles};export{l as handler,u as route};