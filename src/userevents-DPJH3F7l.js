import{__dirname as e,init_esm_shims as t}from"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{got_default as r}from"./got-CmdBCkM8.js";import i from"node:path";t();const a=t=>n(i.join(e,`templates/userevents-a86ba626.art`),t),o={path:`/music/user/events/:id`,categories:[`multimedia`],name:`用户动态`,maintainers:[`Master-Hash`],handler:s};async function s(e){let t=e.req.param(`id`),{data:n}=await r(`https://music.163.com/api/event/get/${t}`,{headers:{Referer:`https://music.163.com/`}}),{nickname:i,signature:o,avatarUrl:s}=n.events[0].user;return{title:`${i}的云村动态`,link:`https://music.163.com/#/user/event?id=${t}`,description:`网易云音乐用户动态 - ${o}`,icon:s,image:s,item:n.events.map(e=>{let t=e.info.commentThread.resourceTitle,n=e.user.userId,r=JSON.parse(e.json).msg,o=e.pics.map(({originUrl:e})=>e),s=e.id;return{title:t,description:a({description:r,pics:o}),link:`https://music.163.com/#/event?id=${s}&uid=${n}`,pubDate:new Date(e.eventTime),published:new Date(e.eventTime),author:i,upvotes:e.info.likedCount,comments:e.info.commentCount}})}}export{o as route};