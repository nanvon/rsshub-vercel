import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-D4MiciTC.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{got_default as t}from"./got-07RFwdy7.js";import{rootUrl as n}from"./utils-B4JLkEJH.js";import{load as r}from"cheerio";import i from"p-map";const a={path:`/update`,categories:[`anime`],example:`/agefans/update`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`agemys.org/update`,`agemys.org/`]}],name:`最近更新`,maintainers:[`nczitzk`],handler:o,url:`agemys.org/update`};async function o(){let a=`${n}/update`,o=await t(a),s=r(o.data),c=s(`.video_item`).toArray().map(e=>{e=s(e);let t=e.find(`a`).attr(`href`).replace(`http://`,`https://`);return{title:e.text(),link:t,guid:`${t}#${e.find(`.video_item--info`).text()}`}}),l=await i(c,n=>e.tryGet(n.link,async()=>{let e=await t(n.link),i=r(e.data);return i(`img`).each((e,t)=>{t.attribs[`data-original`]&&(t.attribs.src=t.attribs[`data-original`],delete t.attribs[`data-original`])}),i(`.video_detail_collect`).remove(),n.description=i(`.video_detail_left`).html(),n}),{concurrency:3});return{title:s(`title`).text(),link:a,item:l}}export{a as route};