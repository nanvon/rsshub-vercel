import{n as e,t}from"./esm-shims-DhF_MXa4.mjs";import{t as n}from"./render-ZYpwNl2L.mjs";import r from"node:path";e();const i=`https://pikabu.ru`,a=e=>{e.find(`.story-image__stretch`).remove(),e.find(`.story-image__image`).each((e,t)=>{t.attribs[`data-src`]&&t.attribs[`data-large-image`]&&(t.attribs.src=t.attribs[`data-large-image`],delete t.attribs[`data-src`],delete t.attribs[`data-large-image`])})},o=e=>{let i=e.find(`.player__preview`).attr(`style`).match(/url\((.+)\);/)[1],a=e.attr(`data-type`),o=``;if(a===`video`){let i=e.attr(`data-source`).match(/\/embed\/(.+)$/)[1];o=n(r.join(t,`templates/video-6044ec9b.art`),{videoId:i})}else if(a===`video-file`){let a=e.find(`.player__svg-stretch`).attr(`width`),s=`${e.attr(`data-source`)}.mp4`,c=e.attr(`data-webm`);o=n(r.join(t,`templates/video-6044ec9b.art`),{preview:i,width:a,mp4:s,webm:c})}else throw Error(`Unknown video type: ${a}`);e.replaceWith(o)};export{a as n,o as r,i as t};