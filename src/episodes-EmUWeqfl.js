import"./esm-shims-BGJi2y--.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-rK3Yp7nj.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{timezone as r}from"./timezone-CMz5pnRe.js";import i from"dayjs";import a from"dayjs/plugin/duration.js";import{load as o}from"cheerio";i.extend(a);const s={path:`/explore/:type`,categories:[`multimedia`],example:`/podwise/explore/latest`,parameters:{type:`latest or all episodes.`},radar:[{source:[`podwise.ai/explore/:type`]}],name:`Episodes`,maintainers:[`lyling`],handler:async i=>{let a=`https://podwise.ai/explore/${i.req.param(`type`)}`,s=o(await e(a)),u=s(`#navigator`).next(),d=u.find(`h1`).first().text(),f=u.find(`p`).eq(1).text(),p=u.find(`.group`).toArray().map(e=>{e=s(e);let t=e.find(`a`).first().attr(`href`),i=e.find(`p`).first().text(),a=e.find(`a`).next().children(`span`).text();return{link:`https://podwise.ai${t}`,description:i,pubDate:r(n(a,`DD MMM YYYY`,`en`),8)}});return{title:d,description:f,link:a,item:await Promise.all(p.map(n=>t.tryGet(n.link,async()=>{let t=o(await e(n.link));n.description=t(`summary`).first().html();let r=t(`img[alt="Podcast cover"]`).eq(1).next().find(`span`).eq(2),i=JSON.parse(t(`script:contains("podName")`).first().text().match(/self\.__next_f\.push\((.+)\)/)?.[1]??``),a=JSON.parse(i[1].slice(2))[1][3].children[3].episode;return n.title=a.title,n.author=a.podName,n.itunes_item_image=a.cover,n.itunes_duration=c(r.text()),n.enclosure_url=a.link,n.enclosure_type=l(a.linkType),n})))}}};function c(e){let t=e.match(/(\d+h)?(\d+m)?/),n=t[1]?Number.parseInt(t[1]):0,r=t[2]?Number.parseInt(t[2]):0;return i.duration({hours:n,minutes:r}).asSeconds()}function l(e){switch(e){case`mp3`:return`audio/mpeg`;case`m4a`:return`audio/x-m4a`;case`mp4`:return`video/mp4`;default:return e}}export{s as route};