import{t as e}from"./ofetch-BRplXtiZ.mjs";import{t}from"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as n}from"./cache-Bv3_kFbE.mjs";import{t as r}from"./parse-date-_GmTZfjS.mjs";import*as i from"cheerio";const a=e=>e.map(e=>({title:e.title,author:e.author,description:e.brief.trim().replaceAll(`
`,`<br>`),link:`https://ak.hypergryph.com/news/${e.cid}`,pubDate:r(e.displayTime,`X`)})),o={path:`/arknights/news/:group?`,categories:[`game`],example:`/hypergryph/arknights/news`,parameters:{group:"分组，默认为 `ALL`"},radar:[{source:[`ak-conf.hypergryph.com/news`]}],name:`明日方舟 - 游戏公告与新闻`,maintainers:[`Astrian`],handler:s,url:`ak-conf.hypergryph.com/news`,description:`
| 全部 | 最新   | 公告         | 活动     | 新闻 |
| ---- | ------ | ------------ | -------- | ---- |
| ALL  | LATEST | ANNOUNCEMENT | ACTIVITY | NEWS |`};async function s(r){let{group:o=`ALL`}=r.req.param(),s=await n.tryGet(`hypergryph:arknights:news`,async()=>{let t=await e(`https://ak.hypergryph.com/news`),n=i.load(t),r=JSON.parse(n(`script:contains("initialData")`).first().text().match(/self\.__next_f\.push\((.+)\)/)?.[1]??``);return JSON.parse(r[1].slice(2))[3].initialData},t.cache.routeExpire,!1),c=o===`ALL`?Object.values(s).flatMap(({list:e})=>a(e)):a(s[o].list);return{title:`《明日方舟》游戏公告与新闻`,link:`https://ak.hypergryph.com/news`,item:await Promise.all(c.map(t=>n.tryGet(t.link,async()=>{let n=await e(t.link),r=i.load(n)(`div > div > div > div > div > div > div:nth-child(4)`);return t.description=r.length?r.html():t.description,t}))),language:`zh-cn`}}export{o as route};