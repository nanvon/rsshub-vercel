import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import{t as n}from"./cache-Bv3_kFbE.mjs";import"./helpers-Tm7Pw8Vq.mjs";import{t as r}from"./parse-date-_GmTZfjS.mjs";import{t as i}from"./render-CSqLtqb8.mjs";import{t as a}from"./got-BglkE51W.mjs";import{t as o}from"./rss-parser-Bz51X12w.mjs";import s from"node:path";import{load as c}from"cheerio";e();const l=e=>{let n=e(`figure.mainPhoto`),r=n.find(`img`),a=n.find(`span.copyright`),o=n.find(`span.imageDescription`);return i(s.join(t,`templates/image-230aff8e.art`),{url:r.attr(`src`),alt:r.attr(`alt`)?.trim(),author:a.text()?.trim(),caption:o.text()?.trim()})},u=e=>{let n=e(`[itemprop="articleBody"]`);return e(`*`).contents().filter(function(){return this.nodeType===8}).remove(),n.find(`aside`).remove(),n.find(`.videoPlayerContainer`).remove(),n.find(`.pulsevideo`).remove(),n.find(`.adsContainer`).remove(),n.find(`.placeholder`).remove(),n.find(`.contentPremium`).removeAttr(`style`),n.find(`div.image`).each((n,r)=>{let a=e(r).find(`img`),o=e(r).find(`span.author`),c=e(r).find(`span.caption`),l=i(s.join(t,`templates/image-230aff8e.art`),{url:a.attr(`src`),alt:a.attr(`alt`)?.trim(),caption:c.text()?.trim(),author:o.text()?.trim()});e(r).replaceWith(l)}),n};e();const d={path:`/news`,categories:[`new-media`],example:`/onet/news`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wiadomosci.onet.pl/`]}],name:`News`,maintainers:[`Vegann`],handler:f,url:`wiadomosci.onet.pl/`,description:"This route provides a better reading experience (full text articles) over the official one for `https://wiadomosci.onet.pl`."};async function f(){let e=await o.parseURL(`https://wiadomosci.onet.pl/.feed`),d=await Promise.all(e.items.map(async e=>{let{description:o,author:d,category:f}=await n.tryGet(e.link,async()=>{let{data:n}=await a(e.link,{headers:{referer:`https://www.onet.pl/`}}),r=c(n),o=u(r),d=l(r);return{description:i(s.join(t,`templates/article-fc2b2fbf.art`),{mainImage:d,lead:r(`#lead`).text()?.trim(),content:o.html()?.trim()}),author:r(`.authorNameWrapper span[itemprop="name"]`).text()?.trim(),category:r(`span.relatedTopic`).text()?.trim()}});return{title:e.title,link:e.link,description:o,author:d,category:f,pubDate:r(e.pubDate),guid:e.id}}));return{title:e.title,link:e.link,description:e.title,item:d,language:`pl`,image:`https://ocdn.eu/wiadomosciucs/static/logo2017/onet2017big_dark.png`}}export{d as route};