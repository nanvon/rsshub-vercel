import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CHIwZNTj.js";import"./helpers-gUVC02jt.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BXZNsAGk.js";import{load as n}from"cheerio";import{SourceMapConsumer as r}from"source-map";const i={path:`/essay`,categories:[`blog`],example:`/kunchengblog/essay`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`kunchengblog.com/essay`]}],name:`Essay`,maintainers:[`nczitzk`],handler:a,url:`kunchengblog.com/essay`};async function a(i){let a=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):100,o=`https://www.kunchengblog.com`,s=new URL(`essay`,o).href,{data:c}=await t(s),l=n(c),u=l(`title`).text(),d=new URL(`${l(`script`).first().prop(`src`)}.map`,o).href,{data:f}=await t(d),p=await r.with(f,null,t=>t.sources.filter(e=>/routes\/essays/.test(e)).toReversed().slice(0,a).map(r=>{let i=t.sourceContentFor(r).replaceAll(/\s\n/g,``).replaceAll(/(\w+)={+([^{}]+)}+/g,(e,t,n)=>{let r=n.slice(1,-1).replaceAll(`"`,`'`).trim();return`${t}="${r}"`}),a=n(i);return{title:a(`title`).text(),pubDate:e(a(`p[className="App-essay-article"]`).last().find(`b`).first().text(),`MMM YYYY`),link:new URL(`essay/${r.match(/\/(\w+)\.js/)[1].toLowerCase()}`,s).href,description:a(`p[className="App-essay-article"]`).toArray().map(e=>a(e).html()).join(``),author:u}})),m=l(`meta[name="description"]`).prop(`content`),h=new URL(l(`link[rel="icon"]`).prop(`href`),o).href;return{item:p,title:`${u} - Essay`,link:s,description:m,language:l(`html`).prop(`lang`),image:h,icon:h,logo:h,subtitle:m,author:u,allowEmpty:!0}}export{i as route};