import"./esm-shims-BC3isTv8.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./proxy-CczVputb.js";import"./ofetch-CfXAR0UO.js";import"./helpers-Cqaav28H.js";import"./cache-CpEhLexq.js";import"./render-d6AVTUl2.js";import"./md5-CWsm3r0H.js";import{t as e}from"./got-dCh-Ojgc.js";import"./puppeteer-e0F06Yyi.js";import"./utils-FflZn-l9.js";import{t}from"./cache-DSHFrw-1.js";const n={path:`/user/bangumi/:uid/:type?`,categories:[`social-media`],example:`/bilibili/user/bangumi/208259`,parameters:{uid:`用户 id`,type:`1为番，2为剧，留空为1`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`space.bilibili.com/:uid`],target:`/user/bangumi/:uid`}],name:`用户追番列表`,maintainers:[`wdssmq`],handler:r};async function r(n){let r=n.req.param(`uid`),i=Number(n.req.param(`type`)||1),a=(e=>[``,`bangumi`,`cinema`][e])(i),o=await t.getUsernameFromUID(r),s=(await e({method:`get`,url:`https://api.bilibili.com/x/space/bangumi/follow/list?type=${i}&follow_status=0&pn=1&ps=15&vmid=${r}`,headers:{Referer:`https://space.bilibili.com/${r}/${a}`}})).data;if(s.code!==0)throw Error(`It looks like something went wrong when querying the Bilibili API: code = ${s.code}, message = ${s.message}`);return{title:`${o} 的追番列表`,link:`https://space.bilibili.com/${r}/${a}`,description:`${o} 的追番列表`,item:s.data&&s.data.list&&s.data.list.map(e=>({title:`[${e.new_ep.index_show}]${e.title}`,description:`${e.evaluate}<br><img src="${e.cover}">`,pubDate:new Date(e.new_ep.pub_time??Date.now()).toUTCString(),link:`https://www.bilibili.com/bangumi/play/`+(e.new_ep.id?`ep${e.new_ep.id}`:`ss${e.season_id}`)}))}}export{n as route};