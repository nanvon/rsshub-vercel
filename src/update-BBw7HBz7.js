import{n as e,t}from"./esm-shims-CMsyBHYK.js";import{t as n}from"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import"./ofetch-CRUPiVpr.js";import"./helpers-Cqaav28H.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./got-BlqYKpVp.js";import o from"node:path";import{load as s}from"cheerio";e();const c={path:`/:appId`,categories:[`program-update`],example:`/winstall/Mozilla.Firefox`,parameters:{appId:`Application ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`winstall.app/apps/:appId`]}],name:`Apps Update`,maintainers:[`TonyRL`],handler:l};async function l(e){let c=`https://winstall.app`,l=e.req.param(`appId`),{data:u}=await a(`${c}/_next/data/${await r.tryGet(`winget:buildId`,async()=>{let{data:e}=await a(c),t=s(e);return JSON.parse(t(`#__NEXT_DATA__`).text()).buildId},n.cache.routeExpire,!1)}/apps/${l}.json`),{app:d}=u.pageProps,f=d.versions.map(e=>({title:`${d.name} ${e.version}`,description:i(o.join(t,`templates/desc-22b8f3f4.art`),{installers:e.installers}),author:d.publisher,category:d.tags,guid:`winstall:${l}:${e.version}`}));return{title:`${d.name} - winstall`,description:d.desc,link:`${c}/apps/${l}`,image:`https://api.winstall.app/icons/next/${l}.webp`,language:`en`,item:f}}export{c as route};