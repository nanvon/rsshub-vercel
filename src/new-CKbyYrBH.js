import"./esm-shims-Dqvxr0BZ.js";import"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import{ofetch_default as e}from"./ofetch-TsvCL7Kz.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ViewType as n}from"./types-Bi82qguM.js";import{load as r}from"cheerio";const i=async n=>{let i=Number.parseInt(n.req.query(`limit`)??`10`,10),a=new URL(`news/`,`https://www.trendforce.com`).href,o=new URL(`wp-json/wp/v2/posts`,a).href,s=await e(o,{query:{_embed:`true`,per_page:i}}),c=await e(a),l=r(c),u=l(`html`).attr(`lang`)??`en`,d=s.slice(0,i).map(e=>{let n=e.title?.rendered??e.title,i=r(e.content.rendered);i(`div.article_highlight-area-BG_wrap`).remove();let a=i.html(),o=e.date_gmt,s=e.link,c=e._embedded?.[`wp:term`],l=c?.flat().map(e=>e.name)??[],d=e._embedded?.author.map(e=>({name:e.name,url:e.url,avatar:void 0}))??[],f=e.guid?.rendered??e.guid,p=e._embedded?.[`wp:featuredmedia`]?.[0].source_url??void 0,m=e.modified_gmt??o,h={title:n,description:a,pubDate:o?t(o):void 0,link:s??f,category:l,author:d,guid:f,id:f,content:{html:a,text:a},image:p,banner:p,updated:m?t(m):void 0,language:u};return h});return{title:l(`title`).text(),description:l(`meta[property="og:description"]`).attr(`content`),link:a,item:d,allowEmpty:!0,image:l(`meta[property="og:image"]`).attr(`content`),author:l(`meta[property="og:site_name"]`).attr(`content`),language:u,id:a}},a={path:`/news`,name:`News`,url:`www.trendforce.com`,maintainers:[`nczitzk`],handler:i,example:`/trendforce/news`,parameters:void 0,description:void 0,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.trendforce.com/news/`],target:`/news`}],view:n.Articles};export{i as handler,a as route};