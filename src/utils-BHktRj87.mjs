import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import{t as n}from"./parse-date-_GmTZfjS.mjs";import{t as r}from"./render-CSqLtqb8.mjs";import{t as i}from"./got-BglkE51W.mjs";import a from"node:path";import{load as o}from"cheerio";import s from"dayjs";import c from"dayjs/plugin/localizedFormat.js";import{JSDOM as l}from"jsdom";import"dayjs/locale/zh-cn.js";e(),s.extend(c);function u(e){let t={};try{t=new l(e,{runScripts:`dangerously`}).window.__NUXT__.data[0]}catch{throw Error(`Nuxt 框架信息提取失败，请报告这个问题`)}return t}function d(e){return`<img src="${e}"><br/>`}async function f(e){let t=(await i(e)).data;return{content:o(t)(`.description`).html()}}async function p(e){let t=(await i(e)).data,r=o(t),a=r(`.detail-body-container`).html(),s=r(`.topics-articleHead__date`).text();return a=a.replaceAll(`src="/topics/`,`src="https://www.nintendo.com.hk/topics/`),{content:a,pubDate:n(s,`YYYY.M.D`)}}var m={ProcessItem:(e,t)=>Promise.all(e.map(async e=>{let n=await t.tryGet(e.link,()=>f(e.link));return{...e,...n}})),ProcessNews:(e,t)=>Promise.all(e.map(async e=>{let n=await t.tryGet(e.url,()=>p(`https://www.nintendo.com.hk`+e.url));return{...e,...n}})),ProcessNewsChina:(e,t)=>Promise.all(e.map(async e=>{let r=await t.tryGet(e.link,async()=>u((await i(e.link)).data));return{...e,description:e.description+r.newsData.content,category:r.newsData.category,pubDate:n(r.newsData.releaseTime,`x`)}})),ProcessItemChina:(e,n)=>Promise.all(e.map(async e=>{if(!e.link.startsWith(`https://www.nintendoswitch.com.cn/software/`))return e;let o=(await n.tryGet(e.link,async()=>u((await i(e.link)).data))).data;return{...e,category:[...o.supportLanguages,...o.genre,...o.playMode],description:r(a.join(t,`templates/eshop_cn-23aed242.art`),{item:e,software:o,releaseDatetime:s(o.releaseDatetime).locale(`zh-cn`).format(`lll`)})}})),nuxtReader:u,generateImageLink:d};export{m as t};