import{__dirname as e,init_esm_shims as t}from"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./dist-BrnquCU2.js";import"./helpers-DzX-lcQO.js";import{art as n}from"./render-sowsPyZZ.js";import{parseDate as r}from"./parse-date-Bgabdhlb.js";import"./ofetch-Of9UBhau.js";import{got_default as i}from"./got-Cw3q2eEq.js";import{timezone as a}from"./timezone-BrNu6iXe.js";import{appsUrl as o,userUrl as s}from"./utils-BgGt9pX-.js";import c from"node:path";import{load as l}from"cheerio";t();const u={path:`/user/:lang?/appComment/:uid`,categories:[`anime`],example:`/qoo-app/user/en/appComment/35399143`,parameters:{lang:"Language, see the table above, empty means `中文`",uid:`User ID, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`User Game Comments`,maintainers:[`TonyRL`],handler:d};async function d(t){let{uid:u,lang:d=``}=t.req.param(),f=`${s}${d?`/${d}`:``}/${u}`,{data:p}=await i(f),{data:m}=await i(`${s}/getUserAppCommentList`,{searchParams:{fid:u}}),h=l(p),g=h(`.person .name`).text(),_=m.list.map(t=>({title:`${g} ▶ ${t.app.name}`,link:`${o}/comment-detail/${t.comment.id}`,description:n(c.join(e,`templates/comment-c10c1815.art`),{rating:t.score,text:t.comment.content}),pubDate:a(r(t.comment.created_at,`YYYY-MM-DD`),8),author:g}));return{title:h(`head title`).text(),link:f,image:decodeURIComponent(h(`.person div.slot`).attr(`data-args`)).replace(`avatar=`,``).split(`?`)[0],language:h(`html`).attr(`lang`),item:_}}export{u as route};