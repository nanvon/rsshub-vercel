import{__dirname as e,init_esm_shims as t}from"./esm-shims-2LyWUseo.js";import{config as n}from"./config-CVBRPN4O.js";import{ofetch_default as r}from"./ofetch-BLnIkXRv.js";import{cache_default as i}from"./cache-Dfid4xgQ.js";import{art as a}from"./render-CSnicFA3.js";import o from"node:path";t();const s=`https://skeb.jp`;function c(t){if(!t||typeof t!=`object`||t.private===!0)return null;let n=t.thumbnail_image_urls?.srcset?.split(`,`).pop()?.trim().split(` `)[0]||``,r=t.body||``,i=t.genre===`music`||t.genre===`voice`?t.preview_url:null,c=a(o.join(e,`templates/work-99aa5c91.art`),{imageUrl:n,body:r,audioUrl:i});return{title:t.path||``,link:`${s}${t.path||``}`,description:c}}const l={art:`Illust`,voice:`Voice`,novel:`Novel`,video:`Video`,music:`Music`,correction:`Advice`,comic:`Comic`};function u(t){if(!t||typeof t!=`object`)return null;let n=t.avatar_url||``,r;if(t.creator){let i=t.acceptable?`Yes`:`No`,s=t.nsfw_acceptable?`Yes`:`No`,c=``;Array.isArray(t.skills)&&t.skills.length>0&&(c=t.skills.map(e=>l[e.genre]||e.genre).filter(Boolean).join(`, `)),r=a(o.join(e,`templates/creator-f3fb4f56.art`),{avatarUrl:n,acceptingCommissions:i,nsfwAcceptable:s,skills:c})}return{title:t.name||``,link:`${s}/@${t.screen_name||``}`,description:r}}async function d(e,t){let a=`${s}/api/users/${e.replace(`@`,``)}/followings`,o=await i.tryGet(`skeb:followings_data:${e}`,async()=>await r(a,{headers:{Authorization:`Bearer ${n.skeb.bearerToken}`}}),n.cache.routeExpire,!1);if(!o||typeof o!=`object`)throw Error(`Failed to fetch followings data`);return t===`following_creators`?o[t].map(e=>u(e)).filter(Boolean):o[t].map(e=>c(e)).filter(Boolean)}export{s as baseUrl,d as getFollowingsItems,u as processCreator,c as processWork};