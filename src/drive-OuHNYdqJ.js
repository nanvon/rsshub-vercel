import{__dirname as e,init_esm_shims as t}from"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as n}from"./ofetch-am9EnuPq.js";import{art as r}from"./render-CSnicFA3.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{invalid_parameter_default as a}from"./invalid-parameter-B0jPSaWz.js";import o from"node:path";t();const s={path:`/drive/:selName`,categories:[`program-update`],example:`/lenovo/drive/PF3WRD2G`,parameters:{selName:`产品序列号`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`lenovo.com.cn`],target:`/drive/:selName`}],name:`驱动`,maintainers:[`cscnk52`],handler:c};async function c(t){let s=`https://newsupport.lenovo.com.cn/api/drive/drive_listnew?searchKey=${t.req.param(`selName`)}`,c=await n(s);if(c.statusCode!==200)throw new a(`无效序列号, 请检查你的序列号是否正确.`);let l=c.data.partList.flatMap(e=>e.drivelist).map(t=>({title:`${t.DriverName} ${t.Version}`,link:`https://newsupport.lenovo.com.cn/driveDownloads_detail.html?driveId=${t.DriverEdtionId}`,description:r(o.join(e,`templates/drive-2802e117.art`),{driveName:t.DriverName,driveCode:t.DriverCode,driveVersion:t.Version,downloadFileName:t.FileName,downloadFilePath:t.FilePath}),pubDate:i(t.CreateTime,8)}));return{title:`${c.data.driverSerious[0].NodeCode} 驱动`,item:l,language:`zh-CN`}}export{c as handler,s as route};