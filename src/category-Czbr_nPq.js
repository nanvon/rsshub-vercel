import{__dirname as e,init_esm_shims as t}from"./esm-shims-BFmOnnpb.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-am9EnuPq.js";import"./helpers-gUVC02jt.js";import{cache_default as n}from"./cache-Dfid4xgQ.js";import{art as r}from"./render-CSnicFA3.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-CmdBCkM8.js";import o from"node:path";t();const s=`https://vcb-s.com`,c=`${s}/wp-json/wp/v2/categories`,l=`${s}/wp-json/wp/v2/posts`,u={path:`/category/:cate`,categories:[`anime`],example:`/vcb-s/category/works`,parameters:{cate:`分类`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`vcb-s.com/archives/category/:cate`]}],name:`分类文章`,maintainers:[`cxfksword`],handler:d,url:`vcb-s.com/`,description:`| 作品项目 | 科普系列 | 计划与日志 |
| -------- | -------- | ---------- |
| works    | kb       | planlog    |`};async function d(t){let u=t.req.param(`cate`),d=t.req.query(`limit`)??7,f=`${c}?slug=${u}`,p=await n.tryGet(f,async()=>{let e=await a.get(f);return typeof e.data==`string`&&(e.data=JSON.parse(e.body.trim())),e.data[0]}),m=`${l}?categories=${p.id}&page=1&per_page=${d}&_embed`,h=await a.get(m);typeof h.data==`string`&&(h.data=JSON.parse(h.body.trim()));let g=h.data.map(t=>{let n=r(o.join(e,`templates/post-a0d5f24f.art`),{post:t.content.rendered.replaceAll(/<pre class="js-medie-info-detail.*?>(.*?)<\/pre>/gs,`<pre><code>$1</code></pre>`).replaceAll(/<div.+?dw-box-download.+?>(.*?)<\/div>/gs,`<pre>$1</pre>`),medias:t._embedded[`wp:featuredmedia`]});return{title:t.title.rendered,link:t.link,description:n,pubDate:i(t.date_gmt),author:t._embedded.author[0].name}});return{title:`${p.name} | VCB-Studio`,link:`${s}/archives/category/${p.slug}`,item:g}}export{u as route};