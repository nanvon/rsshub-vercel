import{n as e,t}from"./esm-shims-CMsyBHYK.js";import"./config-DZMnNPig.js";import"./logger-asV68Lay.js";import{t as n}from"./ofetch-CRUPiVpr.js";import{t as r}from"./cache-CpEhLexq.js";import{t as i}from"./render-d6AVTUl2.js";import{t as a}from"./parse-date-CHEO0z5G.js";import{t as o}from"./timezone-BPfwRbwD.js";import{t as s}from"./types-Bn7An2Wc.js";import c from"node:path";import{load as l}from"cheerio";e();const u=async e=>{let{category:s=`new`}=e.req.param(),u=Number.parseInt(e.req.query(`limit`)??`30`,10),d=`https://www.ali213.net`,f=new URL(`news/${s.endsWith(`/`)?s:`${s}/`}`,d).href,p=l(await n(f)),m=p(`html`).prop(`lang`)??`zh-CN`,h=p(`div.n_lone`).slice(0,u).toArray().map(e=>{let n=p(e),r=n.find(`h2.lone_t a`),o=r.prop(`title`)||r.text(),s=r.prop(`href`),l=n.find(`img`),u=l?.prop(`src`),d=l?.prop(`alt`),f=n.find(`div.lone_f_r_t`).text(),h=i(c.join(t,`templates/description-881baa33.art`),{images:l?[{src:u,alt:d}]:void 0,intro:f}),g=n.find(`div.lone_f_r_f span`).last().text().split(/：/).pop();return{title:o,description:h,pubDate:a(n.find(`div.lone_f_r_f span`).first().text()),link:s,author:g,content:{html:h,text:n.find(`div.lone_f_r_t`).text()},image:u,banner:u,language:m}});h=(await Promise.all(h.map(e=>!e.link&&typeof e.link!=`string`?e:r.tryGet(e.link,async()=>{try{let r=l(await n(e.link)),s=r(`h1.newstit`).text(),u=r(`div#Content img`).first().prop(`src`),d=r(`div#Content p span img`),f={};d.length&&d.each((e,n)=>{let a=r(n),o=a.closest(`p`),s=a.prop(`src`),l=s?.split(/\./).pop();l&&s&&(f[l]={url:s},o.replaceWith(i(c.join(t,`templates/description-881baa33.art`),{images:[{src:s}]})))});let p=i(c.join(t,`templates/description-881baa33.art`),{description:r(`div#Content`).html()??``}),h=r(`div.extend_read ul li a`).toArray().map(e=>{let t=r(e);return{url:t.prop(`href`),type:`related`,content_html:t.prop(`title`)||t.text()}}).filter(e=>!0);return{...e,title:s,description:p,pubDate:o(a(r(`div.newstag_l`).text().split(/\s/)[0]),8),content:{html:p,text:r(`div#Content`).html()??``},image:u,banner:u,language:m,media:Object.keys(f).length>0?f:void 0,_extra:{links:h.length>0?h:void 0}}}catch{return e}})))).filter(e=>!0);let g=`游侠网`,_=p(`div.news-list-title`).text(),v=new URL(`news/images/ali213_app_big.png`,d).href;return{title:`${g} - ${_}`,description:_,link:f,item:h,allowEmpty:!0,image:v,author:g,language:m,id:f}},d={path:`/news/:category?`,name:`资讯`,url:`www.ali213.net`,maintainers:[`nczitzk`],handler:u,example:`/ali213/news/new`,parameters:{category:"分类，默认为 `new`，即最新资讯，可在对应分类页 URL 中找到"},description:`::: tip
若订阅 [游戏资讯](https://www.ali213.net/news/game/)，网址为 \`https://www.ali213.net/news/game/\`，请截取 \`https://www.ali213.net/news/\` 到末尾 \`/\` 的部分 \`game\` 作为 \`category\` 参数填入，此时目标路由为 [\`/ali213/news/game\`](https://rsshub.app/ali213/news/game)。
:::

| 分类名称 | 分类 ID |
| -------- | ------- |
| 最新资讯 | new     |
| 评测     | pingce  |
| 游戏     | game    |
| 动漫     | comic   |
| 影视     | movie   |
| 科技     | tech    |
| 电竞     | esports |
| 娱乐     | amuse   |
| 手游     | mobile  |
`,categories:[`game`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.ali213.net/news/:category`],target:e=>{let t=e.category;return`/news/${t?`/${t}`:``}`}},{title:`最新资讯`,source:[`www.ali213.net/news/new`],target:`/news/new`},{title:`评测`,source:[`www.ali213.net/news/pingce`],target:`/news/pingce`},{title:`游戏`,source:[`www.ali213.net/news/game`],target:`/news/game`},{title:`动漫`,source:[`www.ali213.net/news/comic`],target:`/news/comic`},{title:`影视`,source:[`www.ali213.net/news/movie`],target:`/news/movie`},{title:`科技`,source:[`www.ali213.net/news/tech`],target:`/news/tech`},{title:`电竞`,source:[`www.ali213.net/news/esports`],target:`/news/esports`},{title:`娱乐`,source:[`www.ali213.net/news/amuse`],target:`/news/amuse`},{title:`手游`,source:[`www.ali213.net/news/mobile`],target:`/news/mobile`}],view:s.Articles};export{u as handler,d as route};