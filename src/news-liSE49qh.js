import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import"./ofetch-CHIwZNTj.js";import"./helpers-gUVC02jt.js";import{cache_default as e}from"./cache-Dfid4xgQ.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BXZNsAGk.js";import{URL as r}from"node:url";import{load as i}from"cheerio";const a=`http://www.wzu.edu.cn/index/`,o={wdxw:`温大新闻`,mtwd:`媒体温大`,xswd:`学术温大`,tzgg:`通知公告`,zbxx:`招标信息`,xsgg:`学术公告`};async function s(e){let t=``,o=await n.get(e),s=i(o.data,{decodeEntities:!1});return s(`img`).attr(`src`,(e,t)=>new r(t,a).href),s(`.vsbcontent_video`).each(function(){let e=s(this).find(`script`).attr(`vurl`);return t=new r(e,a).href,s(this).html(`<video width="100%" src="`+t+`"></video>`).html()}),s(`div[id^=vsb_content]`).html()}const c={path:`/news/:type?`,name:`Unknown`,maintainers:[`Chandler-Lu`],handler:l};async function l(c){let l=Number.parseInt(c.req.param(`type`))||0,[u,d]=Object.entries(o)[l],f=new r(u+`.htm`,a).href,p=await n.get(f),m=i(p.data)(`#News-sidebar-b-nav`).find(`li`);return{title:d,link:f,description:`温州大学 - `+d,item:m.toArray().map(async n=>{let o=i(n),c=o(`li>a`),l=c.attr(`href`),u=new r(l,a).href;return{title:c.attr(`title`),description:await e.tryGet(u,()=>s(u)),pubDate:t(o(`li>samp`).text(),`YYYY-MM-DD`),link:u}})}}export{c as route};