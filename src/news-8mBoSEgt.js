import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-D4MiciTC.js";import{cache_default as t}from"./cache-Dfid4xgQ.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";const i={path:`/news`,categories:[`anime`],example:`/news`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.acgvinyl.com`],target:`/news`}],name:`News`,maintainers:[`williamgateszhao`],handler:a,url:`www.acgvinyl.com/col.jsp?id=103`,zh:{name:`黑胶新闻`}};async function a(i){let a=`http://www.acgvinyl.com`,o=await e(`${a}/col.jsp?id=103`),s=r(o)(`script:contains("window.__INITIAL_STATE__")`).text().replaceAll(`window.__INITIAL_STATE__=`,``),c=JSON.parse(s),l=await e(`${a}/rajax/news_h.jsp?cmd=getWafNotCk_getList`,{method:`POST`,headers:{"content-type":`application/x-www-form-urlencoded`},body:new URLSearchParams({page:`1`,pageSize:String(i.req.query(`limit`)??20),fromMid:c.modules.module366.id,idList:`[${c.modules.module366.prop3}]`,sortKey:c.modules.module366.blob0.sortKey,sortType:c.modules.module366.blob0.sortType}).toString()}),u=JSON.parse(l);return!u?.success||!Array.isArray(u?.list)?null:{title:`ACG Vinyl - 黑胶 - 黑胶新闻`,link:`http://www.acgvinyl.com/col.jsp?id=103`,item:await Promise.all(u.list.map(i=>t.tryGet(i.url,async()=>{let t=await e(`${a}${i.url}`),o=r(t)(`script:contains("window.__INITIAL_STATE__")`).text().replaceAll(`window.__INITIAL_STATE__=`,``),s=JSON.parse(o),c=r(s.modules.module2.newsInfo.content);return c(`[style]`).removeAttr(`style`),{title:i.title,link:`${a}${i.url}`,pubDate:n(i.date),description:c.html()}})))}}export{i as route};