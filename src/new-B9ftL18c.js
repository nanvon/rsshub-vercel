import"./esm-shims-Dqvxr0BZ.js";import"./config-1ATZGjxb.js";import"./logger-B19BYg4C.js";import"./ofetch-B4O0sZDE.js";import"./helpers-LVq640iW.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-CW2W8CRN.js";import{ViewType as n}from"./types-Bi82qguM.js";import{invalid_parameter_default as r}from"./invalid-parameter-B0jPSaWz.js";import{load as i}from"cheerio";const a={home:{type:`home`,name:`「DLsite 同人」`,url:`/home/new`},comic:{type:`comic`,name:`「DLsite コミック」`,url:`/comic/new`},soft:{type:`soft`,name:`「DLsite PCソフト」`,url:`/soft/new`},maniax:{type:`maniax`,name:`「DLsite 同人 - R18」`,url:`/maniax/new`},books:{type:`books`,name:`「DLsite 成年コミック - R18」`,url:`/books/new`},pro:{type:`pro`,name:`「DLsite 美少女ゲーム」`,url:`/pro/new`},girls:{type:`girls`,name:`「DLsite 乙女」`,url:`/girls/new`},bl:{type:`bl`,name:`「DLsite BL」`,url:`/bl/new`}},o={path:`/new/:type`,categories:[`anime`],view:n.Articles,example:`/dlsite/new/home`,parameters:{type:{description:`类型`,options:Object.values(a).map(e=>({value:e.type,label:e.name}))}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Current Release`,maintainers:[`cssxsh`],handler:s,description:`| Doujin | Comics | PC Games | Doujin (R18) | Adult Comics | H Games | Otome | BL |
| ------ | ------ | -------- | ------------ | ------------ | ------- | ----- | -- |
| home   | comic  | soft     | maniax       | books        | pro     | girls | bl |`};async function s(n){let o=a[n.req.param(`type`)];if(o===void 0)throw new r(`不支持指定类型！`);let s=o.url.slice(1),c=await t(new URL(s,`https://www.dlsite.com`),{method:`GET`}),l=c.data,u=i(l),d=u(`title`).text(),f=u(`meta[name="description"]`).attr(`content`),p=u(`.n_worklist_item`),m=u(`.work_update`).text().trim().replaceAll(/（.*）/g,``),h=e(m,`YYYY年M月D日`),g=p.toArray().map(e=>{let t=u(`.work_name`,e).text(),n=u(`.work_name > a`,e).attr(`href`);u(`a`,e).each((e,t)=>{u(t).attr(`target`,`_blank`)});let r=u(e).html(),i=u(`.search_tag`,e),a=u(`a`,i).toArray().map(e=>u(e).text()),o=u(`.maker_name`,e).text(),s={title:t,link:n,description:r,category:a,author:o,pubDate:h};return s});return{title:d,link:s,description:f,language:`ja-jp`,item:g}}export{o as route};