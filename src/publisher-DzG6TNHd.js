import"./esm-shims-B6VgfGYP.js";import"./config-CVBRPN4O.js";import"./logger-BvonkID1.js";import{ofetch_default as e}from"./ofetch-CHIwZNTj.js";import"./helpers-gUVC02jt.js";import"./cache-Dfid4xgQ.js";import"./parse-date-DHsdom8D.js";import"./got-BXZNsAGk.js";import{baseUrl as t,parseItems as n,parseList as r}from"./utils-Dtkx_pq9.js";const i={path:`/today/:edition/publisher/:id`,categories:[`new-media`],example:`/line/today/th/publisher/101048`,parameters:{edition:`Edition, see table above`,id:`Channel ID, can be found in URL`},radar:[{source:[`today.line.me/:edition/v2/publisher/:id`]}],name:`TODAY - Channel`,maintainers:[`TonyRL`],handler:a};async function a(i){let{edition:a,id:o}=i.req.param(),s=await e(`${t}/webapi/portal/page/setting`,{query:{entityId:o,country:a,pageType:`CP`}}),c;a===`th`&&(c=await e(`${t}/webapi/portal/embedded/page/cplatest`,{query:{entityId:o,pageType:`CP`,country:a}}));let l=(a===`th`?c.modules:s.modules).find(e=>e.source===`CP_LATEST`),u=l.listings[0],d=await e(`${t}/webapi/trending/cp/latest/listings/${l.id}`,{query:{offset:u.offset,length:u.length,country:a,targetContent:u.params?.targetContent,cps:u.params?.cps,publishedWithin:u.params?.publishedWithin}}),f=r(d.items),p=await n(f);return{title:`${s.data.name} - Line Today`,description:s.data.introduction,image:s.data.icon?`https://obs.line-scdn.net/${s.data.icon.hash}`:void 0,link:`${t}/${a}/v2/publisher/${o}`,item:p}}export{i as route};