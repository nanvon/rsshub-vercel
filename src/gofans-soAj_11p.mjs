import{n as e,t}from"./esm-shims-BKVRry6h.mjs";import"./ofetch-BRplXtiZ.mjs";import"./config-D7dgKYF5.mjs";import"./logger-CkUWGGaS.mjs";import"./helpers-Tm7Pw8Vq.mjs";import{t as n}from"./parse-date-_GmTZfjS.mjs";import{t as r}from"./render-CSqLtqb8.mjs";import{t as i}from"./got-BglkE51W.mjs";import a from"node:path";e();const o={path:`/:kind?`,categories:[`program-update`],example:`/gofans`,parameters:{kind:"Platform, either `macos` or `ios`, empty means both (default)"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`最新限免 / 促销应用`,maintainers:[`HenryQW`],handler:s};async function s(e){let{kind:o=``}=e.req.param(),s=`https://gofans.cn`,{data:c}=await i(`https://api.gofans.cn/v1/web/app_records`,{headers:{origin:s},searchParams:{limit:20,kind:o&&(o===`macos`?1:2),page:1}});return{title:`最新限免 / 促销应用`,link:s,description:`GoFans：最新限免 / 促销应用`,item:c.data.map(e=>({title:`「${e.price===`0.00`?`免费`:`降价`}」-「${e.kind===1?`macOS`:`iOS`}」${e.name}`,description:r(a.join(t,`templates/description-d95c3846.art`),{icon:e.icon,originalPrice:e.original_price,price:e.price,kind:e.kind,description:e.description.replaceAll(`
`,`<br>`)}),pubDate:n(e.updated_at,`X`),link:new URL(`/app/${e.uuid}`,s).href,category:e.primary_genre_name}))}}export{o as route};