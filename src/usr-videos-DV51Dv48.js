import{__dirname as e,init_esm_shims as t}from"./esm-shims-Dqvxr0BZ.js";import"./config-BL2l-VlN.js";import"./logger-DWogN5HJ.js";import"./ofetch-e4r9n7lx.js";import"./helpers-gUVC02jt.js";import{art as n}from"./render-CSnicFA3.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-DF7DsGgk.js";import{ViewType as a}from"./types-Bi82qguM.js";import o from"node:path";t();const s={path:`/user/:username/:cat?`,categories:[`social-media`],view:a.Videos,example:`/vimeo/user/filmsupply/picks`,parameters:{username:"In this example [https://vimeo.com/filmsupply](https://vimeo.com/filmsupply)  is `filmsupply`",cat:"deafult for all latest videos, others categories in this example such as `Docmentary`, `Narrative`, `Drama`. Set `picks` for promote orders, just orderd like web page. When `picks` added, published date won't show up"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`User Profile`,maintainers:[`MisteryMonster`],handler:c,description:"::: tip Special category name attention\n  Some of the categories contain slash like `3D/CG` , must change the slash `/` to the vertical bar`|`.\n:::"};async function c(t){let a=(await i({method:`get`,url:`https://vimeo.com/_rv/viewer`})).data.jwt,{username:s,cat:c}=t.req.param(),l=await i({method:`get`,url:`https://api.vimeo.com/users/${s}?fields=name,gender,bio,uri,link,categories&fetch_user_profile=1`,headers:{Authorization:`jwt ${a}`}}),u=l.data,d=l.data.categories,f;if(c&&d.length>0)for(let e of d)decodeURIComponent(c).replaceAll(`|`,`/`)===e.name&&(f=e.word);let p=`&filter=category&filter_category=${f}`;if(c||(p=``),!f&&c&&c!==`picks`)return``;let m=c&&c===`picks`,h=`${u.uri}/videos?fields=name,uri,description,created_time&include_videos=1&page=1&per_page=10${p}`,g=`/users/${s}/profile_sections?fields=videos.data.clip.name,videos.data.clip.uri,videos.data.clip.description,videos.data.clip.created_time&include_videos=1&badge=1&page=1&per_page=10`,_=await i({method:`get`,url:`https://api.vimeo.com${m?g:h}`,headers:{Authorization:`jwt ${a}`}}),v=m?_.data.data[0].videos.data:_.data.data;return{title:`${u.name} ${f?c.replace(`|`,`/`):``} ${m?`picks`:``} | Vimeo `,link:u.link,description:u.bio,item:v.map(t=>{let i=m?t.clip.description:t.description;return{title:m?t.clip.name:t.name,description:n(o.join(e,`templates/description-f7979603.art`),{videoUrl:m?t.clip.uri.replace(`/videos`,``):t.uri.replace(`/videos`,``),vdescription:i?i.replaceAll(`
`,`<br>`):``}),pubDate:r(m||c?``:t.created_time),link:`https://vimeo.com${m?t.clip.uri.replace(`videos/`,``):t.uri.replace(`videos/`,``)}`,author:u.name}})}}export{s as route};